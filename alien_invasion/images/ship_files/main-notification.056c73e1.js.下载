/*! For license information please see main-notification.056c73e1.js.LICENSE.txt */
(window.nojMonomainwebpackJsonpproduction=window.nojMonomainwebpackJsonpproduction||[]).push([[63],{"+ZRu":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("ERkP"),i=n("by+X");function a(e,t){var n=(void 0===t?{}:t).percent,a=void 0===n?80:n,o=Object(r.useRef)(null),s=Object(i.a)({percent:a});return Object(r.useEffect)((function(){var t=o.current;t&&(t.clientHeight>document.body.clientHeight||null===e||void 0===e||e())}),[e]),Object(r.useEffect)((function(){var t=s.subscribe(null!==e&&void 0!==e?e:void 0);return function(){return t.unsubscribe()}}),[s,e]),Object(r.useEffect)((function(){var t=setInterval((function(){var t=document.body,n=t.clientHeight;t.scrollHeight-t.scrollTop===n&&(null===e||void 0===e||e())}),500);return function(){return clearInterval(t)}}),[e]),o}},"+dJ8":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n("EdJC"),i=n("gd5h"),a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetIMUserToken"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getCurrentUserIM"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"accId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"token"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"unread"},arguments:[],directives:[]}]}}]}}],loc:{source:{body:"query GetIMUserToken {\n\tgetCurrentUserIM {\n    accId\n    token\n    unread\n  }\n}"}},operationName:"GetIMUserToken",defName:"getCurrentUserIM"},o="Query_IMAccount";function s(){return Object(r.a)(o,(function(){return i.d.query({query:a,fetchPolicy:"no-cache",context:{uri:i.g}}).then((function(e){return e.data.getCurrentUserIM}))}),{refetchOnWindowFocus:!1})}},"+kfw":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n("D57K"),i=n("3lUt");function a(e){s(e);var t=function(e){return Object(r.__read)(o(e),1)[0]}(e),n=t.provinceCode,a=t.cityCode,c=t.districtCode;return{province:i.list[n],city:a?i.list[a]:"",district:c?i.list[c]:""}}function o(e){s(e);var t=Object.keys(i.list),n=/^\d{2}0000$/,r=t.filter((function(e){return n.test(e)})),a=e.substr(0,2),o=a+"0000";n=new RegExp("^"+a+"\\d{4}$");var c=t.filter((function(e){return n.test(e)&&e!==o})),u=new RegExp("^"+a+"\\d{2}00$"),l=c.filter((function(e){return u.test(e)})),m=e.substr(0,4)+"00",d=(m=l.includes(m)?m:l[0]||o).substr(0,4);n=m!==o?new RegExp("^"+d+"\\d{2}$"):/.*/;var p=c.filter((function(e){return n.test(e)&&e!==m})),f=p.includes(e)?e:p[0];return[{provinceCode:o,cityCode:m,districtCode:f},{provinces:r,cities:l.length>0?l:[o],districts:p}]}function s(e){if(!/^\d{6}$/.test(e))throw new Error("\u975e\u6cd5\u7684\u4f4d\u7f6e\u6570\u636e\uff1a"+e);if(!i.list[e])throw new Error("\u627e\u4e0d\u5230\u6307\u5b9a\u7684\u4f4d\u7f6e\uff1a"+e)}},"0zw4":function(e,t,n){"use strict";n.d(t,"j",(function(){return i.d})),n.d(t,"x",(function(){return i.g})),n.d(t,"Q",(function(){return i.p})),n.d(t,"l",(function(){return i.e})),n.d(t,"B",(function(){return i.k})),n.d(t,"A",(function(){return i.j})),n.d(t,"z",(function(){return i.i})),n.d(t,"H",(function(){return i.m})),n.d(t,"P",(function(){return i.o})),n.d(t,"r",(function(){return i.f})),n.d(t,"J",(function(){return i.n})),n.d(t,"h",(function(){return i.b})),n.d(t,"y",(function(){return i.h})),n.d(t,"F",(function(){return i.l})),n.d(t,"i",(function(){return i.c})),n.d(t,"b",(function(){return i.a})),n.d(t,"w",(function(){return a.b})),n.d(t,"M",(function(){return a.c})),n.d(t,"o",(function(){return a.a})),n.d(t,"I",(function(){return o.d})),n.d(t,"p",(function(){return o.a})),n.d(t,"s",(function(){return o.b})),n.d(t,"G",(function(){return o.c})),n.d(t,"S",(function(){return o.e})),n.d(t,"u",(function(){return s.b})),n.d(t,"g",(function(){return s.a})),n.d(t,"D",(function(){return s.c})),n.d(t,"a",(function(){return c.a})),n.d(t,"m",(function(){return u.a})),n.d(t,"n",(function(){return u.b})),n.d(t,"C",(function(){return l.a})),n.d(t,"v",(function(){return m.b})),n.d(t,"e",(function(){return m.a})),n.d(t,"f",(function(){return d})),n.d(t,"t",(function(){return p})),n.d(t,"k",(function(){return f})),n.d(t,"N",(function(){return g.b})),n.d(t,"d",(function(){return g.a})),n.d(t,"R",(function(){return g.c})),n.d(t,"T",(function(){return h.a})),n.d(t,"q",(function(){return y})),n.d(t,"c",(function(){return b})),n.d(t,"O",(function(){return r})),n.d(t,"V",(function(){return v.b})),n.d(t,"Y",(function(){return v.d})),n.d(t,"X",(function(){return v.c})),n.d(t,"U",(function(){return v.a})),n.d(t,"E",(function(){return S.a})),n.d(t,"L",(function(){return S.b})),n.d(t,"K",(function(){return T.a})),n.d(t,"W",(function(){return T.b}));var r,i=n("AnWY"),a=n("2W7R"),o=n("JFCy"),s=n("uOE+"),c=n("zpwM"),u=n("x/2G"),l=n("fB5F"),m=n("jytb"),d="Easy",p="Medium",f="Hard",g=n("DZKv"),h=n("eoiN"),y="light",b="dark";!function(e){e.Light="light",e.Dark="dark"}(r||(r={}));var v=n("5vbx"),S=n("23zs"),T=n("3HRP")},"1F0A":function(e,t){!function(e){var t=[];function n(n){var r=this,i="$BroadcastChannel$"+(n=String(n))+"$";t[i]=t[i]||[],t[i].push(this),this._name=n,this._id=i,this._closed=!1,this._mc=new MessageChannel,this._mc.port1.start(),this._mc.port2.start(),e.addEventListener("storage",(function(t){if(t.storageArea===e.localStorage&&null!=t.newValue&&""!==t.newValue&&t.key.substring(0,i.length)===i){var n=JSON.parse(t.newValue);r._mc.port2.postMessage(n)}}))}n.prototype={get name(){return this._name},postMessage:function(n){var r=this;if(this._closed){var i=new Error;throw i.name="InvalidStateError",i}var a=JSON.stringify(n),o=this._id+String(Date.now())+"$"+String(Math.random());e.localStorage.setItem(o,a),setTimeout((function(){e.localStorage.removeItem(o)}),500),t[this._id].forEach((function(e){e!==r&&e._mc.port2.postMessage(JSON.parse(a))}))},close:function(){if(!this._closed){this._closed=!0,this._mc.port1.close(),this._mc.port2.close();var e=t[this._id].indexOf(this);t[this._id].splice(e,1)}},get onmessage(){return this._mc.port1.onmessage},set onmessage(e){this._mc.port1.onmessage=e},addEventListener:function(){return this._mc.port1.addEventListener.apply(this._mc.port1,arguments)},removeEventListener:function(){return this._mc.port1.removeEventListener.apply(this._mc.port1,arguments)},dispatchEvent:function(){return this._mc.port1.dispatchEvent.apply(this._mc.port1,arguments)}},e.BroadcastChannel=e.BroadcastChannel||n}(self)},"23zs":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r,i,a=n("34li");!function(e){e.Accept="ac",e.Attempt="notac"}(i||(i={}));var o=((r={})[a.Gc.A_10]="accepted",r[a.Gc.A_11]="wrong-answer",r[a.Gc.A_12]="memory-limit-exceeded",r[a.Gc.A_13]="output-limit-exceeded",r[a.Gc.A_14]="time-limit-exceeded",r[a.Gc.A_15]="runtime-error",r[a.Gc.A_16]="internal-error",r[a.Gc.A_20]="compile-error",r[a.Gc.A_30]="timeout",r)},"2B9F":function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n("D57K"),i=n("jg1C"),a=n("BQ33"),o=n.n(a),s=n("vm2h"),c=n.n(s),u=n("ERkP"),l=n.n(u),m=n("1QlS"),d=n("9mAl"),p=n("2lH5"),f=n("np1P"),g=n("fu9n"),h=n("fgAA"),y=n("zELB"),b=n("GG6d"),v=l.a.forwardRef((function(e,t){return Object(i.jsx)(b.a,Object(r.__assign)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},e,{children:Object(i.jsx)("path",{fillRule:"evenodd",d:"M10.065 4.766c.738-1.688 3.132-1.688 3.87 0l2.369 5.414 3.17-1.729c1.596-.87 3.474.55 3.07 2.323l-1.934 8.514a2.112 2.112 0 01-2.06 1.644H5.45a2.112 2.112 0 01-2.06-1.644l-1.935-8.514C1.052 9 2.93 7.58 4.527 8.45l3.169 1.73 2.369-5.415zm9.01 11.746l1.164-5.126a.5.5 0 00-.727-.55l-2.358 1.287 1.92 4.39zm-12.229-4.39l-1.92 4.39-1.165-5.126a.5.5 0 01.727-.55l2.358 1.287zm5.612-5.463a.5.5 0 00-.916 0l-5.32 12.16h11.556l-5.32-12.16z",clipRule:"evenodd"},void 0)}),void 0)})),S=n("lDZ0"),T=n("qUDi"),M=n("cVJn"),C=l.a.forwardRef((function(e,t){return Object(i.jsx)(b.a,Object(r.__assign)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},e,{children:Object(i.jsx)("path",{fillRule:"evenodd",d:"M8 14h4a1 1 0 01.117 1.993L12 16H8a3 3 0 00-2.995 2.824L5 19v2a1 1 0 01-1.993.117L3 21v-2a5 5 0 014.783-4.995L8 14zm4-12a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm7.667 13.444H21a1.111 1.111 0 010 2.223h-1.333V21a1.111 1.111 0 01-2.223 0v-1.333h-1.333a1.111 1.111 0 010-2.223h1.333v-1.333a1.111 1.111 0 012.223 0v1.333z",clipRule:"evenodd"},void 0)}),void 0)})),k=n("KZa7"),A=n("pOZ+"),I=n("GISP"),P=n("tF2B"),x=n("34li"),O=function(e){var t=e.verb,n=e.objectEntityType;if(n===x.Gb.Contest)return Object(i.jsx)(y.a,{size:24,color:h.b.BrandOrange()},void 0);if(n===x.Gb.Premium)return Object(i.jsx)(v,{size:24,color:h.b.BrandOrange()},void 0);switch(t){case x.Ib.Mention:case x.Ib.Reply:case x.Ib.Comment:return Object(i.jsx)(S.a,{size:24,color:h.b.BlueStandard()},void 0);case x.Ib.Announce:case x.Ib.Notify:case x.Ib.Promote:return Object(i.jsx)(T.a,{size:24,color:h.b.Purple()},void 0);case x.Ib.Upvote:return Object(i.jsx)(M.a,{size:24,color:h.b.GreenStandard()},void 0);case x.Ib.Follow:return Object(i.jsx)(C,{size:24,color:h.b.Pink()},void 0);case x.Ib.Contribute:return n===x.Gb.Problem?Object(i.jsx)(k.a,{size:24,color:h.b.BlueStandard()},void 0):n===x.Gb.QaQuestion?Object(i.jsx)(A.a,{size:24,color:h.b.BlueStandard()},void 0):Object(i.jsx)(I.a,{size:24,color:h.b.BlueStandard()},void 0);case x.Ib.Reward:return Object(i.jsx)(P.a,{size:24,color:h.b.RedStandard()},void 0);default:return Object(i.jsx)(T.a,{size:24,color:h.b.Purple()},void 0)}},_=n("uXcj");o.a.extend(c.a);var w=Object(u.memo)((function(e){var t,n,a,s,c,l,h,y,b,v,S,T,M,C,k,A,I=e.activity,P=e.markAsRead,x=e.filter,w=e.subscriptionInfo,E=e.unsubscribe,j=I.object,R=I.subject,N=I.verb,L=I.aggregationInfo,D=I.content,B=I.time,F=I.isRead,U=I.link,G=I.id,H=I.target,W=Object(r.__read)(Object(m.a)(!1),3),z=W[0],q=W[1],V=W[2],K=Object(u.useRef)(null);Object(u.useEffect)((function(){if(!F&&P){var e=!1,t=0,n=0,i=0,a=new IntersectionObserver((function(a){var s=Object(r.__read)(a,1)[0];if(!e){if(s.intersectionRatio>.5)t=Date.now(),i=window.setTimeout(o,1e3-n);else if(i&&window.clearTimeout(i),t){var c=Date.now();n=n+c-t}n>=1e3&&o()}}),{threshold:.5});return K.current&&a.observe(K.current),function(){a.disconnect(),window.clearTimeout(i)}}function o(){e=!0,a.disconnect(),null===P||void 0===P||P({inboxType:x,activity:{id:G,verb:N,targetType:H.entityType}})}}),[G,P,F,N,H,x]);var J=D.replace("{{object}}",(null===(t=null===j||void 0===j?void 0:j.meta)||void 0===t?void 0:t.link)?' <a target="_blank" href="'+(null===(n=null===j||void 0===j?void 0:j.meta)||void 0===n?void 0:n.link)+'">'+(null!==(s=null===(a=null===j||void 0===j?void 0:j.meta)||void 0===a?void 0:a.name)&&void 0!==s?s:"")+"</a> ":(null===(c=null===j||void 0===j?void 0:j.meta)||void 0===c?void 0:c.name)||"").replace("{{count}}"," "+((null===L||void 0===L?void 0:L.count)||1)+" ").replace("\u70b9\u6b64\u7533\u8bc9",'<span style="color:rgb(0,122,255)">\u70b9\u6b64\u7533\u8bc9</span>');J=(null===L||void 0===L?void 0:L.count)&&(null===L||void 0===L?void 0:L.count)>1?J.replace("{{subject}}",(null===(l=null===R||void 0===R?void 0:R.meta)||void 0===l?void 0:l.link)?'<a target="_blank" href="'+(null===(h=null===R||void 0===R?void 0:R.meta)||void 0===h?void 0:h.link)+'">'+(null!==(b=null===(y=null===R||void 0===R?void 0:R.meta)||void 0===y?void 0:y.name)&&void 0!==b?b:"")+"</a> \u7b49 "+L.count+" \u4eba":(null===(v=null===R||void 0===R?void 0:R.meta)||void 0===v?void 0:v.name)||""):J.replace("{{subject}}",(null===(S=null===R||void 0===R?void 0:R.meta)||void 0===S?void 0:S.link)?' <a target="_blank" href="'+(null===(T=null===R||void 0===R?void 0:R.meta)||void 0===T?void 0:T.link)+'">'+(null!==(C=null===(M=null===R||void 0===R?void 0:R.meta)||void 0===M?void 0:M.name)&&void 0!==C?C:"")+"</a> ":(null===(k=null===R||void 0===R?void 0:R.meta)||void 0===k?void 0:k.name)||"");var Q=Object(u.useCallback)((function(e){e.target instanceof HTMLAnchorElement||!U?e.target instanceof HTMLAnchorElement&&e.target.href.includes("/u/")&&g.a.profileImNameClick():open(U,"_blank")}),[U]),Y=Object(u.useMemo)((function(){return[f.d.Comment,f.d.Contribute].includes(N)&&(null===j||void 0===j?void 0:j.entityType)&&[f.b.CircleArticle,f.b.Problem,f.b.QaQuestion,f.b.Solution].includes(null===j||void 0===j?void 0:j.entityType)&&w&&w[j.entityId+j.entityType]}),[j,w,N]),X=Object(u.useCallback)((function(){j&&E&&(E({entityId:j.entityId,entityType:j.entityType}),V())}),[E,j,V]),Z=Object(u.useCallback)((function(e){e.stopPropagation(),q()}),[q]),$=!!P;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(_.f,Object(r.__assign)({ref:K,hasLink:!!U,canCloseNotify:Y,onClick:Q},{children:[Object(i.jsx)(_.a,{children:Object(i.jsx)(O,{verb:N,objectEntityType:null===j||void 0===j?void 0:j.entityType},void 0)},void 0),Object(i.jsxs)(_.e,Object(r.__assign)({className:"notification-info"},{children:[Object(i.jsx)(_.d,{children:Object(i.jsx)("div",{dangerouslySetInnerHTML:{__html:J}},void 0)},void 0),Object(i.jsx)(_.c,Object(r.__assign)({className:"notification-date",isRead:!$||F},{children:o()(B).fromNow()}),void 0),Object(i.jsx)(_.g,Object(r.__assign)({className:"notification-off",onClick:Z},{children:Object(i.jsx)(d.a,{size:20},void 0)}),void 0)]}),void 0)]}),void 0),Object(i.jsx)(p.a,Object(r.__assign)({title:"\u901a\u77e5\u63d0\u793a",isActive:z,contentPadding:"0px",onConfirm:X,onClose:V},{children:Object(i.jsxs)(_.b,{children:["\u786e\u8ba4\u4e0d\u518d\u63a5\u6536 ",(null===(A=null===j||void 0===j?void 0:j.meta)||void 0===A?void 0:A.name)||""," \u7684\u6700\u65b0\u52a8\u6001\uff1f"]},void 0)}),void 0)]},void 0)}))},"2W7R":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var r="NAMESPACE_TAGS",i="TAGS_BEFORE_MODIFIED",a="LEETBOOK_COVER"},"3HRP":function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r,i=n("34li"),a=((r={})[i.Ec.A_0]="C++",r[i.Ec.A_1]="Java",r[i.Ec.A_2]="Python",r[i.Ec.A_3]="MySQL",r[i.Ec.A_4]="C",r[i.Ec.A_5]="C#",r[i.Ec.A_6]="JavaScript",r[i.Ec.A_7]="Ruby",r[i.Ec.A_8]="Bash",r[i.Ec.A_9]="Swift",r[i.Ec.A_10]="Go",r[i.Ec.A_11]="Python3",r[i.Ec.A_12]="Scala",r[i.Ec.A_13]="Kotlin",r[i.Ec.A_14]="MS SQL Server",r[i.Ec.A_15]="Oracle",r[i.Ec.A_16]="HTML",r[i.Ec.A_17]="Python ML",r[i.Ec.A_18]="Rust",r[i.Ec.A_19]="PHP",r[i.Ec.A_20]="TypeScript",r[i.Ec.A_21]="Racket",r[i.Ec.A_22]="Erlang",r[i.Ec.A_23]="Elixir",r[i.Ec.A_24]="Dart",r[i.Ec.A_25]="Pythondata",r[i.Ec.A_26]="React",r),o={php:"PHP",rust:"Rust",c:"C",csharp:"C#",cpp:"C++",go:"Go",golang:"Go",java:"Java",javascript:"JavaScript",kotlin:"Kotlin",python:"Python",python3:"Python3",ruby:"Ruby",scala:"Scala",swift:"Swift",typescript:"TypeScript",racket:"Racket",erlang:"Erlang",elixir:"Elixir",dart:"Dart"}},"4pJN":function(e,t,n){"use strict";n.d(t,"e",(function(){return r.a})),n.d(t,"l",(function(){return i.a})),n.d(t,"d",(function(){return a.a})),n.d(t,"h",(function(){return o.a})),n.d(t,"f",(function(){return s.a})),n.d(t,"a",(function(){return c.a})),n.d(t,"c",(function(){return c.c})),n.d(t,"b",(function(){return c.b})),n.d(t,"k",(function(){return u.a})),n.d(t,"j",(function(){return v})),n.d(t,"m",(function(){return S})),n.d(t,"g",(function(){return T.a})),n.d(t,"i",(function(){return T.b}));var r=n("TLco"),i=n("RUPt"),a=n("l8fx"),o=n("0zhb"),s=n("wUZp"),c=n("i7Wj"),u=n("Ch6N"),l=n("D57K"),m=n("TqoN"),d=n("EDoe"),p=n("d5gM"),f=n("JpoA"),g=n("VMSQ"),h=n("Jg5f"),y=n("IMYO"),b=n("Fk11"),v=function(e){var t,n=e.formData,r=e.preventGraphqlErrorDisplay,i=e.fallbackErrorMessageForUnknownError;return Object(g.a)({url:"/graphql/",method:"post",withCredentials:!0,headers:{"accept-language":null!==(t=p.a.language)&&void 0!==t?t:"zh"},body:n}).pipe(Object(h.a)((function(e){var t=e.response,n=t.data,r=t.errors;if(r&&r.length>0){var i=r.find((function(e){return e.message.includes("user_not_authenticated")}));throw i&&u.a.next(i),r}if(!n)throw new m.a("Empty response content");var a=Object.values(n).find((function(e){return e&&!!e.error}));if(a)throw new m.a(a.error);return n})),Object(y.a)((function(e){return r||Object(b.a)(e,i),Object(f.a)(e)})))},S=function(e){var t=e.mutation,n=e.variables,r=e.file,i=Object(l.__rest)(e,["mutation","variables","file"]),a=new FormData;return a.append("query",Object(d.a)(t)),a.append("variables",JSON.stringify(n)),a.append((null===n||void 0===n?void 0:n.file)||"file",r),v(Object(l.__assign)({formData:a},i))},T=n("pzR5")},"5k9J":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var r,i=n("D57K"),a=n("bgAr"),o=n.n(a);!function(e){e.Html="html",e.Text="text"}(r||(r={}));var s=function(e){var t=e.html,n=e.config,a=e.type,s=o.a.sanitize(t||"",Object(i.__assign)(Object(i.__assign)({},n),{RETURN_DOM_FRAGMENT:!1,RETURN_DOM:!0}));return a===r.Html?s.innerHTML:s.innerText}},"5vbx":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n("D57K"),i={Easy:{value:"EASY",description:"Easy"},Medium:{value:"MEDIUM",description:"Medium"},Hard:{value:"HARD",description:"Hard"}},a={Todo:{value:"TODO",description:"Todo"},Solved:{value:"SOLVED",description:"Solved"},Attempted:{value:"ATTEMPTED",description:"Attempted"}},o=Object(r.__assign)({All:{value:"ALL",description:"All"}},a),s=Object(r.__assign)({All:{value:"ALL",description:"All"}},i)},"6SOw":function(e,t,n){"use strict";var r=function(){function e(e){void 0===e&&(e=1e3),this.clear(),this.max=e}return e.prototype.head=function(){if(this.first!==this.last)return this.data[this.first%this.max]},e.prototype.enqueue=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0,r=e.length;n<r;n++){if(this.isFull())throw new Error("[Enqueue Failure]: Queue is full.("+this.max+")");this.data[this.last++%this.max]=e[n]}},e.prototype.dequeue=function(){if(!this.isEmpty())return this.data[this.first++%this.max]},e.prototype.isFull=function(){return this.last-this.first===this.max},e.prototype.isEmpty=function(){return void 0===this.head()},e.prototype.clear=function(){this.data=[],this.first=0,this.last=0},e}();t.a=r},"6fKc":function(e,t,n){e.exports=n.p+"0.1615fd04.worker.js"},"7+T9":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("jg1C"),a=n("ERkP"),o=n.n(a);function s(e){return function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Object(r.__extends)(n,t),n.prototype.shouldComponentUpdate=function(e){return e.location!==this.props.location},n.prototype.render=function(){return Object(i.jsx)(e,Object(r.__assign)({},this.props),void 0)},n}(o.a.Component)}},"8CUH":function(e,t,n){"use strict";var r=n("7NY+"),i=n.n(r),a=function(){function e(){this.dmp=new i.a,this.dmp.Diff_EditCost=4}return e.prototype.compare=function(e,t){if(!e||!t)return{actualHTML:e,expectHTML:t};var n=this.dmp,r="",i="";function a(e,t){var r=n.diff_main(e,t);n.diff_cleanupEfficiency(r);var i=r.filter((function(e){return e[0]<=0})),a=r.filter((function(e){return e[0]>=0}));return{actual:n.diff_prettyHtml(i),expect:n.diff_prettyHtml(a)}}if(e.forEach((function(e,n){var o=a(e,t[n]||"");r+=o.actual+"<br>",i+=o.expect+"<br>"})),t.length>e.length){var o=a("",t.slice(e.length).join("\n"));r+=o.actual+"<br>",i+=o.expect+"<br>"}return{actualHTML:r.replace(/&para;/gi,""),expectHTML:i.replace(/&para;/gi,"")}},e}();t.a=a},"8d7B":function(e,t,n){"use strict";n.r(t);var r=n("ttV/");n.d(t,"useExtraTextWhenCopy",(function(){return r.a}));var i=n("ycgn");n.d(t,"abortContextBuilder",(function(){return i.c})),n.d(t,"ApolloClient",(function(){return i.a})),n.d(t,"asyncRawApolloClientProvider",(function(){return i.g})),n.d(t,"watchQuery",(function(){return i.u})),n.d(t,"watchQueryProvide",(function(){return i.v})),n.d(t,"query",(function(){return i.s})),n.d(t,"queryProvide",(function(){return i.t})),n.d(t,"mutate",(function(){return i.o})),n.d(t,"mutateProvide",(function(){return i.p})),n.d(t,"getUuuserId",(function(){return i.k})),n.d(t,"apolloClientConfig",(function(){return i.e})),n.d(t,"client",(function(){return i.h})),n.d(t,"imClient",(function(){return i.l})),n.d(t,"apolloClientProvider",(function(){return i.f})),n.d(t,"mainEndpoint",(function(){return i.n})),n.d(t,"imEndpoint",(function(){return i.m})),n.d(t,"activityEndpoint",(function(){return i.d})),n.d(t,"nojGoEndpoint",(function(){return i.r})),n.d(t,"nojAppEndpoint",(function(){return i.q})),n.d(t,"dataIdFromObject",(function(){return i.i})),n.d(t,"FilteredGraphQLErrorEnum",(function(){return i.b})),n.d(t,"filterGraphQLError",(function(){return i.j}));var a=n("uH64");n.d(t,"asyncOpenWindow",(function(){return a.a}));var o=n("s4FW");n.d(t,"codemirror",(function(){return o.a}));var s=n("8CUH");n.d(t,"Comparator",(function(){return s.a}));var c=n("9YBA");n.d(t,"Queue",(function(){return c.a}));var u=n("0zw4");n.d(t,"GLOBAL_DATA",(function(){return u.j})),n.d(t,"PERMISSIONS",(function(){return u.x})),n.d(t,"USER_SETTINGS",(function(){return u.Q})),n.d(t,"IS_SOURCE_QUESTION",(function(){return u.l})),n.d(t,"QUESTION_PICKER",(function(){return u.B})),n.d(t,"QUESTION_LIST_FILTERS",(function(){return u.A})),n.d(t,"QUESTION_DETAIL",(function(){return u.z})),n.d(t,"SOLUTION_TAB_TITLE",(function(){return u.H})),n.d(t,"USER_COMMENT_DRAFT",(function(){return u.P})),n.d(t,"LSP_TOGGLE_STATUS_STORAGE_KEY",(function(){return u.r})),n.d(t,"StorageNamespace",(function(){return u.J})),n.d(t,"FOOL_DAY",(function(){return u.h})),n.d(t,"PROMO_FLOATING_LAYER",(function(){return u.y})),n.d(t,"RENEWAL_EVENT_FLOATING_LAYER",(function(){return u.F})),n.d(t,"FOOTER",(function(){return u.i})),n.d(t,"COOPERATION_FORM_SUBMITTED",(function(){return u.b})),n.d(t,"NAMESPACE_TAGS",(function(){return u.w})),n.d(t,"TAGS_BEFORE_MODIFIED",(function(){return u.M})),n.d(t,"LEETBOOK_COVER",(function(){return u.o})),n.d(t,"Size",(function(){return u.I})),n.d(t,"LG",(function(){return u.p})),n.d(t,"MD",(function(){return u.s})),n.d(t,"SM",(function(){return u.G})),n.d(t,"XS",(function(){return u.S})),n.d(t,"MIN_WIDHT",(function(){return u.u})),n.d(t,"EDGE_WIDTH",(function(){return u.g})),n.d(t,"QUESTION_PICKER_NUM_PER_PAGE",(function(){return u.D})),n.d(t,"ALL_PROBLEMS",(function(){return u.a})),n.d(t,"KEY_ENTER",(function(){return u.m})),n.d(t,"KEY_ESCAPE",(function(){return u.n})),n.d(t,"QUESTION_PICKER_BUG_DETECTION",(function(){return u.C})),n.d(t,"MOBILE",(function(){return u.v})),n.d(t,"DESKTOP",(function(){return u.e})),n.d(t,"EASY",(function(){return u.f})),n.d(t,"MEDIUM",(function(){return u.t})),n.d(t,"HARD",(function(){return u.k})),n.d(t,"TREE_VISUALIZER",(function(){return u.N})),n.d(t,"DATABASE_VISUALIZER",(function(){return u.d})),n.d(t,"VisualizerType",(function(){return u.R})),n.d(t,"cnDictionary",(function(){return u.T})),n.d(t,"LIGHT",(function(){return u.q})),n.d(t,"DARK",(function(){return u.c})),n.d(t,"Theme",(function(){return u.O})),n.d(t,"difficultyTypes",(function(){return u.V})),n.d(t,"statusTypes",(function(){return u.Y})),n.d(t,"statusFilters",(function(){return u.X})),n.d(t,"difficultyFilters",(function(){return u.U})),n.d(t,"QuestionStatus",(function(){return u.E})),n.d(t,"SubmissionStatus",(function(){return u.L})),n.d(t,"SubmissionLang",(function(){return u.K})),n.d(t,"slugToLang",(function(){return u.W}));var l=n("zqQ4");n.d(t,"connectRoute",(function(){return l.a}));var m=n("Gm6T");n.d(t,"preventDefault",(function(){return m.a})),n.d(t,"stopPropagation",(function(){return m.d})),n.d(t,"stopImmediatePropagation",(function(){return m.c})),n.d(t,"removeNode",(function(){return m.b}));var d=n("LD7h");n.d(t,"GLOBAL_DATA_SUBJECT_NAME",(function(){return d.a})),n.d(t,"beforeLoginTypeNameKey",(function(){return d.f})),n.d(t,"tempRecordLoginTypeKey",(function(){return d.j})),n.d(t,"GlobalDataFetcher",(function(){return d.b})),n.d(t,"ensureGlobal",(function(){return d.i})),n.d(t,"GlobalDataModule",(function(){return d.c})),n.d(t,"defaultContext",(function(){return d.h})),n.d(t,"userContext",(function(){return d.k})),n.d(t,"UserContextProvider",(function(){return d.e})),n.d(t,"withUserContext",(function(){return d.l})),n.d(t,"UserContextConsumer",(function(){return d.d})),n.d(t,"checkPermission",(function(){return d.g}));var p=n("RpsB");n.d(t,"hljs",(function(){return p.a}));var f=n("9AQ7");n.d(t,"useCountdown",(function(){return f.e})),n.d(t,"ensureSignedIn",(function(){return f.b})),n.d(t,"useForceUpdate",(function(){return f.h})),n.d(t,"useIsomorphicLayoutEffect",(function(){return f.l})),n.d(t,"useRefCallback",(function(){return f.q})),n.d(t,"useBodyScrollLock",(function(){return f.c})),n.d(t,"useInfiniteScroll",(function(){return f.j})),n.d(t,"useInterval",(function(){return f.k})),n.d(t,"useMediaLoadedDetector",(function(){return f.m})),n.d(t,"useOutsideDetectDom",(function(){return f.o})),n.d(t,"useToggleState",(function(){return f.r})),n.d(t,"useUserScrollDownToExpectedPosition",(function(){return f.s})),n.d(t,"Font",(function(){return f.a})),n.d(t,"useElementToImage",(function(){return f.g})),n.d(t,"useForwardRefs",(function(){return f.i})),n.d(t,"useDebouncedValue",(function(){return f.f})),n.d(t,"useOpenApp",(function(){return f.n})),n.d(t,"useCombinedRefs",(function(){return f.d})),n.d(t,"usePrefetchImg",(function(){return f.p}));var g=n("+kfw");n.d(t,"fromCodeToLocationDesc",(function(){return g.b})),n.d(t,"fromCodeToCandidates",(function(){return g.a}));var h=n("w+fZ");n.d(t,"LoggerFactory",(function(){return h.a})),n.d(t,"transformStack",(function(){return h.d})),n.d(t,"computeCrashId",(function(){return h.b})),n.d(t,"recordTimings",(function(){return h.c}));var y=n("VKGE");n.d(t,"arrayToTree",(function(){return y.b})),n.d(t,"treeToArray",(function(){return y.c})),n.d(t,"TreeNode",(function(){return y.a}));var b=n("WGIV");n.d(t,"getPriceString",(function(){return b.a}));var v=n("ve6X");n.d(t,"polyfill",(function(){return v.a}));var S=n("OJn1");n.d(t,"formatCommunityDate",(function(){return S.a})),n.d(t,"formatDuration",(function(){return S.b}));var T=n("oz+l");n.d(t,"formatNumberLimitDisplay",(function(){return T.a}));var M=n("DSkm");n.d(t,"questionIdSorter",(function(){return M.a})),n.d(t,"questionsLanguages",(function(){return M.c})),n.d(t,"questionLanguageMap",(function(){return M.b}));var C=n("gTsb");n.d(t,"PushProviderToken",(function(){return C.b})),n.d(t,"PushProvider",(function(){return C.a}));var k=n("4pJN");n.d(t,"axiosFetch",(function(){return k.e})),n.d(t,"lcAxios",(function(){return k.l})),n.d(t,"RxAxios",(function(){return k.d})),n.d(t,"getCsrfToken",(function(){return k.h})),n.d(t,"createErrorCatcher",(function(){return k.f})),n.d(t,"GraphQLClient",(function(){return k.a})),n.d(t,"GraphQLPlaybackClient",(function(){return k.c})),n.d(t,"GraphQLExamClient",(function(){return k.b})),n.d(t,"inauthentic$",(function(){return k.k})),n.d(t,"graphqlUpload",(function(){return k.j})),n.d(t,"mutationUploadFile",(function(){return k.m})),n.d(t,"genRandomUUid",(function(){return k.g})),n.d(t,"getUUid",(function(){return k.i}));var A=n("YnR9");n.d(t,"routers",(function(){return A.a}));var I=n("lVNd");n.d(t,"FrameSchedule",(function(){return I.a}));var P=n("zO7S");n.d(t,"registerSeoDataPusher",(function(){return P.a}));var x=n("8tPI");n.d(t,"getStorage",(function(){return x.B})),n.d(t,"LcStorage",(function(){return x.q})),n.d(t,"localStorageProvider",(function(){return x.E})),n.d(t,"CodeEditorKeys",(function(){return x.i})),n.d(t,"CodeEditorSwitchShortcuts",(function(){return x.j})),n.d(t,"globalLangKey",(function(){return x.C})),n.d(t,"latestJoinedExam",(function(){return x.D})),n.d(t,"LATEST_JOINED_COMPANY",(function(){return x.o})),n.d(t,"CURRENT_LOGIN_USER",(function(){return x.h})),n.d(t,"CURRENT_ASSESSMENT_VIEW",(function(){return x.g})),n.d(t,"PARTICIPANT_LIST_VIEW",(function(){return x.s})),n.d(t,"ASSESSMENT_OVERVIEW_TABLE_COLUMN_LIST",(function(){return x.b})),n.d(t,"ASSESSMENT_TABLE_COLUMN_LIST",(function(){return x.c})),n.d(t,"ASSESSMENT_FIXED_TIME_TABLE_COLUMN_LIST",(function(){return x.a})),n.d(t,"PARTICIPANT_TABLE_COLUMN_LIST",(function(){return x.t})),n.d(t,"REGULAR_QUIZ_COLUMN_LIST",(function(){return x.w})),n.d(t,"LEETCODE_QUESTION_COLUMN_LIST",(function(){return x.p})),n.d(t,"PRIVATE_QUESTION_COLUMN_LIST",(function(){return x.u})),n.d(t,"QUESTION_SET_COLUMN_LIST",(function(){return x.v})),n.d(t,"CONTEST_TABLE_COLUMN_LIST",(function(){return x.e})),n.d(t,"CONTEST_PARTICIPANT_TABLE_COLUMN_LIST",(function(){return x.d})),n.d(t,"INTERVIEW_TABLE_COLUMN_LIST",(function(){return x.m})),n.d(t,"HISTORY_ENTERPRISE_TAGS",(function(){return x.l})),n.d(t,"NEW_ROLE_CREATED",(function(){return x.r})),n.d(t,"INVITATION",(function(){return x.n})),n.d(t,"CREATE_FROM_QUESTION_SET",(function(){return x.f})),n.d(t,"ENTERPRISE_FEATURE_INTRODUCED",(function(){return x.k})),n.d(t,"genCodeKey",(function(){return x.y})),n.d(t,"genLangKey",(function(){return x.A})),n.d(t,"genContributeTestcase",(function(){return x.z})),n.d(t,"useStorage",(function(){return x.G})),n.d(t,"useUpdateStorage",(function(){return x.H})),n.d(t,"useConfigurableStorageState",(function(){return x.F})),n.d(t,"StorageListener",(function(){return x.x}));var O=n("QPBD");n.d(t,"SafeArea",(function(){return O.a}));var _=n("sYqU");n.d(t,"getSelectionInfo",(function(){return _.z})),n.d(t,"getTextBeforeSelection",(function(){return _.B})),n.d(t,"getTextAfterSelection",(function(){return _.A})),n.d(t,"expandSelectionInfoToWholeParagraph",(function(){return _.p})),n.d(t,"getInsertedSelectionInfo",(function(){return _.w})),n.d(t,"insertTextInto",(function(){return _.E})),n.d(t,"makeSureInsertWithNewLine",(function(){return _.X})),n.d(t,"setSelectionRange",(function(){return _.mb})),n.d(t,"setSelectionRangeWithoutLineBreak",(function(){return _.nb})),n.d(t,"InsertPosition",(function(){return _.c})),n.d(t,"InputStack",(function(){return _.b})),n.d(t,"setForceClassic",(function(){return _.lb})),n.d(t,"getForceClassic",(function(){return _.v})),n.d(t,"getLangModeCodeMirror",(function(){return _.x})),n.d(t,"copyTextToClipboard",(function(){return _.i})),n.d(t,"selectElementText",(function(){return _.jb})),n.d(t,"selectElementTextById",(function(){return _.kb})),n.d(t,"fingerprint$",(function(){return _.q})),n.d(t,"getFingerprint",(function(){return _.u})),n.d(t,"prettyPrintDate",(function(){return _.eb})),n.d(t,"normalizeLineEndings",(function(){return _.Z})),n.d(t,"numberToSIString",(function(){return _.ab})),n.d(t,"ensureArray",(function(){return _.o})),n.d(t,"capNumber",(function(){return _.d})),n.d(t,"generateDocumentTitle",(function(){return _.r})),n.d(t,"updateTitleNum",(function(){return _.rb})),n.d(t,"cleanUpRawMeta",(function(){return _.f})),n.d(t,"cleanUpRawKeywords",(function(){return _.e})),n.d(t,"htmlToText",(function(){return _.C})),n.d(t,"markdownToText",(function(){return _.Y})),n.d(t,"createHumps",(function(){return _.j})),n.d(t,"humps",(function(){return _.D})),n.d(t,"lengthInUtf8Bytes",(function(){return _.U})),n.d(t,"cutString",(function(){return _.k})),n.d(t,"loadJsScript",(function(){return _.W})),n.d(t,"embedAnyVideos",(function(){return _.n})),n.d(t,"renderMarkdown",(function(){return _.gb})),n.d(t,"renderMarkdownWithLatex",(function(){return _.hb})),n.d(t,"renderArticleMarkdown",(function(){return _.fb})),n.d(t,"savePasswordToBrowser",(function(){return _.ib})),n.d(t,"isMac",(function(){return _.P})),n.d(t,"isPrerender",(function(){return _.R})),n.d(t,"isIE",(function(){return _.M})),n.d(t,"isCrawler",(function(){return _.K})),n.d(t,"isBaiduSpider",(function(){return _.I})),n.d(t,"isMobile",(function(){return _.Q})),n.d(t,"isWechatBrowser",(function(){return _.T})),n.d(t,"isAlipayBrowser",(function(){return _.F})),n.d(t,"isAndroidMobile",(function(){return _.G})),n.d(t,"isIOSMobile",(function(){return _.N})),n.d(t,"isLeetCodeWebView",(function(){return _.O})),n.d(t,"isAndroidWebview",(function(){return _.H})),n.d(t,"isSafari",(function(){return _.S})),n.d(t,"isChrome",(function(){return _.J})),n.d(t,"isFirefox",(function(){return _.L})),n.d(t,"getAndroidVersion",(function(){return _.s})),n.d(t,"getSafariMajorVersion",(function(){return _.y})),n.d(t,"getAppVersion",(function(){return _.t})),n.d(t,"CompareResult",(function(){return _.a})),n.d(t,"compareVersion",(function(){return _.g})),n.d(t,"polling",(function(){return _.db})),n.d(t,"composeUrl",(function(){return _.h})),n.d(t,"linkResolverCreator",(function(){return _.V})),n.d(t,"padZero",(function(){return _.bb})),n.d(t,"duration",(function(){return _.l})),n.d(t,"durationInDaysHoursMinutes",(function(){return _.m})),n.d(t,"translate",(function(){return _.ob})),n.d(t,"translateIp",(function(){return _.pb})),n.d(t,"updateImmutableArray",(function(){return _.qb})),n.d(t,"withStopPropagation",(function(){return _.sb})),n.d(t,"paths",(function(){return _.cb}));var w=n("KAEB");n.d(t,"chance",(function(){return w.a}));var E=n("SwI/");n.d(t,"COLOR",(function(){return E.a})),n.d(t,"DSW_Pair_Colors",(function(){return E.f})),n.d(t,"textOverflow",(function(){return E.O})),n.d(t,"ellipsis",(function(){return E.v})),n.d(t,"hideScrollbar",(function(){return E.E})),n.d(t,"getMultiLineClampStyle",(function(){return E.x})),n.d(t,"defaultAnimation",(function(){return E.p})),n.d(t,"mobileDisplay",(function(){return E.G})),n.d(t,"desktopDisplay",(function(){return E.q})),n.d(t,"autoCompleteStyle",(function(){return E.i})),n.d(t,"verticalCenter",(function(){return E.P})),n.d(t,"contentCenter",(function(){return E.k})),n.d(t,"fixSafariBorderRadius",(function(){return E.w})),n.d(t,"mobileStyle",(function(){return E.I})),n.d(t,"desktopStyle",(function(){return E.u})),n.d(t,"withMobileProps",(function(){return E.Q})),n.d(t,"radiusSm",(function(){return E.N})),n.d(t,"radiusMd",(function(){return E.M})),n.d(t,"radiusLg",(function(){return E.L})),n.d(t,"desktopMiniWidth",(function(){return E.t})),n.d(t,"desktopMinWidth",(function(){return E.s})),n.d(t,"desktopMaxWidth",(function(){return E.r})),n.d(t,"DSW_DesktopContentWidth",(function(){return E.b})),n.d(t,"DSW_DesktopWidthLg",(function(){return E.c})),n.d(t,"DSW_DesktopWidthMd",(function(){return E.d})),n.d(t,"DSW_DesktopWidthSm",(function(){return E.e})),n.d(t,"mobileWidth",(function(){return E.J})),n.d(t,"mobileMaxWidth",(function(){return E.H})),n.d(t,"heightLg",(function(){return E.z})),n.d(t,"heightMd",(function(){return E.A})),n.d(t,"heightSm",(function(){return E.B})),n.d(t,"heightXs",(function(){return E.C})),n.d(t,"messageZIndex",(function(){return E.F})),n.d(t,"headerZIndex",(function(){return E.y})),n.d(t,"profileNavigatorZIndex",(function(){return E.K})),n.d(t,"RGBAColor",(function(){return E.h})),n.d(t,"hexToRgb",(function(){return E.D})),n.d(t,"DSW_Shadows",(function(){return E.g})),n.d(t,"contentHr",(function(){return E.n})),n.d(t,"contentAnchor",(function(){return E.j})),n.d(t,"contentPre",(function(){return E.o})),n.d(t,"contentCode",(function(){return E.l})),n.d(t,"contentDiscuss",(function(){return E.m}));var j=n("yTnY");n.d(t,"registerServiceWorker",(function(){return j.a}));var R=n("FhM/");n.d(t,"appendPremiumQueryString",(function(){return R.a})),n.d(t,"parsePremiumQueryString",(function(){return R.c})),n.d(t,"parseWechatAuthorizeRedirectURLParams",(function(){return R.e})),n.d(t,"premiumQueryObjectToGIOPageVars",(function(){return R.f})),n.d(t,"parsePromotionQueryString",(function(){return R.d})),n.d(t,"getPremiumGioVars",(function(){return R.b}));var N=n("uhKY");n.d(t,"resizeOssImage",(function(){return N.b})),n.d(t,"cropImage",(function(){return N.a}));var L=n("jEZ0");n.d(t,"formatNumThousand",(function(){return L.b})),n.d(t,"formatNumOverflow",(function(){return L.a}));var D=n("5k9J");n.d(t,"OutputType",(function(){return D.a})),n.d(t,"getSafeHtmlOrText",(function(){return D.b}));var B=n("tUzc");n.d(t,"renameFileForOss",(function(){return B.a})),n.d(t,"renameForOss",(function(){return B.b}));var F=n("u1hN");n.d(t,"unionByKey",(function(){return F.a}));var U=n("POpa");n.d(t,"parseJSON",(function(){return U.a}));var G=n("oUHe");n.d(t,"calcTimer",(function(){return G.a})),n.d(t,"useSecondCountdown",(function(){return G.b}));var H=n("v43y");n.d(t,"getLinkByTagType",(function(){return H.a}));var W=n("rWjZ");for(var z in W)["default","Comparator","useExtraTextWhenCopy","abortContextBuilder","ApolloClient","asyncRawApolloClientProvider","watchQuery","watchQueryProvide","query","queryProvide","mutate","mutateProvide","getUuuserId","apolloClientConfig","client","imClient","apolloClientProvider","mainEndpoint","imEndpoint","activityEndpoint","nojGoEndpoint","nojAppEndpoint","dataIdFromObject","FilteredGraphQLErrorEnum","filterGraphQLError","asyncOpenWindow","codemirror","Queue","GLOBAL_DATA","PERMISSIONS","USER_SETTINGS","IS_SOURCE_QUESTION","QUESTION_PICKER","QUESTION_LIST_FILTERS","QUESTION_DETAIL","SOLUTION_TAB_TITLE","USER_COMMENT_DRAFT","LSP_TOGGLE_STATUS_STORAGE_KEY","StorageNamespace","FOOL_DAY","PROMO_FLOATING_LAYER","RENEWAL_EVENT_FLOATING_LAYER","FOOTER","COOPERATION_FORM_SUBMITTED","NAMESPACE_TAGS","TAGS_BEFORE_MODIFIED","LEETBOOK_COVER","Size","LG","MD","SM","XS","MIN_WIDHT","EDGE_WIDTH","QUESTION_PICKER_NUM_PER_PAGE","ALL_PROBLEMS","KEY_ENTER","KEY_ESCAPE","QUESTION_PICKER_BUG_DETECTION","MOBILE","DESKTOP","EASY","MEDIUM","HARD","TREE_VISUALIZER","DATABASE_VISUALIZER","VisualizerType","cnDictionary","LIGHT","DARK","Theme","difficultyTypes","statusTypes","statusFilters","difficultyFilters","QuestionStatus","SubmissionStatus","SubmissionLang","slugToLang","connectRoute","preventDefault","stopPropagation","stopImmediatePropagation","removeNode","GLOBAL_DATA_SUBJECT_NAME","beforeLoginTypeNameKey","tempRecordLoginTypeKey","GlobalDataFetcher","ensureGlobal","GlobalDataModule","defaultContext","userContext","UserContextProvider","withUserContext","UserContextConsumer","checkPermission","hljs","useCountdown","ensureSignedIn","useForceUpdate","useIsomorphicLayoutEffect","useRefCallback","useBodyScrollLock","useInfiniteScroll","useInterval","useMediaLoadedDetector","useOutsideDetectDom","useToggleState","useUserScrollDownToExpectedPosition","Font","useElementToImage","useForwardRefs","useDebouncedValue","useOpenApp","useCombinedRefs","usePrefetchImg","fromCodeToLocationDesc","fromCodeToCandidates","LoggerFactory","transformStack","computeCrashId","recordTimings","arrayToTree","treeToArray","TreeNode","getPriceString","polyfill","formatCommunityDate","formatDuration","formatNumberLimitDisplay","questionIdSorter","questionsLanguages","questionLanguageMap","PushProviderToken","PushProvider","axiosFetch","lcAxios","RxAxios","getCsrfToken","createErrorCatcher","GraphQLClient","GraphQLPlaybackClient","GraphQLExamClient","inauthentic$","graphqlUpload","mutationUploadFile","genRandomUUid","getUUid","routers","FrameSchedule","registerSeoDataPusher","getStorage","LcStorage","localStorageProvider","CodeEditorKeys","CodeEditorSwitchShortcuts","globalLangKey","latestJoinedExam","LATEST_JOINED_COMPANY","CURRENT_LOGIN_USER","CURRENT_ASSESSMENT_VIEW","PARTICIPANT_LIST_VIEW","ASSESSMENT_OVERVIEW_TABLE_COLUMN_LIST","ASSESSMENT_TABLE_COLUMN_LIST","ASSESSMENT_FIXED_TIME_TABLE_COLUMN_LIST","PARTICIPANT_TABLE_COLUMN_LIST","REGULAR_QUIZ_COLUMN_LIST","LEETCODE_QUESTION_COLUMN_LIST","PRIVATE_QUESTION_COLUMN_LIST","QUESTION_SET_COLUMN_LIST","CONTEST_TABLE_COLUMN_LIST","CONTEST_PARTICIPANT_TABLE_COLUMN_LIST","INTERVIEW_TABLE_COLUMN_LIST","HISTORY_ENTERPRISE_TAGS","NEW_ROLE_CREATED","INVITATION","CREATE_FROM_QUESTION_SET","ENTERPRISE_FEATURE_INTRODUCED","genCodeKey","genLangKey","genContributeTestcase","useStorage","useUpdateStorage","useConfigurableStorageState","StorageListener","SafeArea","getSelectionInfo","getTextBeforeSelection","getTextAfterSelection","expandSelectionInfoToWholeParagraph","getInsertedSelectionInfo","insertTextInto","makeSureInsertWithNewLine","setSelectionRange","setSelectionRangeWithoutLineBreak","InsertPosition","InputStack","setForceClassic","getForceClassic","getLangModeCodeMirror","copyTextToClipboard","selectElementText","selectElementTextById","fingerprint$","getFingerprint","prettyPrintDate","normalizeLineEndings","numberToSIString","ensureArray","capNumber","generateDocumentTitle","updateTitleNum","cleanUpRawMeta","cleanUpRawKeywords","htmlToText","markdownToText","createHumps","humps","lengthInUtf8Bytes","cutString","loadJsScript","embedAnyVideos","renderMarkdown","renderMarkdownWithLatex","renderArticleMarkdown","savePasswordToBrowser","isMac","isPrerender","isIE","isCrawler","isBaiduSpider","isMobile","isWechatBrowser","isAlipayBrowser","isAndroidMobile","isIOSMobile","isLeetCodeWebView","isAndroidWebview","isSafari","isChrome","isFirefox","getAndroidVersion","getSafariMajorVersion","getAppVersion","CompareResult","compareVersion","polling","composeUrl","linkResolverCreator","padZero","duration","durationInDaysHoursMinutes","translate","translateIp","updateImmutableArray","withStopPropagation","paths","chance","COLOR","DSW_Pair_Colors","textOverflow","ellipsis","hideScrollbar","getMultiLineClampStyle","defaultAnimation","mobileDisplay","desktopDisplay","autoCompleteStyle","verticalCenter","contentCenter","fixSafariBorderRadius","mobileStyle","desktopStyle","withMobileProps","radiusSm","radiusMd","radiusLg","desktopMiniWidth","desktopMinWidth","desktopMaxWidth","DSW_DesktopContentWidth","DSW_DesktopWidthLg","DSW_DesktopWidthMd","DSW_DesktopWidthSm","mobileWidth","mobileMaxWidth","heightLg","heightMd","heightSm","heightXs","messageZIndex","headerZIndex","profileNavigatorZIndex","RGBAColor","hexToRgb","DSW_Shadows","contentHr","contentAnchor","contentPre","contentCode","contentDiscuss","registerServiceWorker","appendPremiumQueryString","parsePremiumQueryString","parseWechatAuthorizeRedirectURLParams","premiumQueryObjectToGIOPageVars","parsePromotionQueryString","getPremiumGioVars","resizeOssImage","cropImage","formatNumThousand","formatNumOverflow","OutputType","getSafeHtmlOrText","renameFileForOss","renameForOss","unionByKey","parseJSON","calcTimer","useSecondCountdown","getLinkByTagType"].indexOf(z)<0&&function(e){n.d(t,e,(function(){return W[e]}))}(z);var q=n("aCEu");n.d(t,"defaultErrorHandler",(function(){return q.a})),n.d(t,"queryClient",(function(){return q.b}));var V=n("rk9S");n.d(t,"eventTracking",(function(){return V.a})),n.d(t,"getRandomEId",(function(){return V.b})),n.d(t,"handleFirstCodeChange",(function(){return V.c}));var K=n("N8z3");n.d(t,"filterAds",(function(){return K.a}));var J=n("Sifx");n.d(t,"openAdLinkType",(function(){return J.a}))},"8tPI":function(e,t,n){"use strict";n.d(t,"B",(function(){return r.b})),n.d(t,"q",(function(){return r.a})),n.d(t,"E",(function(){return i.a})),n.d(t,"i",(function(){return a.i})),n.d(t,"j",(function(){return a.j})),n.d(t,"C",(function(){return a.z})),n.d(t,"D",(function(){return a.A})),n.d(t,"o",(function(){return a.o})),n.d(t,"h",(function(){return a.h})),n.d(t,"g",(function(){return a.g})),n.d(t,"s",(function(){return a.r})),n.d(t,"b",(function(){return a.b})),n.d(t,"c",(function(){return a.c})),n.d(t,"a",(function(){return a.a})),n.d(t,"t",(function(){return a.s})),n.d(t,"w",(function(){return a.v})),n.d(t,"p",(function(){return a.p})),n.d(t,"u",(function(){return a.t})),n.d(t,"v",(function(){return a.u})),n.d(t,"e",(function(){return a.e})),n.d(t,"d",(function(){return a.d})),n.d(t,"m",(function(){return a.m})),n.d(t,"l",(function(){return a.l})),n.d(t,"r",(function(){return a.q})),n.d(t,"n",(function(){return a.n})),n.d(t,"f",(function(){return a.f})),n.d(t,"k",(function(){return a.k})),n.d(t,"y",(function(){return a.w})),n.d(t,"A",(function(){return a.y})),n.d(t,"z",(function(){return a.x})),n.d(t,"G",(function(){return o.b})),n.d(t,"H",(function(){return o.c})),n.d(t,"F",(function(){return o.a})),n.d(t,"x",(function(){return d}));var r=n("xdqw"),i=n("FMf8"),a=n("sq6C"),o=n("kH2Q"),s=n("D57K"),c=n("5Nzd"),u=n("S0cN"),l=n.n(u),m=n("ERkP"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.storage=c.b.getInstanceByToken(i.a.provide),n.onStorageChange=function(e){var t=e.key,r=e.newValue;n.props.keys.includes(t)&&n.setState((function(e){var n;return{data:Object(s.__assign)(Object(s.__assign)({},e.data),(n={},n[t]=r,n))}}))},n.calcData=function(e){var t=n.props.defaultValue,r=new Map;return e.forEach((function(e){var i=l()(e);r.set(e,n.storage.get(e,t&&t.get(e))),r.set(i,r.get(e))})),r},n.state={data:n.calcData(t.keys)},n}return Object(s.__extends)(t,e),t.prototype.componentDidMount=function(){this.storage.attach(this.onStorageChange)},t.prototype.componentDidUpdate=function(e){var t=this;e.keys!==this.props.keys&&requestAnimationFrame((function(){t.setState({data:t.calcData(t.props.keys)})}))},t.prototype.componentWillUnmount=function(){this.storage.detach(this.onStorageChange)},t.prototype.render=function(){return this.props.children(this.state.data)},t}(n.n(m).a.PureComponent)},"9AQ7":function(e,t,n){"use strict";n.d(t,"e",(function(){return r.a})),n.d(t,"b",(function(){return i.a})),n.d(t,"h",(function(){return c})),n.d(t,"l",(function(){return u.a})),n.d(t,"q",(function(){return l.a})),n.d(t,"c",(function(){return m.a})),n.d(t,"j",(function(){return d.a})),n.d(t,"k",(function(){return p.a})),n.d(t,"m",(function(){return f.a})),n.d(t,"o",(function(){return g.a})),n.d(t,"r",(function(){return h.a})),n.d(t,"s",(function(){return y.a})),n.d(t,"a",(function(){return b.a})),n.d(t,"g",(function(){return b.b})),n.d(t,"i",(function(){return v.a})),n.d(t,"f",(function(){return S.a})),n.d(t,"n",(function(){return T.a})),n.d(t,"d",(function(){return M.a})),n.d(t,"p",(function(){return C.a}));var r=n("G8Ou"),i=n("PZOx"),a=n("D57K"),o=n("ERkP"),s=function(){return{}};function c(){return Object(a.__read)(Object(o.useReducer)(s,{}),2)[1]}var u=n("WWwk"),l=n("RlKl"),m=n("VL4A"),d=n("+ZRu"),p=n("t+Dw"),f=n("q+Tr"),g=n("KNJy"),h=n("1QlS"),y=n("by+X"),b=n("kPRW"),v=n("pMX1"),S=n("KUse"),T=n("SrIy"),M=n("zt93"),C=n("kdr8")},"9YBA":function(e,t,n){"use strict";var r=n("6SOw");n.d(t,"a",(function(){return r.a}))},AAfO:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r=[{slug:"cpp",lang:"C++"},{slug:"java",lang:"Java"},{slug:"python",lang:"Python"},{slug:"mysql",lang:"MySQL"},{slug:"c",lang:"C"},{slug:"csharp",lang:"C#"},{slug:"javascript",lang:"JavaScript"},{slug:"ruby",lang:"Ruby"},{slug:"bash",lang:"Bash"},{slug:"swift",lang:"Swift"},{slug:"golang",lang:"Go"},{slug:"python3",lang:"Python3"},{slug:"scala",lang:"Scala"},{slug:"kotlin",lang:"Kotlin"},{slug:"rust",lang:"Rust"},{slug:"php",lang:"PHP"},{slug:"typescript",lang:"TypeScript"},{slug:"racket",lang:"Racket"},{slug:"erlang",lang:"Erlang"},{slug:"elixir",lang:"Elixir"},{slug:"dart",lang:"Dart"}],i={};r.forEach((function(e){i[e.slug]=e.lang}))},Ab25:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r,i=n("D57K"),a=n("5Nzd"),o=n("u3dr"),s=n("2wT7"),c=n("9EWH"),u=n("d9YI"),l=n("HnWI"),m=n("rzNM"),d=n("IMYO"),p=n("Jg5f"),f=n("B07F"),g={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"notyUnreadCounts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"counterTypes"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotyCounterType"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notyUnreadCounts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"counterTypes"},value:{kind:"Variable",name:{kind:"Name",value:"counterTypes"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"maxCountToDisplay"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"counts"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"counterType"},arguments:[],directives:[]}]}}]}}]}}],loc:{source:{body:"query notyUnreadCounts($counterTypes: [NotyCounterType!]!) {\n  notyUnreadCounts(counterTypes: $counterTypes){\n    maxCountToDisplay\n    counts {\n      count\n      counterType\n    }\n  }\n}\n"}},operationName:"notyUnreadCounts",defName:"notyUnreadCounts"},h=n("np1P"),y={unreadCounts:(r={},r[h.c.NotificationI]=0,r[h.c.NotificationIi]=0,r)},b=function(e){function t(t){var n=e.call(this)||this;return n.client=t,n.defaultState=y,n}var n,r,s,b,v,S;return Object(i.__extends)(t,e),t.prototype.updateUnreadNumber=function(e,t){var n;t&&(e.unreadCounts=((n={})[h.c.NotificationI]=null===t||void 0===t?void 0:t.counts[0].count,n[h.c.NotificationIi]=null===t||void 0===t?void 0:t.counts[1].count,n))},t.prototype.updateUnreadNumberByType=function(e,t){switch(t.action){case"set":e.unreadCounts[t.inboxType]=t.count;break;case"inc":e.unreadCounts[t.inboxType]+=t.count;break;case"dec":e.unreadCounts[t.inboxType]-=t.count}},t.prototype.fetchUnreadCount=function(e){var t=this;return e.pipe(Object(m.a)((function(){return t.client.query({query:g,variables:{counterTypes:[h.a.CounterNotificationI,h.a.CounterNotificationIi]},context:{uri:"/graphql/noty"},fetchPolicy:"network-only",fallbackErrorMessageForUnknownError:"\u83b7\u53d6\u672a\u8bfb\u901a\u77e5\u5931\u8d25"}).pipe(Object(d.a)((function(){return u.a})),Object(p.a)((function(e){var n=e.data;return t.getActions().updateUnreadNumber(n.notyUnreadCounts)})))})))},Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(n="undefined"!==typeof c.Draft&&c.Draft)?n:Object,"function"===typeof(r="undefined"!==typeof UnreadCounts&&UnreadCounts)?r:Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"updateUnreadNumber",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(s="undefined"!==typeof c.Draft&&c.Draft)?s:Object,Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"updateUnreadNumberByType",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(b="undefined"!==typeof l.a&&l.a)?b:Object]),Object(i.__metadata)("design:returntype","function"===typeof(v="undefined"!==typeof l.a&&l.a)?v:Object)],t.prototype,"fetchUnreadCount",null),t=Object(i.__decorate)([Object(a.a)(),Object(i.__metadata)("design:paramtypes",["function"===typeof(S="undefined"!==typeof f.a&&f.a)?S:Object])],t)}(s.a)},DSkm:function(e,t,n){"use strict";var r=n("JA3D");n.d(t,"a",(function(){return r.a}));var i=n("AAfO");n.d(t,"b",(function(){return i.a})),n.d(t,"c",(function(){return i.b}))},DZKv:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return r}));var r,i="Tree Visualizer",a="Database Visualizer";!function(e){e.TREE_VISUALIZER="Tree Visualizer",e.DATABASE_VISUALIZER="Database Visualizer"}(r||(r={}))},E1ni:function(e,t){var n="offline-plugin: runtime was installed without OfflinePlugin being added to the webpack.config.js. See https://goo.gl/2Ca7NO for details.";window.console&&(console.info?console.info(n):console.log&&console.log(n)),t.install=function(){},t.applyUpdate=function(){},t.update=function(){}},EKTE:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("D57K"),i=n("EdJC"),a=n("gd5h"),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetIMConfig"},variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"getIMConfig"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"enabled"},arguments:[],directives:[]}]}}]}}],loc:{source:{body:"query GetIMConfig {\n  getIMConfig {\n    enabled\n  }\n}"}},operationName:"GetIMConfig",defName:"getIMConfig"};function s(){var e=Object(i.a)("Query_IM_Config",(function(){return a.d.query({query:o,context:{uri:a.g}}).then((function(e){var t;return null===(t=e.data.getIMConfig)||void 0===t?void 0:t.enabled}))}));return Object(r.__assign)(Object(r.__assign)({},e),{count:1})}},F9l1:function(e,t,n){(function(n){var r;!function(){var i=9007199254740992,a="0123456789",o="abcdefghijklmnopqrstuvwxyz",s=o.toUpperCase(),c=a+"abcdef";function u(e){this.name="UnsupportedError",this.message=e||"This feature is not supported on this platform"}u.prototype=new Error,u.prototype.constructor=u;var l=Array.prototype.slice;function m(e){if(!(this instanceof m))return e||(e=null),null===e?new m:new m(e);if("function"===typeof e)return this.random=e,this;arguments.length&&(this.seed=0);for(var t=0;t<arguments.length;t++){var n=0;if("[object String]"===Object.prototype.toString.call(arguments[t]))for(var r=0;r<arguments[t].length;r++){for(var i=0,a=0;a<arguments[t].length;a++)i=arguments[t].charCodeAt(a)+(i<<6)+(i<<16)-i;n+=i}else n=arguments[t];this.seed+=(arguments.length-t)*n}return this.mt=this.mersenne_twister(this.seed),this.bimd5=this.blueimp_md5(),this.random=function(){return this.mt.random(this.seed)},this}function d(e,t){if(e=e||{},t)for(var n in t)"undefined"===typeof e[n]&&(e[n]=t[n]);return e}function p(e,t){if(e)throw new RangeError(t)}m.prototype.VERSION="1.1.7";var f=function(){throw new Error("No Base64 encoder available.")};function g(e){this.c=e}function h(e){this.c=e}function y(e){this.c=e}function b(e){return function(){return this.natural(e)}}"function"===typeof btoa?f=btoa:"function"===typeof n&&(f=function(e){return new n(e).toString("base64")}),m.prototype.bool=function(e){return p((e=d(e,{likelihood:50})).likelihood<0||e.likelihood>100,"Chance: Likelihood accepts values from 0 to 100."),100*this.random()<e.likelihood},m.prototype.falsy=function(e){var t=(e=d(e,{pool:[!1,null,0,NaN,""]})).pool;return t[this.integer({min:0,max:t.length})]},m.prototype.animal=function(e){if("undefined"!==typeof(e=d(e)).type)return p(!this.get("animals")[e.type.toLowerCase()],"Please pick from desert, ocean, grassland, forest, zoo, pets, farm."),this.pick(this.get("animals")[e.type.toLowerCase()]);return this.pick(this.get("animals")[this.pick(["desert","forest","ocean","zoo","farm","pet","grassland"])])},m.prototype.character=function(e){var t,n,r="!@#$%^&*()[]";return t="lower"===(e=d(e)).casing?o:"upper"===e.casing?s:o+s,e.pool?n=e.pool:(n="",e.alpha&&(n+=t),e.numeric&&(n+=a),e.symbols&&(n+=r),n||(n=t+a+r)),n.charAt(this.natural({max:n.length-1}))},m.prototype.floating=function(e){p((e=d(e,{fixed:4})).fixed&&e.precision,"Chance: Cannot specify both fixed and precision.");var t=Math.pow(10,e.fixed),n=i/t,r=-n;p(e.min&&e.fixed&&e.min<r,"Chance: Min specified is out of range with fixed. Min should be, at least, "+r),p(e.max&&e.fixed&&e.max>n,"Chance: Max specified is out of range with fixed. Max should be, at most, "+n),e=d(e,{min:r,max:n});var a=(this.integer({min:e.min*t,max:e.max*t})/t).toFixed(e.fixed);return parseFloat(a)},m.prototype.integer=function(e){return p((e=d(e,{min:-9007199254740992,max:i})).min>e.max,"Chance: Min cannot be greater than Max."),Math.floor(this.random()*(e.max-e.min+1)+e.min)},m.prototype.natural=function(e){if("number"===typeof(e=d(e,{min:0,max:i})).numerals&&(p(e.numerals<1,"Chance: Numerals cannot be less than one."),e.min=Math.pow(10,e.numerals-1),e.max=Math.pow(10,e.numerals)-1),p(e.min<0,"Chance: Min cannot be less than zero."),e.exclude){for(var t in p(!Array.isArray(e.exclude),"Chance: exclude must be an array."),e.exclude)p(!Number.isInteger(e.exclude[t]),"Chance: exclude must be numbers.");var n=e.min+this.natural({max:e.max-e.min-e.exclude.length}),r=e.exclude.sort();for(var t in r){if(n<r[t])break;n++}return n}return this.integer(e)},m.prototype.prime=function(e){p((e=d(e,{min:0,max:1e4})).min<0,"Chance: Min cannot be less than zero."),p(e.min>e.max,"Chance: Min cannot be greater than Max.");var t=v.primes[v.primes.length-1];if(e.max>t)for(var n=t+2;n<=e.max;++n)this.is_prime(n)&&v.primes.push(n);var r=v.primes.filter((function(t){return t>=e.min&&t<=e.max}));return this.pick(r)},m.prototype.is_prime=function(e){if(e%1||e<2)return!1;if(e%2===0)return 2===e;if(e%3===0)return 3===e;for(var t=Math.sqrt(e),n=5;n<=t;n+=6)if(e%n===0||e%(n+2)===0)return!1;return!0},m.prototype.hex=function(e){p((e=d(e,{min:0,max:i,casing:"lower"})).min<0,"Chance: Min cannot be less than zero.");var t=this.natural({min:e.min,max:e.max});return"upper"===e.casing?t.toString(16).toUpperCase():t.toString(16)},m.prototype.letter=function(e){e=d(e,{casing:"lower"});var t=this.character({pool:"abcdefghijklmnopqrstuvwxyz"});return"upper"===e.casing&&(t=t.toUpperCase()),t},m.prototype.string=function(e){(e=d(e,{min:5,max:20})).length||(e.length=this.natural({min:e.min,max:e.max})),p(e.length<0,"Chance: Length cannot be less than zero.");var t=e.length;return this.n(this.character,t,e).join("")},g.prototype={substitute:function(){return this.c}},h.prototype={substitute:function(){if(!/[{}\\]/.test(this.c))throw new Error('Invalid escape sequence: "\\'+this.c+'".');return this.c}},y.prototype={replacers:{"#":function(e){return e.character({pool:a})},A:function(e){return e.character({pool:s})},a:function(e){return e.character({pool:o})}},substitute:function(e){var t=this.replacers[this.c];if(!t)throw new Error('Invalid replacement character: "'+this.c+'".');return t(e)}},m.prototype.template=function(e){if(!e)throw new Error("Template string is required");var t=this;return function(e){for(var t=[],n="identity",r=0;r<e.length;r++){var i=e[r];switch(n){case"escape":t.push(new h(i)),n="identity";break;case"identity":"{"===i?n="replace":"\\"===i?n="escape":t.push(new g(i));break;case"replace":"}"===i?n="identity":t.push(new y(i))}}return t}(e).map((function(e){return e.substitute(t)})).join("")},m.prototype.buffer=function(e){if("undefined"===typeof n)throw new u("Sorry, the buffer() function is not supported on your platform");p((e=d(e,{length:this.natural({min:5,max:20})})).length<0,"Chance: Length cannot be less than zero.");var t=e.length,r=this.n(this.character,t,e);return n.from(r)},m.prototype.capitalize=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},m.prototype.mixin=function(e){for(var t in e)m.prototype[t]=e[t];return this},m.prototype.unique=function(e,t,n){p("function"!==typeof e,"Chance: The first argument must be a function.");var r=function(e,t){return-1!==e.indexOf(t)};n&&(r=n.comparator||r);for(var i,a=[],o=0,s=50*t,c=l.call(arguments,2);a.length<t;){var u=JSON.parse(JSON.stringify(c));if(r(a,i=e.apply(this,u))||(a.push(i),o=0),++o>s)throw new RangeError("Chance: num is likely too large for sample set")}return a},m.prototype.n=function(e,t){p("function"!==typeof e,"Chance: The first argument must be a function."),"undefined"===typeof t&&(t=1);var n=t,r=[],i=l.call(arguments,2);for(n=Math.max(0,n);n--;null)r.push(e.apply(this,i));return r},m.prototype.pad=function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},m.prototype.pick=function(e,t){if(0===e.length)throw new RangeError("Chance: Cannot pick() from an empty array");return t&&1!==t?this.shuffle(e).slice(0,t):e[this.natural({max:e.length-1})]},m.prototype.pickone=function(e){if(0===e.length)throw new RangeError("Chance: Cannot pickone() from an empty array");return e[this.natural({max:e.length-1})]},m.prototype.pickset=function(e,t){if(0===t)return[];if(0===e.length)throw new RangeError("Chance: Cannot pickset() from an empty array");if(t<0)throw new RangeError("Chance: Count must be a positive number");if(t&&1!==t){var n=e.slice(0),r=n.length;return this.n((function(){var e=this.natural({max:--r}),t=n[e];return n[e]=n[r],t}),Math.min(r,t))}return[this.pickone(e)]},m.prototype.shuffle=function(e){for(var t,n,r=[],i=0,a=Number(e.length),o=(n=a,Array.apply(null,Array(n)).map((function(e,t){return t}))),s=a-1,c=0;c<a;c++)i=o[t=this.natural({max:s})],r[c]=e[i],o[t]=o[s],s-=1;return r},m.prototype.weighted=function(e,t,n){if(e.length!==t.length)throw new RangeError("Chance: Length of array and weights must match");for(var r,i=0,a=0;a<t.length;++a){if(r=t[a],isNaN(r))throw new RangeError("Chance: All weights must be numbers");r>0&&(i+=r)}if(0===i)throw new RangeError("Chance: No valid entries in array weights");var o,s=this.random()*i,c=0,u=-1;for(a=0;a<t.length;++a){if(c+=r=t[a],r>0){if(s<=c){o=a;break}u=a}a===t.length-1&&(o=u)}var l=e[o];return(n="undefined"!==typeof n&&n)&&(e.splice(o,1),t.splice(o,1)),l},m.prototype.paragraph=function(e){var t=(e=d(e)).sentences||this.natural({min:3,max:7}),n=this.n(this.sentence,t),r=!0===e.linebreak?"\n":" ";return n.join(r)},m.prototype.sentence=function(e){var t,n=(e=d(e)).words||this.natural({min:12,max:18}),r=e.punctuation;return t=this.n(this.word,n).join(" "),t=this.capitalize(t),!1===r||/^[.?;!:]$/.test(r)||(r="."),r&&(t+=r),t},m.prototype.syllable=function(e){for(var t,n=(e=d(e)).length||this.natural({min:2,max:3}),r="bcdfghjklmnprstvwz",i="aeiou",a="",o=0;o<n;o++)a+=t=0===o?this.character({pool:"bcdfghjklmnprstvwzaeiou"}):-1===r.indexOf(t)?this.character({pool:r}):this.character({pool:i});return e.capitalize&&(a=this.capitalize(a)),a},m.prototype.word=function(e){p((e=d(e)).syllables&&e.length,"Chance: Cannot specify both syllables AND length.");var t=e.syllables||this.natural({min:1,max:3}),n="";if(e.length){do{n+=this.syllable()}while(n.length<e.length);n=n.substring(0,e.length)}else for(var r=0;r<t;r++)n+=this.syllable();return e.capitalize&&(n=this.capitalize(n)),n},m.prototype.age=function(e){var t;switch((e=d(e)).type){case"child":t={min:0,max:12};break;case"teen":t={min:13,max:19};break;case"adult":t={min:18,max:65};break;case"senior":t={min:65,max:100};break;case"all":t={min:0,max:100};break;default:t={min:18,max:65}}return this.natural(t)},m.prototype.birthday=function(e){var t=this.age(e),n=(new Date).getFullYear();if(e&&e.type){var r=new Date,i=new Date;r.setFullYear(n-t-1),i.setFullYear(n-t),e=d(e,{min:r,max:i})}else e=d(e,{year:n-t});return this.date(e)},m.prototype.cpf=function(e){e=d(e,{formatted:!0});var t=this.n(this.natural,9,{max:9}),n=2*t[8]+3*t[7]+4*t[6]+5*t[5]+6*t[4]+7*t[3]+8*t[2]+9*t[1]+10*t[0];(n=11-n%11)>=10&&(n=0);var r=2*n+3*t[8]+4*t[7]+5*t[6]+6*t[5]+7*t[4]+8*t[3]+9*t[2]+10*t[1]+11*t[0];(r=11-r%11)>=10&&(r=0);var i=""+t[0]+t[1]+t[2]+"."+t[3]+t[4]+t[5]+"."+t[6]+t[7]+t[8]+"-"+n+r;return e.formatted?i:i.replace(/\D/g,"")},m.prototype.cnpj=function(e){e=d(e,{formatted:!0});var t=this.n(this.natural,12,{max:12}),n=2*t[11]+3*t[10]+4*t[9]+5*t[8]+6*t[7]+7*t[6]+8*t[5]+9*t[4]+2*t[3]+3*t[2]+4*t[1]+5*t[0];(n=11-n%11)<2&&(n=0);var r=2*n+3*t[11]+4*t[10]+5*t[9]+6*t[8]+7*t[7]+8*t[6]+9*t[5]+2*t[4]+3*t[3]+4*t[2]+5*t[1]+6*t[0];(r=11-r%11)<2&&(r=0);var i=""+t[0]+t[1]+"."+t[2]+t[3]+t[4]+"."+t[5]+t[6]+t[7]+"/"+t[8]+t[9]+t[10]+t[11]+"-"+n+r;return e.formatted?i:i.replace(/\D/g,"")},m.prototype.first=function(e){return e=d(e,{gender:this.gender(),nationality:"en"}),this.pick(this.get("firstNames")[e.gender.toLowerCase()][e.nationality.toLowerCase()])},m.prototype.profession=function(e){return(e=d(e)).rank?this.pick(["Apprentice ","Junior ","Senior ","Lead "])+this.pick(this.get("profession")):this.pick(this.get("profession"))},m.prototype.company=function(){return this.pick(this.get("company"))},m.prototype.gender=function(e){return e=d(e,{extraGenders:[]}),this.pick(["Male","Female"].concat(e.extraGenders))},m.prototype.last=function(e){if("*"===(e=d(e,{nationality:"*"})).nationality){var t=[],n=this.get("lastNames");return Object.keys(n).forEach((function(e){t=t.concat(n[e])})),this.pick(t)}return this.pick(this.get("lastNames")[e.nationality.toLowerCase()])},m.prototype.israelId=function(){for(var e=this.string({pool:"0123456789",length:8}),t=0,n=0;n<e.length;n++){var r=e[n]*(n/2===parseInt(n/2)?1:2);r=this.pad(r,2).toString(),t+=r=parseInt(r[0])+parseInt(r[1])}return e+=(10-parseInt(t.toString().slice(-1))).toString().slice(-1)},m.prototype.mrz=function(e){var t,n,r,i,a=function(e){var t="<ABCDEFGHIJKLMNOPQRSTUVWXYXZ".split(""),n=[7,3,1],r=0;return"string"!==typeof e&&(e=e.toString()),e.split("").forEach((function(e,i){var a=t.indexOf(e);e=-1!==a?0===a?0:a+9:parseInt(e,10),r+=e*=n[i%n.length]})),r%10},o=this;return e=d(e,{first:this.first(),last:this.last(),passportNumber:this.integer({min:1e8,max:999999999}),dob:(t=o.birthday({type:"adult"}),[t.getFullYear().toString().substr(2),o.pad(t.getMonth()+1,2),o.pad(t.getDate(),2)].join("")),expiry:function(){var e=new Date;return[(e.getFullYear()+5).toString().substr(2),o.pad(e.getMonth()+1,2),o.pad(e.getDate(),2)].join("")}(),gender:"Female"===this.gender()?"F":"M",issuer:"GBR",nationality:"GBR"}),r=function(e){return new Array(e+1).join("<")},(i=["P<",(n=e).issuer,n.last.toUpperCase(),"<<",n.first.toUpperCase(),r(39-(n.last.length+n.first.length+2)),n.passportNumber,a(n.passportNumber),n.nationality,n.dob,a(n.dob),n.gender,n.expiry,a(n.expiry),r(14),a(r(14))].join(""))+a(i.substr(44,10)+i.substr(57,7)+i.substr(65,7))},m.prototype.name=function(e){e=d(e);var t,n=this.first(e),r=this.last(e);return t=e.middle?n+" "+this.first(e)+" "+r:e.middle_initial?n+" "+this.character({alpha:!0,casing:"upper"})+". "+r:n+" "+r,e.prefix&&(t=this.prefix(e)+" "+t),e.suffix&&(t=t+" "+this.suffix(e)),t},m.prototype.name_prefixes=function(e){var t=[{name:"Doctor",abbreviation:"Dr."}];return"male"!==(e=(e=e||"all").toLowerCase())&&"all"!==e||t.push({name:"Mister",abbreviation:"Mr."}),"female"!==e&&"all"!==e||(t.push({name:"Miss",abbreviation:"Miss"}),t.push({name:"Misses",abbreviation:"Mrs."})),t},m.prototype.prefix=function(e){return this.name_prefix(e)},m.prototype.name_prefix=function(e){return(e=d(e,{gender:"all"})).full?this.pick(this.name_prefixes(e.gender)).name:this.pick(this.name_prefixes(e.gender)).abbreviation},m.prototype.HIDN=function(){var e="";return e+=this.string({pool:"0123456789",length:6}),e+=this.string({pool:"ABCDEFGHIJKLMNOPQRSTUVWXYXZ",length:2})},m.prototype.ssn=function(e){var t="1234567890",n=(e=d(e,{ssnFour:!1,dashes:!0})).dashes?"-":"";return e.ssnFour?this.string({pool:t,length:4}):this.string({pool:t,length:3})+n+this.string({pool:t,length:2})+n+this.string({pool:t,length:4})},m.prototype.aadhar=function(e){var t="1234567890",n=(e=d(e,{onlyLastFour:!1,separatedByWhiteSpace:!0})).separatedByWhiteSpace?" ":"";return e.onlyLastFour?this.string({pool:t,length:4}):this.string({pool:t,length:4})+n+this.string({pool:t,length:4})+n+this.string({pool:t,length:4})},m.prototype.name_suffixes=function(){return[{name:"Doctor of Osteopathic Medicine",abbreviation:"D.O."},{name:"Doctor of Philosophy",abbreviation:"Ph.D."},{name:"Esquire",abbreviation:"Esq."},{name:"Junior",abbreviation:"Jr."},{name:"Juris Doctor",abbreviation:"J.D."},{name:"Master of Arts",abbreviation:"M.A."},{name:"Master of Business Administration",abbreviation:"M.B.A."},{name:"Master of Science",abbreviation:"M.S."},{name:"Medical Doctor",abbreviation:"M.D."},{name:"Senior",abbreviation:"Sr."},{name:"The Third",abbreviation:"III"},{name:"The Fourth",abbreviation:"IV"},{name:"Bachelor of Engineering",abbreviation:"B.E"},{name:"Bachelor of Technology",abbreviation:"B.TECH"}]},m.prototype.suffix=function(e){return this.name_suffix(e)},m.prototype.name_suffix=function(e){return(e=d(e)).full?this.pick(this.name_suffixes()).name:this.pick(this.name_suffixes()).abbreviation},m.prototype.nationalities=function(){return this.get("nationalities")},m.prototype.nationality=function(){return this.pick(this.nationalities()).name},m.prototype.android_id=function(){return"APA91"+this.string({pool:"0123456789abcefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",length:178})},m.prototype.apple_token=function(){return this.string({pool:"abcdef1234567890",length:64})},m.prototype.wp8_anid2=function(){return f(this.hash({length:32}))},m.prototype.wp7_anid=function(){return"A="+this.guid().replace(/-/g,"").toUpperCase()+"&E="+this.hash({length:3})+"&W="+this.integer({min:0,max:9})},m.prototype.bb_pin=function(){return this.hash({length:8})},m.prototype.avatar=function(e){var t={protocol:null,email:null,fileExtension:null,size:null,fallback:null,rating:null};if(e)if("string"===typeof e)t.email=e,e={};else{if("object"!==typeof e)return null;if("Array"===e.constructor)return null}else t.email=this.email(),e={};return(t=d(e,t)).email||(t.email=this.email()),t.protocol={http:"http",https:"https"}[t.protocol]?t.protocol+":":"",t.size=parseInt(t.size,0)?t.size:"",t.rating={g:"g",pg:"pg",r:"r",x:"x"}[t.rating]?t.rating:"",t.fallback={404:"404",mm:"mm",identicon:"identicon",monsterid:"monsterid",wavatar:"wavatar",retro:"retro",blank:"blank"}[t.fallback]?t.fallback:"",t.fileExtension={bmp:"bmp",gif:"gif",jpg:"jpg",png:"png"}[t.fileExtension]?t.fileExtension:"",t.protocol+"//www.gravatar.com/avatar/"+this.bimd5.md5(t.email)+(t.fileExtension?"."+t.fileExtension:"")+(t.size||t.rating||t.fallback?"?":"")+(t.size?"&s="+t.size.toString():"")+(t.rating?"&r="+t.rating:"")+(t.fallback?"&d="+t.fallback:"")},m.prototype.color=function(e){function t(e,t){return[e,e,e].join(t||"")}function n(e){var n=e?"rgba":"rgb",r=e?","+this.floating({min:g,max:h}):"";return n+"("+(a?t(this.natural({min:o,max:s}),","):this.natural({min:l,max:m})+","+this.natural({min:p,max:f})+","+this.natural({max:255}))+r+")"}function r(n,r,i){var d=i?"#":"",g="";return a?(g=t(this.pad(this.hex({min:o,max:s}),2)),"shorthex"===e.format&&(g=t(this.hex({min:0,max:15})))):g="shorthex"===e.format?this.pad(this.hex({min:Math.floor(c/16),max:Math.floor(u/16)}),1)+this.pad(this.hex({min:Math.floor(l/16),max:Math.floor(m/16)}),1)+this.pad(this.hex({min:Math.floor(p/16),max:Math.floor(f/16)}),1):void 0!==c||void 0!==u||void 0!==l||void 0!==m||void 0!==p||void 0!==f?this.pad(this.hex({min:c,max:u}),2)+this.pad(this.hex({min:l,max:m}),2)+this.pad(this.hex({min:p,max:f}),2):this.pad(this.hex({min:o,max:s}),2)+this.pad(this.hex({min:o,max:s}),2)+this.pad(this.hex({min:o,max:s}),2),d+g}var i,a=(e=d(e,{format:this.pick(["hex","shorthex","rgb","rgba","0x","name"]),grayscale:!1,casing:"lower",min:0,max:255,min_red:void 0,max_red:void 0,min_green:void 0,max_green:void 0,min_blue:void 0,max_blue:void 0,min_alpha:0,max_alpha:1})).grayscale,o=e.min,s=e.max,c=e.min_red,u=e.max_red,l=e.min_green,m=e.max_green,p=e.min_blue,f=e.max_blue,g=e.min_alpha,h=e.max_alpha;if(void 0===e.min_red&&(c=o),void 0===e.max_red&&(u=s),void 0===e.min_green&&(l=o),void 0===e.max_green&&(m=s),void 0===e.min_blue&&(p=o),void 0===e.max_blue&&(f=s),void 0===e.min_alpha&&(g=0),void 0===e.max_alpha&&(h=1),a&&0===o&&255===s&&void 0!==c&&void 0!==u&&(o=(c+l+p)/3,s=(u+m+f)/3),"hex"===e.format)i=r.call(this,2,6,!0);else if("shorthex"===e.format)i=r.call(this,1,3,!0);else if("rgb"===e.format)i=n.call(this,!1);else if("rgba"===e.format)i=n.call(this,!0);else{if("0x"!==e.format){if("name"===e.format)return this.pick(this.get("colorNames"));throw new RangeError('Invalid format provided. Please provide one of "hex", "shorthex", "rgb", "rgba", "0x" or "name".')}i="0x"+r.call(this,2,6)}return"upper"===e.casing&&(i=i.toUpperCase()),i},m.prototype.domain=function(e){return e=d(e),this.word()+"."+(e.tld||this.tld())},m.prototype.email=function(e){return e=d(e),this.word({length:e.length})+"@"+(e.domain||this.domain())},m.prototype.fbid=function(){return"10000"+this.string({pool:"1234567890",length:11})},m.prototype.google_analytics=function(){return"UA-"+this.pad(this.natural({max:999999}),6)+"-"+this.pad(this.natural({max:99}),2)},m.prototype.hashtag=function(){return"#"+this.word()},m.prototype.ip=function(){return this.natural({min:1,max:254})+"."+this.natural({max:255})+"."+this.natural({max:255})+"."+this.natural({min:1,max:254})},m.prototype.ipv6=function(){return this.n(this.hash,8,{length:4}).join(":")},m.prototype.klout=function(){return this.natural({min:1,max:99})},m.prototype.semver=function(e){e=d(e,{include_prerelease:!0});var t=this.pickone(["^","~","<",">","<=",">=","="]);e.range&&(t=e.range);var n="";return e.include_prerelease&&(n=this.weighted(["","-dev","-beta","-alpha"],[50,10,5,1])),t+this.rpg("3d10").join(".")+n},m.prototype.tlds=function(){return["com","org","edu","gov","co.uk","net","io","ac","ad","ae","af","ag","ai","al","am","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bm","bn","bo","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"]},m.prototype.tld=function(){return this.pick(this.tlds())},m.prototype.twitter=function(){return"@"+this.word()},m.prototype.url=function(e){var t=(e=d(e,{protocol:"http",domain:this.domain(e),domain_prefix:"",path:this.word(),extensions:[]})).extensions.length>0?"."+this.pick(e.extensions):"",n=e.domain_prefix?e.domain_prefix+"."+e.domain:e.domain;return e.protocol+"://"+n+"/"+e.path+t},m.prototype.port=function(){return this.integer({min:0,max:65535})},m.prototype.locale=function(e){return(e=d(e)).region?this.pick(this.get("locale_regions")):this.pick(this.get("locale_languages"))},m.prototype.locales=function(e){return(e=d(e)).region?this.get("locale_regions"):this.get("locale_languages")},m.prototype.loremPicsum=function(e){var t=(e=d(e,{width:500,height:500,greyscale:!1,blurred:!1})).greyscale?"g/":"",n=e.blurred?"/?blur":"/?random";return"https://picsum.photos/"+t+e.width+"/"+e.height+n},m.prototype.address=function(e){return e=d(e),this.natural({min:5,max:2e3})+" "+this.street(e)},m.prototype.altitude=function(e){return e=d(e,{fixed:5,min:0,max:8848}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},m.prototype.areacode=function(e){e=d(e,{parens:!0});var t=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:8}).toString()+this.natural({min:0,max:9}).toString();return e.parens?"("+t+")":t},m.prototype.city=function(){return this.capitalize(this.word({syllables:3}))},m.prototype.coordinates=function(e){return this.latitude(e)+", "+this.longitude(e)},m.prototype.countries=function(){return this.get("countries")},m.prototype.country=function(e){e=d(e);var t=this.pick(this.countries());return e.raw?t:e.full?t.name:t.abbreviation},m.prototype.depth=function(e){return e=d(e,{fixed:5,min:-10994,max:0}),this.floating({min:e.min,max:e.max,fixed:e.fixed})},m.prototype.geohash=function(e){return e=d(e,{length:7}),this.string({length:e.length,pool:"0123456789bcdefghjkmnpqrstuvwxyz"})},m.prototype.geojson=function(e){return this.latitude(e)+", "+this.longitude(e)+", "+this.altitude(e)},m.prototype.latitude=function(e){const[t,n,r]=["ddm","dms","dd"],i=(e=d(e,e&&e.format&&[t,n].includes(e.format.toLowerCase())?{min:0,max:89,fixed:4}:{fixed:5,min:-90,max:90,format:r})).format.toLowerCase();switch(i!==t&&i!==n||(p(e.min<0||e.min>89,"Chance: Min specified is out of range. Should be between 0 - 89"),p(e.max<0||e.max>89,"Chance: Max specified is out of range. Should be between 0 - 89"),p(e.fixed>4,"Chance: Fixed specified should be below or equal to 4")),i){case t:return this.integer({min:e.min,max:e.max})+"\xb0"+this.floating({min:0,max:59,fixed:e.fixed});case n:return this.integer({min:e.min,max:e.max})+"\xb0"+this.integer({min:0,max:59})+"\u2019"+this.floating({min:0,max:59,fixed:e.fixed})+"\u201d";case r:default:return this.floating({min:e.min,max:e.max,fixed:e.fixed})}},m.prototype.longitude=function(e){const[t,n,r]=["ddm","dms","dd"],i=(e=d(e,e&&e.format&&[t,n].includes(e.format.toLowerCase())?{min:0,max:179,fixed:4}:{fixed:5,min:-180,max:180,format:r})).format.toLowerCase();switch(i!==t&&i!==n||(p(e.min<0||e.min>179,"Chance: Min specified is out of range. Should be between 0 - 179"),p(e.max<0||e.max>179,"Chance: Max specified is out of range. Should be between 0 - 179"),p(e.fixed>4,"Chance: Fixed specified should be below or equal to 4")),i){case t:return this.integer({min:e.min,max:e.max})+"\xb0"+this.floating({min:0,max:59.9999,fixed:e.fixed});case n:return this.integer({min:e.min,max:e.max})+"\xb0"+this.integer({min:0,max:59})+"\u2019"+this.floating({min:0,max:59.9999,fixed:e.fixed})+"\u201d";case r:default:return this.floating({min:e.min,max:e.max,fixed:e.fixed})}},m.prototype.phone=function(e){var t,n,r=this,i=function(e){var t=[];return e.sections.forEach((function(e){t.push(r.string({pool:"0123456789",length:e}))})),e.area+t.join(" ")};switch((e=d(e,{formatted:!0,country:"us",mobile:!1})).formatted||(e.parens=!1),e.country){case"fr":e.mobile?(t=this.pick(["06","07"])+r.string({pool:"0123456789",length:8}),n=e.formatted?t.match(/../g).join(" "):t):(t=this.pick(["01"+this.pick(["30","34","39","40","41","42","43","44","45","46","47","48","49","53","55","56","58","60","64","69","70","72","73","74","75","76","77","78","79","80","81","82","83"])+r.string({pool:"0123456789",length:6}),"02"+this.pick(["14","18","22","23","28","29","30","31","32","33","34","35","36","37","38","40","41","43","44","45","46","47","48","49","50","51","52","53","54","56","57","61","62","69","72","76","77","78","85","90","96","97","98","99"])+r.string({pool:"0123456789",length:6}),"03"+this.pick(["10","20","21","22","23","24","25","26","27","28","29","39","44","45","51","52","54","55","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","80","81","82","83","84","85","86","87","88","89","90"])+r.string({pool:"0123456789",length:6}),"04"+this.pick(["11","13","15","20","22","26","27","30","32","34","37","42","43","44","50","56","57","63","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","88","89","90","91","92","93","94","95","97","98"])+r.string({pool:"0123456789",length:6}),"05"+this.pick(["08","16","17","19","24","31","32","33","34","35","40","45","46","47","49","53","55","56","57","58","59","61","62","63","64","65","67","79","81","82","86","87","90","94"])+r.string({pool:"0123456789",length:6}),"09"+r.string({pool:"0123456789",length:8})]),n=e.formatted?t.match(/../g).join(" "):t);break;case"uk":e.mobile?(t=this.pick([{area:"07"+this.pick(["4","5","7","8","9"]),sections:[2,6]},{area:"07624 ",sections:[6]}]),n=e.formatted?i(t):i(t).replace(" ","")):(t=this.pick([{area:"01"+this.character({pool:"234569"})+"1 ",sections:[3,4]},{area:"020 "+this.character({pool:"378"}),sections:[3,4]},{area:"023 "+this.character({pool:"89"}),sections:[3,4]},{area:"024 7",sections:[3,4]},{area:"028 "+this.pick(["25","28","37","71","82","90","92","95"]),sections:[2,4]},{area:"012"+this.pick(["04","08","54","76","97","98"])+" ",sections:[6]},{area:"013"+this.pick(["63","64","84","86"])+" ",sections:[6]},{area:"014"+this.pick(["04","20","60","61","80","88"])+" ",sections:[6]},{area:"015"+this.pick(["24","27","62","66"])+" ",sections:[6]},{area:"016"+this.pick(["06","29","35","47","59","95"])+" ",sections:[6]},{area:"017"+this.pick(["26","44","50","68"])+" ",sections:[6]},{area:"018"+this.pick(["27","37","84","97"])+" ",sections:[6]},{area:"019"+this.pick(["00","05","35","46","49","63","95"])+" ",sections:[6]}]),n=e.formatted?i(t):i(t).replace(" ","","g"));break;case"za":e.mobile?(t=this.pick(["060"+this.pick(["3","4","5","6","7","8","9"])+r.string({pool:"0123456789",length:6}),"061"+this.pick(["0","1","2","3","4","5","8"])+r.string({pool:"0123456789",length:6}),"06"+r.string({pool:"0123456789",length:7}),"071"+this.pick(["0","1","2","3","4","5","6","7","8","9"])+r.string({pool:"0123456789",length:6}),"07"+this.pick(["2","3","4","6","7","8","9"])+r.string({pool:"0123456789",length:7}),"08"+this.pick(["0","1","2","3","4","5"])+r.string({pool:"0123456789",length:7})]),n=e.formatted||t):(t=this.pick(["01"+this.pick(["0","1","2","3","4","5","6","7","8"])+r.string({pool:"0123456789",length:7}),"02"+this.pick(["1","2","3","4","7","8"])+r.string({pool:"0123456789",length:7}),"03"+this.pick(["1","2","3","5","6","9"])+r.string({pool:"0123456789",length:7}),"04"+this.pick(["1","2","3","4","5","6","7","8","9"])+r.string({pool:"0123456789",length:7}),"05"+this.pick(["1","3","4","6","7","8"])+r.string({pool:"0123456789",length:7})]),n=e.formatted||t);break;case"us":var a=this.areacode(e).toString(),o=this.natural({min:2,max:9}).toString()+this.natural({min:0,max:9}).toString()+this.natural({min:0,max:9}).toString(),s=this.natural({min:1e3,max:9999}).toString();n=e.formatted?a+" "+o+"-"+s:a+o+s;break;case"br":var c,u=this.pick(["11","12","13","14","15","16","17","18","19","21","22","24","27","28","31","32","33","34","35","37","38","41","42","43","44","45","46","47","48","49","51","53","54","55","61","62","63","64","65","66","67","68","69","71","73","74","75","77","79","81","82","83","84","85","86","87","88","89","91","92","93","94","95","96","97","98","99"]);c=e.mobile?"9"+r.string({pool:"0123456789",length:4}):this.natural({min:2e3,max:5999}).toString();var l=r.string({pool:"0123456789",length:4});n=e.formatted?"("+u+") "+c+"-"+l:u+c+l}return n},m.prototype.postal=function(){return this.character({pool:"XVTSRPNKLMHJGECBA"})+this.natural({max:9})+this.character({alpha:!0,casing:"upper"})+" "+(this.natural({max:9})+this.character({alpha:!0,casing:"upper"})+this.natural({max:9}))},m.prototype.postcode=function(){return this.pick(this.get("postcodeAreas")).code+this.natural({max:9})+(this.bool()?this.character({alpha:!0,casing:"upper"}):"")+" "+(this.natural({max:9})+(this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})))},m.prototype.counties=function(e){return e=d(e,{country:"uk"}),this.get("counties")[e.country.toLowerCase()]},m.prototype.county=function(e){return this.pick(this.counties(e)).name},m.prototype.provinces=function(e){return e=d(e,{country:"ca"}),this.get("provinces")[e.country.toLowerCase()]},m.prototype.province=function(e){return e&&e.full?this.pick(this.provinces(e)).name:this.pick(this.provinces(e)).abbreviation},m.prototype.state=function(e){return e&&e.full?this.pick(this.states(e)).name:this.pick(this.states(e)).abbreviation},m.prototype.states=function(e){var t;switch((e=d(e,{country:"us",us_states_and_dc:!0})).country.toLowerCase()){case"us":var n=this.get("us_states_and_dc"),r=this.get("territories"),i=this.get("armed_forces");t=[],e.us_states_and_dc&&(t=t.concat(n)),e.territories&&(t=t.concat(r)),e.armed_forces&&(t=t.concat(i));break;case"it":case"mx":t=this.get("country_regions")[e.country.toLowerCase()];break;case"uk":t=this.get("counties")[e.country.toLowerCase()]}return t},m.prototype.street=function(e){var t;switch((e=d(e,{country:"us",syllables:2})).country.toLowerCase()){case"us":t=this.word({syllables:e.syllables}),t=this.capitalize(t),t+=" ",t+=e.short_suffix?this.street_suffix(e).abbreviation:this.street_suffix(e).name;break;case"it":t=this.word({syllables:e.syllables}),t=this.capitalize(t),t=(e.short_suffix?this.street_suffix(e).abbreviation:this.street_suffix(e).name)+" "+t}return t},m.prototype.street_suffix=function(e){return e=d(e,{country:"us"}),this.pick(this.street_suffixes(e))},m.prototype.street_suffixes=function(e){return e=d(e,{country:"us"}),this.get("street_suffixes")[e.country.toLowerCase()]},m.prototype.zip=function(e){var t=this.n(this.natural,5,{max:9});return e&&!0===e.plusfour&&(t.push("-"),t=t.concat(this.n(this.natural,4,{max:9}))),t.join("")},m.prototype.ampm=function(){return this.bool()?"am":"pm"},m.prototype.date=function(e){var t,n;if(e&&(e.min||e.max)){var r="undefined"!==typeof(e=d(e,{american:!0,string:!1})).min?e.min.getTime():1,i="undefined"!==typeof e.max?e.max.getTime():864e13;n=new Date(this.integer({min:r,max:i}))}else{var a=this.month({raw:!0}),o=a.days;e&&e.month&&(o=this.get("months")[(e.month%12+12)%12].days),e=d(e,{year:parseInt(this.year(),10),month:a.numeric-1,day:this.natural({min:1,max:o}),hour:this.hour({twentyfour:!0}),minute:this.minute(),second:this.second(),millisecond:this.millisecond(),american:!0,string:!1}),n=new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond)}return t=e.american?n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear():n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear(),e.string?t:n},m.prototype.hammertime=function(e){return this.date(e).getTime()},m.prototype.hour=function(e){return p((e=d(e,{min:e&&e.twentyfour?0:1,max:e&&e.twentyfour?23:12})).min<0,"Chance: Min cannot be less than 0."),p(e.twentyfour&&e.max>23,"Chance: Max cannot be greater than 23 for twentyfour option."),p(!e.twentyfour&&e.max>12,"Chance: Max cannot be greater than 12."),p(e.min>e.max,"Chance: Min cannot be greater than Max."),this.natural({min:e.min,max:e.max})},m.prototype.millisecond=function(){return this.natural({max:999})},m.prototype.minute=m.prototype.second=function(e){return p((e=d(e,{min:0,max:59})).min<0,"Chance: Min cannot be less than 0."),p(e.max>59,"Chance: Max cannot be greater than 59."),p(e.min>e.max,"Chance: Min cannot be greater than Max."),this.natural({min:e.min,max:e.max})},m.prototype.month=function(e){p((e=d(e,{min:1,max:12})).min<1,"Chance: Min cannot be less than 1."),p(e.max>12,"Chance: Max cannot be greater than 12."),p(e.min>e.max,"Chance: Min cannot be greater than Max.");var t=this.pick(this.months().slice(e.min-1,e.max));return e.raw?t:t.name},m.prototype.months=function(){return this.get("months")},m.prototype.second=function(){return this.natural({max:59})},m.prototype.timestamp=function(){return this.natural({min:1,max:parseInt((new Date).getTime()/1e3,10)})},m.prototype.weekday=function(e){var t=["Monday","Tuesday","Wednesday","Thursday","Friday"];return(e=d(e,{weekday_only:!1})).weekday_only||(t.push("Saturday"),t.push("Sunday")),this.pickone(t)},m.prototype.year=function(e){return(e=d(e,{min:(new Date).getFullYear()})).max="undefined"!==typeof e.max?e.max:e.min+100,this.natural(e).toString()},m.prototype.cc=function(e){var t,n,r;return n=(t=(e=d(e)).type?this.cc_type({name:e.type,raw:!0}):this.cc_type({raw:!0})).prefix.split(""),r=t.length-t.prefix.length-1,(n=n.concat(this.n(this.integer,r,{min:0,max:9}))).push(this.luhn_calculate(n.join(""))),n.join("")},m.prototype.cc_types=function(){return this.get("cc_types")},m.prototype.cc_type=function(e){e=d(e);var t=this.cc_types(),n=null;if(e.name){for(var r=0;r<t.length;r++)if(t[r].name===e.name||t[r].short_name===e.name){n=t[r];break}if(null===n)throw new RangeError("Chance: Credit card type '"+e.name+"' is not supported")}else n=this.pick(t);return e.raw?n:n.name},m.prototype.currency_types=function(){return this.get("currency_types")},m.prototype.currency=function(){return this.pick(this.currency_types())},m.prototype.timezones=function(){return this.get("timezones")},m.prototype.timezone=function(){return this.pick(this.timezones())},m.prototype.currency_pair=function(e){var t=this.unique(this.currency,2,{comparator:function(e,t){return e.reduce((function(e,n){return e||n.code===t.code}),!1)}});return e?t[0].code+"/"+t[1].code:t},m.prototype.dollar=function(e){e=d(e,{max:1e4,min:0});var t=this.floating({min:e.min,max:e.max,fixed:2}).toString(),n=t.split(".")[1];return void 0===n?t+=".00":n.length<2&&(t+="0"),t<0?"-$"+t.replace("-",""):"$"+t},m.prototype.euro=function(e){return Number(this.dollar(e).replace("$","")).toLocaleString()+"\u20ac"},m.prototype.exp=function(e){e=d(e);var t={};return t.year=this.exp_year(),t.year===(new Date).getFullYear().toString()?t.month=this.exp_month({future:!0}):t.month=this.exp_month(),e.raw?t:t.month+"/"+t.year},m.prototype.exp_month=function(e){e=d(e);var t,n,r=(new Date).getMonth()+1;if(e.future&&12!==r)do{t=this.month({raw:!0}).numeric,n=parseInt(t,10)}while(n<=r);else t=this.month({raw:!0}).numeric;return t},m.prototype.exp_year=function(){var e=(new Date).getMonth()+1,t=(new Date).getFullYear();return this.year({min:12===e?t+1:t,max:t+10})},m.prototype.vat=function(e){switch((e=d(e,{country:"it"})).country.toLowerCase()){case"it":return this.it_vat()}},m.prototype.iban=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ";return this.string({length:2,pool:e})+this.pad(this.integer({min:0,max:99}),2)+this.string({length:4,pool:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"})+this.pad(this.natural(),this.natural({min:6,max:26}))},m.prototype.it_vat=function(){var e=this.natural({min:1,max:18e5});return(e=this.pad(e,7)+this.pad(this.pick(this.provinces({country:"it"})).code,3))+this.luhn_calculate(e)},m.prototype.cf=function(e){var t=(e=e||{}).gender?e.gender:this.gender(),n=e.first?e.first:this.first({gender:t,nationality:"it"}),r=e.last?e.last:this.last({nationality:"it"}),i=e.birthday?e.birthday:this.birthday(),a=e.city?e.city:this.pickone(["A","B","C","D","E","F","G","H","I","L","M","Z"])+this.pad(this.natural({max:999}),3),o=[],s=function(e,t){var n,r=[];return e.length<3?r=e.split("").concat("XXX".split("")).splice(0,3):((n=e.toUpperCase().split("").map((function(e){return-1!=="BCDFGHJKLMNPRSTVWZ".indexOf(e)?e:void 0})).join("")).length>3&&(n=t?n.substr(0,3):n[0]+n.substr(2,2)),n.length<3&&(r=n,n=e.toUpperCase().split("").map((function(e){return-1!=="AEIOU".indexOf(e)?e:void 0})).join("").substr(0,3-r.length)),r+=n),r};return o=o.concat(s(r,!0),s(n),function(e,t,n){return e.getFullYear().toString().substr(2)+["A","B","C","D","E","H","L","M","P","R","S","T"][e.getMonth()]+n.pad(e.getDate()+("female"===t.toLowerCase()?40:0),2)}(i,t,this),a.toUpperCase().split("")).join(""),(o+=function(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",n="ABCDEFGHIJABCDEFGHIJKLMNOPQRSTUVWXYZ",r="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=0,a=0;a<15;a++)i+=a%2!==0?r.indexOf(n[t.indexOf(e[a])]):"BAKPLCQDREVOSFTGUHMINJWZYX".indexOf(n[t.indexOf(e[a])]);return r[i%26]}(o.toUpperCase())).toUpperCase()},m.prototype.pl_pesel=function(){for(var e=this.natural({min:1,max:9999999999}),t=this.pad(e,10).split(""),n=0;n<t.length;n++)t[n]=parseInt(t[n]);var r=(1*t[0]+3*t[1]+7*t[2]+9*t[3]+1*t[4]+3*t[5]+7*t[6]+9*t[7]+1*t[8]+3*t[9])%10;return 0!==r&&(r=10-r),t.join("")+r},m.prototype.pl_nip=function(){for(var e=this.natural({min:1,max:999999999}),t=this.pad(e,9).split(""),n=0;n<t.length;n++)t[n]=parseInt(t[n]);var r=(6*t[0]+5*t[1]+7*t[2]+2*t[3]+3*t[4]+4*t[5]+5*t[6]+6*t[7]+7*t[8])%11;return 10===r?this.pl_nip():t.join("")+r},m.prototype.pl_regon=function(){for(var e=this.natural({min:1,max:99999999}),t=this.pad(e,8).split(""),n=0;n<t.length;n++)t[n]=parseInt(t[n]);var r=(8*t[0]+9*t[1]+2*t[2]+3*t[3]+4*t[4]+5*t[5]+6*t[6]+7*t[7])%11;return 10===r&&(r=0),t.join("")+r},m.prototype.note=function(e){e=d(e,{notes:"flatKey"});var t={naturals:["C","D","E","F","G","A","B"],flats:["D\u266d","E\u266d","G\u266d","A\u266d","B\u266d"],sharps:["C\u266f","D\u266f","F\u266f","G\u266f","A\u266f"]};return t.all=t.naturals.concat(t.flats.concat(t.sharps)),t.flatKey=t.naturals.concat(t.flats),t.sharpKey=t.naturals.concat(t.sharps),this.pickone(t[e.notes])},m.prototype.midi_note=function(e){return e=d(e,{min:0,max:127}),this.integer({min:e.min,max:e.max})},m.prototype.chord_quality=function(e){var t=["maj","min","aug","dim"];return(e=d(e,{jazz:!0})).jazz&&(t=["maj7","min7","7","sus","dim","\xf8"]),this.pickone(t)},m.prototype.chord=function(e){return e=d(e),this.note(e)+this.chord_quality(e)},m.prototype.tempo=function(e){return e=d(e,{min:40,max:320}),this.integer({min:e.min,max:e.max})},m.prototype.coin=function(){return this.bool()?"heads":"tails"},m.prototype.d4=b({min:1,max:4}),m.prototype.d6=b({min:1,max:6}),m.prototype.d8=b({min:1,max:8}),m.prototype.d10=b({min:1,max:10}),m.prototype.d12=b({min:1,max:12}),m.prototype.d20=b({min:1,max:20}),m.prototype.d30=b({min:1,max:30}),m.prototype.d100=b({min:1,max:100}),m.prototype.rpg=function(e,t){if(t=d(t),e){var n=e.toLowerCase().split("d"),r=[];if(2!==n.length||!parseInt(n[0],10)||!parseInt(n[1],10))throw new Error("Chance: Invalid format provided. Please provide #d# where the first # is the number of dice to roll, the second # is the max of each die");for(var i=n[0];i>0;i--)r[i-1]=this.natural({min:1,max:n[1]});return"undefined"!==typeof t.sum&&t.sum?r.reduce((function(e,t){return e+t})):r}throw new RangeError("Chance: A type of die roll must be included")},m.prototype.guid=function(e){e=d(e,{version:5});var t="abcdef1234567890";return this.string({pool:t,length:8})+"-"+this.string({pool:t,length:4})+"-"+e.version+this.string({pool:t,length:3})+"-"+this.string({pool:"ab89",length:1})+this.string({pool:t,length:3})+"-"+this.string({pool:t,length:12})},m.prototype.hash=function(e){var t="upper"===(e=d(e,{length:40,casing:"lower"})).casing?c.toUpperCase():c;return this.string({pool:t,length:e.length})},m.prototype.luhn_check=function(e){var t=e.toString();return+t.substring(t.length-1)===this.luhn_calculate(+t.substring(0,t.length-1))},m.prototype.luhn_calculate=function(e){for(var t,n=e.toString().split("").reverse(),r=0,i=0,a=n.length;a>i;++i)t=+n[i],i%2===0&&(t*=2)>9&&(t-=9),r+=t;return 9*r%10},m.prototype.md5=function(e){var t={str:"",key:null,raw:!1};if(e)if("string"===typeof e)t.str=e,e={};else{if("object"!==typeof e)return null;if("Array"===e.constructor)return null}else t.str=this.string(),e={};if(!(t=d(e,t)).str)throw new Error("A parameter is required to return an md5 hash.");return this.bimd5.md5(t.str,t.key,t.raw)},m.prototype.file=function(e){var t,n=e||{},r="fileExtension",i=Object.keys(this.get("fileExtension"));if(t=this.word({length:n.length}),n.extension)return t+"."+n.extension;if(n.extensions){if(Array.isArray(n.extensions))return t+"."+this.pickone(n.extensions);if(n.extensions.constructor===Object){var a=n.extensions,o=Object.keys(a);return t+"."+this.pickone(a[this.pickone(o)])}throw new Error("Chance: Extensions must be an Array or Object")}if(n.fileType){var s=n.fileType;if(-1!==i.indexOf(s))return t+"."+this.pickone(this.get(r)[s]);throw new RangeError("Chance: Expect file type value to be 'raster', 'vector', '3d' or 'document'")}return t+"."+this.pickone(this.get(r)[this.pickone(i)])};var v={firstNames:{male:{en:["James","John","Robert","Michael","William","David","Richard","Joseph","Charles","Thomas","Christopher","Daniel","Matthew","George","Donald","Anthony","Paul","Mark","Edward","Steven","Kenneth","Andrew","Brian","Joshua","Kevin","Ronald","Timothy","Jason","Jeffrey","Frank","Gary","Ryan","Nicholas","Eric","Stephen","Jacob","Larry","Jonathan","Scott","Raymond","Justin","Brandon","Gregory","Samuel","Benjamin","Patrick","Jack","Henry","Walter","Dennis","Jerry","Alexander","Peter","Tyler","Douglas","Harold","Aaron","Jose","Adam","Arthur","Zachary","Carl","Nathan","Albert","Kyle","Lawrence","Joe","Willie","Gerald","Roger","Keith","Jeremy","Terry","Harry","Ralph","Sean","Jesse","Roy","Louis","Billy","Austin","Bruce","Eugene","Christian","Bryan","Wayne","Russell","Howard","Fred","Ethan","Jordan","Philip","Alan","Juan","Randy","Vincent","Bobby","Dylan","Johnny","Phillip","Victor","Clarence","Ernest","Martin","Craig","Stanley","Shawn","Travis","Bradley","Leonard","Earl","Gabriel","Jimmy","Francis","Todd","Noah","Danny","Dale","Cody","Carlos","Allen","Frederick","Logan","Curtis","Alex","Joel","Luis","Norman","Marvin","Glenn","Tony","Nathaniel","Rodney","Melvin","Alfred","Steve","Cameron","Chad","Edwin","Caleb","Evan","Antonio","Lee","Herbert","Jeffery","Isaac","Derek","Ricky","Marcus","Theodore","Elijah","Luke","Jesus","Eddie","Troy","Mike","Dustin","Ray","Adrian","Bernard","Leroy","Angel","Randall","Wesley","Ian","Jared","Mason","Hunter","Calvin","Oscar","Clifford","Jay","Shane","Ronnie","Barry","Lucas","Corey","Manuel","Leo","Tommy","Warren","Jackson","Isaiah","Connor","Don","Dean","Jon","Julian","Miguel","Bill","Lloyd","Charlie","Mitchell","Leon","Jerome","Darrell","Jeremiah","Alvin","Brett","Seth","Floyd","Jim","Blake","Micheal","Gordon","Trevor","Lewis","Erik","Edgar","Vernon","Devin","Gavin","Jayden","Chris","Clyde","Tom","Derrick","Mario","Brent","Marc","Herman","Chase","Dominic","Ricardo","Franklin","Maurice","Max","Aiden","Owen","Lester","Gilbert","Elmer","Gene","Francisco","Glen","Cory","Garrett","Clayton","Sam","Jorge","Chester","Alejandro","Jeff","Harvey","Milton","Cole","Ivan","Andre","Duane","Landon"],it:["Adolfo","Alberto","Aldo","Alessandro","Alessio","Alfredo","Alvaro","Andrea","Angelo","Angiolo","Antonino","Antonio","Attilio","Benito","Bernardo","Bruno","Carlo","Cesare","Christian","Claudio","Corrado","Cosimo","Cristian","Cristiano","Daniele","Dario","David","Davide","Diego","Dino","Domenico","Duccio","Edoardo","Elia","Elio","Emanuele","Emiliano","Emilio","Enrico","Enzo","Ettore","Fabio","Fabrizio","Federico","Ferdinando","Fernando","Filippo","Francesco","Franco","Gabriele","Giacomo","Giampaolo","Giampiero","Giancarlo","Gianfranco","Gianluca","Gianmarco","Gianni","Gino","Giorgio","Giovanni","Giuliano","Giulio","Giuseppe","Graziano","Gregorio","Guido","Iacopo","Jacopo","Lapo","Leonardo","Lorenzo","Luca","Luciano","Luigi","Manuel","Marcello","Marco","Marino","Mario","Massimiliano","Massimo","Matteo","Mattia","Maurizio","Mauro","Michele","Mirko","Mohamed","Nello","Neri","Niccol\xf2","Nicola","Osvaldo","Otello","Paolo","Pier Luigi","Piero","Pietro","Raffaele","Remo","Renato","Renzo","Riccardo","Roberto","Rolando","Romano","Salvatore","Samuele","Sandro","Sergio","Silvano","Simone","Stefano","Thomas","Tommaso","Ubaldo","Ugo","Umberto","Valerio","Valter","Vasco","Vincenzo","Vittorio"],nl:["Aaron","Abel","Adam","Adriaan","Albert","Alexander","Ali","Arjen","Arno","Bart","Bas","Bastiaan","Benjamin","Bob","Boris","Bram","Brent","Cas","Casper","Chris","Christiaan","Cornelis","Daan","Daley","Damian","Dani","Daniel","Dani\xebl","David","Dean","Dirk","Dylan","Egbert","Elijah","Erik","Erwin","Evert","Ezra","Fabian","Fedde","Finn","Florian","Floris","Frank","Frans","Frederik","Freek","Geert","Gerard","Gerben","Gerrit","Gijs","Guus","Hans","Hendrik","Henk","Herman","Hidde","Hugo","Jaap","Jan Jaap","Jan-Willem","Jack","Jacob","Jan","Jason","Jasper","Jayden","Jelle","Jelte","Jens","Jeroen","Jesse","Jim","Job","Joep","Johannes","John","Jonathan","Joris","Joshua","Jo\xebl","Julian","Kees","Kevin","Koen","Lars","Laurens","Leendert","Lennard","Lodewijk","Luc","Luca","Lucas","Lukas","Luuk","Maarten","Marcus","Martijn","Martin","Matthijs","Maurits","Max","Mees","Melle","Mick","Mika","Milan","Mohamed","Mohammed","Morris","Muhammed","Nathan","Nick","Nico","Niek","Niels","Noah","Noud","Olivier","Oscar","Owen","Paul","Pepijn","Peter","Pieter","Pim","Quinten","Reinier","Rens","Robin","Ruben","Sam","Samuel","Sander","Sebastiaan","Sem","Sep","Sepp","Siem","Simon","Stan","Stef","Steven","Stijn","Sven","Teun","Thijmen","Thijs","Thomas","Tijn","Tim","Timo","Tobias","Tom","Victor","Vince","Willem","Wim","Wouter","Yusuf"],fr:["Aaron","Abdon","Abel","Ab\xe9lard","Abelin","Abondance","Abraham","Absalon","Acace","Achaire","Achille","Adalard","Adalbald","Adalb\xe9ron","Adalbert","Adalric","Adam","Adegrin","Adel","Adelin","Andelin","Adelphe","Adam","Ad\xe9odat","Adh\xe9mar","Adjutor","Adolphe","Adonis","Adon","Adrien","Agapet","Agathange","Agathon","Agilbert","Ag\xe9nor","Agnan","Aignan","Agrippin","Aimable","Aim\xe9","Alain","Alban","Albin","Aubin","Alb\xe9ric","Albert","Albertet","Alcibiade","Alcide","Alc\xe9e","Alcime","Aldonce","Aldric","Ald\xe9ric","Aleaume","Alexandre","Alexis","Alix","Alliaume","Aleaume","Almine","Almire","Alo\xefs","Alph\xe9e","Alphonse","Alpinien","Alver\xe8de","Amalric","Amaury","Amandin","Amant","Ambroise","Am\xe9d\xe9e","Am\xe9lien","Amiel","Amour","Ana\xebl","Anastase","Anatole","Ancelin","And\xe9ol","Andoche","Andr\xe9","Andoche","Ange","Angelin","Angilbe","Anglebert","Angoustan","Anicet","Anne","Annibal","Ansbert","Anselme","Anthelme","Antheaume","Anthime","Antide","Antoine","Antonius","Antonin","Apollinaire","Apollon","Aquilin","Arcade","Archambaud","Archambeau","Archange","Archibald","Arian","Ariel","Ariste","Aristide","Armand","Armel","Armin","Arnould","Arnaud","Arolde","Ars\xe8ne","Arsino\xe9","Arthaud","Arth\xe8me","Arthur","Ascelin","Athanase","Aubry","Audebert","Audouin","Audran","Audric","Auguste","Augustin","Aur\xe8le","Aur\xe9lien","Aurian","Auxence","Axel","Aymard","Aymeric","Aymon","Aymond","Balthazar","Baptiste","Barnab\xe9","Barth\xe9lemy","Bartim\xe9e","Basile","Bastien","Baudouin","B\xe9nigne","Benjamin","Beno\xeet","B\xe9renger","B\xe9rard","Bernard","Bertrand","Blaise","Bon","Boniface","Bouchard","Brice","Brieuc","Bruno","Brunon","Calixte","Calliste","Cam\xe9lien","Camille","Camillien","Candide","Caribert","Carloman","Cassandre","Cassien","C\xe9dric","C\xe9leste","C\xe9lestin","C\xe9lien","C\xe9saire","C\xe9sar","Charles","Charlemagne","Childebert","Chilp\xe9ric","Chr\xe9tien","Christian","Christodule","Christophe","Chrysostome","Clarence","Claude","Claudien","Cl\xe9andre","Cl\xe9ment","Clotaire","C\xf4me","Constance","Constant","Constantin","Corentin","Cyprien","Cyriaque","Cyrille","Cyril","Damien","Daniel","David","Delphin","Denis","D\xe9sir\xe9","Didier","Dieudonn\xe9","Dimitri","Dominique","Dorian","Doroth\xe9e","Edgard","Edmond","\xc9douard","\xc9leuth\xe8re","\xc9lie","\xc9lis\xe9e","\xc9meric","\xc9mile","\xc9milien","Emmanuel","Enguerrand","\xc9piphane","\xc9ric","Esprit","Ernest","\xc9tienne","Eubert","Eudes","Eudoxe","Eug\xe8ne","Eus\xe8be","Eustache","\xc9variste","\xc9vrard","Fabien","Fabrice","Falba","F\xe9licit\xe9","F\xe9lix","Ferdinand","Fiacre","Fid\xe8le","Firmin","Flavien","Flodoard","Florent","Florentin","Florestan","Florian","Fortun\xe9","Foulques","Francisque","Fran\xe7ois","Fran\xe7ais","Franciscus","Francs","Fr\xe9d\xe9ric","Fulbert","Fulcran","Fulgence","Gabin","Gabriel","Ga\xebl","Garnier","Gaston","Gaspard","Gatien","Gaud","Gautier","G\xe9d\xe9on","Geoffroy","Georges","G\xe9raud","G\xe9rard","Gerbert","Germain","Gervais","Ghislain","Gilbert","Gilles","Girart","Gislebert","Gondebaud","Gonthier","Gontran","Gonzague","Gr\xe9goire","Gu\xe9rin","Gui","Guillaume","Gustave","Guy","Guyot","Hardouin","Hector","H\xe9delin","H\xe9lier","Henri","Herbert","Herluin","Herv\xe9","Hilaire","Hildebert","Hincmar","Hippolyte","Honor\xe9","Hubert","Hugues","Innocent","Isabeau","Isidore","Jacques","Japhet","Jason","Jean","Jeannel","Jeannot","J\xe9r\xe9mie","J\xe9r\xf4me","Joachim","Joanny","Job","Jocelyn","Jo\xebl","Johan","Jonas","Jonathan","Joseph","Josse","Josselin","Jourdain","Jude","Judica\xebl","Jules","Julien","Juste","Justin","Lambert","Landry","Laurent","Lazare","L\xe9andre","L\xe9on","L\xe9onard","L\xe9opold","Leu","Loup","Leufroy","Lib\xe8re","Li\xe9tald","Lionel","Lo\xefc","Longin","Lorrain","Lorraine","Lothaire","Louis","Loup","Luc","Lucas","Lucien","Ludolphe","Ludovic","Macaire","Malo","Mamert","Manass\xe9","Marc","Marceau","Marcel","Marcelin","Marius","Marseille","Martial","Martin","Mathurin","Matthias","Mathias","Matthieu","Maugis","Maurice","Mauricet","Maxence","Maxime","Maximilien","Mayeul","M\xe9d\xe9ric","Melchior","Mence","Merlin","M\xe9rov\xe9e","Micha\xebl","Michel","Mo\xefse","Morgan","Nathan","Nathana\xebl","Narcisse","N\xe9h\xe9mie","Nestor","Nestor","Nic\xe9phore","Nicolas","No\xe9","No\xebl","Norbert","Normand","Normands","Octave","Odilon","Odon","Oger","Olivier","Oury","Pac\xf4me","Pal\xe9mon","Parfait","Pascal","Paterne","Patrice","Paul","P\xe9pin","Perceval","Phil\xe9mon","Philibert","Philippe","Philoth\xe9e","Pie","Pierre","Pierrick","Prosper","Quentin","Raoul","Rapha\xebl","Raymond","R\xe9gis","R\xe9jean","R\xe9mi","Renaud","Ren\xe9","Reybaud","Richard","Robert","Roch","Rodolphe","Rodrigue","Roger","Roland","Romain","Romuald","Rom\xe9o","Rome","Ronan","Roselin","Salomon","Samuel","Savin","Savinien","Scholastique","S\xe9bastien","S\xe9raphin","Serge","S\xe9verin","Sidoine","Sigebert","Sigismond","Silv\xe8re","Simon","Sim\xe9on","Sixte","Stanislas","St\xe9phane","Stephan","Sylvain","Sylvestre","Tancr\xe8de","Tanguy","Taurin","Th\xe9odore","Th\xe9odose","Th\xe9ophile","Th\xe9ophraste","Thibault","Thibert","Thierry","Thomas","Timol\xe9on","Timoth\xe9e","Titien","Tonnin","Toussaint","Trajan","Tristan","Turold","Tim","Ulysse","Urbain","Valentin","Val\xe8re","Val\xe9ry","Venance","Venant","Venceslas","Vianney","Victor","Victorien","Victorin","Vigile","Vincent","Vital","Vitalien","Vivien","Waleran","Wandrille","Xavier","X\xe9nophon","Yves","Zacharie","Zach\xe9","Z\xe9phirin"]},female:{en:["Mary","Emma","Elizabeth","Minnie","Margaret","Ida","Alice","Bertha","Sarah","Annie","Clara","Ella","Florence","Cora","Martha","Laura","Nellie","Grace","Carrie","Maude","Mabel","Bessie","Jennie","Gertrude","Julia","Hattie","Edith","Mattie","Rose","Catherine","Lillian","Ada","Lillie","Helen","Jessie","Louise","Ethel","Lula","Myrtle","Eva","Frances","Lena","Lucy","Edna","Maggie","Pearl","Daisy","Fannie","Josephine","Dora","Rosa","Katherine","Agnes","Marie","Nora","May","Mamie","Blanche","Stella","Ellen","Nancy","Effie","Sallie","Nettie","Della","Lizzie","Flora","Susie","Maud","Mae","Etta","Harriet","Sadie","Caroline","Katie","Lydia","Elsie","Kate","Susan","Mollie","Alma","Addie","Georgia","Eliza","Lulu","Nannie","Lottie","Amanda","Belle","Charlotte","Rebecca","Ruth","Viola","Olive","Amelia","Hannah","Jane","Virginia","Emily","Matilda","Irene","Kathryn","Esther","Willie","Henrietta","Ollie","Amy","Rachel","Sara","Estella","Theresa","Augusta","Ora","Pauline","Josie","Lola","Sophia","Leona","Anne","Mildred","Ann","Beulah","Callie","Lou","Delia","Eleanor","Barbara","Iva","Louisa","Maria","Mayme","Evelyn","Estelle","Nina","Betty","Marion","Bettie","Dorothy","Luella","Inez","Lela","Rosie","Allie","Millie","Janie","Cornelia","Victoria","Ruby","Winifred","Alta","Celia","Christine","Beatrice","Birdie","Harriett","Mable","Myra","Sophie","Tillie","Isabel","Sylvia","Carolyn","Isabelle","Leila","Sally","Ina","Essie","Bertie","Nell","Alberta","Katharine","Lora","Rena","Mina","Rhoda","Mathilda","Abbie","Eula","Dollie","Hettie","Eunice","Fanny","Ola","Lenora","Adelaide","Christina","Lelia","Nelle","Sue","Johanna","Lilly","Lucinda","Minerva","Lettie","Roxie","Cynthia","Helena","Hilda","Hulda","Bernice","Genevieve","Jean","Cordelia","Marian","Francis","Jeanette","Adeline","Gussie","Leah","Lois","Lura","Mittie","Hallie","Isabella","Olga","Phoebe","Teresa","Hester","Lida","Lina","Winnie","Claudia","Marguerite","Vera","Cecelia","Bess","Emilie","Rosetta","Verna","Myrtie","Cecilia","Elva","Olivia","Ophelia","Georgie","Elnora","Violet","Adele","Lily","Linnie","Loretta","Madge","Polly","Virgie","Eugenia","Lucile","Lucille","Mabelle","Rosalie"],it:["Ada","Adriana","Alessandra","Alessia","Alice","Angela","Anna","Anna Maria","Annalisa","Annita","Annunziata","Antonella","Arianna","Asia","Assunta","Aurora","Barbara","Beatrice","Benedetta","Bianca","Bruna","Camilla","Carla","Carlotta","Carmela","Carolina","Caterina","Catia","Cecilia","Chiara","Cinzia","Clara","Claudia","Costanza","Cristina","Daniela","Debora","Diletta","Dina","Donatella","Elena","Eleonora","Elisa","Elisabetta","Emanuela","Emma","Eva","Federica","Fernanda","Fiorella","Fiorenza","Flora","Franca","Francesca","Gabriella","Gaia","Gemma","Giada","Gianna","Gina","Ginevra","Giorgia","Giovanna","Giulia","Giuliana","Giuseppa","Giuseppina","Grazia","Graziella","Greta","Ida","Ilaria","Ines","Iolanda","Irene","Irma","Isabella","Jessica","Laura","Lea","Letizia","Licia","Lidia","Liliana","Lina","Linda","Lisa","Livia","Loretta","Luana","Lucia","Luciana","Lucrezia","Luisa","Manuela","Mara","Marcella","Margherita","Maria","Maria Cristina","Maria Grazia","Maria Luisa","Maria Pia","Maria Teresa","Marina","Marisa","Marta","Martina","Marzia","Matilde","Melissa","Michela","Milena","Mirella","Monica","Natalina","Nella","Nicoletta","Noemi","Olga","Paola","Patrizia","Piera","Pierina","Raffaella","Rebecca","Renata","Rina","Rita","Roberta","Rosa","Rosanna","Rossana","Rossella","Sabrina","Sandra","Sara","Serena","Silvana","Silvia","Simona","Simonetta","Sofia","Sonia","Stefania","Susanna","Teresa","Tina","Tiziana","Tosca","Valentina","Valeria","Vanda","Vanessa","Vanna","Vera","Veronica","Vilma","Viola","Virginia","Vittoria"],nl:["Ada","Arianne","Afke","Amanda","Amber","Amy","Aniek","Anita","Anja","Anna","Anne","Annelies","Annemarie","Annette","Anouk","Astrid","Aukje","Barbara","Bianca","Carla","Carlijn","Carolien","Chantal","Charlotte","Claudia","Dani\xeblle","Debora","Diane","Dora","Eline","Elise","Ella","Ellen","Emma","Esmee","Evelien","Esther","Erica","Eva","Femke","Fleur","Floor","Froukje","Gea","Gerda","Hanna","Hanneke","Heleen","Hilde","Ilona","Ina","Inge","Ingrid","Iris","Isabel","Isabelle","Janneke","Jasmijn","Jeanine","Jennifer","Jessica","Johanna","Joke","Julia","Julie","Karen","Karin","Katja","Kim","Lara","Laura","Lena","Lianne","Lieke","Lilian","Linda","Lisa","Lisanne","Lotte","Louise","Maaike","Manon","Marga","Maria","Marissa","Marit","Marjolein","Martine","Marleen","Melissa","Merel","Miranda","Michelle","Mirjam","Mirthe","Naomi","Natalie","Nienke","Nina","Noortje","Olivia","Patricia","Paula","Paulien","Ramona","Ria","Rianne","Roos","Rosanne","Ruth","Sabrina","Sandra","Sanne","Sara","Saskia","Silvia","Sofia","Sophie","Sonja","Suzanne","Tamara","Tess","Tessa","Tineke","Valerie","Vanessa","Veerle","Vera","Victoria","Wendy","Willeke","Yvonne","Zo\xeb"],fr:["Abdon","Abel","Abiga\xeblle","Abiga\xefl","Acacius","Acanthe","Adalbert","Adalsinde","Adegrine","Ad\xe9la\xefde","Ad\xe8le","Ad\xe9lie","Adeline","Adeltrude","Adolphe","Adonis","Adrast\xe9e","Adrehilde","Adrienne","Agathe","Agilbert","Agla\xe9","Aignan","Agnefl\xe8te","Agn\xe8s","Agrippine","Aim\xe9","Alaine","Ala\xefs","Albane","Alb\xe9rade","Alberte","Alcide","Alcine","Alcyone","Aldegonde","Aleth","Alexandrine","Alexine","Alice","Ali\xe9nor","Aliette","Aline","Alix","Aliz\xe9","Alo\xefse","Aloyse","Alphonsine","Alth\xe9e","Amaliane","Amalth\xe9e","Amande","Amandine","Amant","Amarande","Amaranthe","Amaryllis","Ambre","Ambroisie","Am\xe9lie","Am\xe9thyste","Aminte","Ana\xebl","Ana\xefs","Anastasie","Anatole","Ancelin","Andr\xe9e","An\xe9mone","Angadr\xeame","Ang\xe8le","Angeline","Ang\xe9lique","Angilbert","Anicet","Annabelle","Anne","Annette","Annick","Annie","Annonciade","Ansbert","Anstrudie","Anthelme","Antigone","Antoinette","Antonine","Aph\xe9lie","Apolline","Apollonie","Aquiline","Arabelle","Arcadie","Archange","Argine","Ariane","Aricie","Ariel","Arielle","Arlette","Armance","Armande","Armandine","Armelle","Armide","Armelle","Armin","Arnaud","Ars\xe8ne","Arsino\xe9","Art\xe9mis","Arthur","Ascelin","Ascension","Assomption","Astart\xe9","Ast\xe9rie","Astr\xe9e","Astrid","Athalie","Athanasie","Athina","Aube","Albert","Aude","Audrey","Augustine","Aure","Aur\xe9lie","Aur\xe9lien","Aur\xe8le","Aurore","Auxence","Aveline","Abiga\xeblle","Avoye","Axelle","Aymard","Azal\xe9e","Ad\xe8le","Adeline","Barbe","Basilisse","Bathilde","B\xe9atrice","B\xe9atrix","B\xe9n\xe9dicte","B\xe9reng\xe8re","Bernadette","Berthe","Bertille","Beuve","Blanche","Blanc","Blandine","Brigitte","Brune","Brunehilde","Callista","Camille","Capucine","Carine","Caroline","Cassandre","Catherine","C\xe9cile","C\xe9leste","C\xe9lestine","C\xe9line","Chantal","Charl\xe8ne","Charline","Charlotte","Chlo\xe9","Christelle","Christiane","Christine","Claire","Clara","Claude","Claudine","Clarisse","Cl\xe9mence","Cl\xe9mentine","Cl\xe9o","Clio","Clotilde","Coline","Conception","Constance","Coralie","Coraline","Corentine","Corinne","Cyrielle","Daniel","Daniel","Daphn\xe9","D\xe9bora","Delphine","Denise","Diane","Dieudonn\xe9","Dominique","Doriane","Doroth\xe9e","Douce","\xc9dith","Edm\xe9e","\xc9l\xe9onore","\xc9liane","\xc9lia","\xc9liette","\xc9lisabeth","\xc9lise","Ella","\xc9lodie","\xc9lo\xefse","Elsa","\xc9meline","\xc9m\xe9rance","\xc9m\xe9rentienne","\xc9m\xe9rencie","\xc9milie","Emma","Emmanuelle","Emmelie","Ernestine","Esther","Estelle","Eudoxie","Eug\xe9nie","Eulalie","Euphrasie","Eus\xe9bie","\xc9vang\xe9line","Eva","\xc8ve","\xc9velyne","Fanny","Fantine","Faustine","F\xe9licie","Fernande","Flavie","Fleur","Flore","Florence","Florie","Fortun\xe9","France","Francia","Fran\xe7oise","Francine","Gabrielle","Ga\xeblle","Garance","Genevi\xe8ve","Georgette","Gerberge","Germaine","Gertrude","Gis\xe8le","Gueni\xe8vre","Guilhemine","Guillemette","Gustave","Gwenael","H\xe9l\xe8ne","H\xe9lo\xefse","Henriette","Hermine","Hermione","Hippolyte","Honorine","Hortense","Huguette","Ines","Ir\xe8ne","Irina","Iris","Isabeau","Isabelle","Iseult","Isolde","Ism\xe9rie","Jacinthe","Jacqueline","Jade","Janine","Jeanne","Jocelyne","Jo\xeblle","Jos\xe9phine","Judith","Julia","Julie","Jules","Juliette","Justine","Katy","Kathy","Katie","Laura","Laure","Laureline","Laurence","Laurene","Lauriane","Laurianne","Laurine","L\xe9a","L\xe9na","L\xe9onie","L\xe9on","L\xe9ontine","Lorraine","Lucie","Lucienne","Lucille","Ludivine","Lydie","Lydie","Megane","Madeleine","Magali","Maguelone","Mallaury","Manon","Marceline","Margot","Marguerite","Marianne","Marie","Myriam","Marie","Marine","Marion","Marl\xe8ne","Marthe","Martine","Mathilde","Maud","Maureen","Mauricette","Maxime","M\xe9lanie","Melissa","M\xe9lissandre","M\xe9lisande","M\xe9lodie","Michel","Micheline","Mireille","Miriam","Mo\xefse","Monique","Morgane","Muriel","Myl\xe8ne","Nad\xe8ge","Nadine","Nathalie","Nicole","Nicolette","Nine","No\xebl","No\xe9mie","Oc\xe9ane","Odette","Odile","Olive","Olivia","Olympe","Ombline","Ombeline","Oph\xe9lie","Oriande","Oriane","Ozanne","Pascale","Pascaline","Paule","Paulette","Pauline","Priscille","Prisca","Prisque","P\xe9cine","P\xe9lagie","P\xe9n\xe9lope","Perrine","P\xe9tronille","Philippine","Philom\xe8ne","Philoth\xe9e","Primerose","Prudence","Pulch\xe9rie","Quentine","Qui\xe9ta","Quintia","Quintilla","Rachel","Rapha\xeblle","Raymonde","Rebecca","R\xe9gine","R\xe9jeanne","Ren\xe9","Rita","Rita","Rolande","Romane","Rosalie","Rose","Roseline","Sabine","Salom\xe9","Sandra","Sandrine","Sarah","S\xe9gol\xe8ne","S\xe9verine","Sibylle","Simone","Sixt","Solange","Soline","Sol\xe8ne","Sophie","St\xe9phanie","Suzanne","Sylvain","Sylvie","Tatiana","Tha\xefs","Th\xe9odora","Th\xe9r\xe8se","Tiphaine","Ursule","Valentine","Val\xe9rie","V\xe9ronique","Victoire","Victorine","Vinciane","Violette","Virginie","Viviane","Xavi\xe8re","Yolande","Ysaline","Yvette","Yvonne","Z\xe9lie","Zita","Zo\xe9"]}},lastNames:{en:["Smith","Johnson","Williams","Jones","Brown","Davis","Miller","Wilson","Moore","Taylor","Anderson","Thomas","Jackson","White","Harris","Martin","Thompson","Garcia","Martinez","Robinson","Clark","Rodriguez","Lewis","Lee","Walker","Hall","Allen","Young","Hernandez","King","Wright","Lopez","Hill","Scott","Green","Adams","Baker","Gonzalez","Nelson","Carter","Mitchell","Perez","Roberts","Turner","Phillips","Campbell","Parker","Evans","Edwards","Collins","Stewart","Sanchez","Morris","Rogers","Reed","Cook","Morgan","Bell","Murphy","Bailey","Rivera","Cooper","Richardson","Cox","Howard","Ward","Torres","Peterson","Gray","Ramirez","James","Watson","Brooks","Kelly","Sanders","Price","Bennett","Wood","Barnes","Ross","Henderson","Coleman","Jenkins","Perry","Powell","Long","Patterson","Hughes","Flores","Washington","Butler","Simmons","Foster","Gonzales","Bryant","Alexander","Russell","Griffin","Diaz","Hayes","Myers","Ford","Hamilton","Graham","Sullivan","Wallace","Woods","Cole","West","Jordan","Owens","Reynolds","Fisher","Ellis","Harrison","Gibson","McDonald","Cruz","Marshall","Ortiz","Gomez","Murray","Freeman","Wells","Webb","Simpson","Stevens","Tucker","Porter","Hunter","Hicks","Crawford","Henry","Boyd","Mason","Morales","Kennedy","Warren","Dixon","Ramos","Reyes","Burns","Gordon","Shaw","Holmes","Rice","Robertson","Hunt","Black","Daniels","Palmer","Mills","Nichols","Grant","Knight","Ferguson","Rose","Stone","Hawkins","Dunn","Perkins","Hudson","Spencer","Gardner","Stephens","Payne","Pierce","Berry","Matthews","Arnold","Wagner","Willis","Ray","Watkins","Olson","Carroll","Duncan","Snyder","Hart","Cunningham","Bradley","Lane","Andrews","Ruiz","Harper","Fox","Riley","Armstrong","Carpenter","Weaver","Greene","Lawrence","Elliott","Chavez","Sims","Austin","Peters","Kelley","Franklin","Lawson","Fields","Gutierrez","Ryan","Schmidt","Carr","Vasquez","Castillo","Wheeler","Chapman","Oliver","Montgomery","Richards","Williamson","Johnston","Banks","Meyer","Bishop","McCoy","Howell","Alvarez","Morrison","Hansen","Fernandez","Garza","Harvey","Little","Burton","Stanley","Nguyen","George","Jacobs","Reid","Kim","Fuller","Lynch","Dean","Gilbert","Garrett","Romero","Welch","Larson","Frazier","Burke","Hanson","Day","Mendoza","Moreno","Bowman","Medina","Fowler","Brewer","Hoffman","Carlson","Silva","Pearson","Holland","Douglas","Fleming","Jensen","Vargas","Byrd","Davidson","Hopkins","May","Terry","Herrera","Wade","Soto","Walters","Curtis","Neal","Caldwell","Lowe","Jennings","Barnett","Graves","Jimenez","Horton","Shelton","Barrett","Obrien","Castro","Sutton","Gregory","McKinney","Lucas","Miles","Craig","Rodriquez","Chambers","Holt","Lambert","Fletcher","Watts","Bates","Hale","Rhodes","Pena","Beck","Newman","Haynes","McDaniel","Mendez","Bush","Vaughn","Parks","Dawson","Santiago","Norris","Hardy","Love","Steele","Curry","Powers","Schultz","Barker","Guzman","Page","Munoz","Ball","Keller","Chandler","Weber","Leonard","Walsh","Lyons","Ramsey","Wolfe","Schneider","Mullins","Benson","Sharp","Bowen","Daniel","Barber","Cummings","Hines","Baldwin","Griffith","Valdez","Hubbard","Salazar","Reeves","Warner","Stevenson","Burgess","Santos","Tate","Cross","Garner","Mann","Mack","Moss","Thornton","Dennis","McGee","Farmer","Delgado","Aguilar","Vega","Glover","Manning","Cohen","Harmon","Rodgers","Robbins","Newton","Todd","Blair","Higgins","Ingram","Reese","Cannon","Strickland","Townsend","Potter","Goodwin","Walton","Rowe","Hampton","Ortega","Patton","Swanson","Joseph","Francis","Goodman","Maldonado","Yates","Becker","Erickson","Hodges","Rios","Conner","Adkins","Webster","Norman","Malone","Hammond","Flowers","Cobb","Moody","Quinn","Blake","Maxwell","Pope","Floyd","Osborne","Paul","McCarthy","Guerrero","Lindsey","Estrada","Sandoval","Gibbs","Tyler","Gross","Fitzgerald","Stokes","Doyle","Sherman","Saunders","Wise","Colon","Gill","Alvarado","Greer","Padilla","Simon","Waters","Nunez","Ballard","Schwartz","McBride","Houston","Christensen","Klein","Pratt","Briggs","Parsons","McLaughlin","Zimmerman","French","Buchanan","Moran","Copeland","Roy","Pittman","Brady","McCormick","Holloway","Brock","Poole","Frank","Logan","Owen","Bass","Marsh","Drake","Wong","Jefferson","Park","Morton","Abbott","Sparks","Patrick","Norton","Huff","Clayton","Massey","Lloyd","Figueroa","Carson","Bowers","Roberson","Barton","Tran","Lamb","Harrington","Casey","Boone","Cortez","Clarke","Mathis","Singleton","Wilkins","Cain","Bryan","Underwood","Hogan","McKenzie","Collier","Luna","Phelps","McGuire","Allison","Bridges","Wilkerson","Nash","Summers","Atkins"],it:["Acciai","Aglietti","Agostini","Agresti","Ahmed","Aiazzi","Albanese","Alberti","Alessi","Alfani","Alinari","Alterini","Amato","Ammannati","Ancillotti","Andrei","Andreini","Andreoni","Angeli","Anichini","Antonelli","Antonini","Arena","Ariani","Arnetoli","Arrighi","Baccani","Baccetti","Bacci","Bacherini","Badii","Baggiani","Baglioni","Bagni","Bagnoli","Baldassini","Baldi","Baldini","Ballerini","Balli","Ballini","Balloni","Bambi","Banchi","Bandinelli","Bandini","Bani","Barbetti","Barbieri","Barchielli","Bardazzi","Bardelli","Bardi","Barducci","Bargellini","Bargiacchi","Barni","Baroncelli","Baroncini","Barone","Baroni","Baronti","Bartalesi","Bartoletti","Bartoli","Bartolini","Bartoloni","Bartolozzi","Basagni","Basile","Bassi","Batacchi","Battaglia","Battaglini","Bausi","Becagli","Becattini","Becchi","Becucci","Bellandi","Bellesi","Belli","Bellini","Bellucci","Bencini","Benedetti","Benelli","Beni","Benini","Bensi","Benucci","Benvenuti","Berlincioni","Bernacchioni","Bernardi","Bernardini","Berni","Bernini","Bertelli","Berti","Bertini","Bessi","Betti","Bettini","Biagi","Biagini","Biagioni","Biagiotti","Biancalani","Bianchi","Bianchini","Bianco","Biffoli","Bigazzi","Bigi","Biliotti","Billi","Binazzi","Bindi","Bini","Biondi","Bizzarri","Bocci","Bogani","Bolognesi","Bonaiuti","Bonanni","Bonciani","Boncinelli","Bondi","Bonechi","Bongini","Boni","Bonini","Borchi","Boretti","Borghi","Borghini","Borgioli","Borri","Borselli","Boschi","Bottai","Bracci","Braccini","Brandi","Braschi","Bravi","Brazzini","Breschi","Brilli","Brizzi","Brogelli","Brogi","Brogioni","Brunelli","Brunetti","Bruni","Bruno","Brunori","Bruschi","Bucci","Bucciarelli","Buccioni","Bucelli","Bulli","Burberi","Burchi","Burgassi","Burroni","Bussotti","Buti","Caciolli","Caiani","Calabrese","Calamai","Calamandrei","Caldini","Calo'","Calonaci","Calosi","Calvelli","Cambi","Camiciottoli","Cammelli","Cammilli","Campolmi","Cantini","Capanni","Capecchi","Caponi","Cappelletti","Cappelli","Cappellini","Cappugi","Capretti","Caputo","Carbone","Carboni","Cardini","Carlesi","Carletti","Carli","Caroti","Carotti","Carrai","Carraresi","Carta","Caruso","Casalini","Casati","Caselli","Casini","Castagnoli","Castellani","Castelli","Castellucci","Catalano","Catarzi","Catelani","Cavaciocchi","Cavallaro","Cavallini","Cavicchi","Cavini","Ceccarelli","Ceccatelli","Ceccherelli","Ceccherini","Cecchi","Cecchini","Cecconi","Cei","Cellai","Celli","Cellini","Cencetti","Ceni","Cenni","Cerbai","Cesari","Ceseri","Checcacci","Checchi","Checcucci","Cheli","Chellini","Chen","Cheng","Cherici","Cherubini","Chiaramonti","Chiarantini","Chiarelli","Chiari","Chiarini","Chiarugi","Chiavacci","Chiesi","Chimenti","Chini","Chirici","Chiti","Ciabatti","Ciampi","Cianchi","Cianfanelli","Cianferoni","Ciani","Ciapetti","Ciappi","Ciardi","Ciatti","Cicali","Ciccone","Cinelli","Cini","Ciobanu","Ciolli","Cioni","Cipriani","Cirillo","Cirri","Ciucchi","Ciuffi","Ciulli","Ciullini","Clemente","Cocchi","Cognome","Coli","Collini","Colombo","Colzi","Comparini","Conforti","Consigli","Conte","Conti","Contini","Coppini","Coppola","Corsi","Corsini","Corti","Cortini","Cosi","Costa","Costantini","Costantino","Cozzi","Cresci","Crescioli","Cresti","Crini","Curradi","D'Agostino","D'Alessandro","D'Amico","D'Angelo","Daddi","Dainelli","Dallai","Danti","Davitti","De Angelis","De Luca","De Marco","De Rosa","De Santis","De Simone","De Vita","Degl'Innocenti","Degli Innocenti","Dei","Del Lungo","Del Re","Di Marco","Di Stefano","Dini","Diop","Dobre","Dolfi","Donati","Dondoli","Dong","Donnini","Ducci","Dumitru","Ermini","Esposito","Evangelisti","Fabbri","Fabbrini","Fabbrizzi","Fabbroni","Fabbrucci","Fabiani","Facchini","Faggi","Fagioli","Failli","Faini","Falciani","Falcini","Falcone","Fallani","Falorni","Falsini","Falugiani","Fancelli","Fanelli","Fanetti","Fanfani","Fani","Fantappie'","Fantechi","Fanti","Fantini","Fantoni","Farina","Fattori","Favilli","Fedi","Fei","Ferrante","Ferrara","Ferrari","Ferraro","Ferretti","Ferri","Ferrini","Ferroni","Fiaschi","Fibbi","Fiesoli","Filippi","Filippini","Fini","Fioravanti","Fiore","Fiorentini","Fiorini","Fissi","Focardi","Foggi","Fontana","Fontanelli","Fontani","Forconi","Formigli","Forte","Forti","Fortini","Fossati","Fossi","Francalanci","Franceschi","Franceschini","Franchi","Franchini","Franci","Francini","Francioni","Franco","Frassineti","Frati","Fratini","Frilli","Frizzi","Frosali","Frosini","Frullini","Fusco","Fusi","Gabbrielli","Gabellini","Gagliardi","Galanti","Galardi","Galeotti","Galletti","Galli","Gallo","Gallori","Gambacciani","Gargani","Garofalo","Garuglieri","Gashi","Gasperini","Gatti","Gelli","Gensini","Gentile","Gentili","Geri","Gerini","Gheri","Ghini","Giachetti","Giachi","Giacomelli","Gianassi","Giani","Giannelli","Giannetti","Gianni","Giannini","Giannoni","Giannotti","Giannozzi","Gigli","Giordano","Giorgetti","Giorgi","Giovacchini","Giovannelli","Giovannetti","Giovannini","Giovannoni","Giuliani","Giunti","Giuntini","Giusti","Gonnelli","Goretti","Gori","Gradi","Gramigni","Grassi","Grasso","Graziani","Grazzini","Greco","Grifoni","Grillo","Grimaldi","Grossi","Gualtieri","Guarducci","Guarino","Guarnieri","Guasti","Guerra","Guerri","Guerrini","Guidi","Guidotti","He","Hoxha","Hu","Huang","Iandelli","Ignesti","Innocenti","Jin","La Rosa","Lai","Landi","Landini","Lanini","Lapi","Lapini","Lari","Lascialfari","Lastrucci","Latini","Lazzeri","Lazzerini","Lelli","Lenzi","Leonardi","Leoncini","Leone","Leoni","Lepri","Li","Liao","Lin","Linari","Lippi","Lisi","Livi","Lombardi","Lombardini","Lombardo","Longo","Lopez","Lorenzi","Lorenzini","Lorini","Lotti","Lu","Lucchesi","Lucherini","Lunghi","Lupi","Madiai","Maestrini","Maffei","Maggi","Maggini","Magherini","Magini","Magnani","Magnelli","Magni","Magnolfi","Magrini","Malavolti","Malevolti","Manca","Mancini","Manetti","Manfredi","Mangani","Mannelli","Manni","Mannini","Mannucci","Manuelli","Manzini","Marcelli","Marchese","Marchetti","Marchi","Marchiani","Marchionni","Marconi","Marcucci","Margheri","Mari","Mariani","Marilli","Marinai","Marinari","Marinelli","Marini","Marino","Mariotti","Marsili","Martelli","Martinelli","Martini","Martino","Marzi","Masi","Masini","Masoni","Massai","Materassi","Mattei","Matteini","Matteucci","Matteuzzi","Mattioli","Mattolini","Matucci","Mauro","Mazzanti","Mazzei","Mazzetti","Mazzi","Mazzini","Mazzocchi","Mazzoli","Mazzoni","Mazzuoli","Meacci","Mecocci","Meini","Melani","Mele","Meli","Mengoni","Menichetti","Meoni","Merlini","Messeri","Messina","Meucci","Miccinesi","Miceli","Micheli","Michelini","Michelozzi","Migliori","Migliorini","Milani","Miniati","Misuri","Monaco","Montagnani","Montagni","Montanari","Montelatici","Monti","Montigiani","Montini","Morandi","Morandini","Morelli","Moretti","Morganti","Mori","Morini","Moroni","Morozzi","Mugnai","Mugnaini","Mustafa","Naldi","Naldini","Nannelli","Nanni","Nannini","Nannucci","Nardi","Nardini","Nardoni","Natali","Ndiaye","Nencetti","Nencini","Nencioni","Neri","Nesi","Nesti","Niccolai","Niccoli","Niccolini","Nigi","Nistri","Nocentini","Noferini","Novelli","Nucci","Nuti","Nutini","Oliva","Olivieri","Olmi","Orlandi","Orlandini","Orlando","Orsini","Ortolani","Ottanelli","Pacciani","Pace","Paci","Pacini","Pagani","Pagano","Paggetti","Pagliai","Pagni","Pagnini","Paladini","Palagi","Palchetti","Palloni","Palmieri","Palumbo","Pampaloni","Pancani","Pandolfi","Pandolfini","Panerai","Panichi","Paoletti","Paoli","Paolini","Papi","Papini","Papucci","Parenti","Parigi","Parisi","Parri","Parrini","Pasquini","Passeri","Pecchioli","Pecorini","Pellegrini","Pepi","Perini","Perrone","Peruzzi","Pesci","Pestelli","Petri","Petrini","Petrucci","Pettini","Pezzati","Pezzatini","Piani","Piazza","Piazzesi","Piazzini","Piccardi","Picchi","Piccini","Piccioli","Pieraccini","Pieraccioni","Pieralli","Pierattini","Pieri","Pierini","Pieroni","Pietrini","Pini","Pinna","Pinto","Pinzani","Pinzauti","Piras","Pisani","Pistolesi","Poggesi","Poggi","Poggiali","Poggiolini","Poli","Pollastri","Porciani","Pozzi","Pratellesi","Pratesi","Prosperi","Pruneti","Pucci","Puccini","Puccioni","Pugi","Pugliese","Puliti","Querci","Quercioli","Raddi","Radu","Raffaelli","Ragazzini","Ranfagni","Ranieri","Rastrelli","Raugei","Raveggi","Renai","Renzi","Rettori","Ricci","Ricciardi","Ridi","Ridolfi","Rigacci","Righi","Righini","Rinaldi","Risaliti","Ristori","Rizzo","Rocchi","Rocchini","Rogai","Romagnoli","Romanelli","Romani","Romano","Romei","Romeo","Romiti","Romoli","Romolini","Rontini","Rosati","Roselli","Rosi","Rossetti","Rossi","Rossini","Rovai","Ruggeri","Ruggiero","Russo","Sabatini","Saccardi","Sacchetti","Sacchi","Sacco","Salerno","Salimbeni","Salucci","Salvadori","Salvestrini","Salvi","Salvini","Sanesi","Sani","Sanna","Santi","Santini","Santoni","Santoro","Santucci","Sardi","Sarri","Sarti","Sassi","Sbolci","Scali","Scarpelli","Scarselli","Scopetani","Secci","Selvi","Senatori","Senesi","Serafini","Sereni","Serra","Sestini","Sguanci","Sieni","Signorini","Silvestri","Simoncini","Simonetti","Simoni","Singh","Sodi","Soldi","Somigli","Sorbi","Sorelli","Sorrentino","Sottili","Spina","Spinelli","Staccioli","Staderini","Stefanelli","Stefani","Stefanini","Stella","Susini","Tacchi","Tacconi","Taddei","Tagliaferri","Tamburini","Tanganelli","Tani","Tanini","Tapinassi","Tarchi","Tarchiani","Targioni","Tassi","Tassini","Tempesti","Terzani","Tesi","Testa","Testi","Tilli","Tinti","Tirinnanzi","Toccafondi","Tofanari","Tofani","Tognaccini","Tonelli","Tonini","Torelli","Torrini","Tosi","Toti","Tozzi","Trambusti","Trapani","Tucci","Turchi","Ugolini","Ulivi","Valente","Valenti","Valentini","Vangelisti","Vanni","Vannini","Vannoni","Vannozzi","Vannucchi","Vannucci","Ventura","Venturi","Venturini","Vestri","Vettori","Vichi","Viciani","Vieri","Vigiani","Vignoli","Vignolini","Vignozzi","Villani","Vinci","Visani","Vitale","Vitali","Viti","Viviani","Vivoli","Volpe","Volpi","Wang","Wu","Xu","Yang","Ye","Zagli","Zani","Zanieri","Zanobini","Zecchi","Zetti","Zhang","Zheng","Zhou","Zhu","Zingoni","Zini","Zoppi"],nl:["Albers","Alblas","Appelman","Baars","Baas","Bakker","Blank","Bleeker","Blok","Blom","Boer","Boers","Boldewijn","Boon","Boot","Bos","Bosch","Bosma","Bosman","Bouma","Bouman","Bouwman","Brands","Brouwer","Burger","Buijs","Buitenhuis","Ceder","Cohen","Dekker","Dekkers","Dijkman","Dijkstra","Driessen","Drost","Engel","Evers","Faber","Franke","Gerritsen","Goedhart","Goossens","Groen","Groenenberg","Groot","Haan","Hart","Heemskerk","Hendriks","Hermans","Hoekstra","Hofman","Hopman","Huisman","Jacobs","Jansen","Janssen","Jonker","Jaspers","Keijzer","Klaassen","Klein","Koek","Koenders","Kok","Kool","Koopman","Koopmans","Koning","Koster","Kramer","Kroon","Kuijpers","Kuiper","Kuipers","Kurt","Koster","Kwakman","Los","Lubbers","Maas","Markus","Martens","Meijer","Mol","Molenaar","Mulder","Nieuwenhuis","Peeters","Peters","Pengel","Pieters","Pool","Post","Postma","Prins","Pronk","Reijnders","Rietveld","Roest","Roos","Sanders","Schaap","Scheffer","Schenk","Schilder","Schipper","Schmidt","Scholten","Schouten","Schut","Schutte","Schuurman","Simons","Smeets","Smit","Smits","Snel","Swinkels","Tas","Terpstra","Timmermans","Tol","Tromp","Troost","Valk","Veenstra","Veldkamp","Verbeek","Verheul","Verhoeven","Vermeer","Vermeulen","Verweij","Vink","Visser","Voorn","Vos","Wagenaar","Wiersema","Willems","Willemsen","Witteveen","Wolff","Wolters","Zijlstra","Zwart","de Beer","de Boer","de Bruijn","de Bruin","de Graaf","de Groot","de Haan","de Haas","de Jager","de Jong","de Jonge","de Koning","de Lange","de Leeuw","de Ridder","de Rooij","de Ruiter","de Vos","de Vries","de Waal","de Wit","de Zwart","van Beek","van Boven","van Dam","van Dijk","van Dongen","van Doorn","van Egmond","van Eijk","van Es","van Gelder","van Gelderen","van Houten","van Hulst","van Kempen","van Kesteren","van Leeuwen","van Loon","van Mill","van Noord","van Ommen","van Ommeren","van Oosten","van Oostveen","van Rijn","van Schaik","van Veen","van Vliet","van Wijk","van Wijngaarden","van den Poel","van de Pol","van den Ploeg","van de Ven","van den Berg","van den Bosch","van den Brink","van den Broek","van den Heuvel","van der Heijden","van der Horst","van der Hulst","van der Kroon","van der Laan","van der Linden","van der Meer","van der Meij","van der Meulen","van der Molen","van der Sluis","van der Spek","van der Veen","van der Velde","van der Velden","van der Vliet","van der Wal"],uk:["Smith","Jones","Williams","Taylor","Brown","Davies","Evans","Wilson","Thomas","Johnson","Roberts","Robinson","Thompson","Wright","Walker","White","Edwards","Hughes","Green","Hall","Lewis","Harris","Clarke","Patel","Jackson","Wood","Turner","Martin","Cooper","Hill","Ward","Morris","Moore","Clark","Lee","King","Baker","Harrison","Morgan","Allen","James","Scott","Phillips","Watson","Davis","Parker","Price","Bennett","Young","Griffiths","Mitchell","Kelly","Cook","Carter","Richardson","Bailey","Collins","Bell","Shaw","Murphy","Miller","Cox","Richards","Khan","Marshall","Anderson","Simpson","Ellis","Adams","Singh","Begum","Wilkinson","Foster","Chapman","Powell","Webb","Rogers","Gray","Mason","Ali","Hunt","Hussain","Campbell","Matthews","Owen","Palmer","Holmes","Mills","Barnes","Knight","Lloyd","Butler","Russell","Barker","Fisher","Stevens","Jenkins","Murray","Dixon","Harvey","Graham","Pearson","Ahmed","Fletcher","Walsh","Kaur","Gibson","Howard","Andrews","Stewart","Elliott","Reynolds","Saunders","Payne","Fox","Ford","Pearce","Day","Brooks","West","Lawrence","Cole","Atkinson","Bradley","Spencer","Gill","Dawson","Ball","Burton","O'brien","Watts","Rose","Booth","Perry","Ryan","Grant","Wells","Armstrong","Francis","Rees","Hayes","Hart","Hudson","Newman","Barrett","Webster","Hunter","Gregory","Carr","Lowe","Page","Marsh","Riley","Dunn","Woods","Parsons","Berry","Stone","Reid","Holland","Hawkins","Harding","Porter","Robertson","Newton","Oliver","Reed","Kennedy","Williamson","Bird","Gardner","Shah","Dean","Lane","Cooke","Bates","Henderson","Parry","Burgess","Bishop","Walton","Burns","Nicholson","Shepherd","Ross","Cross","Long","Freeman","Warren","Nicholls","Hamilton","Byrne","Sutton","Mcdonald","Yates","Hodgson","Robson","Curtis","Hopkins","O'connor","Harper","Coleman","Watkins","Moss","Mccarthy","Chambers","O'neill","Griffin","Sharp","Hardy","Wheeler","Potter","Osborne","Johnston","Gordon","Doyle","Wallace","George","Jordan","Hutchinson","Rowe","Burke","May","Pritchard","Gilbert","Willis","Higgins","Read","Miles","Stevenson","Stephenson","Hammond","Arnold","Buckley","Walters","Hewitt","Barber","Nelson","Slater","Austin","Sullivan","Whitehead","Mann","Frost","Lambert","Stephens","Blake","Akhtar","Lynch","Goodwin","Barton","Woodward","Thomson","Cunningham","Quinn","Barnett","Baxter","Bibi","Clayton","Nash","Greenwood","Jennings","Holt","Kemp","Poole","Gallagher","Bond","Stokes","Tucker","Davidson","Fowler","Heath","Norman","Middleton","Lawson","Banks","French","Stanley","Jarvis","Gibbs","Ferguson","Hayward","Carroll","Douglas","Dickinson","Todd","Barlow","Peters","Lucas","Knowles","Hartley","Miah","Simmons","Morton","Alexander","Field","Morrison","Norris","Townsend","Preston","Hancock","Thornton","Baldwin","Burrows","Briggs","Parkinson","Reeves","Macdonald","Lamb","Black","Abbott","Sanders","Thorpe","Holden","Tomlinson","Perkins","Ashton","Rhodes","Fuller","Howe","Bryant","Vaughan","Dale","Davey","Weston","Bartlett","Whittaker","Davison","Kent","Skinner","Birch","Morley","Daniels","Glover","Howell","Cartwright","Pugh","Humphreys","Goddard","Brennan","Wall","Kirby","Bowen","Savage","Bull","Wong","Dobson","Smart","Wilkins","Kirk","Fraser","Duffy","Hicks","Patterson","Bradshaw","Little","Archer","Warner","Waters","O'sullivan","Farrell","Brookes","Atkins","Kay","Dodd","Bentley","Flynn","John","Schofield","Short","Haynes","Wade","Butcher","Henry","Sanderson","Crawford","Sheppard","Bolton","Coates","Giles","Gould","Houghton","Gibbons","Pratt","Manning","Law","Hooper","Noble","Dyer","Rahman","Clements","Moran","Sykes","Chan","Doherty","Connolly","Joyce","Franklin","Hobbs","Coles","Herbert","Steele","Kerr","Leach","Winter","Owens","Duncan","Naylor","Fleming","Horton","Finch","Fitzgerald","Randall","Carpenter","Marsden","Browne","Garner","Pickering","Hale","Dennis","Vincent","Chadwick","Chandler","Sharpe","Nolan","Lyons","Hurst","Collier","Peacock","Howarth","Faulkner","Rice","Pollard","Welch","Norton","Gough","Sinclair","Blackburn","Bryan","Conway","Power","Cameron","Daly","Allan","Hanson","Gardiner","Boyle","Myers","Turnbull","Wallis","Mahmood","Sims","Swift","Iqbal","Pope","Brady","Chamberlain","Rowley","Tyler","Farmer","Metcalfe","Hilton","Godfrey","Holloway","Parkin","Bray","Talbot","Donnelly","Nixon","Charlton","Benson","Whitehouse","Barry","Hope","Lord","North","Storey","Connor","Potts","Bevan","Hargreaves","Mclean","Mistry","Bruce","Howells","Hyde","Parkes","Wyatt","Fry","Lees","O'donnell","Craig","Forster","Mckenzie","Humphries","Mellor","Carey","Ingram","Summers","Leonard"],de:["M\xfcller","Schmidt","Schneider","Fischer","Weber","Meyer","Wagner","Becker","Schulz","Hoffmann","Sch\xe4fer","Koch","Bauer","Richter","Klein","Wolf","Schr\xf6der","Neumann","Schwarz","Zimmermann","Braun","Kr\xfcger","Hofmann","Hartmann","Lange","Schmitt","Werner","Schmitz","Krause","Meier","Lehmann","Schmid","Schulze","Maier","K\xf6hler","Herrmann","K\xf6nig","Walter","Mayer","Huber","Kaiser","Fuchs","Peters","Lang","Scholz","M\xf6ller","Wei\xdf","Jung","Hahn","Schubert","Vogel","Friedrich","Keller","G\xfcnther","Frank","Berger","Winkler","Roth","Beck","Lorenz","Baumann","Franke","Albrecht","Schuster","Simon","Ludwig","B\xf6hm","Winter","Kraus","Martin","Schumacher","Kr\xe4mer","Vogt","Stein","J\xe4ger","Otto","Sommer","Gro\xdf","Seidel","Heinrich","Brandt","Haas","Schreiber","Graf","Schulte","Dietrich","Ziegler","Kuhn","K\xfchn","Pohl","Engel","Horn","Busch","Bergmann","Thomas","Voigt","Sauer","Arnold","Wolff","Pfeiffer"],jp:["Sato","Suzuki","Takahashi","Tanaka","Watanabe","Ito","Yamamoto","Nakamura","Kobayashi","Kato","Yoshida","Yamada","Sasaki","Yamaguchi","Saito","Matsumoto","Inoue","Kimura","Hayashi","Shimizu","Yamazaki","Mori","Abe","Ikeda","Hashimoto","Yamashita","Ishikawa","Nakajima","Maeda","Fujita","Ogawa","Goto","Okada","Hasegawa","Murakami","Kondo","Ishii","Saito","Sakamoto","Endo","Aoki","Fujii","Nishimura","Fukuda","Ota","Miura","Fujiwara","Okamoto","Matsuda","Nakagawa","Nakano","Harada","Ono","Tamura","Takeuchi","Kaneko","Wada","Nakayama","Ishida","Ueda","Morita","Hara","Shibata","Sakai","Kudo","Yokoyama","Miyazaki","Miyamoto","Uchida","Takagi","Ando","Taniguchi","Ohno","Maruyama","Imai","Takada","Fujimoto","Takeda","Murata","Ueno","Sugiyama","Masuda","Sugawara","Hirano","Kojima","Otsuka","Chiba","Kubo","Matsui","Iwasaki","Sakurai","Kinoshita","Noguchi","Matsuo","Nomura","Kikuchi","Sano","Onishi","Sugimoto","Arai"],es:["Garcia","Fernandez","Lopez","Martinez","Gonzalez","Rodriguez","Sanchez","Perez","Martin","Gomez","Ruiz","Diaz","Hernandez","Alvarez","Jimenez","Moreno","Munoz","Alonso","Romero","Navarro","Gutierrez","Torres","Dominguez","Gil","Vazquez","Blanco","Serrano","Ramos","Castro","Suarez","Sanz","Rubio","Ortega","Molina","Delgado","Ortiz","Morales","Ramirez","Marin","Iglesias","Santos","Castillo","Garrido","Calvo","Pena","Cruz","Cano","Nunez","Prieto","Diez","Lozano","Vidal","Pascual","Ferrer","Medina","Vega","Leon","Herrero","Vicente","Mendez","Guerrero","Fuentes","Campos","Nieto","Cortes","Caballero","Ibanez","Lorenzo","Pastor","Gimenez","Saez","Soler","Marquez","Carrasco","Herrera","Montero","Arias","Crespo","Flores","Andres","Aguilar","Hidalgo","Cabrera","Mora","Duran","Velasco","Rey","Pardo","Roman","Vila","Bravo","Merino","Moya","Soto","Izquierdo","Reyes","Redondo","Marcos","Carmona","Menendez"],fr:["Martin","Bernard","Thomas","Petit","Robert","Richard","Durand","Dubois","Moreau","Laurent","Simon","Michel","Lef\xe8vre","Leroy","Roux","David","Bertrand","Morel","Fournier","Girard","Bonnet","Dupont","Lambert","Fontaine","Rousseau","Vincent","M\xfcller","Lef\xe8vre","Faure","Andr\xe9","Mercier","Blanc","Gu\xe9rin","Boyer","Garnier","Chevalier","Fran\xe7ois","Legrand","Gauthier","Garcia","Perrin","Robin","Cl\xe9ment","Morin","Nicolas","Henry","Roussel","Matthieu","Gautier","Masson","Marchand","Duval","Denis","Dumont","Marie","Lemaire","No\xebl","Meyer","Dufour","Meunier","Brun","Blanchard","Giraud","Joly","Rivi\xe8re","Lucas","Brunet","Gaillard","Barbier","Arnaud","Mart\xednez","G\xe9rard","Roche","Renard","Schmitt","Roy","Leroux","Colin","Vidal","Caron","Picard","Roger","Fabre","Aubert","Lemoine","Renaud","Dumas","Lacroix","Olivier","Philippe","Bourgeois","Pierre","Beno\xeet","Rey","Leclerc","Payet","Rolland","Leclercq","Guillaume","Lecomte","L\xf3pez","Jean","Dupuy","Guillot","Hubert","Berger","Carpentier","S\xe1nchez","Dupuis","Moulin","Louis","Deschamps","Huet","Vasseur","Perez","Boucher","Fleury","Royer","Klein","Jacquet","Adam","Paris","Poirier","Marty","Aubry","Guyot","Carr\xe9","Charles","Renault","Charpentier","M\xe9nard","Maillard","Baron","Bertin","Bailly","Herv\xe9","Schneider","Fern\xe1ndez","Le GallGall","Collet","L\xe9ger","Bouvier","Julien","Pr\xe9vost","Millet","Perrot","Daniel","Le RouxRoux","Cousin","Germain","Breton","Besson","Langlois","R\xe9mi","Le GoffGoff","Pelletier","L\xe9v\xeaque","Perrier","Leblanc","Barr\xe9","Lebrun","Marchal","Weber","Mallet","Hamon","Boulanger","Jacob","Monnier","Michaud","Rodr\xedguez","Guichard","Gillet","\xc9tienne","Grondin","Poulain","Tessier","Chevallier","Collin","Chauvin","Da SilvaSilva","Bouchet","Gay","Lema\xeetre","B\xe9nard","Mar\xe9chal","Humbert","Reynaud","Antoine","Hoarau","Perret","Barth\xe9lemy","Cordier","Pichon","Lejeune","Gilbert","Lamy","Delaunay","Pasquier","Carlier","LaporteLaporte"]},postcodeAreas:[{code:"AB"},{code:"AL"},{code:"B"},{code:"BA"},{code:"BB"},{code:"BD"},{code:"BH"},{code:"BL"},{code:"BN"},{code:"BR"},{code:"BS"},{code:"BT"},{code:"CA"},{code:"CB"},{code:"CF"},{code:"CH"},{code:"CM"},{code:"CO"},{code:"CR"},{code:"CT"},{code:"CV"},{code:"CW"},{code:"DA"},{code:"DD"},{code:"DE"},{code:"DG"},{code:"DH"},{code:"DL"},{code:"DN"},{code:"DT"},{code:"DY"},{code:"E"},{code:"EC"},{code:"EH"},{code:"EN"},{code:"EX"},{code:"FK"},{code:"FY"},{code:"G"},{code:"GL"},{code:"GU"},{code:"GY"},{code:"HA"},{code:"HD"},{code:"HG"},{code:"HP"},{code:"HR"},{code:"HS"},{code:"HU"},{code:"HX"},{code:"IG"},{code:"IM"},{code:"IP"},{code:"IV"},{code:"JE"},{code:"KA"},{code:"KT"},{code:"KW"},{code:"KY"},{code:"L"},{code:"LA"},{code:"LD"},{code:"LE"},{code:"LL"},{code:"LN"},{code:"LS"},{code:"LU"},{code:"M"},{code:"ME"},{code:"MK"},{code:"ML"},{code:"N"},{code:"NE"},{code:"NG"},{code:"NN"},{code:"NP"},{code:"NR"},{code:"NW"},{code:"OL"},{code:"OX"},{code:"PA"},{code:"PE"},{code:"PH"},{code:"PL"},{code:"PO"},{code:"PR"},{code:"RG"},{code:"RH"},{code:"RM"},{code:"S"},{code:"SA"},{code:"SE"},{code:"SG"},{code:"SK"},{code:"SL"},{code:"SM"},{code:"SN"},{code:"SO"},{code:"SP"},{code:"SR"},{code:"SS"},{code:"ST"},{code:"SW"},{code:"SY"},{code:"TA"},{code:"TD"},{code:"TF"},{code:"TN"},{code:"TQ"},{code:"TR"},{code:"TS"},{code:"TW"},{code:"UB"},{code:"W"},{code:"WA"},{code:"WC"},{code:"WD"},{code:"WF"},{code:"WN"},{code:"WR"},{code:"WS"},{code:"WV"},{code:"YO"},{code:"ZE"}],countries:[{name:"Afghanistan",abbreviation:"AF"},{name:"\xc5land Islands",abbreviation:"AX"},{name:"Albania",abbreviation:"AL"},{name:"Algeria",abbreviation:"DZ"},{name:"American Samoa",abbreviation:"AS"},{name:"Andorra",abbreviation:"AD"},{name:"Angola",abbreviation:"AO"},{name:"Anguilla",abbreviation:"AI"},{name:"Antarctica",abbreviation:"AQ"},{name:"Antigua & Barbuda",abbreviation:"AG"},{name:"Argentina",abbreviation:"AR"},{name:"Armenia",abbreviation:"AM"},{name:"Aruba",abbreviation:"AW"},{name:"Ascension Island",abbreviation:"AC"},{name:"Australia",abbreviation:"AU"},{name:"Austria",abbreviation:"AT"},{name:"Azerbaijan",abbreviation:"AZ"},{name:"Bahamas",abbreviation:"BS"},{name:"Bahrain",abbreviation:"BH"},{name:"Bangladesh",abbreviation:"BD"},{name:"Barbados",abbreviation:"BB"},{name:"Belarus",abbreviation:"BY"},{name:"Belgium",abbreviation:"BE"},{name:"Belize",abbreviation:"BZ"},{name:"Benin",abbreviation:"BJ"},{name:"Bermuda",abbreviation:"BM"},{name:"Bhutan",abbreviation:"BT"},{name:"Bolivia",abbreviation:"BO"},{name:"Bosnia & Herzegovina",abbreviation:"BA"},{name:"Botswana",abbreviation:"BW"},{name:"Brazil",abbreviation:"BR"},{name:"British Indian Ocean Territory",abbreviation:"IO"},{name:"British Virgin Islands",abbreviation:"VG"},{name:"Brunei",abbreviation:"BN"},{name:"Bulgaria",abbreviation:"BG"},{name:"Burkina Faso",abbreviation:"BF"},{name:"Burundi",abbreviation:"BI"},{name:"Cambodia",abbreviation:"KH"},{name:"Cameroon",abbreviation:"CM"},{name:"Canada",abbreviation:"CA"},{name:"Canary Islands",abbreviation:"IC"},{name:"Cape Verde",abbreviation:"CV"},{name:"Caribbean Netherlands",abbreviation:"BQ"},{name:"Cayman Islands",abbreviation:"KY"},{name:"Central African Republic",abbreviation:"CF"},{name:"Ceuta & Melilla",abbreviation:"EA"},{name:"Chad",abbreviation:"TD"},{name:"Chile",abbreviation:"CL"},{name:"China",abbreviation:"CN"},{name:"Christmas Island",abbreviation:"CX"},{name:"Cocos (Keeling) Islands",abbreviation:"CC"},{name:"Colombia",abbreviation:"CO"},{name:"Comoros",abbreviation:"KM"},{name:"Congo - Brazzaville",abbreviation:"CG"},{name:"Congo - Kinshasa",abbreviation:"CD"},{name:"Cook Islands",abbreviation:"CK"},{name:"Costa Rica",abbreviation:"CR"},{name:"C\xf4te d'Ivoire",abbreviation:"CI"},{name:"Croatia",abbreviation:"HR"},{name:"Cuba",abbreviation:"CU"},{name:"Cura\xe7ao",abbreviation:"CW"},{name:"Cyprus",abbreviation:"CY"},{name:"Czech Republic",abbreviation:"CZ"},{name:"Denmark",abbreviation:"DK"},{name:"Diego Garcia",abbreviation:"DG"},{name:"Djibouti",abbreviation:"DJ"},{name:"Dominica",abbreviation:"DM"},{name:"Dominican Republic",abbreviation:"DO"},{name:"Ecuador",abbreviation:"EC"},{name:"Egypt",abbreviation:"EG"},{name:"El Salvador",abbreviation:"SV"},{name:"Equatorial Guinea",abbreviation:"GQ"},{name:"Eritrea",abbreviation:"ER"},{name:"Estonia",abbreviation:"EE"},{name:"Ethiopia",abbreviation:"ET"},{name:"Falkland Islands",abbreviation:"FK"},{name:"Faroe Islands",abbreviation:"FO"},{name:"Fiji",abbreviation:"FJ"},{name:"Finland",abbreviation:"FI"},{name:"France",abbreviation:"FR"},{name:"French Guiana",abbreviation:"GF"},{name:"French Polynesia",abbreviation:"PF"},{name:"French Southern Territories",abbreviation:"TF"},{name:"Gabon",abbreviation:"GA"},{name:"Gambia",abbreviation:"GM"},{name:"Georgia",abbreviation:"GE"},{name:"Germany",abbreviation:"DE"},{name:"Ghana",abbreviation:"GH"},{name:"Gibraltar",abbreviation:"GI"},{name:"Greece",abbreviation:"GR"},{name:"Greenland",abbreviation:"GL"},{name:"Grenada",abbreviation:"GD"},{name:"Guadeloupe",abbreviation:"GP"},{name:"Guam",abbreviation:"GU"},{name:"Guatemala",abbreviation:"GT"},{name:"Guernsey",abbreviation:"GG"},{name:"Guinea",abbreviation:"GN"},{name:"Guinea-Bissau",abbreviation:"GW"},{name:"Guyana",abbreviation:"GY"},{name:"Haiti",abbreviation:"HT"},{name:"Honduras",abbreviation:"HN"},{name:"Hong Kong SAR China",abbreviation:"HK"},{name:"Hungary",abbreviation:"HU"},{name:"Iceland",abbreviation:"IS"},{name:"India",abbreviation:"IN"},{name:"Indonesia",abbreviation:"ID"},{name:"Iran",abbreviation:"IR"},{name:"Iraq",abbreviation:"IQ"},{name:"Ireland",abbreviation:"IE"},{name:"Isle of Man",abbreviation:"IM"},{name:"Israel",abbreviation:"IL"},{name:"Italy",abbreviation:"IT"},{name:"Jamaica",abbreviation:"JM"},{name:"Japan",abbreviation:"JP"},{name:"Jersey",abbreviation:"JE"},{name:"Jordan",abbreviation:"JO"},{name:"Kazakhstan",abbreviation:"KZ"},{name:"Kenya",abbreviation:"KE"},{name:"Kiribati",abbreviation:"KI"},{name:"Kosovo",abbreviation:"XK"},{name:"Kuwait",abbreviation:"KW"},{name:"Kyrgyzstan",abbreviation:"KG"},{name:"Laos",abbreviation:"LA"},{name:"Latvia",abbreviation:"LV"},{name:"Lebanon",abbreviation:"LB"},{name:"Lesotho",abbreviation:"LS"},{name:"Liberia",abbreviation:"LR"},{name:"Libya",abbreviation:"LY"},{name:"Liechtenstein",abbreviation:"LI"},{name:"Lithuania",abbreviation:"LT"},{name:"Luxembourg",abbreviation:"LU"},{name:"Macau SAR China",abbreviation:"MO"},{name:"Macedonia",abbreviation:"MK"},{name:"Madagascar",abbreviation:"MG"},{name:"Malawi",abbreviation:"MW"},{name:"Malaysia",abbreviation:"MY"},{name:"Maldives",abbreviation:"MV"},{name:"Mali",abbreviation:"ML"},{name:"Malta",abbreviation:"MT"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Martinique",abbreviation:"MQ"},{name:"Mauritania",abbreviation:"MR"},{name:"Mauritius",abbreviation:"MU"},{name:"Mayotte",abbreviation:"YT"},{name:"Mexico",abbreviation:"MX"},{name:"Micronesia",abbreviation:"FM"},{name:"Moldova",abbreviation:"MD"},{name:"Monaco",abbreviation:"MC"},{name:"Mongolia",abbreviation:"MN"},{name:"Montenegro",abbreviation:"ME"},{name:"Montserrat",abbreviation:"MS"},{name:"Morocco",abbreviation:"MA"},{name:"Mozambique",abbreviation:"MZ"},{name:"Myanmar (Burma)",abbreviation:"MM"},{name:"Namibia",abbreviation:"NA"},{name:"Nauru",abbreviation:"NR"},{name:"Nepal",abbreviation:"NP"},{name:"Netherlands",abbreviation:"NL"},{name:"New Caledonia",abbreviation:"NC"},{name:"New Zealand",abbreviation:"NZ"},{name:"Nicaragua",abbreviation:"NI"},{name:"Niger",abbreviation:"NE"},{name:"Nigeria",abbreviation:"NG"},{name:"Niue",abbreviation:"NU"},{name:"Norfolk Island",abbreviation:"NF"},{name:"North Korea",abbreviation:"KP"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Norway",abbreviation:"NO"},{name:"Oman",abbreviation:"OM"},{name:"Pakistan",abbreviation:"PK"},{name:"Palau",abbreviation:"PW"},{name:"Palestinian Territories",abbreviation:"PS"},{name:"Panama",abbreviation:"PA"},{name:"Papua New Guinea",abbreviation:"PG"},{name:"Paraguay",abbreviation:"PY"},{name:"Peru",abbreviation:"PE"},{name:"Philippines",abbreviation:"PH"},{name:"Pitcairn Islands",abbreviation:"PN"},{name:"Poland",abbreviation:"PL"},{name:"Portugal",abbreviation:"PT"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Qatar",abbreviation:"QA"},{name:"R\xe9union",abbreviation:"RE"},{name:"Romania",abbreviation:"RO"},{name:"Russia",abbreviation:"RU"},{name:"Rwanda",abbreviation:"RW"},{name:"Samoa",abbreviation:"WS"},{name:"San Marino",abbreviation:"SM"},{name:"S\xe3o Tom\xe9 and Pr\xedncipe",abbreviation:"ST"},{name:"Saudi Arabia",abbreviation:"SA"},{name:"Senegal",abbreviation:"SN"},{name:"Serbia",abbreviation:"RS"},{name:"Seychelles",abbreviation:"SC"},{name:"Sierra Leone",abbreviation:"SL"},{name:"Singapore",abbreviation:"SG"},{name:"Sint Maarten",abbreviation:"SX"},{name:"Slovakia",abbreviation:"SK"},{name:"Slovenia",abbreviation:"SI"},{name:"Solomon Islands",abbreviation:"SB"},{name:"Somalia",abbreviation:"SO"},{name:"South Africa",abbreviation:"ZA"},{name:"South Georgia & South Sandwich Islands",abbreviation:"GS"},{name:"South Korea",abbreviation:"KR"},{name:"South Sudan",abbreviation:"SS"},{name:"Spain",abbreviation:"ES"},{name:"Sri Lanka",abbreviation:"LK"},{name:"St. Barth\xe9lemy",abbreviation:"BL"},{name:"St. Helena",abbreviation:"SH"},{name:"St. Kitts & Nevis",abbreviation:"KN"},{name:"St. Lucia",abbreviation:"LC"},{name:"St. Martin",abbreviation:"MF"},{name:"St. Pierre & Miquelon",abbreviation:"PM"},{name:"St. Vincent & Grenadines",abbreviation:"VC"},{name:"Sudan",abbreviation:"SD"},{name:"Suriname",abbreviation:"SR"},{name:"Svalbard & Jan Mayen",abbreviation:"SJ"},{name:"Swaziland",abbreviation:"SZ"},{name:"Sweden",abbreviation:"SE"},{name:"Switzerland",abbreviation:"CH"},{name:"Syria",abbreviation:"SY"},{name:"Taiwan",abbreviation:"TW"},{name:"Tajikistan",abbreviation:"TJ"},{name:"Tanzania",abbreviation:"TZ"},{name:"Thailand",abbreviation:"TH"},{name:"Timor-Leste",abbreviation:"TL"},{name:"Togo",abbreviation:"TG"},{name:"Tokelau",abbreviation:"TK"},{name:"Tonga",abbreviation:"TO"},{name:"Trinidad & Tobago",abbreviation:"TT"},{name:"Tristan da Cunha",abbreviation:"TA"},{name:"Tunisia",abbreviation:"TN"},{name:"Turkey",abbreviation:"TR"},{name:"Turkmenistan",abbreviation:"TM"},{name:"Turks & Caicos Islands",abbreviation:"TC"},{name:"Tuvalu",abbreviation:"TV"},{name:"U.S. Outlying Islands",abbreviation:"UM"},{name:"U.S. Virgin Islands",abbreviation:"VI"},{name:"Uganda",abbreviation:"UG"},{name:"Ukraine",abbreviation:"UA"},{name:"United Arab Emirates",abbreviation:"AE"},{name:"United Kingdom",abbreviation:"GB"},{name:"United States",abbreviation:"US"},{name:"Uruguay",abbreviation:"UY"},{name:"Uzbekistan",abbreviation:"UZ"},{name:"Vanuatu",abbreviation:"VU"},{name:"Vatican City",abbreviation:"VA"},{name:"Venezuela",abbreviation:"VE"},{name:"Vietnam",abbreviation:"VN"},{name:"Wallis & Futuna",abbreviation:"WF"},{name:"Western Sahara",abbreviation:"EH"},{name:"Yemen",abbreviation:"YE"},{name:"Zambia",abbreviation:"ZM"},{name:"Zimbabwe",abbreviation:"ZW"}],counties:{uk:[{name:"Bath and North East Somerset"},{name:"Aberdeenshire"},{name:"Anglesey"},{name:"Angus"},{name:"Bedford"},{name:"Blackburn with Darwen"},{name:"Blackpool"},{name:"Bournemouth"},{name:"Bracknell Forest"},{name:"Brighton & Hove"},{name:"Bristol"},{name:"Buckinghamshire"},{name:"Cambridgeshire"},{name:"Carmarthenshire"},{name:"Central Bedfordshire"},{name:"Ceredigion"},{name:"Cheshire East"},{name:"Cheshire West and Chester"},{name:"Clackmannanshire"},{name:"Conwy"},{name:"Cornwall"},{name:"County Antrim"},{name:"County Armagh"},{name:"County Down"},{name:"County Durham"},{name:"County Fermanagh"},{name:"County Londonderry"},{name:"County Tyrone"},{name:"Cumbria"},{name:"Darlington"},{name:"Denbighshire"},{name:"Derby"},{name:"Derbyshire"},{name:"Devon"},{name:"Dorset"},{name:"Dumfries and Galloway"},{name:"Dundee"},{name:"East Lothian"},{name:"East Riding of Yorkshire"},{name:"East Sussex"},{name:"Edinburgh?"},{name:"Essex"},{name:"Falkirk"},{name:"Fife"},{name:"Flintshire"},{name:"Gloucestershire"},{name:"Greater London"},{name:"Greater Manchester"},{name:"Gwent"},{name:"Gwynedd"},{name:"Halton"},{name:"Hampshire"},{name:"Hartlepool"},{name:"Herefordshire"},{name:"Hertfordshire"},{name:"Highlands"},{name:"Hull"},{name:"Isle of Wight"},{name:"Isles of Scilly"},{name:"Kent"},{name:"Lancashire"},{name:"Leicester"},{name:"Leicestershire"},{name:"Lincolnshire"},{name:"Lothian"},{name:"Luton"},{name:"Medway"},{name:"Merseyside"},{name:"Mid Glamorgan"},{name:"Middlesbrough"},{name:"Milton Keynes"},{name:"Monmouthshire"},{name:"Moray"},{name:"Norfolk"},{name:"North East Lincolnshire"},{name:"North Lincolnshire"},{name:"North Somerset"},{name:"North Yorkshire"},{name:"Northamptonshire"},{name:"Northumberland"},{name:"Nottingham"},{name:"Nottinghamshire"},{name:"Oxfordshire"},{name:"Pembrokeshire"},{name:"Perth and Kinross"},{name:"Peterborough"},{name:"Plymouth"},{name:"Poole"},{name:"Portsmouth"},{name:"Powys"},{name:"Reading"},{name:"Redcar and Cleveland"},{name:"Rutland"},{name:"Scottish Borders"},{name:"Shropshire"},{name:"Slough"},{name:"Somerset"},{name:"South Glamorgan"},{name:"South Gloucestershire"},{name:"South Yorkshire"},{name:"Southampton"},{name:"Southend-on-Sea"},{name:"Staffordshire"},{name:"Stirlingshire"},{name:"Stockton-on-Tees"},{name:"Stoke-on-Trent"},{name:"Strathclyde"},{name:"Suffolk"},{name:"Surrey"},{name:"Swindon"},{name:"Telford and Wrekin"},{name:"Thurrock"},{name:"Torbay"},{name:"Tyne and Wear"},{name:"Warrington"},{name:"Warwickshire"},{name:"West Berkshire"},{name:"West Glamorgan"},{name:"West Lothian"},{name:"West Midlands"},{name:"West Sussex"},{name:"West Yorkshire"},{name:"Western Isles"},{name:"Wiltshire"},{name:"Windsor and Maidenhead"},{name:"Wokingham"},{name:"Worcestershire"},{name:"Wrexham"},{name:"York"}]},provinces:{ca:[{name:"Alberta",abbreviation:"AB"},{name:"British Columbia",abbreviation:"BC"},{name:"Manitoba",abbreviation:"MB"},{name:"New Brunswick",abbreviation:"NB"},{name:"Newfoundland and Labrador",abbreviation:"NL"},{name:"Nova Scotia",abbreviation:"NS"},{name:"Ontario",abbreviation:"ON"},{name:"Prince Edward Island",abbreviation:"PE"},{name:"Quebec",abbreviation:"QC"},{name:"Saskatchewan",abbreviation:"SK"},{name:"Northwest Territories",abbreviation:"NT"},{name:"Nunavut",abbreviation:"NU"},{name:"Yukon",abbreviation:"YT"}],it:[{name:"Agrigento",abbreviation:"AG",code:84},{name:"Alessandria",abbreviation:"AL",code:6},{name:"Ancona",abbreviation:"AN",code:42},{name:"Aosta",abbreviation:"AO",code:7},{name:"L'Aquila",abbreviation:"AQ",code:66},{name:"Arezzo",abbreviation:"AR",code:51},{name:"Ascoli-Piceno",abbreviation:"AP",code:44},{name:"Asti",abbreviation:"AT",code:5},{name:"Avellino",abbreviation:"AV",code:64},{name:"Bari",abbreviation:"BA",code:72},{name:"Barletta-Andria-Trani",abbreviation:"BT",code:72},{name:"Belluno",abbreviation:"BL",code:25},{name:"Benevento",abbreviation:"BN",code:62},{name:"Bergamo",abbreviation:"BG",code:16},{name:"Biella",abbreviation:"BI",code:96},{name:"Bologna",abbreviation:"BO",code:37},{name:"Bolzano",abbreviation:"BZ",code:21},{name:"Brescia",abbreviation:"BS",code:17},{name:"Brindisi",abbreviation:"BR",code:74},{name:"Cagliari",abbreviation:"CA",code:92},{name:"Caltanissetta",abbreviation:"CL",code:85},{name:"Campobasso",abbreviation:"CB",code:70},{name:"Carbonia Iglesias",abbreviation:"CI",code:70},{name:"Caserta",abbreviation:"CE",code:61},{name:"Catania",abbreviation:"CT",code:87},{name:"Catanzaro",abbreviation:"CZ",code:79},{name:"Chieti",abbreviation:"CH",code:69},{name:"Como",abbreviation:"CO",code:13},{name:"Cosenza",abbreviation:"CS",code:78},{name:"Cremona",abbreviation:"CR",code:19},{name:"Crotone",abbreviation:"KR",code:101},{name:"Cuneo",abbreviation:"CN",code:4},{name:"Enna",abbreviation:"EN",code:86},{name:"Fermo",abbreviation:"FM",code:86},{name:"Ferrara",abbreviation:"FE",code:38},{name:"Firenze",abbreviation:"FI",code:48},{name:"Foggia",abbreviation:"FG",code:71},{name:"Forli-Cesena",abbreviation:"FC",code:71},{name:"Frosinone",abbreviation:"FR",code:60},{name:"Genova",abbreviation:"GE",code:10},{name:"Gorizia",abbreviation:"GO",code:31},{name:"Grosseto",abbreviation:"GR",code:53},{name:"Imperia",abbreviation:"IM",code:8},{name:"Isernia",abbreviation:"IS",code:94},{name:"La-Spezia",abbreviation:"SP",code:66},{name:"Latina",abbreviation:"LT",code:59},{name:"Lecce",abbreviation:"LE",code:75},{name:"Lecco",abbreviation:"LC",code:97},{name:"Livorno",abbreviation:"LI",code:49},{name:"Lodi",abbreviation:"LO",code:98},{name:"Lucca",abbreviation:"LU",code:46},{name:"Macerata",abbreviation:"MC",code:43},{name:"Mantova",abbreviation:"MN",code:20},{name:"Massa-Carrara",abbreviation:"MS",code:45},{name:"Matera",abbreviation:"MT",code:77},{name:"Medio Campidano",abbreviation:"VS",code:77},{name:"Messina",abbreviation:"ME",code:83},{name:"Milano",abbreviation:"MI",code:15},{name:"Modena",abbreviation:"MO",code:36},{name:"Monza-Brianza",abbreviation:"MB",code:36},{name:"Napoli",abbreviation:"NA",code:63},{name:"Novara",abbreviation:"NO",code:3},{name:"Nuoro",abbreviation:"NU",code:91},{name:"Ogliastra",abbreviation:"OG",code:91},{name:"Olbia Tempio",abbreviation:"OT",code:91},{name:"Oristano",abbreviation:"OR",code:95},{name:"Padova",abbreviation:"PD",code:28},{name:"Palermo",abbreviation:"PA",code:82},{name:"Parma",abbreviation:"PR",code:34},{name:"Pavia",abbreviation:"PV",code:18},{name:"Perugia",abbreviation:"PG",code:54},{name:"Pesaro-Urbino",abbreviation:"PU",code:41},{name:"Pescara",abbreviation:"PE",code:68},{name:"Piacenza",abbreviation:"PC",code:33},{name:"Pisa",abbreviation:"PI",code:50},{name:"Pistoia",abbreviation:"PT",code:47},{name:"Pordenone",abbreviation:"PN",code:93},{name:"Potenza",abbreviation:"PZ",code:76},{name:"Prato",abbreviation:"PO",code:100},{name:"Ragusa",abbreviation:"RG",code:88},{name:"Ravenna",abbreviation:"RA",code:39},{name:"Reggio-Calabria",abbreviation:"RC",code:35},{name:"Reggio-Emilia",abbreviation:"RE",code:35},{name:"Rieti",abbreviation:"RI",code:57},{name:"Rimini",abbreviation:"RN",code:99},{name:"Roma",abbreviation:"Roma",code:58},{name:"Rovigo",abbreviation:"RO",code:29},{name:"Salerno",abbreviation:"SA",code:65},{name:"Sassari",abbreviation:"SS",code:90},{name:"Savona",abbreviation:"SV",code:9},{name:"Siena",abbreviation:"SI",code:52},{name:"Siracusa",abbreviation:"SR",code:89},{name:"Sondrio",abbreviation:"SO",code:14},{name:"Taranto",abbreviation:"TA",code:73},{name:"Teramo",abbreviation:"TE",code:67},{name:"Terni",abbreviation:"TR",code:55},{name:"Torino",abbreviation:"TO",code:1},{name:"Trapani",abbreviation:"TP",code:81},{name:"Trento",abbreviation:"TN",code:22},{name:"Treviso",abbreviation:"TV",code:26},{name:"Trieste",abbreviation:"TS",code:32},{name:"Udine",abbreviation:"UD",code:30},{name:"Varese",abbreviation:"VA",code:12},{name:"Venezia",abbreviation:"VE",code:27},{name:"Verbania",abbreviation:"VB",code:27},{name:"Vercelli",abbreviation:"VC",code:2},{name:"Verona",abbreviation:"VR",code:23},{name:"Vibo-Valentia",abbreviation:"VV",code:102},{name:"Vicenza",abbreviation:"VI",code:24},{name:"Viterbo",abbreviation:"VT",code:56}]},nationalities:[{name:"Afghan"},{name:"Albanian"},{name:"Algerian"},{name:"American"},{name:"Andorran"},{name:"Angolan"},{name:"Antiguans"},{name:"Argentinean"},{name:"Armenian"},{name:"Australian"},{name:"Austrian"},{name:"Azerbaijani"},{name:"Bahami"},{name:"Bahraini"},{name:"Bangladeshi"},{name:"Barbadian"},{name:"Barbudans"},{name:"Batswana"},{name:"Belarusian"},{name:"Belgian"},{name:"Belizean"},{name:"Beninese"},{name:"Bhutanese"},{name:"Bolivian"},{name:"Bosnian"},{name:"Brazilian"},{name:"British"},{name:"Bruneian"},{name:"Bulgarian"},{name:"Burkinabe"},{name:"Burmese"},{name:"Burundian"},{name:"Cambodian"},{name:"Cameroonian"},{name:"Canadian"},{name:"Cape Verdean"},{name:"Central African"},{name:"Chadian"},{name:"Chilean"},{name:"Chinese"},{name:"Colombian"},{name:"Comoran"},{name:"Congolese"},{name:"Costa Rican"},{name:"Croatian"},{name:"Cuban"},{name:"Cypriot"},{name:"Czech"},{name:"Danish"},{name:"Djibouti"},{name:"Dominican"},{name:"Dutch"},{name:"East Timorese"},{name:"Ecuadorean"},{name:"Egyptian"},{name:"Emirian"},{name:"Equatorial Guinean"},{name:"Eritrean"},{name:"Estonian"},{name:"Ethiopian"},{name:"Fijian"},{name:"Filipino"},{name:"Finnish"},{name:"French"},{name:"Gabonese"},{name:"Gambian"},{name:"Georgian"},{name:"German"},{name:"Ghanaian"},{name:"Greek"},{name:"Grenadian"},{name:"Guatemalan"},{name:"Guinea-Bissauan"},{name:"Guinean"},{name:"Guyanese"},{name:"Haitian"},{name:"Herzegovinian"},{name:"Honduran"},{name:"Hungarian"},{name:"I-Kiribati"},{name:"Icelander"},{name:"Indian"},{name:"Indonesian"},{name:"Iranian"},{name:"Iraqi"},{name:"Irish"},{name:"Israeli"},{name:"Italian"},{name:"Ivorian"},{name:"Jamaican"},{name:"Japanese"},{name:"Jordanian"},{name:"Kazakhstani"},{name:"Kenyan"},{name:"Kittian and Nevisian"},{name:"Kuwaiti"},{name:"Kyrgyz"},{name:"Laotian"},{name:"Latvian"},{name:"Lebanese"},{name:"Liberian"},{name:"Libyan"},{name:"Liechtensteiner"},{name:"Lithuanian"},{name:"Luxembourger"},{name:"Macedonian"},{name:"Malagasy"},{name:"Malawian"},{name:"Malaysian"},{name:"Maldivan"},{name:"Malian"},{name:"Maltese"},{name:"Marshallese"},{name:"Mauritanian"},{name:"Mauritian"},{name:"Mexican"},{name:"Micronesian"},{name:"Moldovan"},{name:"Monacan"},{name:"Mongolian"},{name:"Moroccan"},{name:"Mosotho"},{name:"Motswana"},{name:"Mozambican"},{name:"Namibian"},{name:"Nauruan"},{name:"Nepalese"},{name:"New Zealander"},{name:"Nicaraguan"},{name:"Nigerian"},{name:"Nigerien"},{name:"North Korean"},{name:"Northern Irish"},{name:"Norwegian"},{name:"Omani"},{name:"Pakistani"},{name:"Palauan"},{name:"Panamanian"},{name:"Papua New Guinean"},{name:"Paraguayan"},{name:"Peruvian"},{name:"Polish"},{name:"Portuguese"},{name:"Qatari"},{name:"Romani"},{name:"Russian"},{name:"Rwandan"},{name:"Saint Lucian"},{name:"Salvadoran"},{name:"Samoan"},{name:"San Marinese"},{name:"Sao Tomean"},{name:"Saudi"},{name:"Scottish"},{name:"Senegalese"},{name:"Serbian"},{name:"Seychellois"},{name:"Sierra Leonean"},{name:"Singaporean"},{name:"Slovakian"},{name:"Slovenian"},{name:"Solomon Islander"},{name:"Somali"},{name:"South African"},{name:"South Korean"},{name:"Spanish"},{name:"Sri Lankan"},{name:"Sudanese"},{name:"Surinamer"},{name:"Swazi"},{name:"Swedish"},{name:"Swiss"},{name:"Syrian"},{name:"Taiwanese"},{name:"Tajik"},{name:"Tanzanian"},{name:"Thai"},{name:"Togolese"},{name:"Tongan"},{name:"Trinidadian or Tobagonian"},{name:"Tunisian"},{name:"Turkish"},{name:"Tuvaluan"},{name:"Ugandan"},{name:"Ukrainian"},{name:"Uruguaya"},{name:"Uzbekistani"},{name:"Venezuela"},{name:"Vietnamese"},{name:"Wels"},{name:"Yemenit"},{name:"Zambia"},{name:"Zimbabwe"}],locale_languages:["aa","ab","ae","af","ak","am","an","ar","as","av","ay","az","ba","be","bg","bh","bi","bm","bn","bo","br","bs","ca","ce","ch","co","cr","cs","cu","cv","cy","da","de","dv","dz","ee","el","en","eo","es","et","eu","fa","ff","fi","fj","fo","fr","fy","ga","gd","gl","gn","gu","gv","ha","he","hi","ho","hr","ht","hu","hy","hz","ia","id","ie","ig","ii","ik","io","is","it","iu","ja","jv","ka","kg","ki","kj","kk","kl","km","kn","ko","kr","ks","ku","kv","kw","ky","la","lb","lg","li","ln","lo","lt","lu","lv","mg","mh","mi","mk","ml","mn","mr","ms","mt","my","na","nb","nd","ne","ng","nl","nn","no","nr","nv","ny","oc","oj","om","or","os","pa","pi","pl","ps","pt","qu","rm","rn","ro","ru","rw","sa","sc","sd","se","sg","si","sk","sl","sm","sn","so","sq","sr","ss","st","su","sv","sw","ta","te","tg","th","ti","tk","tl","tn","to","tr","ts","tt","tw","ty","ug","uk","ur","uz","ve","vi","vo","wa","wo","xh","yi","yo","za","zh","zu"],locale_regions:["agq-CM","asa-TZ","ast-ES","bas-CM","bem-ZM","bez-TZ","brx-IN","cgg-UG","chr-US","dav-KE","dje-NE","dsb-DE","dua-CM","dyo-SN","ebu-KE","ewo-CM","fil-PH","fur-IT","gsw-CH","gsw-FR","gsw-LI","guz-KE","haw-US","hsb-DE","jgo-CM","jmc-TZ","kab-DZ","kam-KE","kde-TZ","kea-CV","khq-ML","kkj-CM","kln-KE","kok-IN","ksb-TZ","ksf-CM","ksh-DE","lag-TZ","lkt-US","luo-KE","luy-KE","mas-KE","mas-TZ","mer-KE","mfe-MU","mgh-MZ","mgo-CM","mua-CM","naq-NA","nmg-CM","nnh-CM","nus-SD","nyn-UG","rof-TZ","rwk-TZ","sah-RU","saq-KE","sbp-TZ","seh-MZ","ses-ML","shi-Latn","shi-Latn-MA","shi-Tfng","shi-Tfng-MA","smn-FI","teo-KE","teo-UG","twq-NE","tzm-Latn","tzm-Latn-MA","vai-Latn","vai-Latn-LR","vai-Vaii","vai-Vaii-LR","vun-TZ","wae-CH","xog-UG","yav-CM","zgh-MA","af-NA","af-ZA","ak-GH","am-ET","ar-001","ar-AE","ar-BH","ar-DJ","ar-DZ","ar-EG","ar-EH","ar-ER","ar-IL","ar-IQ","ar-JO","ar-KM","ar-KW","ar-LB","ar-LY","ar-MA","ar-MR","ar-OM","ar-PS","ar-QA","ar-SA","ar-SD","ar-SO","ar-SS","ar-SY","ar-TD","ar-TN","ar-YE","as-IN","az-Cyrl","az-Cyrl-AZ","az-Latn","az-Latn-AZ","be-BY","bg-BG","bm-Latn","bm-Latn-ML","bn-BD","bn-IN","bo-CN","bo-IN","br-FR","bs-Cyrl","bs-Cyrl-BA","bs-Latn","bs-Latn-BA","ca-AD","ca-ES","ca-ES-VALENCIA","ca-FR","ca-IT","cs-CZ","cy-GB","da-DK","da-GL","de-AT","de-BE","de-CH","de-DE","de-LI","de-LU","dz-BT","ee-GH","ee-TG","el-CY","el-GR","en-001","en-150","en-AG","en-AI","en-AS","en-AU","en-BB","en-BE","en-BM","en-BS","en-BW","en-BZ","en-CA","en-CC","en-CK","en-CM","en-CX","en-DG","en-DM","en-ER","en-FJ","en-FK","en-FM","en-GB","en-GD","en-GG","en-GH","en-GI","en-GM","en-GU","en-GY","en-HK","en-IE","en-IM","en-IN","en-IO","en-JE","en-JM","en-KE","en-KI","en-KN","en-KY","en-LC","en-LR","en-LS","en-MG","en-MH","en-MO","en-MP","en-MS","en-MT","en-MU","en-MW","en-MY","en-NA","en-NF","en-NG","en-NR","en-NU","en-NZ","en-PG","en-PH","en-PK","en-PN","en-PR","en-PW","en-RW","en-SB","en-SC","en-SD","en-SG","en-SH","en-SL","en-SS","en-SX","en-SZ","en-TC","en-TK","en-TO","en-TT","en-TV","en-TZ","en-UG","en-UM","en-US","en-US-POSIX","en-VC","en-VG","en-VI","en-VU","en-WS","en-ZA","en-ZM","en-ZW","eo-001","es-419","es-AR","es-BO","es-CL","es-CO","es-CR","es-CU","es-DO","es-EA","es-EC","es-ES","es-GQ","es-GT","es-HN","es-IC","es-MX","es-NI","es-PA","es-PE","es-PH","es-PR","es-PY","es-SV","es-US","es-UY","es-VE","et-EE","eu-ES","fa-AF","fa-IR","ff-CM","ff-GN","ff-MR","ff-SN","fi-FI","fo-FO","fr-BE","fr-BF","fr-BI","fr-BJ","fr-BL","fr-CA","fr-CD","fr-CF","fr-CG","fr-CH","fr-CI","fr-CM","fr-DJ","fr-DZ","fr-FR","fr-GA","fr-GF","fr-GN","fr-GP","fr-GQ","fr-HT","fr-KM","fr-LU","fr-MA","fr-MC","fr-MF","fr-MG","fr-ML","fr-MQ","fr-MR","fr-MU","fr-NC","fr-NE","fr-PF","fr-PM","fr-RE","fr-RW","fr-SC","fr-SN","fr-SY","fr-TD","fr-TG","fr-TN","fr-VU","fr-WF","fr-YT","fy-NL","ga-IE","gd-GB","gl-ES","gu-IN","gv-IM","ha-Latn","ha-Latn-GH","ha-Latn-NE","ha-Latn-NG","he-IL","hi-IN","hr-BA","hr-HR","hu-HU","hy-AM","id-ID","ig-NG","ii-CN","is-IS","it-CH","it-IT","it-SM","ja-JP","ka-GE","ki-KE","kk-Cyrl","kk-Cyrl-KZ","kl-GL","km-KH","kn-IN","ko-KP","ko-KR","ks-Arab","ks-Arab-IN","kw-GB","ky-Cyrl","ky-Cyrl-KG","lb-LU","lg-UG","ln-AO","ln-CD","ln-CF","ln-CG","lo-LA","lt-LT","lu-CD","lv-LV","mg-MG","mk-MK","ml-IN","mn-Cyrl","mn-Cyrl-MN","mr-IN","ms-Latn","ms-Latn-BN","ms-Latn-MY","ms-Latn-SG","mt-MT","my-MM","nb-NO","nb-SJ","nd-ZW","ne-IN","ne-NP","nl-AW","nl-BE","nl-BQ","nl-CW","nl-NL","nl-SR","nl-SX","nn-NO","om-ET","om-KE","or-IN","os-GE","os-RU","pa-Arab","pa-Arab-PK","pa-Guru","pa-Guru-IN","pl-PL","ps-AF","pt-AO","pt-BR","pt-CV","pt-GW","pt-MO","pt-MZ","pt-PT","pt-ST","pt-TL","qu-BO","qu-EC","qu-PE","rm-CH","rn-BI","ro-MD","ro-RO","ru-BY","ru-KG","ru-KZ","ru-MD","ru-RU","ru-UA","rw-RW","se-FI","se-NO","se-SE","sg-CF","si-LK","sk-SK","sl-SI","sn-ZW","so-DJ","so-ET","so-KE","so-SO","sq-AL","sq-MK","sq-XK","sr-Cyrl","sr-Cyrl-BA","sr-Cyrl-ME","sr-Cyrl-RS","sr-Cyrl-XK","sr-Latn","sr-Latn-BA","sr-Latn-ME","sr-Latn-RS","sr-Latn-XK","sv-AX","sv-FI","sv-SE","sw-CD","sw-KE","sw-TZ","sw-UG","ta-IN","ta-LK","ta-MY","ta-SG","te-IN","th-TH","ti-ER","ti-ET","to-TO","tr-CY","tr-TR","ug-Arab","ug-Arab-CN","uk-UA","ur-IN","ur-PK","uz-Arab","uz-Arab-AF","uz-Cyrl","uz-Cyrl-UZ","uz-Latn","uz-Latn-UZ","vi-VN","yi-001","yo-BJ","yo-NG","zh-Hans","zh-Hans-CN","zh-Hans-HK","zh-Hans-MO","zh-Hans-SG","zh-Hant","zh-Hant-HK","zh-Hant-MO","zh-Hant-TW","zu-ZA"],us_states_and_dc:[{name:"Alabama",abbreviation:"AL"},{name:"Alaska",abbreviation:"AK"},{name:"Arizona",abbreviation:"AZ"},{name:"Arkansas",abbreviation:"AR"},{name:"California",abbreviation:"CA"},{name:"Colorado",abbreviation:"CO"},{name:"Connecticut",abbreviation:"CT"},{name:"Delaware",abbreviation:"DE"},{name:"District of Columbia",abbreviation:"DC"},{name:"Florida",abbreviation:"FL"},{name:"Georgia",abbreviation:"GA"},{name:"Hawaii",abbreviation:"HI"},{name:"Idaho",abbreviation:"ID"},{name:"Illinois",abbreviation:"IL"},{name:"Indiana",abbreviation:"IN"},{name:"Iowa",abbreviation:"IA"},{name:"Kansas",abbreviation:"KS"},{name:"Kentucky",abbreviation:"KY"},{name:"Louisiana",abbreviation:"LA"},{name:"Maine",abbreviation:"ME"},{name:"Maryland",abbreviation:"MD"},{name:"Massachusetts",abbreviation:"MA"},{name:"Michigan",abbreviation:"MI"},{name:"Minnesota",abbreviation:"MN"},{name:"Mississippi",abbreviation:"MS"},{name:"Missouri",abbreviation:"MO"},{name:"Montana",abbreviation:"MT"},{name:"Nebraska",abbreviation:"NE"},{name:"Nevada",abbreviation:"NV"},{name:"New Hampshire",abbreviation:"NH"},{name:"New Jersey",abbreviation:"NJ"},{name:"New Mexico",abbreviation:"NM"},{name:"New York",abbreviation:"NY"},{name:"North Carolina",abbreviation:"NC"},{name:"North Dakota",abbreviation:"ND"},{name:"Ohio",abbreviation:"OH"},{name:"Oklahoma",abbreviation:"OK"},{name:"Oregon",abbreviation:"OR"},{name:"Pennsylvania",abbreviation:"PA"},{name:"Rhode Island",abbreviation:"RI"},{name:"South Carolina",abbreviation:"SC"},{name:"South Dakota",abbreviation:"SD"},{name:"Tennessee",abbreviation:"TN"},{name:"Texas",abbreviation:"TX"},{name:"Utah",abbreviation:"UT"},{name:"Vermont",abbreviation:"VT"},{name:"Virginia",abbreviation:"VA"},{name:"Washington",abbreviation:"WA"},{name:"West Virginia",abbreviation:"WV"},{name:"Wisconsin",abbreviation:"WI"},{name:"Wyoming",abbreviation:"WY"}],territories:[{name:"American Samoa",abbreviation:"AS"},{name:"Federated States of Micronesia",abbreviation:"FM"},{name:"Guam",abbreviation:"GU"},{name:"Marshall Islands",abbreviation:"MH"},{name:"Northern Mariana Islands",abbreviation:"MP"},{name:"Puerto Rico",abbreviation:"PR"},{name:"Virgin Islands, U.S.",abbreviation:"VI"}],armed_forces:[{name:"Armed Forces Europe",abbreviation:"AE"},{name:"Armed Forces Pacific",abbreviation:"AP"},{name:"Armed Forces the Americas",abbreviation:"AA"}],country_regions:{it:[{name:"Valle d'Aosta",abbreviation:"VDA"},{name:"Piemonte",abbreviation:"PIE"},{name:"Lombardia",abbreviation:"LOM"},{name:"Veneto",abbreviation:"VEN"},{name:"Trentino Alto Adige",abbreviation:"TAA"},{name:"Friuli Venezia Giulia",abbreviation:"FVG"},{name:"Liguria",abbreviation:"LIG"},{name:"Emilia Romagna",abbreviation:"EMR"},{name:"Toscana",abbreviation:"TOS"},{name:"Umbria",abbreviation:"UMB"},{name:"Marche",abbreviation:"MAR"},{name:"Abruzzo",abbreviation:"ABR"},{name:"Lazio",abbreviation:"LAZ"},{name:"Campania",abbreviation:"CAM"},{name:"Puglia",abbreviation:"PUG"},{name:"Basilicata",abbreviation:"BAS"},{name:"Molise",abbreviation:"MOL"},{name:"Calabria",abbreviation:"CAL"},{name:"Sicilia",abbreviation:"SIC"},{name:"Sardegna",abbreviation:"SAR"}],mx:[{name:"Aguascalientes",abbreviation:"AGU"},{name:"Baja California",abbreviation:"BCN"},{name:"Baja California Sur",abbreviation:"BCS"},{name:"Campeche",abbreviation:"CAM"},{name:"Chiapas",abbreviation:"CHP"},{name:"Chihuahua",abbreviation:"CHH"},{name:"Ciudad de M\xe9xico",abbreviation:"DIF"},{name:"Coahuila",abbreviation:"COA"},{name:"Colima",abbreviation:"COL"},{name:"Durango",abbreviation:"DUR"},{name:"Guanajuato",abbreviation:"GUA"},{name:"Guerrero",abbreviation:"GRO"},{name:"Hidalgo",abbreviation:"HID"},{name:"Jalisco",abbreviation:"JAL"},{name:"M\xe9xico",abbreviation:"MEX"},{name:"Michoac\xe1n",abbreviation:"MIC"},{name:"Morelos",abbreviation:"MOR"},{name:"Nayarit",abbreviation:"NAY"},{name:"Nuevo Le\xf3n",abbreviation:"NLE"},{name:"Oaxaca",abbreviation:"OAX"},{name:"Puebla",abbreviation:"PUE"},{name:"Quer\xe9taro",abbreviation:"QUE"},{name:"Quintana Roo",abbreviation:"ROO"},{name:"San Luis Potos\xed",abbreviation:"SLP"},{name:"Sinaloa",abbreviation:"SIN"},{name:"Sonora",abbreviation:"SON"},{name:"Tabasco",abbreviation:"TAB"},{name:"Tamaulipas",abbreviation:"TAM"},{name:"Tlaxcala",abbreviation:"TLA"},{name:"Veracruz",abbreviation:"VER"},{name:"Yucat\xe1n",abbreviation:"YUC"},{name:"Zacatecas",abbreviation:"ZAC"}]},street_suffixes:{us:[{name:"Avenue",abbreviation:"Ave"},{name:"Boulevard",abbreviation:"Blvd"},{name:"Center",abbreviation:"Ctr"},{name:"Circle",abbreviation:"Cir"},{name:"Court",abbreviation:"Ct"},{name:"Drive",abbreviation:"Dr"},{name:"Extension",abbreviation:"Ext"},{name:"Glen",abbreviation:"Gln"},{name:"Grove",abbreviation:"Grv"},{name:"Heights",abbreviation:"Hts"},{name:"Highway",abbreviation:"Hwy"},{name:"Junction",abbreviation:"Jct"},{name:"Key",abbreviation:"Key"},{name:"Lane",abbreviation:"Ln"},{name:"Loop",abbreviation:"Loop"},{name:"Manor",abbreviation:"Mnr"},{name:"Mill",abbreviation:"Mill"},{name:"Park",abbreviation:"Park"},{name:"Parkway",abbreviation:"Pkwy"},{name:"Pass",abbreviation:"Pass"},{name:"Path",abbreviation:"Path"},{name:"Pike",abbreviation:"Pike"},{name:"Place",abbreviation:"Pl"},{name:"Plaza",abbreviation:"Plz"},{name:"Point",abbreviation:"Pt"},{name:"Ridge",abbreviation:"Rdg"},{name:"River",abbreviation:"Riv"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Trail",abbreviation:"Trl"},{name:"Turnpike",abbreviation:"Tpke"},{name:"View",abbreviation:"Vw"},{name:"Way",abbreviation:"Way"}],it:[{name:"Accesso",abbreviation:"Acc."},{name:"Alzaia",abbreviation:"Alz."},{name:"Arco",abbreviation:"Arco"},{name:"Archivolto",abbreviation:"Acv."},{name:"Arena",abbreviation:"Arena"},{name:"Argine",abbreviation:"Argine"},{name:"Bacino",abbreviation:"Bacino"},{name:"Banchi",abbreviation:"Banchi"},{name:"Banchina",abbreviation:"Ban."},{name:"Bastioni",abbreviation:"Bas."},{name:"Belvedere",abbreviation:"Belv."},{name:"Borgata",abbreviation:"B.ta"},{name:"Borgo",abbreviation:"B.go"},{name:"Calata",abbreviation:"Cal."},{name:"Calle",abbreviation:"Calle"},{name:"Campiello",abbreviation:"Cam."},{name:"Campo",abbreviation:"Cam."},{name:"Canale",abbreviation:"Can."},{name:"Carraia",abbreviation:"Carr."},{name:"Cascina",abbreviation:"Cascina"},{name:"Case sparse",abbreviation:"c.s."},{name:"Cavalcavia",abbreviation:"Cv."},{name:"Circonvallazione",abbreviation:"Cv."},{name:"Complanare",abbreviation:"C.re"},{name:"Contrada",abbreviation:"C.da"},{name:"Corso",abbreviation:"C.so"},{name:"Corte",abbreviation:"C.te"},{name:"Cortile",abbreviation:"C.le"},{name:"Diramazione",abbreviation:"Dir."},{name:"Fondaco",abbreviation:"F.co"},{name:"Fondamenta",abbreviation:"F.ta"},{name:"Fondo",abbreviation:"F.do"},{name:"Frazione",abbreviation:"Fr."},{name:"Isola",abbreviation:"Is."},{name:"Largo",abbreviation:"L.go"},{name:"Litoranea",abbreviation:"Lit."},{name:"Lungolago",abbreviation:"L.go lago"},{name:"Lungo Po",abbreviation:"l.go Po"},{name:"Molo",abbreviation:"Molo"},{name:"Mura",abbreviation:"Mura"},{name:"Passaggio privato",abbreviation:"pass. priv."},{name:"Passeggiata",abbreviation:"Pass."},{name:"Piazza",abbreviation:"P.zza"},{name:"Piazzale",abbreviation:"P.le"},{name:"Ponte",abbreviation:"P.te"},{name:"Portico",abbreviation:"P.co"},{name:"Rampa",abbreviation:"Rampa"},{name:"Regione",abbreviation:"Reg."},{name:"Rione",abbreviation:"R.ne"},{name:"Rio",abbreviation:"Rio"},{name:"Ripa",abbreviation:"Ripa"},{name:"Riva",abbreviation:"Riva"},{name:"Rond\xf2",abbreviation:"Rond\xf2"},{name:"Rotonda",abbreviation:"Rot."},{name:"Sagrato",abbreviation:"Sagr."},{name:"Salita",abbreviation:"Sal."},{name:"Scalinata",abbreviation:"Scal."},{name:"Scalone",abbreviation:"Scal."},{name:"Slargo",abbreviation:"Sl."},{name:"Sottoportico",abbreviation:"Sott."},{name:"Strada",abbreviation:"Str."},{name:"Stradale",abbreviation:"Str.le"},{name:"Strettoia",abbreviation:"Strett."},{name:"Traversa",abbreviation:"Trav."},{name:"Via",abbreviation:"V."},{name:"Viale",abbreviation:"V.le"},{name:"Vicinale",abbreviation:"Vic.le"},{name:"Vicolo",abbreviation:"Vic."}],uk:[{name:"Avenue",abbreviation:"Ave"},{name:"Close",abbreviation:"Cl"},{name:"Court",abbreviation:"Ct"},{name:"Crescent",abbreviation:"Cr"},{name:"Drive",abbreviation:"Dr"},{name:"Garden",abbreviation:"Gdn"},{name:"Gardens",abbreviation:"Gdns"},{name:"Green",abbreviation:"Gn"},{name:"Grove",abbreviation:"Gr"},{name:"Lane",abbreviation:"Ln"},{name:"Mount",abbreviation:"Mt"},{name:"Place",abbreviation:"Pl"},{name:"Park",abbreviation:"Pk"},{name:"Ridge",abbreviation:"Rdg"},{name:"Road",abbreviation:"Rd"},{name:"Square",abbreviation:"Sq"},{name:"Street",abbreviation:"St"},{name:"Terrace",abbreviation:"Ter"},{name:"Valley",abbreviation:"Val"}]},months:[{name:"January",short_name:"Jan",numeric:"01",days:31},{name:"February",short_name:"Feb",numeric:"02",days:28},{name:"March",short_name:"Mar",numeric:"03",days:31},{name:"April",short_name:"Apr",numeric:"04",days:30},{name:"May",short_name:"May",numeric:"05",days:31},{name:"June",short_name:"Jun",numeric:"06",days:30},{name:"July",short_name:"Jul",numeric:"07",days:31},{name:"August",short_name:"Aug",numeric:"08",days:31},{name:"September",short_name:"Sep",numeric:"09",days:30},{name:"October",short_name:"Oct",numeric:"10",days:31},{name:"November",short_name:"Nov",numeric:"11",days:30},{name:"December",short_name:"Dec",numeric:"12",days:31}],cc_types:[{name:"American Express",short_name:"amex",prefix:"34",length:15},{name:"Bankcard",short_name:"bankcard",prefix:"5610",length:16},{name:"China UnionPay",short_name:"chinaunion",prefix:"62",length:16},{name:"Diners Club Carte Blanche",short_name:"dccarte",prefix:"300",length:14},{name:"Diners Club enRoute",short_name:"dcenroute",prefix:"2014",length:15},{name:"Diners Club International",short_name:"dcintl",prefix:"36",length:14},{name:"Diners Club United States & Canada",short_name:"dcusc",prefix:"54",length:16},{name:"Discover Card",short_name:"discover",prefix:"6011",length:16},{name:"InstaPayment",short_name:"instapay",prefix:"637",length:16},{name:"JCB",short_name:"jcb",prefix:"3528",length:16},{name:"Laser",short_name:"laser",prefix:"6304",length:16},{name:"Maestro",short_name:"maestro",prefix:"5018",length:16},{name:"Mastercard",short_name:"mc",prefix:"51",length:16},{name:"Solo",short_name:"solo",prefix:"6334",length:16},{name:"Switch",short_name:"switch",prefix:"4903",length:16},{name:"Visa",short_name:"visa",prefix:"4",length:16},{name:"Visa Electron",short_name:"electron",prefix:"4026",length:16}],currency_types:[{code:"AED",name:"United Arab Emirates Dirham"},{code:"AFN",name:"Afghanistan Afghani"},{code:"ALL",name:"Albania Lek"},{code:"AMD",name:"Armenia Dram"},{code:"ANG",name:"Netherlands Antilles Guilder"},{code:"AOA",name:"Angola Kwanza"},{code:"ARS",name:"Argentina Peso"},{code:"AUD",name:"Australia Dollar"},{code:"AWG",name:"Aruba Guilder"},{code:"AZN",name:"Azerbaijan New Manat"},{code:"BAM",name:"Bosnia and Herzegovina Convertible Marka"},{code:"BBD",name:"Barbados Dollar"},{code:"BDT",name:"Bangladesh Taka"},{code:"BGN",name:"Bulgaria Lev"},{code:"BHD",name:"Bahrain Dinar"},{code:"BIF",name:"Burundi Franc"},{code:"BMD",name:"Bermuda Dollar"},{code:"BND",name:"Brunei Darussalam Dollar"},{code:"BOB",name:"Bolivia Boliviano"},{code:"BRL",name:"Brazil Real"},{code:"BSD",name:"Bahamas Dollar"},{code:"BTN",name:"Bhutan Ngultrum"},{code:"BWP",name:"Botswana Pula"},{code:"BYR",name:"Belarus Ruble"},{code:"BZD",name:"Belize Dollar"},{code:"CAD",name:"Canada Dollar"},{code:"CDF",name:"Congo/Kinshasa Franc"},{code:"CHF",name:"Switzerland Franc"},{code:"CLP",name:"Chile Peso"},{code:"CNY",name:"China Yuan Renminbi"},{code:"COP",name:"Colombia Peso"},{code:"CRC",name:"Costa Rica Colon"},{code:"CUC",name:"Cuba Convertible Peso"},{code:"CUP",name:"Cuba Peso"},{code:"CVE",name:"Cape Verde Escudo"},{code:"CZK",name:"Czech Republic Koruna"},{code:"DJF",name:"Djibouti Franc"},{code:"DKK",name:"Denmark Krone"},{code:"DOP",name:"Dominican Republic Peso"},{code:"DZD",name:"Algeria Dinar"},{code:"EGP",name:"Egypt Pound"},{code:"ERN",name:"Eritrea Nakfa"},{code:"ETB",name:"Ethiopia Birr"},{code:"EUR",name:"Euro Member Countries"},{code:"FJD",name:"Fiji Dollar"},{code:"FKP",name:"Falkland Islands (Malvinas) Pound"},{code:"GBP",name:"United Kingdom Pound"},{code:"GEL",name:"Georgia Lari"},{code:"GGP",name:"Guernsey Pound"},{code:"GHS",name:"Ghana Cedi"},{code:"GIP",name:"Gibraltar Pound"},{code:"GMD",name:"Gambia Dalasi"},{code:"GNF",name:"Guinea Franc"},{code:"GTQ",name:"Guatemala Quetzal"},{code:"GYD",name:"Guyana Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"HNL",name:"Honduras Lempira"},{code:"HRK",name:"Croatia Kuna"},{code:"HTG",name:"Haiti Gourde"},{code:"HUF",name:"Hungary Forint"},{code:"IDR",name:"Indonesia Rupiah"},{code:"ILS",name:"Israel Shekel"},{code:"IMP",name:"Isle of Man Pound"},{code:"INR",name:"India Rupee"},{code:"IQD",name:"Iraq Dinar"},{code:"IRR",name:"Iran Rial"},{code:"ISK",name:"Iceland Krona"},{code:"JEP",name:"Jersey Pound"},{code:"JMD",name:"Jamaica Dollar"},{code:"JOD",name:"Jordan Dinar"},{code:"JPY",name:"Japan Yen"},{code:"KES",name:"Kenya Shilling"},{code:"KGS",name:"Kyrgyzstan Som"},{code:"KHR",name:"Cambodia Riel"},{code:"KMF",name:"Comoros Franc"},{code:"KPW",name:"Korea (North) Won"},{code:"KRW",name:"Korea (South) Won"},{code:"KWD",name:"Kuwait Dinar"},{code:"KYD",name:"Cayman Islands Dollar"},{code:"KZT",name:"Kazakhstan Tenge"},{code:"LAK",name:"Laos Kip"},{code:"LBP",name:"Lebanon Pound"},{code:"LKR",name:"Sri Lanka Rupee"},{code:"LRD",name:"Liberia Dollar"},{code:"LSL",name:"Lesotho Loti"},{code:"LTL",name:"Lithuania Litas"},{code:"LYD",name:"Libya Dinar"},{code:"MAD",name:"Morocco Dirham"},{code:"MDL",name:"Moldova Leu"},{code:"MGA",name:"Madagascar Ariary"},{code:"MKD",name:"Macedonia Denar"},{code:"MMK",name:"Myanmar (Burma) Kyat"},{code:"MNT",name:"Mongolia Tughrik"},{code:"MOP",name:"Macau Pataca"},{code:"MRO",name:"Mauritania Ouguiya"},{code:"MUR",name:"Mauritius Rupee"},{code:"MVR",name:"Maldives (Maldive Islands) Rufiyaa"},{code:"MWK",name:"Malawi Kwacha"},{code:"MXN",name:"Mexico Peso"},{code:"MYR",name:"Malaysia Ringgit"},{code:"MZN",name:"Mozambique Metical"},{code:"NAD",name:"Namibia Dollar"},{code:"NGN",name:"Nigeria Naira"},{code:"NIO",name:"Nicaragua Cordoba"},{code:"NOK",name:"Norway Krone"},{code:"NPR",name:"Nepal Rupee"},{code:"NZD",name:"New Zealand Dollar"},{code:"OMR",name:"Oman Rial"},{code:"PAB",name:"Panama Balboa"},{code:"PEN",name:"Peru Nuevo Sol"},{code:"PGK",name:"Papua New Guinea Kina"},{code:"PHP",name:"Philippines Peso"},{code:"PKR",name:"Pakistan Rupee"},{code:"PLN",name:"Poland Zloty"},{code:"PYG",name:"Paraguay Guarani"},{code:"QAR",name:"Qatar Riyal"},{code:"RON",name:"Romania New Leu"},{code:"RSD",name:"Serbia Dinar"},{code:"RUB",name:"Russia Ruble"},{code:"RWF",name:"Rwanda Franc"},{code:"SAR",name:"Saudi Arabia Riyal"},{code:"SBD",name:"Solomon Islands Dollar"},{code:"SCR",name:"Seychelles Rupee"},{code:"SDG",name:"Sudan Pound"},{code:"SEK",name:"Sweden Krona"},{code:"SGD",name:"Singapore Dollar"},{code:"SHP",name:"Saint Helena Pound"},{code:"SLL",name:"Sierra Leone Leone"},{code:"SOS",name:"Somalia Shilling"},{code:"SPL",name:"Seborga Luigino"},{code:"SRD",name:"Suriname Dollar"},{code:"STD",name:"S\xe3o Tom\xe9 and Pr\xedncipe Dobra"},{code:"SVC",name:"El Salvador Colon"},{code:"SYP",name:"Syria Pound"},{code:"SZL",name:"Swaziland Lilangeni"},{code:"THB",name:"Thailand Baht"},{code:"TJS",name:"Tajikistan Somoni"},{code:"TMT",name:"Turkmenistan Manat"},{code:"TND",name:"Tunisia Dinar"},{code:"TOP",name:"Tonga Pa'anga"},{code:"TRY",name:"Turkey Lira"},{code:"TTD",name:"Trinidad and Tobago Dollar"},{code:"TVD",name:"Tuvalu Dollar"},{code:"TWD",name:"Taiwan New Dollar"},{code:"TZS",name:"Tanzania Shilling"},{code:"UAH",name:"Ukraine Hryvnia"},{code:"UGX",name:"Uganda Shilling"},{code:"USD",name:"United States Dollar"},{code:"UYU",name:"Uruguay Peso"},{code:"UZS",name:"Uzbekistan Som"},{code:"VEF",name:"Venezuela Bolivar"},{code:"VND",name:"Viet Nam Dong"},{code:"VUV",name:"Vanuatu Vatu"},{code:"WST",name:"Samoa Tala"},{code:"XAF",name:"Communaut\xe9 Financi\xe8re Africaine (BEAC) CFA Franc BEAC"},{code:"XCD",name:"East Caribbean Dollar"},{code:"XDR",name:"International Monetary Fund (IMF) Special Drawing Rights"},{code:"XOF",name:"Communaut\xe9 Financi\xe8re Africaine (BCEAO) Franc"},{code:"XPF",name:"Comptoirs Fran\xe7ais du Pacifique (CFP) Franc"},{code:"YER",name:"Yemen Rial"},{code:"ZAR",name:"South Africa Rand"},{code:"ZMW",name:"Zambia Kwacha"},{code:"ZWD",name:"Zimbabwe Dollar"}],colorNames:["AliceBlue","Black","Navy","DarkBlue","MediumBlue","Blue","DarkGreen","Green","Teal","DarkCyan","DeepSkyBlue","DarkTurquoise","MediumSpringGreen","Lime","SpringGreen","Aqua","Cyan","MidnightBlue","DodgerBlue","LightSeaGreen","ForestGreen","SeaGreen","DarkSlateGray","LimeGreen","MediumSeaGreen","Turquoise","RoyalBlue","SteelBlue","DarkSlateBlue","MediumTurquoise","Indigo","DarkOliveGreen","CadetBlue","CornflowerBlue","RebeccaPurple","MediumAquaMarine","DimGray","SlateBlue","OliveDrab","SlateGray","LightSlateGray","MediumSlateBlue","LawnGreen","Chartreuse","Aquamarine","Maroon","Purple","Olive","Gray","SkyBlue","LightSkyBlue","BlueViolet","DarkRed","DarkMagenta","SaddleBrown","Ivory","White","DarkSeaGreen","LightGreen","MediumPurple","DarkViolet","PaleGreen","DarkOrchid","YellowGreen","Sienna","Brown","DarkGray","LightBlue","GreenYellow","PaleTurquoise","LightSteelBlue","PowderBlue","FireBrick","DarkGoldenRod","MediumOrchid","RosyBrown","DarkKhaki","Silver","MediumVioletRed","IndianRed","Peru","Chocolate","Tan","LightGray","Thistle","Orchid","GoldenRod","PaleVioletRed","Crimson","Gainsboro","Plum","BurlyWood","LightCyan","Lavender","DarkSalmon","Violet","PaleGoldenRod","LightCoral","Khaki","AliceBlue","HoneyDew","Azure","SandyBrown","Wheat","Beige","WhiteSmoke","MintCream","GhostWhite","Salmon","AntiqueWhite","Linen","LightGoldenRodYellow","OldLace","Red","Fuchsia","Magenta","DeepPink","OrangeRed","Tomato","HotPink","Coral","DarkOrange","LightSalmon","Orange","LightPink","Pink","Gold","PeachPuff","NavajoWhite","Moccasin","Bisque","MistyRose","BlanchedAlmond","PapayaWhip","LavenderBlush","SeaShell","Cornsilk","LemonChiffon","FloralWhite","Snow","Yellow","LightYellow"],company:["3Com Corp","3M Company","A.G. Edwards Inc.","Abbott Laboratories","Abercrombie & Fitch Co.","ABM Industries Incorporated","Ace Hardware Corporation","ACT Manufacturing Inc.","Acterna Corp.","Adams Resources & Energy, Inc.","ADC Telecommunications, Inc.","Adelphia Communications Corporation","Administaff, Inc.","Adobe Systems Incorporated","Adolph Coors Company","Advance Auto Parts, Inc.","Advanced Micro Devices, Inc.","AdvancePCS, Inc.","Advantica Restaurant Group, Inc.","The AES Corporation","Aetna Inc.","Affiliated Computer Services, Inc.","AFLAC Incorporated","AGCO Corporation","Agilent Technologies, Inc.","Agway Inc.","Apartment Investment and Management Company","Air Products and Chemicals, Inc.","Airborne, Inc.","Airgas, Inc.","AK Steel Holding Corporation","Alaska Air Group, Inc.","Alberto-Culver Company","Albertson's, Inc.","Alcoa Inc.","Alleghany Corporation","Allegheny Energy, Inc.","Allegheny Technologies Incorporated","Allergan, Inc.","ALLETE, Inc.","Alliant Energy Corporation","Allied Waste Industries, Inc.","Allmerica Financial Corporation","The Allstate Corporation","ALLTEL Corporation","The Alpine Group, Inc.","Amazon.com, Inc.","AMC Entertainment Inc.","American Power Conversion Corporation","Amerada Hess Corporation","AMERCO","Ameren Corporation","America West Holdings Corporation","American Axle & Manufacturing Holdings, Inc.","American Eagle Outfitters, Inc.","American Electric Power Company, Inc.","American Express Company","American Financial Group, Inc.","American Greetings Corporation","American International Group, Inc.","American Standard Companies Inc.","American Water Works Company, Inc.","AmerisourceBergen Corporation","Ames Department Stores, Inc.","Amgen Inc.","Amkor Technology, Inc.","AMR Corporation","AmSouth Bancorp.","Amtran, Inc.","Anadarko Petroleum Corporation","Analog Devices, Inc.","Anheuser-Busch Companies, Inc.","Anixter International Inc.","AnnTaylor Inc.","Anthem, Inc.","AOL Time Warner Inc.","Aon Corporation","Apache Corporation","Apple Computer, Inc.","Applera Corporation","Applied Industrial Technologies, Inc.","Applied Materials, Inc.","Aquila, Inc.","ARAMARK Corporation","Arch Coal, Inc.","Archer Daniels Midland Company","Arkansas Best Corporation","Armstrong Holdings, Inc.","Arrow Electronics, Inc.","ArvinMeritor, Inc.","Ashland Inc.","Astoria Financial Corporation","AT&T Corp.","Atmel Corporation","Atmos Energy Corporation","Audiovox Corporation","Autoliv, Inc.","Automatic Data Processing, Inc.","AutoNation, Inc.","AutoZone, Inc.","Avaya Inc.","Avery Dennison Corporation","Avista Corporation","Avnet, Inc.","Avon Products, Inc.","Baker Hughes Incorporated","Ball Corporation","Bank of America Corporation","The Bank of New York Company, Inc.","Bank One Corporation","Banknorth Group, Inc.","Banta Corporation","Barnes & Noble, Inc.","Bausch & Lomb Incorporated","Baxter International Inc.","BB&T Corporation","The Bear Stearns Companies Inc.","Beazer Homes USA, Inc.","Beckman Coulter, Inc.","Becton, Dickinson and Company","Bed Bath & Beyond Inc.","Belk, Inc.","Bell Microproducts Inc.","BellSouth Corporation","Belo Corp.","Bemis Company, Inc.","Benchmark Electronics, Inc.","Berkshire Hathaway Inc.","Best Buy Co., Inc.","Bethlehem Steel Corporation","Beverly Enterprises, Inc.","Big Lots, Inc.","BJ Services Company","BJ's Wholesale Club, Inc.","The Black & Decker Corporation","Black Hills Corporation","BMC Software, Inc.","The Boeing Company","Boise Cascade Corporation","Borders Group, Inc.","BorgWarner Inc.","Boston Scientific Corporation","Bowater Incorporated","Briggs & Stratton Corporation","Brightpoint, Inc.","Brinker International, Inc.","Bristol-Myers Squibb Company","Broadwing, Inc.","Brown Shoe Company, Inc.","Brown-Forman Corporation","Brunswick Corporation","Budget Group, Inc.","Burlington Coat Factory Warehouse Corporation","Burlington Industries, Inc.","Burlington Northern Santa Fe Corporation","Burlington Resources Inc.","C. H. Robinson Worldwide Inc.","Cablevision Systems Corp","Cabot Corp","Cadence Design Systems, Inc.","Calpine Corp.","Campbell Soup Co.","Capital One Financial Corp.","Cardinal Health Inc.","Caremark Rx Inc.","Carlisle Cos. Inc.","Carpenter Technology Corp.","Casey's General Stores Inc.","Caterpillar Inc.","CBRL Group Inc.","CDI Corp.","CDW Computer Centers Inc.","CellStar Corp.","Cendant Corp","Cenex Harvest States Cooperatives","Centex Corp.","CenturyTel Inc.","Ceridian Corp.","CH2M Hill Cos. Ltd.","Champion Enterprises Inc.","Charles Schwab Corp.","Charming Shoppes Inc.","Charter Communications Inc.","Charter One Financial Inc.","ChevronTexaco Corp.","Chiquita Brands International Inc.","Chubb Corp","Ciena Corp.","Cigna Corp","Cincinnati Financial Corp.","Cinergy Corp.","Cintas Corp.","Circuit City Stores Inc.","Cisco Systems Inc.","Citigroup, Inc","Citizens Communications Co.","CKE Restaurants Inc.","Clear Channel Communications Inc.","The Clorox Co.","CMGI Inc.","CMS Energy Corp.","CNF Inc.","Coca-Cola Co.","Coca-Cola Enterprises Inc.","Colgate-Palmolive Co.","Collins & Aikman Corp.","Comcast Corp.","Comdisco Inc.","Comerica Inc.","Comfort Systems USA Inc.","Commercial Metals Co.","Community Health Systems Inc.","Compass Bancshares Inc","Computer Associates International Inc.","Computer Sciences Corp.","Compuware Corp.","Comverse Technology Inc.","ConAgra Foods Inc.","Concord EFS Inc.","Conectiv, Inc","Conoco Inc","Conseco Inc.","Consolidated Freightways Corp.","Consolidated Edison Inc.","Constellation Brands Inc.","Constellation Emergy Group Inc.","Continental Airlines Inc.","Convergys Corp.","Cooper Cameron Corp.","Cooper Industries Ltd.","Cooper Tire & Rubber Co.","Corn Products International Inc.","Corning Inc.","Costco Wholesale Corp.","Countrywide Credit Industries Inc.","Coventry Health Care Inc.","Cox Communications Inc.","Crane Co.","Crompton Corp.","Crown Cork & Seal Co. Inc.","CSK Auto Corp.","CSX Corp.","Cummins Inc.","CVS Corp.","Cytec Industries Inc.","D&K Healthcare Resources, Inc.","D.R. Horton Inc.","Dana Corporation","Danaher Corporation","Darden Restaurants Inc.","DaVita Inc.","Dean Foods Company","Deere & Company","Del Monte Foods Co","Dell Computer Corporation","Delphi Corp.","Delta Air Lines Inc.","Deluxe Corporation","Devon Energy Corporation","Di Giorgio Corporation","Dial Corporation","Diebold Incorporated","Dillard's Inc.","DIMON Incorporated","Dole Food Company, Inc.","Dollar General Corporation","Dollar Tree Stores, Inc.","Dominion Resources, Inc.","Domino's Pizza LLC","Dover Corporation, Inc.","Dow Chemical Company","Dow Jones & Company, Inc.","DPL Inc.","DQE Inc.","Dreyer's Grand Ice Cream, Inc.","DST Systems, Inc.","DTE Energy Co.","E.I. Du Pont de Nemours and Company","Duke Energy Corp","Dun & Bradstreet Inc.","DURA Automotive Systems Inc.","DynCorp","Dynegy Inc.","E*Trade Group, Inc.","E.W. Scripps Company","Earthlink, Inc.","Eastman Chemical Company","Eastman Kodak Company","Eaton Corporation","Echostar Communications Corporation","Ecolab Inc.","Edison International","EGL Inc.","El Paso Corporation","Electronic Arts Inc.","Electronic Data Systems Corp.","Eli Lilly and Company","EMC Corporation","Emcor Group Inc.","Emerson Electric Co.","Encompass Services Corporation","Energizer Holdings Inc.","Energy East Corporation","Engelhard Corporation","Enron Corp.","Entergy Corporation","Enterprise Products Partners L.P.","EOG Resources, Inc.","Equifax Inc.","Equitable Resources Inc.","Equity Office Properties Trust","Equity Residential Properties Trust","Estee Lauder Companies Inc.","Exelon Corporation","Exide Technologies","Expeditors International of Washington Inc.","Express Scripts Inc.","ExxonMobil Corporation","Fairchild Semiconductor International Inc.","Family Dollar Stores Inc.","Farmland Industries Inc.","Federal Mogul Corp.","Federated Department Stores Inc.","Federal Express Corp.","Felcor Lodging Trust Inc.","Ferro Corp.","Fidelity National Financial Inc.","Fifth Third Bancorp","First American Financial Corp.","First Data Corp.","First National of Nebraska Inc.","First Tennessee National Corp.","FirstEnergy Corp.","Fiserv Inc.","Fisher Scientific International Inc.","FleetBoston Financial Co.","Fleetwood Enterprises Inc.","Fleming Companies Inc.","Flowers Foods Inc.","Flowserv Corp","Fluor Corp","FMC Corp","Foamex International Inc","Foot Locker Inc","Footstar Inc.","Ford Motor Co","Forest Laboratories Inc.","Fortune Brands Inc.","Foster Wheeler Ltd.","FPL Group Inc.","Franklin Resources Inc.","Freeport McMoran Copper & Gold Inc.","Frontier Oil Corp","Furniture Brands International Inc.","Gannett Co., Inc.","Gap Inc.","Gateway Inc.","GATX Corporation","Gemstar-TV Guide International Inc.","GenCorp Inc.","General Cable Corporation","General Dynamics Corporation","General Electric Company","General Mills Inc","General Motors Corporation","Genesis Health Ventures Inc.","Gentek Inc.","Gentiva Health Services Inc.","Genuine Parts Company","Genuity Inc.","Genzyme Corporation","Georgia Gulf Corporation","Georgia-Pacific Corporation","Gillette Company","Gold Kist Inc.","Golden State Bancorp Inc.","Golden West Financial Corporation","Goldman Sachs Group Inc.","Goodrich Corporation","The Goodyear Tire & Rubber Company","Granite Construction Incorporated","Graybar Electric Company Inc.","Great Lakes Chemical Corporation","Great Plains Energy Inc.","GreenPoint Financial Corp.","Greif Bros. Corporation","Grey Global Group Inc.","Group 1 Automotive Inc.","Guidant Corporation","H&R Block Inc.","H.B. Fuller Company","H.J. Heinz Company","Halliburton Co.","Harley-Davidson Inc.","Harman International Industries Inc.","Harrah's Entertainment Inc.","Harris Corp.","Harsco Corp.","Hartford Financial Services Group Inc.","Hasbro Inc.","Hawaiian Electric Industries Inc.","HCA Inc.","Health Management Associates Inc.","Health Net Inc.","Healthsouth Corp","Henry Schein Inc.","Hercules Inc.","Herman Miller Inc.","Hershey Foods Corp.","Hewlett-Packard Company","Hibernia Corp.","Hillenbrand Industries Inc.","Hilton Hotels Corp.","Hollywood Entertainment Corp.","Home Depot Inc.","Hon Industries Inc.","Honeywell International Inc.","Hormel Foods Corp.","Host Marriott Corp.","Household International Corp.","Hovnanian Enterprises Inc.","Hub Group Inc.","Hubbell Inc.","Hughes Supply Inc.","Humana Inc.","Huntington Bancshares Inc.","Idacorp Inc.","IDT Corporation","IKON Office Solutions Inc.","Illinois Tool Works Inc.","IMC Global Inc.","Imperial Sugar Company","IMS Health Inc.","Ingles Market Inc","Ingram Micro Inc.","Insight Enterprises Inc.","Integrated Electrical Services Inc.","Intel Corporation","International Paper Co.","Interpublic Group of Companies Inc.","Interstate Bakeries Corporation","International Business Machines Corp.","International Flavors & Fragrances Inc.","International Multifoods Corporation","Intuit Inc.","IT Group Inc.","ITT Industries Inc.","Ivax Corp.","J.B. Hunt Transport Services Inc.","J.C. Penny Co.","J.P. Morgan Chase & Co.","Jabil Circuit Inc.","Jack In The Box Inc.","Jacobs Engineering Group Inc.","JDS Uniphase Corp.","Jefferson-Pilot Co.","John Hancock Financial Services Inc.","Johnson & Johnson","Johnson Controls Inc.","Jones Apparel Group Inc.","KB Home","Kellogg Company","Kellwood Company","Kelly Services Inc.","Kemet Corp.","Kennametal Inc.","Kerr-McGee Corporation","KeyCorp","KeySpan Corp.","Kimball International Inc.","Kimberly-Clark Corporation","Kindred Healthcare Inc.","KLA-Tencor Corporation","K-Mart Corp.","Knight-Ridder Inc.","Kohl's Corp.","KPMG Consulting Inc.","Kroger Co.","L-3 Communications Holdings Inc.","Laboratory Corporation of America Holdings","Lam Research Corporation","LandAmerica Financial Group Inc.","Lands' End Inc.","Landstar System Inc.","La-Z-Boy Inc.","Lear Corporation","Legg Mason Inc.","Leggett & Platt Inc.","Lehman Brothers Holdings Inc.","Lennar Corporation","Lennox International Inc.","Level 3 Communications Inc.","Levi Strauss & Co.","Lexmark International Inc.","Limited Inc.","Lincoln National Corporation","Linens 'n Things Inc.","Lithia Motors Inc.","Liz Claiborne Inc.","Lockheed Martin Corporation","Loews Corporation","Longs Drug Stores Corporation","Louisiana-Pacific Corporation","Lowe's Companies Inc.","LSI Logic Corporation","The LTV Corporation","The Lubrizol Corporation","Lucent Technologies Inc.","Lyondell Chemical Company","M & T Bank Corporation","Magellan Health Services Inc.","Mail-Well Inc.","Mandalay Resort Group","Manor Care Inc.","Manpower Inc.","Marathon Oil Corporation","Mariner Health Care Inc.","Markel Corporation","Marriott International Inc.","Marsh & McLennan Companies Inc.","Marsh Supermarkets Inc.","Marshall & Ilsley Corporation","Martin Marietta Materials Inc.","Masco Corporation","Massey Energy Company","MasTec Inc.","Mattel Inc.","Maxim Integrated Products Inc.","Maxtor Corporation","Maxxam Inc.","The May Department Stores Company","Maytag Corporation","MBNA Corporation","McCormick & Company Incorporated","McDonald's Corporation","The McGraw-Hill Companies Inc.","McKesson Corporation","McLeodUSA Incorporated","M.D.C. Holdings Inc.","MDU Resources Group Inc.","MeadWestvaco Corporation","Medtronic Inc.","Mellon Financial Corporation","The Men's Wearhouse Inc.","Merck & Co., Inc.","Mercury General Corporation","Merrill Lynch & Co. Inc.","Metaldyne Corporation","Metals USA Inc.","MetLife Inc.","Metris Companies Inc","MGIC Investment Corporation","MGM Mirage","Michaels Stores Inc.","Micron Technology Inc.","Microsoft Corporation","Milacron Inc.","Millennium Chemicals Inc.","Mirant Corporation","Mohawk Industries Inc.","Molex Incorporated","The MONY Group Inc.","Morgan Stanley Dean Witter & Co.","Motorola Inc.","MPS Group Inc.","Murphy Oil Corporation","Nabors Industries Inc","Nacco Industries Inc","Nash Finch Company","National City Corp.","National Commerce Financial Corporation","National Fuel Gas Company","National Oilwell Inc","National Rural Utilities Cooperative Finance Corporation","National Semiconductor Corporation","National Service Industries Inc","Navistar International Corporation","NCR Corporation","The Neiman Marcus Group Inc.","New Jersey Resources Corporation","New York Times Company","Newell Rubbermaid Inc","Newmont Mining Corporation","Nextel Communications Inc","Nicor Inc","Nike Inc","NiSource Inc","Noble Energy Inc","Nordstrom Inc","Norfolk Southern Corporation","Nortek Inc","North Fork Bancorporation Inc","Northeast Utilities System","Northern Trust Corporation","Northrop Grumman Corporation","NorthWestern Corporation","Novellus Systems Inc","NSTAR","NTL Incorporated","Nucor Corp","Nvidia Corp","NVR Inc","Northwest Airlines Corp","Occidental Petroleum Corp","Ocean Energy Inc","Office Depot Inc.","OfficeMax Inc","OGE Energy Corp","Oglethorpe Power Corp.","Ohio Casualty Corp.","Old Republic International Corp.","Olin Corp.","OM Group Inc","Omnicare Inc","Omnicom Group","On Semiconductor Corp","ONEOK Inc","Oracle Corp","Oshkosh Truck Corp","Outback Steakhouse Inc.","Owens & Minor Inc.","Owens Corning","Owens-Illinois Inc","Oxford Health Plans Inc","Paccar Inc","PacifiCare Health Systems Inc","Packaging Corp. of America","Pactiv Corp","Pall Corp","Pantry Inc","Park Place Entertainment Corp","Parker Hannifin Corp.","Pathmark Stores Inc.","Paychex Inc","Payless Shoesource Inc","Penn Traffic Co.","Pennzoil-Quaker State Company","Pentair Inc","Peoples Energy Corp.","PeopleSoft Inc","Pep Boys Manny, Moe & Jack","Potomac Electric Power Co.","Pepsi Bottling Group Inc.","PepsiAmericas Inc.","PepsiCo Inc.","Performance Food Group Co.","Perini Corp","PerkinElmer Inc","Perot Systems Corp","Petco Animal Supplies Inc.","Peter Kiewit Sons', Inc.","PETsMART Inc","Pfizer Inc","Pacific Gas & Electric Corp.","Pharmacia Corp","Phar Mor Inc.","Phelps Dodge Corp.","Philip Morris Companies Inc.","Phillips Petroleum Co","Phillips Van Heusen Corp.","Phoenix Companies Inc","Pier 1 Imports Inc.","Pilgrim's Pride Corporation","Pinnacle West Capital Corp","Pioneer-Standard Electronics Inc.","Pitney Bowes Inc.","Pittston Brinks Group","Plains All American Pipeline LP","PNC Financial Services Group Inc.","PNM Resources Inc","Polaris Industries Inc.","Polo Ralph Lauren Corp","PolyOne Corp","Popular Inc","Potlatch Corp","PPG Industries Inc","PPL Corp","Praxair Inc","Precision Castparts Corp","Premcor Inc.","Pride International Inc","Primedia Inc","Principal Financial Group Inc.","Procter & Gamble Co.","Pro-Fac Cooperative Inc.","Progress Energy Inc","Progressive Corporation","Protective Life Corp","Provident Financial Group","Providian Financial Corp.","Prudential Financial Inc.","PSS World Medical Inc","Public Service Enterprise Group Inc.","Publix Super Markets Inc.","Puget Energy Inc.","Pulte Homes Inc","Qualcomm Inc","Quanta Services Inc.","Quantum Corp","Quest Diagnostics Inc.","Questar Corp","Quintiles Transnational","Qwest Communications Intl Inc","R.J. Reynolds Tobacco Company","R.R. Donnelley & Sons Company","Radio Shack Corporation","Raymond James Financial Inc.","Raytheon Company","Reader's Digest Association Inc.","Reebok International Ltd.","Regions Financial Corp.","Regis Corporation","Reliance Steel & Aluminum Co.","Reliant Energy Inc.","Rent A Center Inc","Republic Services Inc","Revlon Inc","RGS Energy Group Inc","Rite Aid Corp","Riverwood Holding Inc.","RoadwayCorp","Robert Half International Inc.","Rock-Tenn Co","Rockwell Automation Inc","Rockwell Collins Inc","Rohm & Haas Co.","Ross Stores Inc","RPM Inc.","Ruddick Corp","Ryder System Inc","Ryerson Tull Inc","Ryland Group Inc.","Sabre Holdings Corp","Safeco Corp","Safeguard Scientifics Inc.","Safeway Inc","Saks Inc","Sanmina-SCI Inc","Sara Lee Corp","SBC Communications Inc","Scana Corp.","Schering-Plough Corp","Scholastic Corp","SCI Systems Onc.","Science Applications Intl. Inc.","Scientific-Atlanta Inc","Scotts Company","Seaboard Corp","Sealed Air Corp","Sears Roebuck & Co","Sempra Energy","Sequa Corp","Service Corp. International","ServiceMaster Co","Shaw Group Inc","Sherwin-Williams Company","Shopko Stores Inc","Siebel Systems Inc","Sierra Health Services Inc","Sierra Pacific Resources","Silgan Holdings Inc.","Silicon Graphics Inc","Simon Property Group Inc","SLM Corporation","Smith International Inc","Smithfield Foods Inc","Smurfit-Stone Container Corp","Snap-On Inc","Solectron Corp","Solutia Inc","Sonic Automotive Inc.","Sonoco Products Co.","Southern Company","Southern Union Company","SouthTrust Corp.","Southwest Airlines Co","Southwest Gas Corp","Sovereign Bancorp Inc.","Spartan Stores Inc","Spherion Corp","Sports Authority Inc","Sprint Corp.","SPX Corp","St. Jude Medical Inc","St. Paul Cos.","Staff Leasing Inc.","StanCorp Financial Group Inc","Standard Pacific Corp.","Stanley Works","Staples Inc","Starbucks Corp","Starwood Hotels & Resorts Worldwide Inc","State Street Corp.","Stater Bros. Holdings Inc.","Steelcase Inc","Stein Mart Inc","Stewart & Stevenson Services Inc","Stewart Information Services Corp","Stilwell Financial Inc","Storage Technology Corporation","Stryker Corp","Sun Healthcare Group Inc.","Sun Microsystems Inc.","SunGard Data Systems Inc.","Sunoco Inc.","SunTrust Banks Inc","Supervalu Inc","Swift Transportation, Co., Inc","Symbol Technologies Inc","Synovus Financial Corp.","Sysco Corp","Systemax Inc.","Target Corp.","Tech Data Corporation","TECO Energy Inc","Tecumseh Products Company","Tektronix Inc","Teleflex Incorporated","Telephone & Data Systems Inc","Tellabs Inc.","Temple-Inland Inc","Tenet Healthcare Corporation","Tenneco Automotive Inc.","Teradyne Inc","Terex Corp","Tesoro Petroleum Corp.","Texas Industries Inc.","Texas Instruments Incorporated","Textron Inc","Thermo Electron Corporation","Thomas & Betts Corporation","Tiffany & Co","Timken Company","TJX Companies Inc","TMP Worldwide Inc","Toll Brothers Inc","Torchmark Corporation","Toro Company","Tower Automotive Inc.","Toys 'R' Us Inc","Trans World Entertainment Corp.","TransMontaigne Inc","Transocean Inc","TravelCenters of America Inc.","Triad Hospitals Inc","Tribune Company","Trigon Healthcare Inc.","Trinity Industries Inc","Trump Hotels & Casino Resorts Inc.","TruServ Corporation","TRW Inc","TXU Corp","Tyson Foods Inc","U.S. Bancorp","U.S. Industries Inc.","UAL Corporation","UGI Corporation","Unified Western Grocers Inc","Union Pacific Corporation","Union Planters Corp","Unisource Energy Corp","Unisys Corporation","United Auto Group Inc","United Defense Industries Inc.","United Parcel Service Inc","United Rentals Inc","United Stationers Inc","United Technologies Corporation","UnitedHealth Group Incorporated","Unitrin Inc","Universal Corporation","Universal Forest Products Inc","Universal Health Services Inc","Unocal Corporation","Unova Inc","UnumProvident Corporation","URS Corporation","US Airways Group Inc","US Oncology Inc","USA Interactive","USFreighways Corporation","USG Corporation","UST Inc","Valero Energy Corporation","Valspar Corporation","Value City Department Stores Inc","Varco International Inc","Vectren Corporation","Veritas Software Corporation","Verizon Communications Inc","VF Corporation","Viacom Inc","Viad Corp","Viasystems Group Inc","Vishay Intertechnology Inc","Visteon Corporation","Volt Information Sciences Inc","Vulcan Materials Company","W.R. Berkley Corporation","W.R. Grace & Co","W.W. Grainger Inc","Wachovia Corporation","Wakenhut Corporation","Walgreen Co","Wallace Computer Services Inc","Wal-Mart Stores Inc","Walt Disney Co","Walter Industries Inc","Washington Mutual Inc","Washington Post Co.","Waste Management Inc","Watsco Inc","Weatherford International Inc","Weis Markets Inc.","Wellpoint Health Networks Inc","Wells Fargo & Company","Wendy's International Inc","Werner Enterprises Inc","WESCO International Inc","Western Digital Inc","Western Gas Resources Inc","WestPoint Stevens Inc","Weyerhauser Company","WGL Holdings Inc","Whirlpool Corporation","Whole Foods Market Inc","Willamette Industries Inc.","Williams Companies Inc","Williams Sonoma Inc","Winn Dixie Stores Inc","Wisconsin Energy Corporation","Wm Wrigley Jr Company","World Fuel Services Corporation","WorldCom Inc","Worthington Industries Inc","WPS Resources Corporation","Wyeth","Wyndham International Inc","Xcel Energy Inc","Xerox Corp","Xilinx Inc","XO Communications Inc","Yellow Corporation","York International Corp","Yum Brands Inc.","Zale Corporation","Zions Bancorporation"],fileExtension:{raster:["bmp","gif","gpl","ico","jpeg","psd","png","psp","raw","tiff"],vector:["3dv","amf","awg","ai","cgm","cdr","cmx","dxf","e2d","egt","eps","fs","odg","svg","xar"],"3d":["3dmf","3dm","3mf","3ds","an8","aoi","blend","cal3d","cob","ctm","iob","jas","max","mb","mdx","obj","x","x3d"],document:["doc","docx","dot","html","xml","odt","odm","ott","csv","rtf","tex","xhtml","xps"]},timezones:[{name:"Dateline Standard Time",abbr:"DST",offset:-12,isdst:!1,text:"(UTC-12:00) International Date Line West",utc:["Etc/GMT+12"]},{name:"UTC-11",abbr:"U",offset:-11,isdst:!1,text:"(UTC-11:00) Coordinated Universal Time-11",utc:["Etc/GMT+11","Pacific/Midway","Pacific/Niue","Pacific/Pago_Pago"]},{name:"Hawaiian Standard Time",abbr:"HST",offset:-10,isdst:!1,text:"(UTC-10:00) Hawaii",utc:["Etc/GMT+10","Pacific/Honolulu","Pacific/Johnston","Pacific/Rarotonga","Pacific/Tahiti"]},{name:"Alaskan Standard Time",abbr:"AKDT",offset:-8,isdst:!0,text:"(UTC-09:00) Alaska",utc:["America/Anchorage","America/Juneau","America/Nome","America/Sitka","America/Yakutat"]},{name:"Pacific Standard Time (Mexico)",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-08:00) Baja California",utc:["America/Santa_Isabel"]},{name:"Pacific Standard Time",abbr:"PDT",offset:-7,isdst:!0,text:"(UTC-08:00) Pacific Time (US & Canada)",utc:["America/Dawson","America/Los_Angeles","America/Tijuana","America/Vancouver","America/Whitehorse","PST8PDT"]},{name:"US Mountain Standard Time",abbr:"UMST",offset:-7,isdst:!1,text:"(UTC-07:00) Arizona",utc:["America/Creston","America/Dawson_Creek","America/Hermosillo","America/Phoenix","Etc/GMT+7"]},{name:"Mountain Standard Time (Mexico)",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Chihuahua, La Paz, Mazatlan",utc:["America/Chihuahua","America/Mazatlan"]},{name:"Mountain Standard Time",abbr:"MDT",offset:-6,isdst:!0,text:"(UTC-07:00) Mountain Time (US & Canada)",utc:["America/Boise","America/Cambridge_Bay","America/Denver","America/Edmonton","America/Inuvik","America/Ojinaga","America/Yellowknife","MST7MDT"]},{name:"Central America Standard Time",abbr:"CAST",offset:-6,isdst:!1,text:"(UTC-06:00) Central America",utc:["America/Belize","America/Costa_Rica","America/El_Salvador","America/Guatemala","America/Managua","America/Tegucigalpa","Etc/GMT+6","Pacific/Galapagos"]},{name:"Central Standard Time",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Central Time (US & Canada)",utc:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Matamoros","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Rainy_River","America/Rankin_Inlet","America/Resolute","America/Winnipeg","CST6CDT"]},{name:"Central Standard Time (Mexico)",abbr:"CDT",offset:-5,isdst:!0,text:"(UTC-06:00) Guadalajara, Mexico City, Monterrey",utc:["America/Bahia_Banderas","America/Cancun","America/Merida","America/Mexico_City","America/Monterrey"]},{name:"Canada Central Standard Time",abbr:"CCST",offset:-6,isdst:!1,text:"(UTC-06:00) Saskatchewan",utc:["America/Regina","America/Swift_Current"]},{name:"SA Pacific Standard Time",abbr:"SPST",offset:-5,isdst:!1,text:"(UTC-05:00) Bogota, Lima, Quito",utc:["America/Bogota","America/Cayman","America/Coral_Harbour","America/Eirunepe","America/Guayaquil","America/Jamaica","America/Lima","America/Panama","America/Rio_Branco","Etc/GMT+5"]},{name:"Eastern Standard Time",abbr:"EDT",offset:-4,isdst:!0,text:"(UTC-05:00) Eastern Time (US & Canada)",utc:["America/Detroit","America/Havana","America/Indiana/Petersburg","America/Indiana/Vincennes","America/Indiana/Winamac","America/Iqaluit","America/Kentucky/Monticello","America/Louisville","America/Montreal","America/Nassau","America/New_York","America/Nipigon","America/Pangnirtung","America/Port-au-Prince","America/Thunder_Bay","America/Toronto","EST5EDT"]},{name:"US Eastern Standard Time",abbr:"UEDT",offset:-4,isdst:!0,text:"(UTC-05:00) Indiana (East)",utc:["America/Indiana/Marengo","America/Indiana/Vevay","America/Indianapolis"]},{name:"Venezuela Standard Time",abbr:"VST",offset:-4.5,isdst:!1,text:"(UTC-04:30) Caracas",utc:["America/Caracas"]},{name:"Paraguay Standard Time",abbr:"PST",offset:-4,isdst:!1,text:"(UTC-04:00) Asuncion",utc:["America/Asuncion"]},{name:"Atlantic Standard Time",abbr:"ADT",offset:-3,isdst:!0,text:"(UTC-04:00) Atlantic Time (Canada)",utc:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","America/Thule","Atlantic/Bermuda"]},{name:"Central Brazilian Standard Time",abbr:"CBST",offset:-4,isdst:!1,text:"(UTC-04:00) Cuiaba",utc:["America/Campo_Grande","America/Cuiaba"]},{name:"SA Western Standard Time",abbr:"SWST",offset:-4,isdst:!1,text:"(UTC-04:00) Georgetown, La Paz, Manaus, San Juan",utc:["America/Anguilla","America/Antigua","America/Aruba","America/Barbados","America/Blanc-Sablon","America/Boa_Vista","America/Curacao","America/Dominica","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guyana","America/Kralendijk","America/La_Paz","America/Lower_Princes","America/Manaus","America/Marigot","America/Martinique","America/Montserrat","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Santo_Domingo","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola","Etc/GMT+4"]},{name:"Pacific SA Standard Time",abbr:"PSST",offset:-4,isdst:!1,text:"(UTC-04:00) Santiago",utc:["America/Santiago","Antarctica/Palmer"]},{name:"Newfoundland Standard Time",abbr:"NDT",offset:-2.5,isdst:!0,text:"(UTC-03:30) Newfoundland",utc:["America/St_Johns"]},{name:"E. South America Standard Time",abbr:"ESAST",offset:-3,isdst:!1,text:"(UTC-03:00) Brasilia",utc:["America/Sao_Paulo"]},{name:"Argentina Standard Time",abbr:"AST",offset:-3,isdst:!1,text:"(UTC-03:00) Buenos Aires",utc:["America/Argentina/La_Rioja","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Cordoba","America/Jujuy","America/Mendoza"]},{name:"SA Eastern Standard Time",abbr:"SEST",offset:-3,isdst:!1,text:"(UTC-03:00) Cayenne, Fortaleza",utc:["America/Araguaina","America/Belem","America/Cayenne","America/Fortaleza","America/Maceio","America/Paramaribo","America/Recife","America/Santarem","Antarctica/Rothera","Atlantic/Stanley","Etc/GMT+3"]},{name:"Greenland Standard Time",abbr:"GDT",offset:-2,isdst:!0,text:"(UTC-03:00) Greenland",utc:["America/Godthab"]},{name:"Montevideo Standard Time",abbr:"MST",offset:-3,isdst:!1,text:"(UTC-03:00) Montevideo",utc:["America/Montevideo"]},{name:"Bahia Standard Time",abbr:"BST",offset:-3,isdst:!1,text:"(UTC-03:00) Salvador",utc:["America/Bahia"]},{name:"UTC-02",abbr:"U",offset:-2,isdst:!1,text:"(UTC-02:00) Coordinated Universal Time-02",utc:["America/Noronha","Atlantic/South_Georgia","Etc/GMT+2"]},{name:"Mid-Atlantic Standard Time",abbr:"MDT",offset:-1,isdst:!0,text:"(UTC-02:00) Mid-Atlantic - Old"},{name:"Azores Standard Time",abbr:"ADT",offset:0,isdst:!0,text:"(UTC-01:00) Azores",utc:["America/Scoresbysund","Atlantic/Azores"]},{name:"Cape Verde Standard Time",abbr:"CVST",offset:-1,isdst:!1,text:"(UTC-01:00) Cape Verde Is.",utc:["Atlantic/Cape_Verde","Etc/GMT+1"]},{name:"Morocco Standard Time",abbr:"MDT",offset:1,isdst:!0,text:"(UTC) Casablanca",utc:["Africa/Casablanca","Africa/El_Aaiun"]},{name:"UTC",abbr:"CUT",offset:0,isdst:!1,text:"(UTC) Coordinated Universal Time",utc:["America/Danmarkshavn","Etc/GMT"]},{name:"GMT Standard Time",abbr:"GDT",offset:1,isdst:!0,text:"(UTC) Dublin, Edinburgh, Lisbon, London",utc:["Atlantic/Canary","Atlantic/Faeroe","Atlantic/Madeira","Europe/Dublin","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Lisbon","Europe/London"]},{name:"Greenwich Standard Time",abbr:"GST",offset:0,isdst:!1,text:"(UTC) Monrovia, Reykjavik",utc:["Africa/Abidjan","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Bissau","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Monrovia","Africa/Nouakchott","Africa/Ouagadougou","Africa/Sao_Tome","Atlantic/Reykjavik","Atlantic/St_Helena"]},{name:"W. Europe Standard Time",abbr:"WEDT",offset:2,isdst:!0,text:"(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna",utc:["Arctic/Longyearbyen","Europe/Amsterdam","Europe/Andorra","Europe/Berlin","Europe/Busingen","Europe/Gibraltar","Europe/Luxembourg","Europe/Malta","Europe/Monaco","Europe/Oslo","Europe/Rome","Europe/San_Marino","Europe/Stockholm","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Zurich"]},{name:"Central Europe Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague",utc:["Europe/Belgrade","Europe/Bratislava","Europe/Budapest","Europe/Ljubljana","Europe/Podgorica","Europe/Prague","Europe/Tirane"]},{name:"Romance Standard Time",abbr:"RDT",offset:2,isdst:!0,text:"(UTC+01:00) Brussels, Copenhagen, Madrid, Paris",utc:["Africa/Ceuta","Europe/Brussels","Europe/Copenhagen","Europe/Madrid","Europe/Paris"]},{name:"Central European Standard Time",abbr:"CEDT",offset:2,isdst:!0,text:"(UTC+01:00) Sarajevo, Skopje, Warsaw, Zagreb",utc:["Europe/Sarajevo","Europe/Skopje","Europe/Warsaw","Europe/Zagreb"]},{name:"W. Central Africa Standard Time",abbr:"WCAST",offset:1,isdst:!1,text:"(UTC+01:00) West Central Africa",utc:["Africa/Algiers","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Ndjamena","Africa/Niamey","Africa/Porto-Novo","Africa/Tunis","Etc/GMT-1"]},{name:"Namibia Standard Time",abbr:"NST",offset:1,isdst:!1,text:"(UTC+01:00) Windhoek",utc:["Africa/Windhoek"]},{name:"GTB Standard Time",abbr:"GDT",offset:3,isdst:!0,text:"(UTC+02:00) Athens, Bucharest",utc:["Asia/Nicosia","Europe/Athens","Europe/Bucharest","Europe/Chisinau"]},{name:"Middle East Standard Time",abbr:"MEDT",offset:3,isdst:!0,text:"(UTC+02:00) Beirut",utc:["Asia/Beirut"]},{name:"Egypt Standard Time",abbr:"EST",offset:2,isdst:!1,text:"(UTC+02:00) Cairo",utc:["Africa/Cairo"]},{name:"Syria Standard Time",abbr:"SDT",offset:3,isdst:!0,text:"(UTC+02:00) Damascus",utc:["Asia/Damascus"]},{name:"E. Europe Standard Time",abbr:"EEDT",offset:3,isdst:!0,text:"(UTC+02:00) E. Europe"},{name:"South Africa Standard Time",abbr:"SAST",offset:2,isdst:!1,text:"(UTC+02:00) Harare, Pretoria",utc:["Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Etc/GMT-2"]},{name:"FLE Standard Time",abbr:"FDT",offset:3,isdst:!0,text:"(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius",utc:["Europe/Helsinki","Europe/Kiev","Europe/Mariehamn","Europe/Riga","Europe/Sofia","Europe/Tallinn","Europe/Uzhgorod","Europe/Vilnius","Europe/Zaporozhye"]},{name:"Turkey Standard Time",abbr:"TDT",offset:3,isdst:!0,text:"(UTC+02:00) Istanbul",utc:["Europe/Istanbul"]},{name:"Israel Standard Time",abbr:"JDT",offset:3,isdst:!0,text:"(UTC+02:00) Jerusalem",utc:["Asia/Jerusalem"]},{name:"Libya Standard Time",abbr:"LST",offset:2,isdst:!1,text:"(UTC+02:00) Tripoli",utc:["Africa/Tripoli"]},{name:"Jordan Standard Time",abbr:"JST",offset:3,isdst:!1,text:"(UTC+03:00) Amman",utc:["Asia/Amman"]},{name:"Arabic Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Baghdad",utc:["Asia/Baghdad"]},{name:"Kaliningrad Standard Time",abbr:"KST",offset:3,isdst:!1,text:"(UTC+03:00) Kaliningrad, Minsk",utc:["Europe/Kaliningrad","Europe/Minsk"]},{name:"Arab Standard Time",abbr:"AST",offset:3,isdst:!1,text:"(UTC+03:00) Kuwait, Riyadh",utc:["Asia/Aden","Asia/Bahrain","Asia/Kuwait","Asia/Qatar","Asia/Riyadh"]},{name:"E. Africa Standard Time",abbr:"EAST",offset:3,isdst:!1,text:"(UTC+03:00) Nairobi",utc:["Africa/Addis_Ababa","Africa/Asmera","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Juba","Africa/Kampala","Africa/Khartoum","Africa/Mogadishu","Africa/Nairobi","Antarctica/Syowa","Etc/GMT-3","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte"]},{name:"Iran Standard Time",abbr:"IDT",offset:4.5,isdst:!0,text:"(UTC+03:30) Tehran",utc:["Asia/Tehran"]},{name:"Arabian Standard Time",abbr:"AST",offset:4,isdst:!1,text:"(UTC+04:00) Abu Dhabi, Muscat",utc:["Asia/Dubai","Asia/Muscat","Etc/GMT-4"]},{name:"Azerbaijan Standard Time",abbr:"ADT",offset:5,isdst:!0,text:"(UTC+04:00) Baku",utc:["Asia/Baku"]},{name:"Russian Standard Time",abbr:"RST",offset:4,isdst:!1,text:"(UTC+04:00) Moscow, St. Petersburg, Volgograd",utc:["Europe/Moscow","Europe/Samara","Europe/Simferopol","Europe/Volgograd"]},{name:"Mauritius Standard Time",abbr:"MST",offset:4,isdst:!1,text:"(UTC+04:00) Port Louis",utc:["Indian/Mahe","Indian/Mauritius","Indian/Reunion"]},{name:"Georgian Standard Time",abbr:"GST",offset:4,isdst:!1,text:"(UTC+04:00) Tbilisi",utc:["Asia/Tbilisi"]},{name:"Caucasus Standard Time",abbr:"CST",offset:4,isdst:!1,text:"(UTC+04:00) Yerevan",utc:["Asia/Yerevan"]},{name:"Afghanistan Standard Time",abbr:"AST",offset:4.5,isdst:!1,text:"(UTC+04:30) Kabul",utc:["Asia/Kabul"]},{name:"West Asia Standard Time",abbr:"WAST",offset:5,isdst:!1,text:"(UTC+05:00) Ashgabat, Tashkent",utc:["Antarctica/Mawson","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Dushanbe","Asia/Oral","Asia/Samarkand","Asia/Tashkent","Etc/GMT-5","Indian/Kerguelen","Indian/Maldives"]},{name:"Pakistan Standard Time",abbr:"PST",offset:5,isdst:!1,text:"(UTC+05:00) Islamabad, Karachi",utc:["Asia/Karachi"]},{name:"India Standard Time",abbr:"IST",offset:5.5,isdst:!1,text:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",utc:["Asia/Calcutta"]},{name:"Sri Lanka Standard Time",abbr:"SLST",offset:5.5,isdst:!1,text:"(UTC+05:30) Sri Jayawardenepura",utc:["Asia/Colombo"]},{name:"Nepal Standard Time",abbr:"NST",offset:5.75,isdst:!1,text:"(UTC+05:45) Kathmandu",utc:["Asia/Katmandu"]},{name:"Central Asia Standard Time",abbr:"CAST",offset:6,isdst:!1,text:"(UTC+06:00) Astana",utc:["Antarctica/Vostok","Asia/Almaty","Asia/Bishkek","Asia/Qyzylorda","Asia/Urumqi","Etc/GMT-6","Indian/Chagos"]},{name:"Bangladesh Standard Time",abbr:"BST",offset:6,isdst:!1,text:"(UTC+06:00) Dhaka",utc:["Asia/Dhaka","Asia/Thimphu"]},{name:"Ekaterinburg Standard Time",abbr:"EST",offset:6,isdst:!1,text:"(UTC+06:00) Ekaterinburg",utc:["Asia/Yekaterinburg"]},{name:"Myanmar Standard Time",abbr:"MST",offset:6.5,isdst:!1,text:"(UTC+06:30) Yangon (Rangoon)",utc:["Asia/Rangoon","Indian/Cocos"]},{name:"SE Asia Standard Time",abbr:"SAST",offset:7,isdst:!1,text:"(UTC+07:00) Bangkok, Hanoi, Jakarta",utc:["Antarctica/Davis","Asia/Bangkok","Asia/Hovd","Asia/Jakarta","Asia/Phnom_Penh","Asia/Pontianak","Asia/Saigon","Asia/Vientiane","Etc/GMT-7","Indian/Christmas"]},{name:"N. Central Asia Standard Time",abbr:"NCAST",offset:7,isdst:!1,text:"(UTC+07:00) Novosibirsk",utc:["Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk"]},{name:"China Standard Time",abbr:"CST",offset:8,isdst:!1,text:"(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi",utc:["Asia/Hong_Kong","Asia/Macau","Asia/Shanghai"]},{name:"North Asia Standard Time",abbr:"NAST",offset:8,isdst:!1,text:"(UTC+08:00) Krasnoyarsk",utc:["Asia/Krasnoyarsk"]},{name:"Singapore Standard Time",abbr:"MPST",offset:8,isdst:!1,text:"(UTC+08:00) Kuala Lumpur, Singapore",utc:["Asia/Brunei","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Makassar","Asia/Manila","Asia/Singapore","Etc/GMT-8"]},{name:"W. Australia Standard Time",abbr:"WAST",offset:8,isdst:!1,text:"(UTC+08:00) Perth",utc:["Antarctica/Casey","Australia/Perth"]},{name:"Taipei Standard Time",abbr:"TST",offset:8,isdst:!1,text:"(UTC+08:00) Taipei",utc:["Asia/Taipei"]},{name:"Ulaanbaatar Standard Time",abbr:"UST",offset:8,isdst:!1,text:"(UTC+08:00) Ulaanbaatar",utc:["Asia/Choibalsan","Asia/Ulaanbaatar"]},{name:"North Asia East Standard Time",abbr:"NAEST",offset:9,isdst:!1,text:"(UTC+09:00) Irkutsk",utc:["Asia/Irkutsk"]},{name:"Tokyo Standard Time",abbr:"TST",offset:9,isdst:!1,text:"(UTC+09:00) Osaka, Sapporo, Tokyo",utc:["Asia/Dili","Asia/Jayapura","Asia/Tokyo","Etc/GMT-9","Pacific/Palau"]},{name:"Korea Standard Time",abbr:"KST",offset:9,isdst:!1,text:"(UTC+09:00) Seoul",utc:["Asia/Pyongyang","Asia/Seoul"]},{name:"Cen. Australia Standard Time",abbr:"CAST",offset:9.5,isdst:!1,text:"(UTC+09:30) Adelaide",utc:["Australia/Adelaide","Australia/Broken_Hill"]},{name:"AUS Central Standard Time",abbr:"ACST",offset:9.5,isdst:!1,text:"(UTC+09:30) Darwin",utc:["Australia/Darwin"]},{name:"E. Australia Standard Time",abbr:"EAST",offset:10,isdst:!1,text:"(UTC+10:00) Brisbane",utc:["Australia/Brisbane","Australia/Lindeman"]},{name:"AUS Eastern Standard Time",abbr:"AEST",offset:10,isdst:!1,text:"(UTC+10:00) Canberra, Melbourne, Sydney",utc:["Australia/Melbourne","Australia/Sydney"]},{name:"West Pacific Standard Time",abbr:"WPST",offset:10,isdst:!1,text:"(UTC+10:00) Guam, Port Moresby",utc:["Antarctica/DumontDUrville","Etc/GMT-10","Pacific/Guam","Pacific/Port_Moresby","Pacific/Saipan","Pacific/Truk"]},{name:"Tasmania Standard Time",abbr:"TST",offset:10,isdst:!1,text:"(UTC+10:00) Hobart",utc:["Australia/Currie","Australia/Hobart"]},{name:"Yakutsk Standard Time",abbr:"YST",offset:10,isdst:!1,text:"(UTC+10:00) Yakutsk",utc:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"]},{name:"Central Pacific Standard Time",abbr:"CPST",offset:11,isdst:!1,text:"(UTC+11:00) Solomon Is., New Caledonia",utc:["Antarctica/Macquarie","Etc/GMT-11","Pacific/Efate","Pacific/Guadalcanal","Pacific/Kosrae","Pacific/Noumea","Pacific/Ponape"]},{name:"Vladivostok Standard Time",abbr:"VST",offset:11,isdst:!1,text:"(UTC+11:00) Vladivostok",utc:["Asia/Sakhalin","Asia/Ust-Nera","Asia/Vladivostok"]},{name:"New Zealand Standard Time",abbr:"NZST",offset:12,isdst:!1,text:"(UTC+12:00) Auckland, Wellington",utc:["Antarctica/McMurdo","Pacific/Auckland"]},{name:"UTC+12",abbr:"U",offset:12,isdst:!1,text:"(UTC+12:00) Coordinated Universal Time+12",utc:["Etc/GMT-12","Pacific/Funafuti","Pacific/Kwajalein","Pacific/Majuro","Pacific/Nauru","Pacific/Tarawa","Pacific/Wake","Pacific/Wallis"]},{name:"Fiji Standard Time",abbr:"FST",offset:12,isdst:!1,text:"(UTC+12:00) Fiji",utc:["Pacific/Fiji"]},{name:"Magadan Standard Time",abbr:"MST",offset:12,isdst:!1,text:"(UTC+12:00) Magadan",utc:["Asia/Anadyr","Asia/Kamchatka","Asia/Magadan","Asia/Srednekolymsk"]},{name:"Kamchatka Standard Time",abbr:"KDT",offset:13,isdst:!0,text:"(UTC+12:00) Petropavlovsk-Kamchatsky - Old"},{name:"Tonga Standard Time",abbr:"TST",offset:13,isdst:!1,text:"(UTC+13:00) Nuku'alofa",utc:["Etc/GMT-13","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Tongatapu"]},{name:"Samoa Standard Time",abbr:"SST",offset:13,isdst:!1,text:"(UTC+13:00) Samoa",utc:["Pacific/Apia"]}],profession:["Airline Pilot","Academic Team","Accountant","Account Executive","Actor","Actuary","Acquisition Analyst","Administrative Asst.","Administrative Analyst","Administrator","Advertising Director","Aerospace Engineer","Agent","Agricultural Inspector","Agricultural Scientist","Air Traffic Controller","Animal Trainer","Anthropologist","Appraiser","Architect","Art Director","Artist","Astronomer","Athletic Coach","Auditor","Author","Baker","Banker","Bankruptcy Attorney","Benefits Manager","Biologist","Bio-feedback Specialist","Biomedical Engineer","Biotechnical Researcher","Broadcaster","Broker","Building Manager","Building Contractor","Building Inspector","Business Analyst","Business Planner","Business Manager","Buyer","Call Center Manager","Career Counselor","Cash Manager","Ceramic Engineer","Chief Executive Officer","Chief Operation Officer","Chef","Chemical Engineer","Chemist","Child Care Manager","Chief Medical Officer","Chiropractor","Cinematographer","City Housing Manager","City Manager","Civil Engineer","Claims Manager","Clinical Research Assistant","Collections Manager","Compliance Manager","Comptroller","Computer Manager","Commercial Artist","Communications Affairs Director","Communications Director","Communications Engineer","Compensation Analyst","Computer Programmer","Computer Ops. Manager","Computer Engineer","Computer Operator","Computer Graphics Specialist","Construction Engineer","Construction Manager","Consultant","Consumer Relations Manager","Contract Administrator","Copyright Attorney","Copywriter","Corporate Planner","Corrections Officer","Cosmetologist","Credit Analyst","Cruise Director","Chief Information Officer","Chief Technology Officer","Customer Service Manager","Cryptologist","Dancer","Data Security Manager","Database Manager","Day Care Instructor","Dentist","Designer","Design Engineer","Desktop Publisher","Developer","Development Officer","Diamond Merchant","Dietitian","Direct Marketer","Director","Distribution Manager","Diversity Manager","Economist","EEO Compliance Manager","Editor","Education Adminator","Electrical Engineer","Electro Optical Engineer","Electronics Engineer","Embassy Management","Employment Agent","Engineer Technician","Entrepreneur","Environmental Analyst","Environmental Attorney","Environmental Engineer","Environmental Specialist","Escrow Officer","Estimator","Executive Assistant","Executive Director","Executive Recruiter","Facilities Manager","Family Counselor","Fashion Events Manager","Fashion Merchandiser","Fast Food Manager","Film Producer","Film Production Assistant","Financial Analyst","Financial Planner","Financier","Fine Artist","Wildlife Specialist","Fitness Consultant","Flight Attendant","Flight Engineer","Floral Designer","Food & Beverage Director","Food Service Manager","Forestry Technician","Franchise Management","Franchise Sales","Fraud Investigator","Freelance Writer","Fund Raiser","General Manager","Geologist","General Counsel","Geriatric Specialist","Gerontologist","Glamour Photographer","Golf Club Manager","Gourmet Chef","Graphic Designer","Grounds Keeper","Hazardous Waste Manager","Health Care Manager","Health Therapist","Health Service Administrator","Hearing Officer","Home Economist","Horticulturist","Hospital Administrator","Hotel Manager","Human Resources Manager","Importer","Industrial Designer","Industrial Engineer","Information Director","Inside Sales","Insurance Adjuster","Interior Decorator","Internal Controls Director","International Acct.","International Courier","International Lawyer","Interpreter","Investigator","Investment Banker","Investment Manager","IT Architect","IT Project Manager","IT Systems Analyst","Jeweler","Joint Venture Manager","Journalist","Labor Negotiator","Labor Organizer","Labor Relations Manager","Lab Services Director","Lab Technician","Land Developer","Landscape Architect","Law Enforcement Officer","Lawyer","Lead Software Engineer","Lead Software Test Engineer","Leasing Manager","Legal Secretary","Library Manager","Litigation Attorney","Loan Officer","Lobbyist","Logistics Manager","Maintenance Manager","Management Consultant","Managed Care Director","Managing Partner","Manufacturing Director","Manpower Planner","Marine Biologist","Market Res. Analyst","Marketing Director","Materials Manager","Mathematician","Membership Chairman","Mechanic","Mechanical Engineer","Media Buyer","Medical Investor","Medical Secretary","Medical Technician","Mental Health Counselor","Merchandiser","Metallurgical Engineering","Meteorologist","Microbiologist","MIS Manager","Motion Picture Director","Multimedia Director","Musician","Network Administrator","Network Specialist","Network Operator","New Product Manager","Novelist","Nuclear Engineer","Nuclear Specialist","Nutritionist","Nursing Administrator","Occupational Therapist","Oceanographer","Office Manager","Operations Manager","Operations Research Director","Optical Technician","Optometrist","Organizational Development Manager","Outplacement Specialist","Paralegal","Park Ranger","Patent Attorney","Payroll Specialist","Personnel Specialist","Petroleum Engineer","Pharmacist","Photographer","Physical Therapist","Physician","Physician Assistant","Physicist","Planning Director","Podiatrist","Political Analyst","Political Scientist","Politician","Portfolio Manager","Preschool Management","Preschool Teacher","Principal","Private Banker","Private Investigator","Probation Officer","Process Engineer","Producer","Product Manager","Product Engineer","Production Engineer","Production Planner","Professional Athlete","Professional Coach","Professor","Project Engineer","Project Manager","Program Manager","Property Manager","Public Administrator","Public Safety Director","PR Specialist","Publisher","Purchasing Agent","Publishing Director","Quality Assurance Specialist","Quality Control Engineer","Quality Control Inspector","Radiology Manager","Railroad Engineer","Real Estate Broker","Recreational Director","Recruiter","Redevelopment Specialist","Regulatory Affairs Manager","Registered Nurse","Rehabilitation Counselor","Relocation Manager","Reporter","Research Specialist","Restaurant Manager","Retail Store Manager","Risk Analyst","Safety Engineer","Sales Engineer","Sales Trainer","Sales Promotion Manager","Sales Representative","Sales Manager","Service Manager","Sanitation Engineer","Scientific Programmer","Scientific Writer","Securities Analyst","Security Consultant","Security Director","Seminar Presenter","Ship's Officer","Singer","Social Director","Social Program Planner","Social Research","Social Scientist","Social Worker","Sociologist","Software Developer","Software Engineer","Software Test Engineer","Soil Scientist","Special Events Manager","Special Education Teacher","Special Projects Director","Speech Pathologist","Speech Writer","Sports Event Manager","Statistician","Store Manager","Strategic Alliance Director","Strategic Planning Director","Stress Reduction Specialist","Stockbroker","Surveyor","Structural Engineer","Superintendent","Supply Chain Director","System Engineer","Systems Analyst","Systems Programmer","System Administrator","Tax Specialist","Teacher","Technical Support Specialist","Technical Illustrator","Technical Writer","Technology Director","Telecom Analyst","Telemarketer","Theatrical Director","Title Examiner","Tour Escort","Tour Guide Director","Traffic Manager","Trainer Translator","Transportation Manager","Travel Agent","Treasurer","TV Programmer","Underwriter","Union Representative","University Administrator","University Dean","Urban Planner","Veterinarian","Vendor Relations Director","Viticulturist","Warehouse Manager"],animals:{ocean:["Acantharea","Anemone","Angelfish King","Ahi Tuna","Albacore","American Oyster","Anchovy","Armored Snail","Arctic Char","Atlantic Bluefin Tuna","Atlantic Cod","Atlantic Goliath Grouper","Atlantic Trumpetfish","Atlantic Wolffish","Baleen Whale","Banded Butterflyfish","Banded Coral Shrimp","Banded Sea Krait","Barnacle","Barndoor Skate","Barracuda","Basking Shark","Bass","Beluga Whale","Bluebanded Goby","Bluehead Wrasse","Bluefish","Bluestreak Cleaner-Wrasse","Blue Marlin","Blue Shark","Blue Spiny Lobster","Blue Tang","Blue Whale","Broadclub Cuttlefish","Bull Shark","Chambered Nautilus","Chilean Basket Star","Chilean Jack Mackerel","Chinook Salmon","Christmas Tree Worm","Clam","Clown Anemonefish","Clown Triggerfish","Cod","Coelacanth","Cockscomb Cup Coral","Common Fangtooth","Conch","Cookiecutter Shark","Copepod","Coral","Corydoras","Cownose Ray","Crab","Crown-of-Thorns Starfish","Cushion Star","Cuttlefish","California Sea Otters","Dolphin","Dolphinfish","Dory","Devil Fish","Dugong","Dumbo Octopus","Dungeness Crab","Eccentric Sand Dollar","Edible Sea Cucumber","Eel","Elephant Seal","Elkhorn Coral","Emperor Shrimp","Estuarine Crocodile","Fathead Sculpin","Fiddler Crab","Fin Whale","Flameback","Flamingo Tongue Snail","Flashlight Fish","Flatback Turtle","Flatfish","Flying Fish","Flounder","Fluke","French Angelfish","Frilled Shark","Fugu (also called Pufferfish)","Gar","Geoduck","Giant Barrel Sponge","Giant Caribbean Sea Anemone","Giant Clam","Giant Isopod","Giant Kingfish","Giant Oarfish","Giant Pacific Octopus","Giant Pyrosome","Giant Sea Star","Giant Squid","Glowing Sucker Octopus","Giant Tube Worm","Goblin Shark","Goosefish","Great White Shark","Greenland Shark","Grey Atlantic Seal","Grouper","Grunion","Guineafowl Puffer","Haddock","Hake","Halibut","Hammerhead Shark","Hapuka","Harbor Porpoise","Harbor Seal","Hatchetfish","Hawaiian Monk Seal","Hawksbill Turtle","Hector's Dolphin","Hermit Crab","Herring","Hoki","Horn Shark","Horseshoe Crab","Humpback Anglerfish","Humpback Whale","Icefish","Imperator Angelfish","Irukandji Jellyfish","Isopod","Ivory Bush Coral","Japanese Spider Crab","Jellyfish","John Dory","Juan Fernandez Fur Seal","Killer Whale","Kiwa Hirsuta","Krill","Lagoon Triggerfish","Lamprey","Leafy Seadragon","Leopard Seal","Limpet","Ling","Lionfish","Lions Mane Jellyfish","Lobe Coral","Lobster","Loggerhead Turtle","Longnose Sawshark","Longsnout Seahorse","Lophelia Coral","Marrus Orthocanna","Manatee","Manta Ray","Marlin","Megamouth Shark","Mexican Lookdown","Mimic Octopus","Moon Jelly","Mollusk","Monkfish","Moray Eel","Mullet","Mussel","Megaladon","Napoleon Wrasse","Nassau Grouper","Narwhal","Nautilus","Needlefish","Northern Seahorse","North Atlantic Right Whale","Northern Red Snapper","Norway Lobster","Nudibranch","Nurse Shark","Oarfish","Ocean Sunfish","Oceanic Whitetip Shark","Octopus","Olive Sea Snake","Orange Roughy","Ostracod","Otter","Oyster","Pacific Angelshark","Pacific Blackdragon","Pacific Halibut","Pacific Sardine","Pacific Sea Nettle Jellyfish","Pacific White Sided Dolphin","Pantropical Spotted Dolphin","Patagonian Toothfish","Peacock Mantis Shrimp","Pelagic Thresher Shark","Penguin","Peruvian Anchoveta","Pilchard","Pink Salmon","Pinniped","Plankton","Porpoise","Polar Bear","Portuguese Man o' War","Pycnogonid Sea Spider","Quahog","Queen Angelfish","Queen Conch","Queen Parrotfish","Queensland Grouper","Ragfish","Ratfish","Rattail Fish","Ray","Red Drum","Red King Crab","Ringed Seal","Risso's Dolphin","Ross Seals","Sablefish","Salmon","Sand Dollar","Sandbar Shark","Sawfish","Sarcastic Fringehead","Scalloped Hammerhead Shark","Seahorse","Sea Cucumber","Sea Lion","Sea Urchin","Seal","Shark","Shortfin Mako Shark","Shovelnose Guitarfish","Shrimp","Silverside Fish","Skipjack Tuna","Slender Snipe Eel","Smalltooth Sawfish","Smelts","Sockeye Salmon","Southern Stingray","Sponge","Spotted Porcupinefish","Spotted Dolphin","Spotted Eagle Ray","Spotted Moray","Squid","Squidworm","Starfish","Stickleback","Stonefish","Stoplight Loosejaw","Sturgeon","Swordfish","Tan Bristlemouth","Tasseled Wobbegong","Terrible Claw Lobster","Threespot Damselfish","Tiger Prawn","Tiger Shark","Tilefish","Toadfish","Tropical Two-Wing Flyfish","Tuna","Umbrella Squid","Velvet Crab","Venus Flytrap Sea Anemone","Vigtorniella Worm","Viperfish","Vampire Squid","Vaquita","Wahoo","Walrus","West Indian Manatee","Whale","Whale Shark","Whiptail Gulper","White-Beaked Dolphin","White-Ring Garden Eel","White Shrimp","Wobbegong","Wrasse","Wreckfish","Xiphosura","Yellowtail Damselfish","Yelloweye Rockfish","Yellow Cup Black Coral","Yellow Tube Sponge","Yellowfin Tuna","Zebrashark","Zooplankton"],desert:["Aardwolf","Addax","African Wild Ass","Ant","Antelope","Armadillo","Baboon","Badger","Bat","Bearded Dragon","Beetle","Bird","Black-footed Cat","Boa","Brown Bear","Bustard","Butterfly","Camel","Caracal","Caracara","Caterpillar","Centipede","Cheetah","Chipmunk","Chuckwalla","Climbing Mouse","Coati","Cobra","Cotton Rat","Cougar","Courser","Crane Fly","Crow","Dassie Rat","Dove","Dunnart","Eagle","Echidna","Elephant","Emu","Falcon","Fly","Fox","Frogmouth","Gecko","Geoffroy's Cat","Gerbil","Grasshopper","Guanaco","Gundi","Hamster","Hawk","Hedgehog","Hyena","Hyrax","Jackal","Kangaroo","Kangaroo Rat","Kestrel","Kowari","Kultarr","Leopard","Lion","Macaw","Meerkat","Mouse","Oryx","Ostrich","Owl","Pronghorn","Python","Rabbit","Raccoon","Rattlesnake","Rhinoceros","Sand Cat","Spectacled Bear","Spiny Mouse","Starling","Stick Bug","Tarantula","Tit","Toad","Tortoise","Tyrant Flycatcher","Viper","Vulture","Waxwing","Xerus","Zebra"],grassland:["Aardvark","Aardwolf","Accentor","African Buffalo","African Wild Dog","Alpaca","Anaconda","Ant","Anteater","Antelope","Armadillo","Baboon","Badger","Bandicoot","Barbet","Bat","Bee","Bee-eater","Beetle","Bird","Bison","Black-footed Cat","Black-footed Ferret","Bluebird","Boa","Bowerbird","Brown Bear","Bush Dog","Bushshrike","Bustard","Butterfly","Buzzard","Caracal","Caracara","Cardinal","Caterpillar","Cheetah","Chipmunk","Civet","Climbing Mouse","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Common Genet","Cotton Rat","Cougar","Courser","Coyote","Crane","Crane Fly","Cricket","Crow","Culpeo","Death Adder","Deer","Deer Mouse","Dingo","Dinosaur","Dove","Drongo","Duck","Duiker","Dunnart","Eagle","Echidna","Elephant","Elk","Emu","Falcon","Finch","Flea","Fly","Flying Frog","Fox","Frog","Frogmouth","Garter Snake","Gazelle","Gecko","Geoffroy's Cat","Gerbil","Giant Tortoise","Giraffe","Grasshopper","Grison","Groundhog","Grouse","Guanaco","Guinea Pig","Hamster","Harrier","Hartebeest","Hawk","Hedgehog","Helmetshrike","Hippopotamus","Hornbill","Hyena","Hyrax","Impala","Jackal","Jaguar","Jaguarundi","Kangaroo","Kangaroo Rat","Kestrel","Kultarr","Ladybug","Leopard","Lion","Macaw","Meerkat","Mouse","Newt","Oryx","Ostrich","Owl","Pangolin","Pheasant","Prairie Dog","Pronghorn","Przewalski's Horse","Python","Quoll","Rabbit","Raven","Rhinoceros","Shelduck","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Tamandua","Tasmanian Devil","Thornbill","Thrush","Toad","Tortoise"],forest:["Agouti","Anaconda","Anoa","Ant","Anteater","Antelope","Armadillo","Asian Black Bear","Aye-aye","Babirusa","Baboon","Badger","Bandicoot","Banteng","Barbet","Basilisk","Bat","Bearded Dragon","Bee","Bee-eater","Beetle","Bettong","Binturong","Bird-of-paradise","Bongo","Bowerbird","Bulbul","Bush Dog","Bushbaby","Bushshrike","Butterfly","Buzzard","Caecilian","Cardinal","Cassowary","Caterpillar","Centipede","Chameleon","Chimpanzee","Cicada","Civet","Clouded Leopard","Coati","Cobra","Cockatoo","Cockroach","Colugo","Cotinga","Cotton Rat","Cougar","Crane Fly","Cricket","Crocodile","Crow","Cuckoo","Cuscus","Death Adder","Deer","Dhole","Dingo","Dinosaur","Drongo","Duck","Duiker","Eagle","Echidna","Elephant","Finch","Flat-headed Cat","Flea","Flowerpecker","Fly","Flying Frog","Fossa","Frog","Frogmouth","Gaur","Gecko","Gorilla","Grison","Hawaiian Honeycreeper","Hawk","Hedgehog","Helmetshrike","Hornbill","Hyrax","Iguana","Jackal","Jaguar","Jaguarundi","Kestrel","Ladybug","Lemur","Leopard","Lion","Macaw","Mandrill","Margay","Monkey","Mouse","Mouse Deer","Newt","Okapi","Old World Flycatcher","Orangutan","Owl","Pangolin","Peafowl","Pheasant","Possum","Python","Quokka","Rabbit","Raccoon","Red Panda","Red River Hog","Rhinoceros","Sloth Bear","Spectacled Bear","Squirrel","Starling","Stick Bug","Sun Bear","Tamandua","Tamarin","Tapir","Tarantula","Thrush","Tiger","Tit","Toad","Tortoise","Toucan","Trogon","Trumpeter","Turaco","Turtle","Tyrant Flycatcher","Viper","Vulture","Wallaby","Warbler","Wasp","Waxwing","Weaver","Weaver-finch","Whistler","White-eye","Whydah","Woodswallow","Worm","Wren","Xenops","Yellowjacket","Accentor","African Buffalo","American Black Bear","Anole","Bird","Bison","Boa","Brown Bear","Chipmunk","Common Genet","Copperhead","Coyote","Deer Mouse","Dormouse","Elk","Emu","Fisher","Fox","Garter Snake","Giant Panda","Giant Tortoise","Groundhog","Grouse","Guanaco","Himalayan Tahr","Kangaroo","Koala","Numbat","Quoll","Raccoon dog","Tasmanian Devil","Thornbill","Turkey","Vole","Weasel","Wildcat","Wolf","Wombat","Woodchuck","Woodpecker"],farm:["Alpaca","Buffalo","Banteng","Cow","Cat","Chicken","Carp","Camel","Donkey","Dog","Duck","Emu","Goat","Gayal","Guinea","Goose","Horse","Honey","Llama","Pig","Pigeon","Rhea","Rabbit","Sheep","Silkworm","Turkey","Yak","Zebu"],pet:["Bearded Dragon","Birds","Burro","Cats","Chameleons","Chickens","Chinchillas","Chinese Water Dragon","Cows","Dogs","Donkey","Ducks","Ferrets","Fish","Geckos","Geese","Gerbils","Goats","Guinea Fowl","Guinea Pigs","Hamsters","Hedgehogs","Horses","Iguanas","Llamas","Lizards","Mice","Mule","Peafowl","Pigs and Hogs","Pigeons","Ponies","Pot Bellied Pig","Rabbits","Rats","Sheep","Skinks","Snakes","Stick Insects","Sugar Gliders","Tarantula","Turkeys","Turtles"],zoo:["Aardvark","African Wild Dog","Aldabra Tortoise","American Alligator","American Bison","Amur Tiger","Anaconda","Andean Condor","Asian Elephant","Baby Doll Sheep","Bald Eagle","Barred Owl","Blue Iguana","Boer Goat","California Sea Lion","Caribbean Flamingo","Chinchilla","Collared Lemur","Coquerel's Sifaka","Cuban Amazon Parrot","Ebony Langur","Fennec Fox","Fossa","Gelada","Giant Anteater","Giraffe","Gorilla","Grizzly Bear","Henkel's Leaf-tailed Gecko","Indian Gharial","Indian Rhinoceros","King Cobra","King Vulture","Komodo Dragon","Linne's Two-toed Sloth","Lion","Little Penguin","Madagascar Tree Boa","Magellanic Penguin","Malayan Tapir","Malayan Tiger","Matschies Tree Kangaroo","Mini Donkey","Monarch Butterfly","Nile crocodile","North American Porcupine","Nubian Ibex","Okapi","Poison Dart Frog","Polar Bear","Pygmy Marmoset","Radiated Tortoise","Red Panda","Red Ruffed Lemur","Ring-tailed Lemur","Ring-tailed Mongoose","Rock Hyrax","Small Clawed Asian Otter","Snow Leopard","Snowy Owl","Southern White-faced Owl","Southern White Rhinocerous","Squirrel Monkey","Tufted Puffin","White Cheeked Gibbon","White-throated Bee Eater","Zebra"]},primes:[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999,3001,3011,3019,3023,3037,3041,3049,3061,3067,3079,3083,3089,3109,3119,3121,3137,3163,3167,3169,3181,3187,3191,3203,3209,3217,3221,3229,3251,3253,3257,3259,3271,3299,3301,3307,3313,3319,3323,3329,3331,3343,3347,3359,3361,3371,3373,3389,3391,3407,3413,3433,3449,3457,3461,3463,3467,3469,3491,3499,3511,3517,3527,3529,3533,3539,3541,3547,3557,3559,3571,3581,3583,3593,3607,3613,3617,3623,3631,3637,3643,3659,3671,3673,3677,3691,3697,3701,3709,3719,3727,3733,3739,3761,3767,3769,3779,3793,3797,3803,3821,3823,3833,3847,3851,3853,3863,3877,3881,3889,3907,3911,3917,3919,3923,3929,3931,3943,3947,3967,3989,4001,4003,4007,4013,4019,4021,4027,4049,4051,4057,4073,4079,4091,4093,4099,4111,4127,4129,4133,4139,4153,4157,4159,4177,4201,4211,4217,4219,4229,4231,4241,4243,4253,4259,4261,4271,4273,4283,4289,4297,4327,4337,4339,4349,4357,4363,4373,4391,4397,4409,4421,4423,4441,4447,4451,4457,4463,4481,4483,4493,4507,4513,4517,4519,4523,4547,4549,4561,4567,4583,4591,4597,4603,4621,4637,4639,4643,4649,4651,4657,4663,4673,4679,4691,4703,4721,4723,4729,4733,4751,4759,4783,4787,4789,4793,4799,4801,4813,4817,4831,4861,4871,4877,4889,4903,4909,4919,4931,4933,4937,4943,4951,4957,4967,4969,4973,4987,4993,4999,5003,5009,5011,5021,5023,5039,5051,5059,5077,5081,5087,5099,5101,5107,5113,5119,5147,5153,5167,5171,5179,5189,5197,5209,5227,5231,5233,5237,5261,5273,5279,5281,5297,5303,5309,5323,5333,5347,5351,5381,5387,5393,5399,5407,5413,5417,5419,5431,5437,5441,5443,5449,5471,5477,5479,5483,5501,5503,5507,5519,5521,5527,5531,5557,5563,5569,5573,5581,5591,5623,5639,5641,5647,5651,5653,5657,5659,5669,5683,5689,5693,5701,5711,5717,5737,5741,5743,5749,5779,5783,5791,5801,5807,5813,5821,5827,5839,5843,5849,5851,5857,5861,5867,5869,5879,5881,5897,5903,5923,5927,5939,5953,5981,5987,6007,6011,6029,6037,6043,6047,6053,6067,6073,6079,6089,6091,6101,6113,6121,6131,6133,6143,6151,6163,6173,6197,6199,6203,6211,6217,6221,6229,6247,6257,6263,6269,6271,6277,6287,6299,6301,6311,6317,6323,6329,6337,6343,6353,6359,6361,6367,6373,6379,6389,6397,6421,6427,6449,6451,6469,6473,6481,6491,6521,6529,6547,6551,6553,6563,6569,6571,6577,6581,6599,6607,6619,6637,6653,6659,6661,6673,6679,6689,6691,6701,6703,6709,6719,6733,6737,6761,6763,6779,6781,6791,6793,6803,6823,6827,6829,6833,6841,6857,6863,6869,6871,6883,6899,6907,6911,6917,6947,6949,6959,6961,6967,6971,6977,6983,6991,6997,7001,7013,7019,7027,7039,7043,7057,7069,7079,7103,7109,7121,7127,7129,7151,7159,7177,7187,7193,7207,7211,7213,7219,7229,7237,7243,7247,7253,7283,7297,7307,7309,7321,7331,7333,7349,7351,7369,7393,7411,7417,7433,7451,7457,7459,7477,7481,7487,7489,7499,7507,7517,7523,7529,7537,7541,7547,7549,7559,7561,7573,7577,7583,7589,7591,7603,7607,7621,7639,7643,7649,7669,7673,7681,7687,7691,7699,7703,7717,7723,7727,7741,7753,7757,7759,7789,7793,7817,7823,7829,7841,7853,7867,7873,7877,7879,7883,7901,7907,7919,7927,7933,7937,7949,7951,7963,7993,8009,8011,8017,8039,8053,8059,8069,8081,8087,8089,8093,8101,8111,8117,8123,8147,8161,8167,8171,8179,8191,8209,8219,8221,8231,8233,8237,8243,8263,8269,8273,8287,8291,8293,8297,8311,8317,8329,8353,8363,8369,8377,8387,8389,8419,8423,8429,8431,8443,8447,8461,8467,8501,8513,8521,8527,8537,8539,8543,8563,8573,8581,8597,8599,8609,8623,8627,8629,8641,8647,8663,8669,8677,8681,8689,8693,8699,8707,8713,8719,8731,8737,8741,8747,8753,8761,8779,8783,8803,8807,8819,8821,8831,8837,8839,8849,8861,8863,8867,8887,8893,8923,8929,8933,8941,8951,8963,8969,8971,8999,9001,9007,9011,9013,9029,9041,9043,9049,9059,9067,9091,9103,9109,9127,9133,9137,9151,9157,9161,9173,9181,9187,9199,9203,9209,9221,9227,9239,9241,9257,9277,9281,9283,9293,9311,9319,9323,9337,9341,9343,9349,9371,9377,9391,9397,9403,9413,9419,9421,9431,9433,9437,9439,9461,9463,9467,9473,9479,9491,9497,9511,9521,9533,9539,9547,9551,9587,9601,9613,9619,9623,9629,9631,9643,9649,9661,9677,9679,9689,9697,9719,9721,9733,9739,9743,9749,9767,9769,9781,9787,9791,9803,9811,9817,9829,9833,9839,9851,9857,9859,9871,9883,9887,9901,9907,9923,9929,9931,9941,9949,9967,9973,10007],emotions:["love","joy","surprise","anger","sadness","fear"]},S=Object.prototype.hasOwnProperty,T=Object.keys||function(e){var t=[];for(var n in e)S.call(e,n)&&t.push(n);return t};function M(e,t){var n=Array.isArray(e),r=t||(n?new Array(e.length):{});return n?function(e,t){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}(e,r):function(e,t){for(var n,r=T(e),i=0,a=r.length;i<a;i++)t[n=r[i]]=e[n]||t[n]}(e,r),r}m.prototype.get=function(e){return M(v[e])},m.prototype.mac_address=function(e){(e=d(e)).separator||(e.separator=e.networkVersion?".":":");var t="ABCDEF1234567890";return e.networkVersion?this.n(this.string,3,{pool:t,length:4}).join(e.separator):this.n(this.string,6,{pool:t,length:2}).join(e.separator)},m.prototype.normal=function(e){if(p((e=d(e,{mean:0,dev:1,pool:[]})).pool.constructor!==Array,"Chance: The pool option must be a valid array."),p("number"!==typeof e.mean,"Chance: Mean (mean) must be a number"),p("number"!==typeof e.dev,"Chance: Standard deviation (dev) must be a number"),e.pool.length>0)return this.normal_pool(e);var t,n,r,i=e.mean,a=e.dev;do{t=(n=2*this.random()-1)*n+(r=2*this.random()-1)*r}while(t>=1);return a*(n*Math.sqrt(-2*Math.log(t)/t))+i},m.prototype.normal_pool=function(e){var t=0;do{var n=Math.round(this.normal({mean:e.mean,dev:e.dev}));if(n<e.pool.length&&n>=0)return e.pool[n];t++}while(t<100);throw new RangeError("Chance: Your pool is too small for the given mean and standard deviation. Please adjust.")},m.prototype.radio=function(e){var t="";switch((e=d(e,{side:"?"})).side.toLowerCase()){case"east":case"e":t="W";break;case"west":case"w":t="K";break;default:t=this.character({pool:"KW"})}return t+this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})+this.character({alpha:!0,casing:"upper"})},m.prototype.set=function(e,t){"string"===typeof e?v[e]=t:v=M(e,v)},m.prototype.tv=function(e){return this.radio(e)},m.prototype.cnpj=function(){var e=this.n(this.natural,8,{max:9}),t=2+6*e[7]+7*e[6]+8*e[5]+9*e[4]+2*e[3]+3*e[2]+4*e[1]+5*e[0];(t=11-t%11)>=10&&(t=0);var n=2*t+3+7*e[7]+8*e[6]+9*e[5]+2*e[4]+3*e[3]+4*e[2]+5*e[1]+6*e[0];return(n=11-n%11)>=10&&(n=0),""+e[0]+e[1]+"."+e[2]+e[3]+e[4]+"."+e[5]+e[6]+e[7]+"/0001-"+t+n},m.prototype.emotion=function(){return this.pick(this.get("emotions"))},m.prototype.mersenne_twister=function(e){return new C(e)},m.prototype.blueimp_md5=function(){return new k};var C=function(e){void 0===e&&(e=Math.floor(Math.random()*Math.pow(10,13))),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,this.init_genrand(e)};C.prototype.init_genrand=function(e){for(this.mt[0]=e>>>0,this.mti=1;this.mti<this.N;this.mti++)e=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30,this.mt[this.mti]=(1812433253*((4294901760&e)>>>16)<<16)+1812433253*(65535&e)+this.mti,this.mt[this.mti]>>>=0},C.prototype.init_by_array=function(e,t){var n,r,i=1,a=0;for(this.init_genrand(19650218),n=this.N>t?this.N:t;n;n--)r=this.mt[i-1]^this.mt[i-1]>>>30,this.mt[i]=(this.mt[i]^(1664525*((4294901760&r)>>>16)<<16)+1664525*(65535&r))+e[a]+a,this.mt[i]>>>=0,a++,++i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1),a>=t&&(a=0);for(n=this.N-1;n;n--)r=this.mt[i-1]^this.mt[i-1]>>>30,this.mt[i]=(this.mt[i]^(1566083941*((4294901760&r)>>>16)<<16)+1566083941*(65535&r))-i,this.mt[i]>>>=0,++i>=this.N&&(this.mt[0]=this.mt[this.N-1],i=1);this.mt[0]=2147483648},C.prototype.genrand_int32=function(){var e,t=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti===this.N+1&&this.init_genrand(5489),n=0;n<this.N-this.M;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^e>>>1^t[1&e];for(;n<this.N-1;n++)e=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^e>>>1^t[1&e];e=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^e>>>1^t[1&e],this.mti=0}return e=this.mt[this.mti++],e^=e>>>11,e^=e<<7&2636928640,e^=e<<15&4022730752,(e^=e>>>18)>>>0},C.prototype.genrand_int31=function(){return this.genrand_int32()>>>1},C.prototype.genrand_real1=function(){return this.genrand_int32()*(1/4294967295)},C.prototype.random=function(){return this.genrand_int32()*(1/4294967296)},C.prototype.genrand_real3=function(){return(this.genrand_int32()+.5)*(1/4294967296)},C.prototype.genrand_res53=function(){return(67108864*(this.genrand_int32()>>>5)+(this.genrand_int32()>>>6))*(1/9007199254740992)};var k=function(){};k.prototype.VERSION="1.0.1",k.prototype.safe_add=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},k.prototype.bit_roll=function(e,t){return e<<t|e>>>32-t},k.prototype.md5_cmn=function(e,t,n,r,i,a){return this.safe_add(this.bit_roll(this.safe_add(this.safe_add(t,e),this.safe_add(r,a)),i),n)},k.prototype.md5_ff=function(e,t,n,r,i,a,o){return this.md5_cmn(t&n|~t&r,e,t,i,a,o)},k.prototype.md5_gg=function(e,t,n,r,i,a,o){return this.md5_cmn(t&r|n&~r,e,t,i,a,o)},k.prototype.md5_hh=function(e,t,n,r,i,a,o){return this.md5_cmn(t^n^r,e,t,i,a,o)},k.prototype.md5_ii=function(e,t,n,r,i,a,o){return this.md5_cmn(n^(t|~r),e,t,i,a,o)},k.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,i,a,o,s=1732584193,c=-271733879,u=-1732584194,l=271733878;for(n=0;n<e.length;n+=16)r=s,i=c,a=u,o=l,s=this.md5_ff(s,c,u,l,e[n],7,-680876936),l=this.md5_ff(l,s,c,u,e[n+1],12,-389564586),u=this.md5_ff(u,l,s,c,e[n+2],17,606105819),c=this.md5_ff(c,u,l,s,e[n+3],22,-1044525330),s=this.md5_ff(s,c,u,l,e[n+4],7,-176418897),l=this.md5_ff(l,s,c,u,e[n+5],12,1200080426),u=this.md5_ff(u,l,s,c,e[n+6],17,-1473231341),c=this.md5_ff(c,u,l,s,e[n+7],22,-45705983),s=this.md5_ff(s,c,u,l,e[n+8],7,1770035416),l=this.md5_ff(l,s,c,u,e[n+9],12,-1958414417),u=this.md5_ff(u,l,s,c,e[n+10],17,-42063),c=this.md5_ff(c,u,l,s,e[n+11],22,-1990404162),s=this.md5_ff(s,c,u,l,e[n+12],7,1804603682),l=this.md5_ff(l,s,c,u,e[n+13],12,-40341101),u=this.md5_ff(u,l,s,c,e[n+14],17,-1502002290),c=this.md5_ff(c,u,l,s,e[n+15],22,1236535329),s=this.md5_gg(s,c,u,l,e[n+1],5,-165796510),l=this.md5_gg(l,s,c,u,e[n+6],9,-1069501632),u=this.md5_gg(u,l,s,c,e[n+11],14,643717713),c=this.md5_gg(c,u,l,s,e[n],20,-373897302),s=this.md5_gg(s,c,u,l,e[n+5],5,-701558691),l=this.md5_gg(l,s,c,u,e[n+10],9,38016083),u=this.md5_gg(u,l,s,c,e[n+15],14,-660478335),c=this.md5_gg(c,u,l,s,e[n+4],20,-405537848),s=this.md5_gg(s,c,u,l,e[n+9],5,568446438),l=this.md5_gg(l,s,c,u,e[n+14],9,-1019803690),u=this.md5_gg(u,l,s,c,e[n+3],14,-187363961),c=this.md5_gg(c,u,l,s,e[n+8],20,1163531501),s=this.md5_gg(s,c,u,l,e[n+13],5,-1444681467),l=this.md5_gg(l,s,c,u,e[n+2],9,-51403784),u=this.md5_gg(u,l,s,c,e[n+7],14,1735328473),c=this.md5_gg(c,u,l,s,e[n+12],20,-1926607734),s=this.md5_hh(s,c,u,l,e[n+5],4,-378558),l=this.md5_hh(l,s,c,u,e[n+8],11,-2022574463),u=this.md5_hh(u,l,s,c,e[n+11],16,1839030562),c=this.md5_hh(c,u,l,s,e[n+14],23,-35309556),s=this.md5_hh(s,c,u,l,e[n+1],4,-1530992060),l=this.md5_hh(l,s,c,u,e[n+4],11,1272893353),u=this.md5_hh(u,l,s,c,e[n+7],16,-155497632),c=this.md5_hh(c,u,l,s,e[n+10],23,-1094730640),s=this.md5_hh(s,c,u,l,e[n+13],4,681279174),l=this.md5_hh(l,s,c,u,e[n],11,-358537222),u=this.md5_hh(u,l,s,c,e[n+3],16,-722521979),c=this.md5_hh(c,u,l,s,e[n+6],23,76029189),s=this.md5_hh(s,c,u,l,e[n+9],4,-640364487),l=this.md5_hh(l,s,c,u,e[n+12],11,-421815835),u=this.md5_hh(u,l,s,c,e[n+15],16,530742520),c=this.md5_hh(c,u,l,s,e[n+2],23,-995338651),s=this.md5_ii(s,c,u,l,e[n],6,-198630844),l=this.md5_ii(l,s,c,u,e[n+7],10,1126891415),u=this.md5_ii(u,l,s,c,e[n+14],15,-1416354905),c=this.md5_ii(c,u,l,s,e[n+5],21,-57434055),s=this.md5_ii(s,c,u,l,e[n+12],6,1700485571),l=this.md5_ii(l,s,c,u,e[n+3],10,-1894986606),u=this.md5_ii(u,l,s,c,e[n+10],15,-1051523),c=this.md5_ii(c,u,l,s,e[n+1],21,-2054922799),s=this.md5_ii(s,c,u,l,e[n+8],6,1873313359),l=this.md5_ii(l,s,c,u,e[n+15],10,-30611744),u=this.md5_ii(u,l,s,c,e[n+6],15,-1560198380),c=this.md5_ii(c,u,l,s,e[n+13],21,1309151649),s=this.md5_ii(s,c,u,l,e[n+4],6,-145523070),l=this.md5_ii(l,s,c,u,e[n+11],10,-1120210379),u=this.md5_ii(u,l,s,c,e[n+2],15,718787259),c=this.md5_ii(c,u,l,s,e[n+9],21,-343485551),s=this.safe_add(s,r),c=this.safe_add(c,i),u=this.safe_add(u,a),l=this.safe_add(l,o);return[s,c,u,l]},k.prototype.binl2rstr=function(e){var t,n="";for(t=0;t<32*e.length;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n},k.prototype.rstr2binl=function(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;for(t=0;t<8*e.length;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n},k.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},k.prototype.rstr_hmac_md5=function(e,t){var n,r,i=this.rstr2binl(e),a=[],o=[];for(a[15]=o[15]=void 0,i.length>16&&(i=this.binl_md5(i,8*e.length)),n=0;n<16;n+=1)a[n]=909522486^i[n],o[n]=1549556828^i[n];return r=this.binl_md5(a.concat(this.rstr2binl(t)),512+8*t.length),this.binl2rstr(this.binl_md5(o.concat(r),640))},k.prototype.rstr2hex=function(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i},k.prototype.str2rstr_utf8=function(e){return unescape(encodeURIComponent(e))},k.prototype.raw_md5=function(e){return this.rstr_md5(this.str2rstr_utf8(e))},k.prototype.hex_md5=function(e){return this.rstr2hex(this.raw_md5(e))},k.prototype.raw_hmac_md5=function(e,t){return this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t))},k.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.raw_hmac_md5(e,t))},k.prototype.md5=function(e,t,n){return t?n?this.raw_hmac_md5(t,e):this.hex_hmac_md5(t,e):n?this.raw_md5(e):this.hex_md5(e)},e.exports&&(t=e.exports=m),t.Chance=m,void 0===(r=function(){return m}.apply(t,[]))||(e.exports=r),"undefined"!==typeof importScripts&&(chance=new m,self.Chance=m),"object"===typeof window&&"object"===typeof window.document&&(window.Chance=m,window.chance=new m)}()}).call(this,n("+ZX+").Buffer)},"FhM/":function(e,t,n){"use strict";var r=n("L+x5");n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return r.b})),n.d(t,"e",(function(){return r.c})),n.d(t,"f",(function(){return r.d}));var i=n("0nDP");n.d(t,"d",(function(){return i.a}));var a=n("KgEZ");n.d(t,"b",(function(){return a.a}))},G8Ou:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("BQ33"),a=n.n(i),o=n("nnm9"),s=n.n(o),c=n("ERkP");function u(e,t){var n=void 0===t?{}:t,i=n.autoStart,o=void 0===i||i,u=n.onStart,l=void 0===u?s.a:u,m=n.onTick,d=void 0===m?s.a:m,p=n.onComplete,f=void 0===p?s.a:p,g=n.now,h=c.useMemo((function(){return a()(e).valueOf()-(void 0!==g?a()(g).valueOf():Date.now())}),[e,g]),y=Object(r.__read)(c.useState(o),2),b=y[0],v=y[1],S=Object(r.__read)(c.useState(!1),2)[1],T=c.useRef(performance.now()),M=c.useRef(h),C=c.useCallback((function(){v(!0)}),[]),k=c.useCallback((function(){v(!1),f()}),[f]),A=c.useCallback((function(){var e=performance.now();M.current=M.current-(e-T.current),T.current=e,d(M.current),S((function(e){return!e}))}),[d]);return c.useEffect((function(){M.current=h}),[h]),c.useEffect((function(){var e;return b&&M.current>0&&(e=window.setInterval((function(){M.current<=0?k():A()}),1e3),l(M.current)),function(){return window.clearInterval(e)}}),[b,k,l,A]),[M.current,C,b]}},GM3D:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("D57K"),i=function(e,t,n){var i,a,o=n.defName.split(",");try{for(var s=Object(r.__values)(o),c=s.next();!c.done;c=s.next()){var u=e[c.value];if(u&&u.length&&!u.every((function(e){return t.includes(e)})))return!1}}catch(e){i={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return!0}},Gm6T:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"d",(function(){return r.c})),n.d(t,"c",(function(){return r.b})),n.d(t,"b",(function(){return i}));var r=n("u8N8");function i(e){e.parentElement&&e.parentElement.removeChild(e)}},HT7L:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return T}));var r,i=n("D57K"),a=n("Gzp1"),o=n("HnWI"),s=n("LiEJ"),c=n("G0kv"),u=n("gQst"),l=n("fa4O"),m=n("Jg5f"),d=n("yuRt"),p=n.n(d),f=n("6fKc"),g=n.n(f),h=n("qIKI");!function(e){e.NOTIFICATION="new:notification",e.RANKING="new:ranking"}(r||(r={}));function y(){return"undefined"!==typeof SharedWorker}function b(){if("serviceWorker"in navigator){var e=location.origin+"/"+p.a.split("/").pop();return navigator.serviceWorker.register(e,{scope:"./"}).then((function(){return fetch(g.a).then((function(e){return e.text()})).then((function(e){new BroadcastChannel("sw").postMessage({type:"SHARED_WORKER_CODE",content:e})}))})).catch((function(e){console.error(e)}))}}var v=function(){function e(){var e,t=this;if(this.isReconnect=!1,this.streamRecord=new Map,y()){this.asyncWorker=(e=location.origin+"/mono-static/ws.js",Object(i.__awaiter)(void 0,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(n){return[2,null===(t=b())||void 0===t?void 0:t.then((function(){var t=new SharedWorker(e,{type:"module",name:"ws"});return t.port.start(),t}))]}))})));var n=new BroadcastChannel("ws");this.msg$=new o.a((function(e){n.addEventListener("message",(function(t){e.next(t)}))})).pipe(Object(l.a)())}else this.socket=new a.Socket("wss://ws2.leetcode.cn/socket"),this.socket.connect(),this.socket.onOpen((function(){t.isReconnect?t.streamRecord.forEach((function(e,n){var r=Object(h.b)(t.socket,n);e.next(r)})):t.isReconnect=!0})),this.socket.onError((function(e){return console.error("ERROR",e)}))}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.getPublicNotificationMsg$=function(){var t=["room:lobby",r.NOTIFICATION].join("/");return e.buildState$(t)},e.getPrivateNotificationMsg$=function(t,n){var i=function(e){return"private:name:"+e}(n),a=r.NOTIFICATION,o=Object(h.c)(i,a,t);return e.buildState$(o)},e.getRankingMsg$=function(){var t=r.RANKING,n=Object(h.c)("room:lobby",t);return e.buildState$(n)},e.buildState$=function(t){var n=e.getInstance();if(y()){var r=Object(h.d)(n.asyncWorker,n.msg$,t);return new s.a(r)}if(n.streamRecord.has(t))return n.streamRecord.get(t);var i=Object(h.b)(n.socket,t),a=new s.a(i);return n.streamRecord.set(t,a),a},e}(),S=function(e,t){var n=v.getPrivateNotificationMsg$(e,t),r=v.getPublicNotificationMsg$();return Object(c.b)(n,r).pipe(Object(m.a)((function(e){var t=Object(i.__read)(e,2),n=t[0].msg$,r=t[1].msg$;return Object(u.a)(n,r)})))},T=v.getRankingMsg$},JA3D:function(e,t,n){"use strict";function r(e){return/^[\d.]+$/.test(e.toString())}function i(e,t){return r(e)&&!r(t)?-1:!r(e)&&r(t)?1:r(e)&&r(t)?parseInt(e,10)-parseInt(t,10):function(e,t){return e===t?0:e>t?1:-1}(e,t)}n.d(t,"a",(function(){return i}))},KAEB:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("F9l1"),i=n.n(r),a=n("D57K"),o=new i.a;o.mixin({slug:function(e){return function(){return e.n(e.word,3).join("-")}}(o),user:function(e){return function(){return{username:e.name(),isCurrentUserPremium:e.bool(),isCurrentUserVerified:e.bool(),email:e.email(),phone:e.phone(),profile:{userSlug:e.slug(),realName:e.name(),userAvatar:e.avatar()}}}}(o),question:function(e){return function(){return{questionFrontendId:e.integer({min:1,max:2e3}),title:e.sentence({words:3}),titleSlug:e.slug(),translatedTitle:e.sentence({words:3}),content:e.paragraph(),translatedContent:e.paragraph(),difficulty:e.pickone(["easy","hard","medium"]),isPaidOnly:e.bool()}}}(o),article:function(e){return function(){return{uuid:e.guid(),title:e.sentence({words:3}),slug:e.slug(),upvoted:e.bool(),upvoteCount:e.integer({min:0}),hitCount:e.integer({min:0,max:1e8}),question:e.question(),createdAt:e.date().toISOString(),updatedAt:e.date().toISOString(),author:e.user(),summary:e.paragraph({sentences:2}),content:e.n(e.paragraph,5,{sentences:5}).join("\n\n"),thumbnail:e.avatar(),isMyFavorite:e.bool(),tags:[],topic:{id:e.integer(),commentCount:e.integer({min:0,max:1e7})}}}}(o),comment:function(e){return function(){return{id:e.integer({min:1}),topic:e.communityTopic(),post:{content:e.paragraph()}}}}(o),followUser:function(e){return function(){return{user:e.user(),isMutualFollowing:e.bool()}}}(o),paginatedEdges:function(e){return function(t,n){return{pageInfo:{endCursor:e.hash({length:"10"}),hasNextPage:e.bool()},edges:Array(n).fill(1).map((function(){return{cursor:e.hash({length:"10"}),node:t()}}))}}}(o),communityTopic:function(e){return function(){return{id:e.integer({min:1}),title:e.sentence({words:3}),upvoteCount:e.integer({min:0}),hitCount:e.integer({min:0}),pinned:e.bool(),sunk:e.bool()}}}(o),circleQuestion:function(e){return function(){return Object(a.__assign)(Object(a.__assign)({},e.article()),{__typename:"QAQuestionNode",pinned:e.bool(),pinnedGlobally:e.bool(),sunk:e.bool(),numAnswers:e.integer({min:0,max:1e7}),numPeopleInvolved:e.integer({min:0,max:1e7}),numSubscribed:e.integer({min:0,max:1e7}),subject:e.subject(),subscribed:e.bool(),topic:null})}}(o),circleAnswer:function(e){return function(){return Object(a.__assign)(Object(a.__assign)({},e.article()),{__typename:"QAAnswerNode",question:null,pinned:e.bool(),pinnedGlobally:e.bool(),sunk:e.bool(),parent:e.circleQuestion()})}}(o),circleArticle:function(e){return function(){return Object(a.__assign)(Object(a.__assign)({},e.article()),{question:null})}}(o),subject:function(e){return function(){return{title:e.word({length:2}),slug:e.slug(),id:e.integer({min:1,max:1e4})}}}(o),tag:function(e){return function(){return{isPublic:e.bool(),content:e.n(e.paragraph,3,{sentences:5}).join("\n\n"),tag:{slug:e.slug(),name:e.name,translatedName:e.name}}}}(o),leetbook:function(e){return function(){return{id:e.guid(),title:e.sentence({words:3}),slug:e.slug(),coverImg:e.avatar(),description:e.paragraph({sentences:2}),author:{realName:e.name(),userSlug:e.slug(),title:e.sentence({words:3}),bio:e.sentence({words:8}),avatar:e.avatar()}}}}(o)})},KUse:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("w0un"),i=n("R+ki"),a=n("lqvn");function o(e){return Object(r.a)((function(e){return e.pipe(Object(i.a)(300),Object(a.a)())}),e)}},KW5m:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("D57K"),i=n("jg1C"),a=n("ERkP"),o=n("zCf4"),s=n("xqpu"),c=n("sYqU");function u(e){return function(t){var n=Object(a.useContext)(s.d);return n.isUpdated?n.isSignedIn?Object(i.jsx)(e,Object(r.__assign)({},t),void 0):Object(i.jsx)(o.b,{to:c.cb.signIn()},void 0):null}}},KZa7:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("jg1C"),a=n("ERkP"),o=n.n(a),s=n("GG6d"),c=o.a.forwardRef((function(e,t){return Object(i.jsxs)(s.a,Object(r.__assign)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},e,{children:[Object(i.jsx)("path",{fillRule:"evenodd",d:"M20.995 4.824A3 3 0 0018 2H6l-.176.005A3 3 0 003 5v14l.005.176A3 3 0 006 22h12l.176-.005A3 3 0 0021 19V5l-.005-.176zM6 4h12l.117.007A1 1 0 0119 5v14l-.007.117A1 1 0 0118 20H6l-.117-.007A1 1 0 015 19V5l.007-.117A1 1 0 016 4z",clipRule:"evenodd"},void 0),Object(i.jsx)("path",{fillRule:"evenodd",d:"M10.763 12.827l-1.06-1.06a1 1 0 00-1.415 1.414l1.415 1.414a1.5 1.5 0 002.12 0l3.889-3.888a1 1 0 00-1.415-1.414l-3.534 3.534z",clipRule:"evenodd"},void 0)]}),void 0)}))},KgEZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("L+x5"),i=n("0nDP");function a(e){var t=Object(r.b)(e),n=Object(i.a)(e),a=n?{source:n.promoChannel}:t;return a?Object(r.d)(a):{}}},Klpt:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r,i=n("D57K"),a=n("jg1C"),o=n("f7k3"),s=n("S0yW"),c=(n("DjZ7"),n("ERkP")),u=n("XKjd"),l=n("/Oqt"),m=(n("oosw"),n("fgAA")),d=Object(o.b)({".ant-dropdown-menu-item":(r="15px",void 0===r&&(r="13px"),Object(o.b)({height:"32px",padding:"0 "+r,display:"flex",alignItems:"center",fontSize:"12px","> a":{display:"flex",alignItems:"center",flex:"1 1 auto"},"&:nth-of-type(1), &:nth-last-of-type(1)":{borderRadius:0}}))},"label:globalDropdownStyle;"),p=Object(u.a)({"ant-dropdown-menu":{padding:"15px 0"},".ant-dropdown-menu-item":{"&:hover, &-active":{backgroundColor:m.a.grey(0),a:{color:m.a.grey(9)}}}}),f=function(e){var t=e.overlayClassName,n=void 0===t?"":t,r=Object(i.__rest)(e,["overlayClassName"]);return Object(a.jsx)(l.a,Object(i.__assign)({},r,{overlayClassName:n+" "+p}),void 0)},g=(Object(u.a)({position:"relative",boxShadow:"0 2px 20px "+m.a.grey(9,.1),borderRadius:"4px",overflow:"visible",border:"0 solid transparent",zIndex:1050}),{offset:[0,16]}),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.render=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(o.a,{styles:d},void 0),Object(a.jsx)(f,Object(i.__assign)({align:g},this.props,{children:Object(a.jsx)("a",Object(i.__assign)({className:"ant-dropdown-link"},{children:this.props.children}),void 0)}),void 0)]},void 0)},t.Menu=s.a,t}(c.PureComponent)},LD7h:function(e,t,n){"use strict";n.d(t,"a",(function(){return r.a})),n.d(t,"f",(function(){return r.c})),n.d(t,"j",(function(){return r.d})),n.d(t,"b",(function(){return r.b})),n.d(t,"i",(function(){return l})),n.d(t,"c",(function(){return m.a})),n.d(t,"h",(function(){return d.c})),n.d(t,"k",(function(){return d.d})),n.d(t,"e",(function(){return d.b})),n.d(t,"l",(function(){return d.e})),n.d(t,"d",(function(){return d.a})),n.d(t,"g",(function(){return p.a}));var r=n("tDg9"),i=n("D57K"),a=n("jg1C"),o=n("5Nzd"),s=(n("ERkP"),n("dwj7")),c=n("12aA"),u=function(e){return Object(s.a)((function(){return o.b.getInstance(r.b).fetch().pipe(Object(c.a)(!0))}),!1)?Object(a.jsx)(a.Fragment,{children:e.children},void 0):null};function l(e){return function(t){return Object(a.jsx)(u,{children:Object(a.jsx)(e,Object(i.__assign)({},t),void 0)},void 0)}}var m=n("ZRwv"),d=n("xqpu"),p=n("GM3D")},"LkX/":function(module,exports,__webpack_require__){"use strict";var t;window,t=function(__WEBPACK_EXTERNAL_MODULE__434__){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=539)}([function(e,t,n){var r=a(n(37)),i=a(n(10));function a(e){return e&&e.__esModule?e:{default:e}}var o=n(84),s=n(77);n(102);var c,u,l=n(15),m=l.getGlobal(),d=/\s+/;l.deduplicate=function(e){var t=[];return e.forEach((function(e){-1===t.indexOf(e)&&t.push(e)})),t},l.capFirstLetter=function(e){return e?(e=""+e).slice(0,1).toUpperCase()+e.slice(1):""},l.guid=(c=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},function(){return c()+c()+c()+c()+c()+c()+c()+c()}),l.extend=function(e,t,n){for(var r in t)void 0!==e[r]&&!0!==n||(e[r]=t[r])},l.filterObj=function(e,t){var n={};return l.isString(t)&&(t=t.split(d)),t.forEach((function(t){e.hasOwnProperty(t)&&(n[t]=e[t])})),n},l.copy=function(e,t){return t=t||{},e?(Object.keys(e).forEach((function(n){l.exist(e[n])&&(t[n]=e[n])})),t):t},l.copyWithNull=function(e,t){return t=t||{},e?(Object.keys(e).forEach((function(n){(l.exist(e[n])||l.isnull(e[n]))&&(t[n]=e[n])})),t):t},l.findObjIndexInArray=function(e,t){e=e||[];var n=t.keyPath||"id",r=-1;return e.some((function(e,i){if(s(e,n)===t.value)return r=i,!0})),r},l.findObjInArray=function(e,t){var n=l.findObjIndexInArray(e,t);return-1===n?null:e[n]},l.mergeObjArray=function(){var e=[],t=[].slice.call(arguments,0,-1),n=arguments[arguments.length-1];l.isArray(n)&&(t.push(n),n={});var r,i=n.keyPath=n.keyPath||"id";for(n.sortPath=n.sortPath||i;!e.length&&t.length;)e=(e=t.shift()||[]).slice(0);return t.forEach((function(t){t&&t.forEach((function(t){-1!==(r=l.findObjIndexInArray(e,{keyPath:i,value:s(t,i)}))?e[r]=l.merge({},e[r],t):e.push(t)}))})),n.notSort||(e=l.sortObjArray(e,n)),e},l.cutObjArray=function(e){var t=e.slice(0),n=arguments.length,r=[].slice.call(arguments,1,n-1),i=arguments[n-1];l.isObject(i)||(r.push(i),i={});var a,o=i.keyPath=i.keyPath||"id";return r.forEach((function(e){l.isArray(e)||(e=[e]),e.forEach((function(e){e&&(i.value=s(e,o),-1!==(a=l.findObjIndexInArray(t,i))&&t.splice(a,1))}))})),t},l.sortObjArray=function(e,t){var n=(t=t||{}).sortPath||"id";o.insensitive=!!t.insensitive;var r,i,a,c=!!t.desc;return a=l.isFunction(t.compare)?t.compare:function(e,t){return r=s(e,n),i=s(t,n),c?o(i,r):o(r,i)},e.sort(a)},l.emptyFunc=function(){},l.isEmptyFunc=function(e){return e===l.emptyFunc},l.notEmptyFunc=function(e){return e!==l.emptyFunc},l.splice=function(e,t,n){return[].splice.call(e,t,n)},l.reshape2d=function(e,t){if(Array.isArray(e)){l.verifyParamType("type",t,"number","util::reshape2d");var n=e.length;if(n<=t)return[e];for(var r=Math.ceil(n/t),i=[],a=0;a<r;a++)i.push(e.slice(a*t,(a+1)*t));return i}return e},l.flatten2d=function(e){if(Array.isArray(e)){var t=[];return e.forEach((function(e){t=t.concat(e)})),t}return e},l.dropArrayDuplicates=function(e){if(Array.isArray(e)){for(var t={},n=[];e.length>0;)t[e.shift()]=!0;for(var r in t)!0===t[r]&&n.push(r);return n}return e},l.onError=function(e){throw new function(e){"object"===(void 0===e?"undefined":(0,i.default)(e))?(this.callFunc=e.callFunc||null,this.message=e.message||"UNKNOW ERROR"):this.message=e,this.time=new Date,this.timetag=+this.time}(e)},l.verifyParamPresent=function(e,t,n,r){n=n||"";var i=!1;switch(l.typeOf(t)){case"undefined":case"null":i=!0;break;case"string":""===t&&(i=!0);break;case"StrStrMap":case"object":Object.keys(t).length||(i=!0);break;case"array":t.length?t.some((function(e){if(l.notexist(e))return i=!0,!0})):i=!0}i&&l.onParamAbsent(n+e,r)},l.onParamAbsent=function(e,t){l.onParamError("\u7f3a\u5c11\u53c2\u6570 "+e+", \u8bf7\u786e\u4fdd\u53c2\u6570\u4e0d\u662f \u7a7a\u5b57\u7b26\u4e32\u3001\u7a7a\u5bf9\u8c61\u3001\u7a7a\u6570\u7ec4\u3001null\u6216undefined, \u6216\u6570\u7ec4\u7684\u5185\u5bb9\u4e0d\u662f null/undefined",t)},l.verifyParamAbsent=function(e,t,n,r){n=n||"",void 0!==t&&l.onParamPresent(n+e,r)},l.onParamPresent=function(e,t){l.onParamError("\u591a\u4f59\u7684\u53c2\u6570 "+e,t)},l.verifyParamType=function(e,t,n,r){var i=l.typeOf(t).toLowerCase();l.isArray(n)||(n=[n]);var a=!0;switch(-1===(n=n.map((function(e){return e.toLowerCase()}))).indexOf(i)&&(a=!1),i){case"number":isNaN(t)&&(a=!1);break;case"string":"numeric or numeric string"===n.join("")&&(a=!!/^[0-9]+$/.test(t))}a||l.onParamInvalidType(e,n,"",r)},l.onParamInvalidType=function(e,t,n,r){n=n||"",t=l.isArray(t)?(t=t.map((function(e){return'"'+e+'"'}))).join(", "):'"'+t+'"',l.onParamError('\u53c2\u6570"'+n+e+'"\u7c7b\u578b\u9519\u8bef, \u5408\u6cd5\u7684\u7c7b\u578b\u5305\u62ec: ['+t+"]",r)},l.verifyParamValid=function(e,t,n,r){l.isArray(n)||(n=[n]),-1===n.indexOf(t)&&l.onParamInvalidValue(e,n,r)},l.onParamInvalidValue=function(e,t,n){l.isArray(t)||(t=[t]),t=t.map((function(e){return'"'+e+'"'})),l.isArray(t)&&(t=t.join(", ")),l.onParamError("\u53c2\u6570 "+e+"\u503c\u9519\u8bef, \u5408\u6cd5\u7684\u503c\u5305\u62ec: ["+JSON.stringify(t)+"]",n)},l.verifyParamMin=function(e,t,n,r){t<n&&l.onParamError("\u53c2\u6570"+e+"\u7684\u503c\u4e0d\u80fd\u5c0f\u4e8e"+n,r)},l.verifyParamMax=function(e,t,n,r){t>n&&l.onParamError("\u53c2\u6570"+e+"\u7684\u503c\u4e0d\u80fd\u5927\u4e8e"+n,r)},l.verifyArrayMax=function(e,t,n,r){t.length>n&&l.onParamError("\u53c2\u6570"+e+"\u7684\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e"+n,r)},l.verifyEmail=(u=/^\S+@\S+$/,function(e,t,n){u.test(t)||l.onParamError("\u53c2\u6570"+e+"\u90ae\u7bb1\u683c\u5f0f\u9519\u8bef, \u5408\u6cd5\u683c\u5f0f\u5fc5\u987b\u5305\u542b@\u7b26\u53f7, @\u7b26\u53f7\u524d\u540e\u81f3\u5c11\u8981\u5404\u6709\u4e00\u4e2a\u5b57\u7b26",n)}),l.verifyTel=function(){var e=/^[+\-()\d]+$/;return function(t,n,r){e.test(n)||l.onParamError("\u53c2\u6570"+t+"\u7535\u8bdd\u53f7\u7801\u683c\u5f0f\u9519\u8bef, \u5408\u6cd5\u5b57\u7b26\u5305\u62ec+\u3001-\u3001\u82f1\u6587\u62ec\u53f7\u548c\u6570\u5b57",r)}}(),l.verifyBirth=function(){var e=/^(\d{4})-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/;return function(t,n,r){e.test(n)||l.onParamError("\u53c2\u6570"+t+'\u751f\u65e5\u683c\u5f0f\u9519\u8bef, \u5408\u6cd5\u4e3a"yyyy-MM-dd"',r)}}(),l.onParamError=function(e,t){l.onError({message:e,callFunc:t})},l.verifyOptions=function(e,t,n,r,i){if(e=e||{},t&&(l.isString(t)&&(t=t.split(d)),l.isArray(t))){"boolean"!=typeof n&&(i=n||null,n=!0,r="");var a=n?l.verifyParamPresent:l.verifyParamAbsent;t.forEach((function(t){a.call(l,t,e[t],r,i)}))}return e},l.verifyParamAtLeastPresentOne=function(e,t,n){t&&(l.isString(t)&&(t=t.split(d)),l.isArray(t)&&(t.some((function(t){return l.exist(e[t])}))||l.onParamError("\u4ee5\u4e0b\u53c2\u6570["+t.join(", ")+"]\u81f3\u5c11\u9700\u8981\u4f20\u5165\u4e00\u4e2a",n)))},l.verifyParamPresentJustOne=function(e,t,n){t&&(l.isString(t)&&(t=t.split(d)),l.isArray(t)&&1!==t.reduce((function(t,n){return l.exist(e[n])&&t++,t}),0)&&l.onParamError("\u4ee5\u4e0b\u53c2\u6570["+t.join(", ")+"]\u5fc5\u987b\u4e14\u53ea\u80fd\u4f20\u5165\u4e00\u4e2a",n))},l.verifyBooleanWithDefault=function(e,t,n,r,i){l.undef(n)&&(n=!0),d.test(t)&&(t=t.split(d)),l.isArray(t)?t.forEach((function(t){l.verifyBooleanWithDefault(e,t,n,r,i)})):void 0===e[t]?e[t]=n:l.isBoolean(e[t])||l.onParamInvalidType(t,"boolean",r,i)},l.verifyFileInput=function(e,t){return l.verifyParamPresent("fileInput",e,"",t),l.isString(e)&&((e="undefined"==typeof document?void 0:document.getElementById(e))||l.onParamError("\u627e\u4e0d\u5230\u8981\u4e0a\u4f20\u7684\u6587\u4ef6\u5bf9\u5e94\u7684input, \u8bf7\u68c0\u67e5fileInput id "+e,t)),e.tagName&&"input"===e.tagName.toLowerCase()&&"file"===e.type.toLowerCase()||l.onParamError("\u8bf7\u63d0\u4f9b\u6b63\u786e\u7684 fileInput, \u5fc5\u987b\u4e3a file \u7c7b\u578b\u7684 input \u8282\u70b9 tagname:"+e.tagName+", filetype:"+e.type,t),e},l.verifyFileType=function(e,t){l.verifyParamValid("type",e,l.validFileTypes,t)},l.verifyCallback=function(e,t,n){d.test(t)&&(t=t.split(d)),l.isArray(t)?t.forEach((function(t){l.verifyCallback(e,t,n)})):e[t]?l.isFunction(e[t])||l.onParamInvalidType(t,"function","",n):e[t]=l.emptyFunc},l.verifyFileUploadCallback=function(e,t){l.verifyCallback(e,"uploadprogress uploaddone uploaderror uploadcancel",t)},l.validFileTypes=["image","audio","video","file"],l.validFileExts={image:["bmp","gif","jpg","jpeg","jng","png","webp"],audio:["mp3","wav","aac","wma","wmv","amr","mp2","flac","vorbis","ac3"],video:["mp4","rm","rmvb","wmv","avi","mpg","mpeg","mov"]},l.filterFiles=function(e,t){var n,r,i="file"===(t=t.toLowerCase()),a=[];return[].forEach.call(e,(function(e){i?a.push(e):(n=e.name.slice(e.name.lastIndexOf(".")+1),(r=e.type.split("/"))[0]&&r[1]&&(r[0].toLowerCase()===t||-1!==l.validFileExts[t].indexOf(n))&&a.push(e))})),a};var p,f,g=l.supportFormData=l.notundef(m.FormData);l.getFileName=function(e){return e=l.verifyFileInput(e),g?e.files[0].name:e.value.slice(e.value.lastIndexOf("\\")+1)},l.getFileInfo=(p={ppt:1,pptx:2,pdf:3,doc:6,docx:7},function(e){var t={};if(!(e=l.verifyFileInput(e)).files)return t;var n=e.files[0];return g&&(t.name=n.name,t.size=n.size,t.type=n.name.match(/\.(\w+)$/),t.type=t.type&&t.type[1].toLowerCase(),t.transcodeType=p[t.type]||0),t}),l.sizeText=(f=["B","KB","MB","GB","TB","PB","EB","ZB","BB"],function(e){var t,n=0;do{t=(e=Math.floor(100*e)/100)+f[n],e/=1024,n++}while(e>1);return t}),l.promises2cmds=function(e){return e.map((function(e){return e.cmd}))},l.objs2accounts=function(e){return e.map((function(e){return e.account}))},l.teams2ids=function(e){return e.map((function(e){return e.teamId}))},l.objs2ids=function(e){return e.map((function(e){return e.id}))},l.getMaxUpdateTime=function(e){var t=e.map((function(e){return+e.updateTime}));return Math.max.apply(Math,t)},l.genCheckUniqueFunc=function(e,t){return e=e||"id",t=t||1e3,function(t){this.uniqueSet=this.uniqueSet||{},this.uniqueSet[e]=this.uniqueSet[e]||{};var n=this.uniqueSet[e],r=t[e];return!n[r]&&(n[r]=!0,!0)}},l.fillPropertyWithDefault=function(e,t,n){return!!l.undef(e[t])&&(e[t]=n,!0)},l.throttle=function(e,t,n){var r,i,a,o=null,s=0;n||(n={});var c=function(){s=!1===n.leading?0:(new Date).getTime(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var u=(new Date).getTime();s||!1!==n.leading||(s=u);var l=t-(u-s);return r=this,i=arguments,l<=0||l>t?(clearTimeout(o),o=null,s=u,a=e.apply(r,i),o||(r=i=null)):o||!1===n.trailing||(o=setTimeout(c,l)),a}},l.get=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=t.replace(/\[(\d+)\]/g,".$1").split("."),i=e,a=!0,o=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;if(void 0===(i=Object(i)[l]))return n}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}return i},l.pickAsString=function(e,t){return e?t.filter((function(t){return void 0!==e[t]})).map((function(t){return t+"="+e[t]})).join(","):""},l.omitAsString=function(e,t){if(!e)return"";var n={};return t.forEach((function(e){n[e]=!0})),Object.keys(e).filter((function(e){return!n[e]})).map((function(t){return t+"="+e[t]})).join(",")};var h={session:function(e){var t=(0,r.default)({},e);return["topCustom","localCustom","extra"].forEach((function(e){t[e]&&(t[e]="***")})),t.lastMsg&&(t.lastMsg={idServer:t.lastMsg.idServer,idClient:t.lastMsg.idClient}),t}};l.secureOutput=function(e,t){Array.isArray(t)||(t=[t]);var n=h[e];return 1===(t=t.map((function(e){return n(e)}))).length?t[0]:t};var y={string:function(e,t,n){var r=n.required,i=n.allowEmpty,a=e[t];return!1===r&&void 0===a||"string"==typeof a&&!(!i&&""===a)},number:function(e,t,n){var r=n.required,i=n.min,a=e[t];return!1===r&&void 0===a||"number"==typeof a&&!(a<i)},enum:function(e,t,n){var r=n.required,i=n.values,a=e[t];return!1===r&&void 0===a||i.indexOf(a)>-1},array:function(e,t,n){var r=n.required,i=e[t];return!1===r&&void 0===i||!!Array.isArray(i)}};l.validate=function(e,t,n){var r={};return Object.keys(e).forEach((function(i){var a=e[i].type,o=y[a];o&&!o(t,i,e[i])?l.onError({message:"Error in parameter verification, "+i+" expected value is "+JSON.stringify(e[i]),callFunc:n}):r[i]=t[i]})),r},e.exports=l},,,,,function(e,t,n){n(0);var r=!1;try{"function"==typeof localStorage.setItem&&"function"==typeof localStorage.getItem&&(localStorage.setItem("nim_localstorage_exist_test","1"),r="1"===localStorage.getItem("nim_localstorage_exist_test"),localStorage.removeItem("nim_localstorage_exist_test"))}catch(e){r=!1}var i={nodeEnv:"production",info:{hash:"b3e1a6741dbbf94ac1696624a38f6cbfcc31f97a",shortHash:"b3e1a6741",version:"8.6.0",sdkVersion:"200",sdkHumanVersion:"8.6.0",nrtcVersion:"5.1.0",nrtcSdkVersion:"1",protocolVersion:1},agentVersion:"3.0.1",lbsUrl:"https://lbs.netease.im/lbs/webconf.jsp",roomserver:"roomserver.netease.im",connectTimeout:8e3,xhrTimeout:8e3,socketTimeout:8e3,reconnectionDelay:1600,reconnectionDelayMax:8e3,reconnectionJitter:.01,reconnectiontimer:null,heartbeatInterval:3e4,cmdTimeout:8e3,hbCmdTimeout:5e3,defaultReportUrl:"https://dr.netease.im/1.gif",isWeixinApp:!1,isNodejs:!1,isRN:!1,ipVersion:0,PUSHTOKEN:"",PUSHCONFIG:{},CLIENTTYPE:16,PushPermissionAsked:!1,iosPushConfig:null,androidPushConfig:null,netDetectAddr:"https://roomserver-dev.netease.im/v1/sdk/detect/local",optionDefaultLinkUrl:"",defaultLinkUrl:"weblink.netease.im",ipv6DefaultLinkUrl:"weblink.netease.im",optionIpv6DefaultLinkUrl:"",wxDefaultLinkUrl:"wlnimsc0.netease.im",serverNosConfig:r?{cdnDomain:localStorage.getItem("nim_cdn_domain")||"",objectPrefix:localStorage.getItem("nim_object_prefix")||""}:{},hasLocalStorage:r,getDefaultLinkUrl:function(e){var t,n;1===i.ipVersion?(t=i.optionIpv6DefaultLinkUrl,n=i.ipv6DefaultLinkUrl):(t=i.optionDefaultLinkUrl,n=i.defaultLinkUrl);var r=t||(i.isWeixinApp?i.wxDefaultLinkUrl:n);if(!r)return!1;var a=e?"https":"http",o=e?"443":"80",s=r;return-1===r.indexOf("http")&&(s=a+"://"+s),-1===r.indexOf(":")&&(s=s+":"+o),s}};i.weixinNetcall=i.nrtcNetcall={checkSumUrl:"https://nrtc.netease.im/demo/getChecksum.action",getChannelInfoUrl:"https://nrtc.netease.im/nrtc/getChannelInfos.action"},i.ipProbeAddr={ipv4:"https://detect4.netease.im/test/",ipv6:"https://detect6.netease.im/test/"},i.nrtcWebRTC2={checkSumUrl:"",getChannelInfoUrl:""},i.formatSocketUrl=function(e){var t=e.url,n=e.secure?"https":"http";return-1===t.indexOf("http")?n+"://"+t:t},i.uploadUrl="https://nos.netease.com",i.chunkUploadUrl="https://wanproxy-web.127.net",i.commonMaxSize=104857600,i.chunkSize=4194304,i.chunkMaxSize=4194304e4,i.replaceUrl="https://{bucket}-nosdn.netease.im/{object}",i.downloadHost="nos.netease.com",i.downloadHostList=["nos.netease.com"],i.nosCdnEnable=!0,i.downloadUrl="https://{bucket}-nosdn.netease.im/{object}",i.httpsEnabled=!1,i.threshold=0,i.nosLbsUrls=["http://wanproxy.127.net/lbs","http://wanproxy-bj.127.net/lbs","http://wanproxy-hz.127.net/lbs","http://wanproxy-oversea.127.net/lbs"],i.genUploadUrl=function(e){return i.uploadUrl+"/"+e},i.genChunkUploadUrl=function(e){return i.chunkUploadUrl?i.chunkUploadUrl+"/"+e.bucket+"/"+e.objectName:""},i.genDownloadUrl=function(e,t,n){var r=e.bucket,a=(e.tag,e.expireSec),o=+new Date,s=a?"&survivalTime="+a:"";if(n)return"https://"+n+"/"+t+"?createTime="+o+s;var c=i.replaceUrl+"?createTime="+o+s;return(c=i.genNosProtocolUrl(c)).replace("{bucket}",r).replace("{object}",t)},i.genFileUrl=function(e){var t=e.bucket,n=e.objectName;return i.genNosProtocolUrl(i.replaceUrl).replace("{bucket}",t).replace("{object}",n)},i.genNosProtocolUrl=function(e){return/^http/.test(e)?i.httpsEnabled&&0!==e.indexOf("https://")&&(e=e.replace("http","https")):e=i.httpsEnabled?"https://"+e:"http://"+e,e},e.exports=i},function(e,t){var n=e.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(51)("wks"),i=n(34),a=n(8).Symbol,o="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},,function(e,t,n){t.__esModule=!0;var r=o(n(119)),i=o(n(111)),a="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function o(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===a(r.default)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":a(e)}},function(e,t,n){var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),s.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e,t){var n=i?i+e:e,r=this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var a=0,o=r.length,s=new Array(o);a<o;a++)s[a]=r[a].fn;return s},s.prototype.emit=function(e,t,n,r,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var c,u,l=this._events[s],m=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),m){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,r),!0;case 5:return l.fn.call(l.context,t,n,r,a),!0;case 6:return l.fn.call(l.context,t,n,r,a,o),!0}for(u=1,c=new Array(m-1);u<m;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var d,p=l.length;for(u=0;u<p;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),m){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,r);break;default:if(!c)for(d=1,c=new Array(m-1);d<m;d++)c[d-1]=arguments[d];l[u].fn.apply(l[u].context,c)}}return!0},s.prototype.on=function(e,t,n){var r=new o(t,n||this),a=i?i+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):(this._events[a]=r,this._eventsCount++),this},s.prototype.once=function(e,t,n){var r=new o(t,n||this,!0),a=i?i+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],r]:this._events[a].push(r):(this._events[a]=r,this._eventsCount++),this},s.prototype.removeListener=function(e,t,n,r){var o=i?i+e:e;if(!this._events[o])return this;if(!t)return 0==--this._eventsCount?this._events=new a:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==t||r&&!s.once||n&&s.context!==n||(0==--this._eventsCount?this._events=new a:delete this._events[o]);else{for(var c=0,u=[],l=s.length;c<l;c++)(s[c].fn!==t||r&&!s[c].once||n&&s[c].context!==n)&&u.push(s[c]);u.length?this._events[o]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new a:delete this._events[o]}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new a:delete this._events[t])):(this._events=new a,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=i,s.EventEmitter=s,e.exports=s},function(e,t,n){var r=n(19);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var r=n(12),i=n(69),a=n(55),o=Object.defineProperty;t.f=n(17)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(8),i=n(6),a=n(30),o=n(20),s=n(18),c=function(e,t,n){var u,l,m,d=e&c.F,p=e&c.G,f=e&c.S,g=e&c.P,h=e&c.B,y=e&c.W,b=p?i:i[t]||(i[t]={}),v=b.prototype,S=p?r:f?r[t]:(r[t]||{}).prototype;for(u in p&&(n=t),n)(l=!d&&S&&void 0!==S[u])&&s(b,u)||(m=l?S[u]:n[u],b[u]=p&&"function"!=typeof S[u]?n[u]:h&&l?a(m,r):y&&S[u]==m?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(m):g&&"function"==typeof m?a(Function.call,m):m,g&&((b.virtual||(b.virtual={}))[u]=m,e&c.R&&v&&!v[u]&&o(v,u,m)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t,n){(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.url2origin=t.uniqueID=t.off=t.removeEventListener=t.on=t.addEventListener=t.format=t.regWhiteSpace=t.regBlank=t.emptyFunc=t.f=t.emptyObj=t.o=void 0;var r,i,a,o=(r=n(10))&&r.__esModule?r:{default:r};function s(){return"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}}function c(e,t){t=t||2;for(var n=""+e;n.length<t;)n="0"+n;return n}function u(e){return""+e.getFullYear()}function l(e){return c(e.getMonth()+1)}function m(e){return c(e.getDate())}function d(e){return c(e.getHours())}function p(e){return c(e.getMinutes())}function f(e){return c(e.getSeconds())}function g(e){return c(e.getMilliseconds(),3)}function h(e){return Object.prototype.toString.call(e).slice(8,-1)}function y(e){return h(e).toLowerCase()}function b(e){return"string"===y(e)}function v(e){return"number"===y(e)}function S(e){return"array"===y(e)}function T(e){return"function"===y(e)}function M(e){return"date"===y(e)}function C(e){return null===e}function k(e){return null!==e}function A(e){return void 0===e}function I(e){return void 0!==e}function P(e){return I(e)&&k(e)}function x(e){return A(e)||C(e)}function O(e){return P(e)&&"object"===y(e)}t.getGlobal=s,t.detectCSSFeature=function(e){var t=!1,n="Webkit Moz ms O".split(" ");if("undefined"!=typeof document){var r=document.createElement("div"),i=null;if(e=e.toLowerCase(),void 0!==r.style[e]&&(t=!0),!1===t){i=e.charAt(0).toUpperCase()+e.substr(1);for(var a=0;a<n.length;a++)if(void 0!==r.style[n[a]+i]){t=!0;break}}return t}console.log("error:fn:detectCSSFeature document is undefined")},t.fix=c,t.getYearStr=u,t.getMonthStr=l,t.getDayStr=m,t.getHourStr=d,t.getMinuteStr=p,t.getSecondStr=f,t.getMillisecondStr=g,t.dateFromDateTimeLocal=function(e){return e=""+e,new Date(e.replace(/-/g,"/").replace("T"," "))},t.getClass=h,t.typeOf=y,t.isString=b,t.isNumber=v,t.isInt=function(e){return v(e)&&e%1==0},t.isBoolean=function(e){return"boolean"===y(e)},t.isArray=S,t.isFunction=T,t.isDate=M,t.isRegExp=function(e){return"regexp"===y(e)},t.isError=function(e){return"error"===y(e)},t.isnull=C,t.notnull=k,t.undef=A,t.notundef=I,t.exist=P,t.notexist=x,t.isObject=O,t.isEmpty=function(e){return x(e)||(b(e)||S(e))&&0===e.length},t.containsNode=function(e,t){if(e===t)return!0;for(;t.parentNode;){if(t.parentNode===e)return!0;t=t.parentNode}return!1},t.calcHeight=function(e){var t=e.parentNode||("undefined"==typeof document?null:document.body);if(!t)return 0;(e=e.cloneNode(!0)).style.display="block",e.style.opacity=0,e.style.height="auto",t.appendChild(e);var n=e.offsetHeight;return t.removeChild(e),n},t.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.dataset=function(e,t,n){if(!P(n))return e.getAttribute("data-"+t);e.setAttribute("data-"+t,n)},t.target=function(e){return e.target||e.srcElement},t.createIframe=function(e){if("undefined"!=typeof document){var t;if((e=e||{}).name)try{(t=document.createElement('<iframe name="'+e.name+'"></iframe>')).frameBorder=0}catch(n){(t=document.createElement("iframe")).name=e.name}else t=document.createElement("iframe");e.visible||(t.style.display="none"),T(e.onload)&&E(t,"load",(function n(r){t.src&&(e.multi||R(t,"load",n),e.onload(r))})),(e.parent||document.body).appendChild(t);var n=e.src||"about:blank";return setTimeout((function(){t.src=n}),0),t}},t.html2node=function(e){if("undefined"!=typeof document){var t=document.createElement("div");t.innerHTML=e;var n=[],r=void 0,i=void 0;if(t.children)for(r=0,i=t.children.length;r<i;r++)n.push(t.children[r]);else for(r=0,i=t.childNodes.length;r<i;r++){var a=t.childNodes[r];1===a.nodeType&&n.push(a)}return n.length>1?t:n[0]}},t.scrollTop=function(e){return"undefined"!=typeof document&&P(e)&&(document.documentElement.scrollTop=document.body.scrollTop=e),window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},t.forOwn=N,t.mixin=L,t.isJSON=D,t.parseJSON=function e(t){try{D(t)&&(t=JSON.parse(t)),O(t)&&N(t,(function(n,r){switch(y(r)){case"string":case"object":t[n]=e(r)}}))}catch(e){console.log("error:",e)}return t},t.simpleClone=function(e){var t=[],n=JSON.stringify(e,(function(e,n){if("object"===(void 0===n?"undefined":(0,o.default)(n))&&null!==n){if(-1!==t.indexOf(n))return;t.push(n)}return n}));return JSON.parse(n)},t.merge=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.forEach((function(t){L(e,t)})),e},t.fillUndef=function(e,t){return N(t,(function(t,n){A(e[t])&&(e[t]=n)})),e},t.checkWithDefault=function(e,t,n){var r=e[t]||e[t.toLowerCase()];return x(r)&&(r=n,e[t]=r),r},t.fetch=function(e,t){return N(e,(function(n,r){P(t[n])&&(e[n]=t[n])})),e},t.string2object=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n={};return e.split(t).forEach((function(e){var t=e.split("="),r=t.shift();r&&(n[decodeURIComponent(r)]=decodeURIComponent(t.join("=")))})),n},t.object2string=B,t.genUrlSep=function(e){return e.indexOf("?")<0?"?":"&"},t.object2query=function(e){return B(e,"&",!0)},t.isFileInput=F,t.getKeys=function(e,t){var n=Object.keys(e);return t&&n.sort((function(t,n){var r=F(e[t]);return r===F(e[n])?0:r?1:-1})),n},t._get=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=t.replace(/\[(\d+)\]/g,".$1").split("."),i=e,a=!0,o=!1,s=void 0;try{for(var c,u=r[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var l=c.value;if(void 0===(i=Object(i)[l]))return n}}catch(e){o=!0,s=e}finally{try{!a&&u.return&&u.return()}finally{if(o)throw s}}return i},t.o={},t.emptyObj={},t.f=function(){},t.emptyFunc=function(){},t.regBlank=/\s+/gi,t.regWhiteSpace=/\s+/gi,t.format=(i=/yyyy|MM|dd|hh|mm|ss|SSS/g,a={yyyy:u,MM:l,dd:m,hh:d,mm:p,ss:f,SSS:g},function(e,t){return e=new Date(e),isNaN(+e)?"invalid date":(t=t||"yyyy-MM-dd").replace(i,(function(t){return a[t](e)}))});var _,w=t.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},E=t.on=w,j=t.removeEventListener=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},R=t.off=j;function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments[2];for(var r in e)e.hasOwnProperty(r)&&t.call(n,r,e[r])}function L(e,t){N(t,(function(t,n){e[t]=n}))}function D(e){return b(e)&&0===e.indexOf("{")&&e.lastIndexOf("}")===e.length-1}function B(e,t,n){if(!e)return"";var r=[];return N(e,(function(e,t){T(t)||(M(t)?t=t.getTime():S(t)?t=t.join(","):O(t)&&(t=JSON.stringify(t)),n&&(t=encodeURIComponent(t)),r.push(encodeURIComponent(e)+"="+t))})),r.join(t||",")}function F(e){var t=s();return e.tagName&&"INPUT"===e.tagName.toUpperCase()||t.Blob&&e instanceof t.Blob}t.uniqueID=(_=0,function(){return""+_++}),t.url2origin=function(){var e=/^([\w]+?:\/\/.*?(?=\/|$))/i;return function(t){return e.test(t||"")?RegExp.$1.toLowerCase():""}}()}).call(this,n(31))},function(e,t,n){(function(t){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=function(){var e="object"===(void 0===t?"undefined":(0,i.default)(t))?t:window,n=Math.pow(2,53)-1,r=/\bOpera/,a=Object.prototype,o=a.hasOwnProperty,s=a.toString;function c(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function u(e){return e=f(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:c(e)}function l(e,t){for(var n in e)o.call(e,n)&&t(e[n],n,e)}function m(e){return null==e?c(e):s.call(e).slice(8,-1)}function d(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function p(e,t){var r=null;return function(e,t){var r=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&i<=n)for(;++r<i;)t(e[r],r);else l(e,t)}(e,(function(n,i){r=t(r,n,i,e)})),r}function f(e){return String(e).replace(/^ +| +$/g,"")}return function t(n){var a=e,o=n&&"object"===(void 0===n?"undefined":(0,i.default)(n))&&"String"!=m(n);o&&(a=n,n=null);var c=a.navigator||{},g=c.userAgent||"";n||(n=g);var h,y,b,v,S,T=o?!!c.likeChrome:/\bChrome\b/.test(n)&&!/internal|\n/i.test(s.toString()),M=o?"Object":"ScriptBridgingProxyObject",C=o?"Object":"Environment",k=o&&a.java?"JavaPackage":m(a.java),A=o?"Object":"RuntimeObject",I=/\bJava/.test(k)&&a.java,P=I&&m(a.environment)==C,x=I?"a":"\u03b1",O=I?"b":"\u03b2",_=a.document||{},w=a.operamini||a.opera,E=r.test(E=o&&w?w["[[Class]]"]:m(w))?E:w=null,j=n,R=[],N=null,L=n==g,D=L&&w&&"function"==typeof w.version&&w.version(),B=p([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,t){return e||RegExp("\\b"+(t.pattern||d(t))+"\\b","i").exec(n)&&(t.label||t)})),F=p(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Waterfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],(function(e,t){return e||RegExp("\\b"+(t.pattern||d(t))+"\\b","i").exec(n)&&(t.label||t)})),U=W([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),G=p({Apple:{iPad:1,iPhone:1,iPod:1},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1}},(function(e,t,r){return e||(t[U]||t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(U)]||RegExp("\\b"+d(r)+"(?:\\b|\\w*\\d)","i").exec(n))&&r})),H=p(["Windows Phone","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],(function(e,t){var r=t.pattern||d(t);return!e&&(e=RegExp("\\b"+r+"(?:/[\\d.]+|[ \\w.]*)","i").exec(n))&&(e=function(e,t,n){var r={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(r=r[/[\d.]+$/.exec(e)])&&(e="Windows "+r),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),u(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,r,t.label||t)),e}));function W(e){return p(e,(function(e,t){var r=t.pattern||d(t);return!e&&(e=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(n)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(n)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(n))&&((e=String(t.label&&!RegExp(r,"i").test(t.label)?t.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),t=t.label||t,e=u(e[0].replace(RegExp(r,"i"),t).replace(RegExp("; *(?:"+t+"[_-])?","i")," ").replace(RegExp("("+t+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}if(B&&(B=[B]),G&&!U&&(U=W([G])),(h=/\bGoogle TV\b/.exec(U))&&(U=h[0]),/\bSimulator\b/i.test(n)&&(U=(U?U+" ":"")+"Simulator"),"Opera Mini"==F&&/\bOPiOS\b/.test(n)&&R.push("running in Turbo/Uncompressed mode"),"IE"==F&&/\blike iPhone OS\b/.test(n)?(G=(h=t(n.replace(/like iPhone OS/,""))).manufacturer,U=h.product):/^iP/.test(U)?(F||(F="Safari"),H="iOS"+((h=/ OS ([\d_]+)/i.exec(n))?" "+h[1].replace(/_/g,"."):"")):"Konqueror"!=F||/buntu/i.test(H)?G&&"Google"!=G&&(/Chrome/.test(F)&&!/\bMobile Safari\b/i.test(n)||/\bVita\b/.test(U))||/\bAndroid\b/.test(H)&&/^Chrome/.test(F)&&/\bVersion\//i.test(n)?(F="Android Browser",H=/\bAndroid\b/.test(H)?H:"Android"):"Silk"==F?(/\bMobi/i.test(n)||(H="Android",R.unshift("desktop mode")),/Accelerated *= *true/i.test(n)&&R.unshift("accelerated")):"PaleMoon"==F&&(h=/\bFirefox\/([\d.]+)\b/.exec(n))?R.push("identifying as Firefox "+h[1]):"Firefox"==F&&(h=/\b(Mobile|Tablet|TV)\b/i.exec(n))?(H||(H="Firefox OS"),U||(U=h[1])):!F||(h=!/\bMinefield\b/i.test(n)&&/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!U&&/[\/,]|^[^(]+?\)/.test(n.slice(n.indexOf(h+"/")+8))&&(F=null),(h=U||G||H)&&(U||G||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(H))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(H)?H:h)+" Browser")):"Electron"==F&&(h=(/\bChrome\/([\d.]+)\b/.exec(n)||0)[1])&&R.push("Chromium "+h):H="Kubuntu",D||(D=p(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$))","Version","HeadlessChrome",d(F),"(?:Firefox|Minefield|NetFront)"],(function(e,t){return e||(RegExp(t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(n)||0)[1]||null}))),(h=("iCab"==B&&parseFloat(D)>3?"WebKit":/\bOpera\b/.test(F)&&(/\bOPR\b/.test(n)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(n)&&!/^(?:Trident|EdgeHTML)$/.test(B)&&"WebKit"||!B&&/\bMSIE\b/i.test(n)&&("Mac OS"==H?"Tasman":"Trident")||"WebKit"==B&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")&&(B=[h]),"IE"==F&&(h=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(n)||0)[1])?(F+=" Mobile",H="Windows Phone "+(/\+$/.test(h)?h:h+".x"),R.unshift("desktop mode")):/\bWPDesktop\b/i.test(n)?(F="IE Mobile",H="Windows Phone 8.x",R.unshift("desktop mode"),D||(D=(/\brv:([\d.]+)/.exec(n)||0)[1])):"IE"!=F&&"Trident"==B&&(h=/\brv:([\d.]+)/.exec(n))&&(F&&R.push("identifying as "+F+(D?" "+D:"")),F="IE",D=h[1]),L){if(v="global",S=null!=(b=a)?(0,i.default)(b[v]):"number",/^(?:boolean|number|string|undefined)$/.test(S)||"object"==S&&!b[v])m(h=a.runtime)==M?(F="Adobe AIR",H=h.flash.system.Capabilities.os):m(h=a.phantom)==A?(F="PhantomJS",D=(h=h.version||null)&&h.major+"."+h.minor+"."+h.patch):"number"==typeof _.documentMode&&(h=/\bTrident\/(\d+)/i.exec(n))?(D=[D,_.documentMode],(h=+h[1]+4)!=D[1]&&(R.push("IE "+D[1]+" mode"),B&&(B[1]=""),D[1]=h),D="IE"==F?String(D[1].toFixed(1)):D[0]):"number"==typeof _.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(R.push("masking as "+F+" "+D),F="IE",D="11.0",B=["Trident"],H="Windows");else if(I&&(j=(h=I.lang.System).getProperty("os.arch"),H=H||h.getProperty("os.name")+" "+h.getProperty("os.version")),P){try{D=a.require("ringo/engine").version.join("."),F="RingoJS"}catch(e){(h=a.system)&&h.global.system==a.system&&(F="Narwhal",H||(H=h[0].os||null))}F||(F="Rhino")}else"object"===(0,i.default)(a.process)&&!a.process.browser&&(h=a.process)&&("object"===(0,i.default)(h.versions)&&("string"==typeof h.versions.electron?(R.push("Node "+h.versions.node),F="Electron",D=h.versions.electron):"string"==typeof h.versions.nw&&(R.push("Chromium "+D,"Node "+h.versions.node),F="NW.js",D=h.versions.nw)),F||(F="Node.js",j=h.arch,H=h.platform,D=(D=/[\d.]+/.exec(h.version))?D[0]:null));H=H&&u(H)}if(D&&(h=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(n+";"+(L&&c.appMinorVersion))||/\bMinefield\b/i.test(n)&&"a")&&(N=/b/i.test(h)?"beta":"alpha",D=D.replace(RegExp(h+"\\+?$"),"")+("beta"==N?O:x)+(/\d+\+?/.exec(h)||"")),"Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS)\b/.test(H))F="Firefox Mobile";else if("Maxthon"==F&&D)D=D.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(U))"Xbox 360"==U&&(H=null),"Xbox 360"==U&&/\bIEMobile\b/.test(n)&&R.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(F)&&(!F||U||/Browser|Mobi/.test(F))||"Windows CE"!=H&&!/Mobi/i.test(n))if("IE"==F&&L)try{null===a.external&&R.unshift("platform preview")}catch(e){R.unshift("embedded")}else(/\bBlackBerry\b/.test(U)||/\bBB10\b/.test(n))&&(h=(RegExp(U.replace(/ +/g," *")+"/([.\\d]+)","i").exec(n)||0)[1]||D)?(H=((h=[h,/BB10/.test(n)])[1]?(U=null,G="BlackBerry"):"Device Software")+" "+h[0],D=null):this!=l&&"Wii"!=U&&(L&&w||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(n)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(H)||"IE"==F&&(H&&!/^Win/.test(H)&&D>5.5||/\bWindows XP\b/.test(H)&&D>8||8==D&&!/\bTrident\b/.test(n)))&&!r.test(h=t.call(l,n.replace(r,"")+";"))&&h.name&&(h="ing as "+h.name+((h=h.version)?" "+h:""),r.test(F)?(/\bIE\b/.test(h)&&"Mac OS"==H&&(H=null),h="identify"+h):(h="mask"+h,F=E?u(E.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(h)&&(H=null),L||(D=null)),B=["Presto"],R.push(h));else F+=" Mobile";(h=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(n)||0)[1])&&(h=[parseFloat(h.replace(/\.(\d)$/,".0$1")),h],"Safari"==F&&"+"==h[1].slice(-1)?(F="WebKit Nightly",N="alpha",D=h[1].slice(0,-1)):D!=h[1]&&D!=(h[2]=(/\bSafari\/([\d.]+\+?)/i.exec(n)||0)[1])||(D=null),h[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(n)||0)[1],537.36==h[0]&&537.36==h[2]&&parseFloat(h[1])>=28&&"WebKit"==B&&(B=["Blink"]),L&&(T||h[1])?(B&&(B[1]="like Chrome"),h=h[1]||((h=h[0])<530?1:h<532?2:h<532.05?3:h<533?4:h<534.03?5:h<534.07?6:h<534.1?7:h<534.13?8:h<534.16?9:h<534.24?10:h<534.3?11:h<535.01?12:h<535.02?"13+":h<535.07?15:h<535.11?16:h<535.19?17:h<536.05?18:h<536.1?19:h<537.01?20:h<537.11?"21+":h<537.13?23:h<537.18?24:h<537.24?25:h<537.36?26:"Blink"!=B?"27":"28")):(B&&(B[1]="like Safari"),h=(h=h[0])<400?1:h<500?2:h<526?3:h<533?4:h<534?"4+":h<535?5:h<537?6:h<538?7:h<601?8:"8"),B&&(B[1]+=" "+(h+="number"==typeof h?".x":/[.+]/.test(h)?"":"+")),"Safari"==F&&(!D||parseInt(D)>45)&&(D=h)),"Opera"==F&&(h=/\bzbov|zvav$/.exec(H))?(F+=" ",R.unshift("desktop mode"),"zvav"==h?(F+="Mini",D=null):F+="Mobile",H=H.replace(RegExp(" *"+h+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(B&&B[1])&&(R.unshift("desktop mode"),F="Chrome Mobile",D=null,/\bOS X\b/.test(H)?(G="Apple",H="iOS 4.3+"):H=null),D&&0==D.indexOf(h=/[\d.]+$/.exec(H))&&n.indexOf("/"+h+"-")>-1&&(H=f(H.replace(h,""))),B&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(H)&&/\bSafari\b/.test(B[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|Web)/.test(F)&&B[1])&&(h=B[B.length-1])&&R.push(h),R.length&&(R=["("+R.join("; ")+")"]),G&&U&&U.indexOf(G)<0&&R.push("on "+G),U&&R.push((/^on /.test(R[R.length-1])?"":"on ")+U),H&&(h=/ ([\d.+]+)$/.exec(H),y=h&&"/"==H.charAt(H.length-h[0].length-1),H={architecture:32,family:h&&!y?H.replace(h[0],""):H,version:h?h[1]:null,toString:function(){var e=this.version;return this.family+(e&&!y?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(h=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(j))&&!/\bi686\b/i.test(j)?(H&&(H.architecture=64,H.family=H.family.replace(RegExp(" *"+h),"")),F&&(/\bWOW64\b/i.test(n)||L&&/\w(?:86|32)$/.test(c.cpuClass||c.platform)&&!/\bWin64; x64\b/i.test(n))&&R.unshift("32-bit")):H&&/^OS X/.test(H.family)&&"Chrome"==F&&parseFloat(D)>=39&&(H.architecture=64),n||(n=null);var z={};return z.description=n,z.layout=B&&B[0],z.manufacturer=G,z.name=F,z.prerelease=N,z.product=U,z.ua=n,z.version=F&&D,z.os=H||{architecture:null,family:null,version:null,toString:function(){return"null"}},z.parse=t,z.toString=function(){return this.description||""},z.version&&R.unshift(D),z.name&&R.unshift(F),H&&F&&(H!=String(H).split(" ")[0]||H!=F.split(" ")[0]&&!U)&&R.push(U?"("+H+")":"on "+H),R.length&&(z.description=R.join(" ")),z}()}();e.exports=a}).call(this,n(31))},function(e,t,n){e.exports=!n(24)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(13),i=n(28);e.exports=n(17)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(67),i=n(54);e.exports=function(e){return r(i(e))}},,,function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(56),i=n(62),a=n(5),o=n(0),s=o.undef,c=n(207),u=n(96),l=n(100);function m(e){var t=this;o.verifyOptions(e,"appKey account token","protocol::IMProtocol"),o.verifyCallback(e,["onconnect","onerror","onwillreconnect","ondisconnect","onloginportschange","onmyinfo","onblacklist","onmutelist","onfriends","onusers","onrobots","onteams","onSuperTeams","onsessions","onSessionsWithMoreRoaming","onStickTopSessions","onroamingmsgs","onofflinemsgs","onofflinefiltermsgs","onroamingsysmsgs","onofflinesysmsgs","onofflinefiltersysmsgs","onofflinecustomsysmsgs","onofflinefiltercustomsysmsgs","onbroadcastmsg","onbroadcastmsgs","onsysmsgunread","onsyncdone","onteammembers","onsyncteammembersdone","onmsg","onsysmsg","oncustomsysmsg","onupdatemyinfo","onupdateuser","onSyncUpdateServerSession","onUpdateSuperTeamMember","onCreateSuperTeam","onUpdateSuperTeam","onAddSuperTeamMembers","onRemoveSuperTeamMembers","onUpdateSuperTeamManagers","onDismissSuperTeam","onTransferSuperTeam","onUpdateSuperTeamMembersMute","onupdateteammember","onCreateTeam","onUpdateTeam","onAddTeamMembers","onRemoveTeamMembers","onUpdateTeamManagers","onDismissTeam","onTransferTeam","onUpdateTeamMembersMute","onTeamMsgReceipt","onupdatesession","onQuickComment","onDeleteQuickComment","onPinMsgChange","onupdatesysmsgunread","onupdatesysmsg","onsynccreateteam","onsyncsupercreateteam","onsyncmarkinblacklist","onsyncmarkinmutelist","onsyncfriendaction","shouldIgnoreNotification","shouldIgnoreMsg","onDeleteMsgSelf","shouldCountNotifyUnread","onPushNotificationMultiportConfig","onPushNotificationMultiportConfigUpdate","onpushevents"],"protocol::IMProtocol"),t.db=e.api.db=new r({logger:e.logger,notifyError:function(e){t.notifyError&&t.notifyError("DB error",e)}}),i.call(t,e)}var d=i.fn,p=m.fn=m.prototype=Object.create(d);p.init=function(){d.init.call(this),u.IM.setProtocol(this),this.parser=u.IM,this.sendCmd.bind(this),this.socketUrls=[],this.syncing=!0,this.hasSynced=!1,this.hasSyncedTeamMembers=!1,this.syncPromiseArray=[],this.syncResult={},this.syncTeamMembersPromiseArray=[],this.syncSuperTeamMembersPromiseArray=[],this.syncTeamMembersResult={},this.timetags={},this.superTeamMembersData={},this.saveAck={},this.sysMsgUnread=l.completeUnread({}),this.resetUnsettledMsgs(),this.resetUnsettledSysMsgs(),this.msgPromise=Promise.resolve(),this.sysMsgPromise=Promise.resolve(),this.msgDelayArr=[],this.msgDelayTimer=null,this.msgStatEnable=!1,this.nosCdnHostTimer=null,this.relativeServerTime=0,this.sessionSet={},this.msgReceiptTasks={},this.userSet={},this.pushNotificationMultiportConfig=c.getDefaultConfig()},p.reset=function(){d.reset.call(this);var e=this.options;this.db.reset(e.db),s(e.lbsUrl)&&(e.lbsUrl=a.lbsUrl),s(e.thumbnailToStatic)&&(e.thumbnailToStatic=!0),e.autoconnect&&(this.autoconnect=!0),this.resetAutoMarkRead()},p.resetAutoMarkRead=function(){var e=this.options;o.verifyBooleanWithDefault(e,"autoMarkRead",!0,"","protocol::resetAutoMarkRead")},p.resetUnsettledMsgs=function(){this.unhandledMsgs=[],this.unupdatedMsgs=[]},p.resetUnsettledSysMsgs=function(){this.unhandledSysMsgs=[],this.unupdatedSysMsgs=[]},p.packetFromSync=function(e){return!e.obj||!!e.obj.sync},e.exports=m,n(493),n(492),n(491),n(490),n(488),n(487),n(486),n(485),n(484),n(483),n(482),n(481),n(480),n(479),n(478),n(477),n(476),n(475),n(474),n(473)},function(e,t){e.exports={}},function(e,t,n){var r=n(46),i=n(25),a=n(5),o=n(472),s=n(96).IM;function c(e){return this.subType="im",this.nosScene=e.nosScene||"im",this.nosSurvivalTime=e.nosSurvivalTime,e.Protocol=i,e.Message=o,e.constructor=c,this.init(e)}c.Protocol=i,c.parser=s,c.use=r.use,c.getInstance=r.getInstance,c.rmAllInstances=r.rmAllInstances,c.genInstanceName=function(e){return"NIM-account-"+e.account};var u=c.fn=c.prototype=Object.create(r.prototype);c.info=u.info=a.info,e.exports=c,n(461),n(460),n(459),n(458),n(457),n(456),n(455),n(454),n(453),n(452),n(451),n(450),n(449),n(448),n(447),n(446),n(445),n(444),n(443),n(440)},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.message=e||n.message||"","object"===(void 0===t?"undefined":(0,i.default)(t))?(this.event=t,this.code="Other_Error"):void 0!==t&&(this.code=t),this.timetag=+new Date,void 0!==n&&(this.event=n),this.event&&(this.callFunc=this.event.callFunc||null,delete this.event.callFunc)}a.prototype=Object.create(Error.prototype),a.prototype.name="NIMError";var o={201:"\u5ba2\u6237\u7aef\u7248\u672c\u4e0d\u5bf9, \u9700\u5347\u7ea7sdk",302:"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef, \u8bf7\u68c0\u67e5appKey\u548ctoken\u662f\u5426\u6709\u6548, account\u548ctoken\u662f\u5426\u5339\u914d",403:"\u975e\u6cd5\u64cd\u4f5c\u6216\u6ca1\u6709\u6743\u9650",404:"\u5bf9\u8c61(\u7528\u6237/\u7fa4/\u804a\u5929\u5ba4)\u4e0d\u5b58\u5728",405:"\u53c2\u6570\u957f\u5ea6\u8fc7\u957f",408:"\u5ba2\u6237\u7aef\u8bf7\u6c42\u8d85\u65f6",414:"\u53c2\u6570\u9519\u8bef",415:"\u670d\u52a1\u4e0d\u53ef\u7528/\u6ca1\u6709\u804a\u5929\u5ba4\u670d\u52a1\u5668\u53ef\u5206\u914d",416:"\u9891\u7387\u63a7\u5236",417:"\u91cd\u590d\u64cd\u4f5c",422:"\u5e10\u53f7\u88ab\u7981\u7528",500:"\u670d\u52a1\u5668\u5185\u90e8\u9519\u8bef",501:"\u6570\u636e\u5e93\u64cd\u4f5c\u5931\u8d25",503:"\u670d\u52a1\u5668\u7e41\u5fd9",508:"\u5220\u9664\u6709\u6548\u671f\u8fc7\u4e86",509:"\u5df2\u5931\u6548",7101:"\u88ab\u62c9\u9ed1",700:"\u6279\u91cf\u64cd\u4f5c\u90e8\u5206\u5931\u8d25",801:"\u7fa4\u4eba\u6570\u8fbe\u5230\u4e0a\u9650",802:"\u6ca1\u6709\u6743\u9650",803:"\u7fa4\u4e0d\u5b58\u5728\u6216\u672a\u53d1\u751f\u53d8\u5316",804:"\u7528\u6237\u4e0d\u5728\u7fa4\u91cc\u9762",805:"\u7fa4\u7c7b\u578b\u4e0d\u5339\u914d",806:"\u521b\u5efa\u7fa4\u6570\u91cf\u8fbe\u5230\u9650\u5236",807:"\u7fa4\u6210\u5458\u72b6\u6001\u4e0d\u5bf9",809:"\u5df2\u7ecf\u5728\u7fa4\u91cc",811:"\u5f3a\u63a8\u5217\u8868\u4e2d\u5e10\u53f7\u6570\u91cf\u8d85\u9650",812:"\u7fa4\u88ab\u7981\u8a00",813:"\u56e0\u7fa4\u6570\u91cf\u9650\u5236\uff0c\u90e8\u5206\u62c9\u4eba\u6210\u529f",814:"\u7981\u6b62\u4f7f\u7528\u7fa4\u7ec4\u6d88\u606f\u5df2\u8bfb\u670d\u52a1",815:"\u7fa4\u7ba1\u7406\u5458\u4eba\u6570\u4e0a\u9650",816:"\u6279\u91cf\u64cd\u4f5c\u90e8\u5206\u5931\u8d25",997:"\u534f\u8bae\u5df2\u5931\u6548",998:"\u89e3\u5305\u9519\u8bef",999:"\u6253\u5305\u9519\u8bef",9102:"\u901a\u9053\u5931\u6548",9103:"\u5df2\u7ecf\u5728\u5176\u4ed6\u7aef\u63a5\u542c/\u62d2\u7edd\u8fc7\u8fd9\u901a\u7535\u8bdd",11001:"\u5bf9\u65b9\u79bb\u7ebf, \u901a\u8bdd\u4e0d\u53ef\u9001\u8fbe",13002:"\u804a\u5929\u5ba4\u72b6\u6001\u5f02\u5e38",13003:"\u5728\u9ed1\u540d\u5355\u4e2d",13004:"\u5728\u7981\u8a00\u540d\u5355\u4e2d",13006:"\u804a\u5929\u5ba4\u5904\u4e8e\u6574\u4f53\u7981\u8a00\u72b6\u6001,\u53ea\u6709\u7ba1\u7406\u5458\u80fd\u53d1\u8a00",Connect_Failed:"\u65e0\u6cd5\u5efa\u7acb\u8fde\u63a5, \u8bf7\u786e\u4fdd\u80fd ping/telnet \u5230\u4e91\u4fe1\u670d\u52a1\u5668; \u5982\u679c\u662fIE8/9, \u8bf7\u786e\u4fdd\u9879\u76ee\u90e8\u7f72\u5728 HTTPS \u73af\u5883\u4e0b",Error_Internet_Disconnected:"\u7f51\u65ad\u4e86",Error_Connection_is_not_Established:"\u8fde\u63a5\u672a\u5efa\u7acb",Error_Connection_Socket_State_not_Match:"socket\u72b6\u6001\u4e0d\u5bf9",Error_Timeout:"\u8d85\u65f6",Param_Error:"\u53c2\u6570\u9519\u8bef",No_File_Selected:"\u8bf7\u9009\u62e9\u6587\u4ef6",Wrong_File_Type:"\u6587\u4ef6\u7c7b\u578b\u9519\u8bef",File_Too_Large:"\u6587\u4ef6\u8fc7\u5927",Cross_Origin_Iframe:"\u4e0d\u80fd\u83b7\u53d6\u8de8\u57dfIframe\u7684\u5185\u5bb9",Not_Support:"\u4e0d\u652f\u6301",NO_DB:"\u65e0\u6570\u636e\u5e93",DB:"\u6570\u636e\u5e93\u9519\u8bef",Still_In_Team:"\u8fd8\u5728\u7fa4\u91cc",Session_Exist:"\u4f1a\u8bdd\u5df2\u5b58\u5728",Session_Not_Exist:"\u4f1a\u8bdd\u4e0d\u5b58\u5728",Error_Unknown:"\u672a\u77e5\u9519\u8bef",Operation_Canceled:"\u64cd\u4f5c\u53d6\u6d88"};[200,406,808,810].forEach((function(e){o[e]=null})),a.genError=function(e){var t=o[e];return void 0===t&&(t="\u64cd\u4f5c\u5931\u8d25"),null===t?null:new a(t,e)},a.multiInstance=function(e){return new a("\u4e0d\u5141\u8bb8\u521d\u59cb\u5316\u591a\u4e2a\u5b9e\u4f8b","Not_Allow_Multi_Instance",e)},a.newNetworkError=function(e){var t="Error_Internet_Disconnected";return new a(o[t],t,e)},a.newConnectError=function(e){var t="Connect_Failed";return new a(o[t]||null,t,e)},a.newConnectionError=function(e){var t="Error_Connection_is_not_Established";return new a(o[t],t,e)},a.newSocketStateError=function(e){var t="Error_Connection_Socket_State_not_Match";return new a(o[t],t,e)},a.newTimeoutError=function(e){var t="Error_Timeout";return new a(o[t],t,e)},a.newFrequencyControlError=function(e){var t=new a(o[416],416,e);return t.from="local",t},a.newParamError=function(e,t){return new a(e||o.Param_Error,"Param_Error",t)},a.newNoFileError=function(e,t){var n="No_File_Selected";return new a(e||o[n],n,t)},a.newWrongFileTypeError=function(e,t){var n="Wrong_File_Type";return new a(e||o[n],n,t)},a.newFileTooLargeError=function(e,t){var n="File_Too_Large";return new a(e||o[n],n,t)},a.newCORSIframeError=function(e){var t="Cross_Origin_Iframe";return new a(o[t],t,e)},a.newSupportError=function(e,t,n){return new a("\u4e0d\u652f\u6301"+e,"Not_Support_"+t,n)},a.newSupportDBError=function(e){return a.newSupportError("\u6570\u636e\u5e93","DB",e)},a.noDBError=function(e){return new a(o.NO_DB,"NO_DB",e)},a.newDBError=function(e){return new a(o.DB,"DB",e)},a.newUnknownError=function(e){var t="Error_Unknown";return new a(o[t],t,e)},a.stillInTeamError=function(e){var t="Still_In_Team";return new a(o[t],t,e)},a.sessionExist=function(e){var t="Session_Exist";return new a(o[t],t,e)},a.sessionNotExist=function(e){var t="Session_Not_Exist";return new a(o[t],t,e)},a.cancel=function(e){var t="Operation_Canceled";return new a(o[t],t,e)},a.customError=function(e,t){e=e||"Other_Error";var n="";return(t=t||{}).message||(n=o[e]||e),"object"!==(void 0===e?"undefined":(0,i.default)(e))?new a(n,e,t):new a(n,"Other_Error",void 0===t?e:t)},e.exports=a},function(e,t,n){var r=n(44);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(68),i=n(50);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(117)(!0);n(66)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t,n){t.__esModule=!0;var r,i=(r=n(125))&&r.__esModule?r:{default:r};t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){var r=n(13).f,i=n(18),a=n(7)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t){e.exports=!0},function(e,t,n){var r=n(58),i=n(169),a=n(168),o=n(167);r.json=i,r.upload=a,r.chunkUpload=o,e.exports=r},function(e,t,n){var r=n(0),i={init:function(){i.deviceId=r.guid()}};i.init(),i.clientTypeMap={1:"Android",2:"iOS",4:"PC",8:"WindowsPhone",16:"Web",32:"Server",64:"Mac"},i.db={open:function(){}},i.rnfs=null,e.exports=i},function(e,t,n){n(114);for(var r=n(8),i=n(20),a=n(26),o=n(7)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],l=r[u],m=l&&l.prototype;m&&!m[o]&&i(m,o,u),a[u]=a.Array}},function(e,t,n){var r=n(54);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},,function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=n(11),o=n(0),s=o.notundef,c=n(341),u=n(5);function l(){}var m={};l.getInstance=function(e){e=p(e),o.verifyOptions(e,"account","api::Base.getInstance");var t=this.genInstanceName(e),n=m[t];return n?l.updateInstance(n,e):n=m[t]=new this(e),n},l.updateInstance=function(e,t){e.setOptions(t),e.connect()};var d=l.fn=l.prototype=Object.create(new a),p=function(e){return e.nosSurvivalTime?(o.verifyParamType("nosSurvivalTime",e.nosSurvivalTime,"number","api::Base.getInstance"),o.verifyParamMin("nosSurvivalTime",e.nosSurvivalTime,86400,"api::Base.getInstance")):e.nosSurvivalTime=1/0,e};d.updatePrivateConf=function(e){if(e&&"object"===(0,i.default)(e.privateConf)){var t=e.privateConf;"string"==typeof t.lbs_web&&(e.lbsUrl=t.lbs_web),"boolean"==typeof t.link_ssl_web&&(e.secure=t.link_ssl_web),"boolean"==typeof t.https_enabled&&(e.httpsEnabled=t.https_enabled),e.uploadUrl=t.nos_uploader_web?t.nos_uploader_web:null,e.chunkUploadUrl=t.nos_uploader_web?t.nos_uploader_web:null,e.replaceUrl=t.nos_downloader?t.nos_downloader:null,e.downloadUrl=t.nos_accelerate?t.nos_accelerate:null,e.downloadHost=t.nos_accelerate_host?t.nos_accelerate_host:null,e.downloadHostList=t.nos_accelerate_host_list||[],e.downloadHost&&e.downloadHostList.push(e.downloadHost),e.nosCdnEnable=!1!==t.nos_cdn_enable,e.ntServerAddress=t.nt_server||null,e.kibanaServer=t.kibana_server,e.statisticServer=t.statistic_server,e.reportGlobalServer=t.report_global_server,e.ipVersion=t.ip_protocol_version,e.defaultLink=t.link_web||e.defaultLink,e.ipv6DefaultLink=t.link_ipv6_web||e.ipv6DefaultLink,"string"==typeof t.nos_lbs?e.nosLbsUrls=[t.nos_lbs]:e.nosLbsUrls=[]}return null===e.ntServerAddress||""===e.ntServerAddress?u.ntServerAddress=null:u.ntServerAddress=e.ntServerAddress||u.defaultReportUrl,u.uploadUrl=e.uploadUrl||u.uploadUrl,u.chunkUploadUrl=e.chunkUploadUrl||u.chunkUploadUrl,u.downloadUrl=e.downloadUrl||u.downloadUrl,u.downloadHost=e.downloadHost||u.downloadHost,u.downloadHostList=e.downloadHostList&&e.downloadHostList.length>0?e.downloadHostList:u.downloadHostList,u.nosCdnEnable=!1!==e.nosCdnEnable,u.replaceUrl=e.replaceUrl||u.replaceUrl,u.httpsEnabled=e.httpsEnabled||u.httpsEnabled,e.probe_ipv4_url&&(u.ipProbeAddr.ipv4=e.probe_ipv4_url),e.probe_ipv6_url&&(u.ipProbeAddr.ipv6=e.probe_ipv6_url),e},d.init=function(e){o.verifyOptions(e,"account","api::Base.init"),e=this.updatePrivateConf(e),o.verifyBooleanWithDefault(e,"exifOrientation",!0,"","api::Base.init"),e.lbsBackup=void 0===e.lbsBackup||e.lbsBackup;var t=this.account=e.account=e.account+"",n=e.constructor.genInstanceName(e),r=m[n];if(e._disableSingleton&&(r=null),r)return l.updateInstance(r,e),r;this.name=n,m[n]=this,this.logger=e.logger=new c({debug:e.debug,logFunc:e.logFunc,prefix:this.subType,dbLog:!1!==e.dbLog,account:e.account,expire:e.expire}),e.api=this;var i=this.protocol=new e.Protocol(e);return i.name="Protocol-"+n,i.account=t,i.api=this,i.message=this.message=new e.Message({account:t}),this.options=o.copy(e),this},d.destroy=function(e){var t,n,r=this;e=e||{};var i=this.name;this.logger.warn("destroy::start"),i?(this.protocol&&(t=this.protocol.connectTimer,n=this.protocol.onlineListener),this.protocol&&this.protocol.resetPush&&this.protocol.resetPush(),this.disconnect({done:function(a){r.logger.warn("ApiBase::destroy: instance destroyed ..."),Object.getOwnPropertyNames(r.options).forEach((function(e){0===e.indexOf("on")&&(r.options[e]=function(){},r.protocol.options[e]=function(){},r.protocol.api.options[e]=function(){})})),r.logger.setLogDisabled(),Object.getOwnPropertyNames(r).forEach((function(e){r[e]=void 0})),m&&(m[i]=null,clearTimeout(t),n&&"undefined"!=typeof window&&o.isFunction(window.removeEventListener)&&window.removeEventListener("online",n)),e.done instanceof Function&&e.done(a)}})):this.logger.warn("destroy::no instanceName")},d.setOptions=function(e){this.protocol.setOptions(e)},d.processCallback=function(e,t){f(e,t)},d.processCallbackPromise=function(e,t){return new Promise((function(n,r){f(e,t,!0,n,r)}))};var f=function(e,t,n,r,i){var a="api::processCallback";n&&(a="api::processCallbackPromise"),o.verifyCallback(e,"done",a),e.callback=function(c,u,l){var m=e.callback.options;if(u=u||m,t&&(u=m),o.isFunction(e.cbaop)){var d=e.cbaop(c,u);s(d)&&(u=d)}var p=e.done;o.isObject(u)&&(delete u.done,delete u.cb,delete u.callback),n?c?i({message:"\u751f\u6210\u63a5\u53e3\u56de\u8c03\u9519\u8bef",callFunc:a,event:c}):r(u):p(c,u,l)},e.callback.options=o.copy(e)};d.processPs=function(e){o.notexist(e.ps)&&(e.ps=""),o.verifyArrayMax("ps",e.ps,5e3)},d.processCustom=function(e){o.notexist(e.custom)&&(e.custom="")},d.sendCmd=function(){this.protocol.sendCmd.apply(this.protocol,arguments)},d.sendCmdWithResp=function(e,t,n){this.sendCmd(e,t,(function(e,t,r){o.isFunction(n)&&(e?n(e,t):n(null,r))}))},d.cbAndSendCmd=function(e,t){var n=this.processCallbackPromise(t);return this.sendCmd(e,t),n},d.sendCmdUsePromise=function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd(e,t,(function(e,t,n){if(e)i(e);else{var a=o.merge({},t,n);r(a)}}))}))},l.use=function(e,t){e&&e.install&&o.isFunction(e.install)&&e.install(this,t)},l.rmAllInstances=function(){for(var e in m)m[e].destroy();m={}},d.logout=function(e){e=e||{},this.protocol.shouldReconnect=!1,this.protocol.doLogout=!0,this.processCallback(e),this.sendCmd("logout",e,e.callback)},e.exports=l,n(336),n(335),n(332),n(331),n(330),n(329),n(328)},function(e,t,n){var r=n(8),i=n(6),a=n(39),o=n(48),s=n(13).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,n){t.f=n(7)},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(8),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(51)("keys"),i=n(34);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(19);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(506);r.fn=r.prototype,e.exports=r,n(504),n(503),n(502),n(501),n(500),n(499),n(498),n(497),n(496),n(495),n(494)},function(e,t,n){var r=n(19),i=n(8).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(15),i=n(173),a=n(171),o=n(170),s={},c=r.f;function u(e){var t=e.upload="multipart/form-data"===(e.headers||r.o)["Content-Type"],n=!1;try{n=(location.protocol+"//"+location.host).toLowerCase()!==r.url2origin(e.url)}catch(e){}return e.cors=n,t||n||e.mode?function(e){var t=e.mode,n=i,s=r.getGlobal();return!s.FormData&&s.document&&(t="iframe"),"iframe"===t&&(n=e.upload?a:o),new n(e)}(e):new i(e)}function l(e,t,n){var r=s[e];if(r){"onload"===t&&r.result&&(n=function(e,t){t={data:t};var n=e.result.headers;return n&&(t.headers=e.req.header(n)),t}(r,n)),function(e){var t=s[e];t&&(t.req.destroy(),delete s[e])}(e);var i={type:t,result:n};c(i),i.stopped||r[t](i.result)}}function m(e,t){var n=r.genUrlSep(e);return t=t||"",r.isObject(t)&&(t=r.object2query(t)),t&&(e+=n+t),e}function d(e,t){t=t||{};var n=r.uniqueID(),i={result:t.result,onload:t.onload||r.f,onerror:t.onerror||r.f};s[n]=i,t.onload=function(e,t){l(e,"onload",t)}.bind(null,n),t.onerror=function(e,t){l(e,"onerror",t)}.bind(null,n),t.query&&(e=m(e,t.query));var a=t.method||"";return a&&!/get/i.test(a)||!t.data||(e=m(e,t.data),t.data=null),t.url=e,i.req=u(t),n}d.filter=function(e){r.isFunction(e)&&(c=e)},d.abort=function(e){var t=s[e];t&&t.req&&t.req.abort()},e.exports=d},function(e,t,n){var r=n(12),i=n(115),a=n(50),o=n(52)("IE_PROTO"),s=function(){},c=function(){var e,t=n(57)("iframe"),r=a.length;for(t.style.display="none",n(79).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[a[r]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[o]=e):n=c(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(53),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){(function(t){var r;e.exports=r=r||function(e,r){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==t&&t.crypto&&(i=t.crypto),!i)try{i=n(434)}catch(e){}var a=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},c=s.lib={},u=c.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=c.WordArray=u.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var a=0;a<i;a++){var o=n[a>>>2]>>>24-a%4*8&255;t[r+a>>>2]|=o<<24-(r+a)%4*8}else for(a=0;a<i;a+=4)t[r+a>>>2]=n[a>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=u.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(a());return new l.init(t,e)}}),m=s.enc={},d=m.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},p=m.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(a))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},f=m.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},g=c.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,a=r.sigBytes,o=this.blockSize,s=a/(4*o),c=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*o,u=e.min(4*c,a);if(c){for(var m=0;m<c;m+=o)this._doProcessBlock(i,m);n=i.splice(0,c),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=u.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(c.Hasher=g.extend({cfg:u.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math)}).call(this,n(31))},function(e,t,n){var r=n(0),i=n(5),a=n(135),o=n(29);function s(e){r.undef(e.secure)&&(e.secure=!0),this.options=r.copy(e),this.keepNosSafeUrl=this.options.keepNosSafeUrl||!1;var t=e.defaultLink||e.defaultLinkUrl;r.notundef(t)&&r.isString(t)&&(i.optionDefaultLinkUrl=t.trim()),r.notundef(e.ipv6DefaultLink)&&r.isString(e.ipv6DefaultLink)&&(i.optionIpv6DefaultLinkUrl=e.ipv6DefaultLink),"number"==typeof e.heartbeatInterval&&(i.heartbeatInterval=e.heartbeatInterval),Array.isArray(e.nosLbsUrls)&&(i.nosLbsUrls=e.nosLbsUrls),this.init(),this.connect()}var c=s.fn=s.prototype;c.init=function(){this.logger=this.options.logger,this.getNosOriginUrlReqNum=0,this.checkNosReqNum=0,this.cmdTaskArray=[],this.timerMap={},this.cmdCallbackMap={},this.cmdContentMap={},this.initConnect(),this.reset()},c.reset=function(){this.resetConnect()},c.setOptions=function(e){var t=this.options,n=Object.keys(t),i=n.indexOf("account");this.logger.info("setOptions::",r.omitAsString(e,["appKey","token","loginExt","customTag"])),-1!==i&&n.splice(i,1),e=r.filterObj(e,n),this.options=r.merge(t,e),this.reset()},c.sendCmd=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments[2];this.heartbeat();var r,i=e,a=(e=this.parser.createCmd(e,t)).SER;t=t||{},this.cmdContentMap[a]=t,t.single&&(delete t.single,1===(r=Object.keys(t)).length&&(this.cmdContentMap[a]=t[r[0]])),t.NOTSTORE&&((r=t.NOTSTORE.split(" ")).forEach((function(e){delete t[e]})),delete t.NOTSTORE),(n=n||t.callback)&&(this.cmdCallbackMap[a]=n),this.cmdTaskArray.push({cmdName:i,cmd:JSON.stringify(e)}),this.startCmdTaskTimer()},c.startCmdTaskTimer=function(){var e=this;e.cmdTaskTimer||(e.cmdTaskTimer=setTimeout((function(){var t=e.cmdTaskArray.shift();e.cmdTaskTimer=null,t&&e.executeCmdTask(t),e.cmdTaskArray.length&&e.startCmdTaskTimer()}),0))},c.executeCmdTask=function(e){var t=e.cmdName,n=e.cmd,r=(n=JSON.parse(n)).SER;this.isFrequencyControlled(t)?(this.logger.warn("protocol::executeCmdTask: "+t+" hit freq control"),this.markCallbackInvalid(r,o.newFrequencyControlError({callFunc:"protocol::executeCmdTask",message:t+" hit freq control"}))):this.hasLogin?("heartbeat"!==t&&this.logger.log("protocol::sendCmd: "+t),this.doSendCmd(n)):"login"===t&&this.isConnected()?(this.logger.info("protocol::sendCmd: "+t),this.doSendCmd(n)):(this.logger.warn("protocol::executeCmdTask: "+t+" not connected or login"),this.markCallbackInvalid(r,o.newSocketStateError({callFunc:"protocol::executeCmdTask",message:t+" not connected or not login"})))},c.isFrequencyControlled=function(e){var t=this.frequencyControlMap&&this.frequencyControlMap[e];if(t){if(Date.now()<t.from+t.duration)return!0;delete this.frequencyControlMap[e]}},c.doSendCmd=function(e){var t=this,n=e.SER,r=0===n?i.hbCmdTimeout:i.cmdTimeout;function a(){t.markCallbackInvalid(n,o.newSocketStateError({callFunc:"protocol::doSendCmd",message:"ser "+n+" socketSendJson Error"})),t.onDisconnect(!0,"protocol::doSendCmd:socketSendJson")}t.timerMap[n]=setTimeout((function(){t.markCallbackInvalid(n,o.newTimeoutError({callFunc:"protocol::doSendCmd",message:"ser "+n+" Timeout Error"}))}),r);try{t.socket&&t.socket.send?t.socket.send(JSON.stringify(e)):a()}catch(e){a()}},c.getObjWithSer=function(e){var t=this.cmdContentMap[e];return t&&!t.isImSyncDataObj&&delete this.cmdContentMap[e],t&&r.copy(t)},c.getCallbackWithSer=function(e){var t=this.cmdCallbackMap[e];return t&&!t.isImSyncDataCb&&delete this.cmdCallbackMap[e],t},c.getTimerWithSer=function(e){var t=this.timerMap[e];return delete this.timerMap[e],t},c.clearTimerWithSer=function(e){var t=this.getTimerWithSer(e);t&&clearTimeout(t)},c.markCallbackInvalid=function(e,t){this.getObjWithSer(e),this.clearTimerWithSer(e);var n=this.getCallbackWithSer(e);if(n){var r=n.options;setTimeout((function(){n(t||o.newUnknownError({ser:e}),r)}),0)}},c.markAllCallbackInvalid=function(e){var t=this;Object.keys(this.cmdCallbackMap).forEach((function(n){t.markCallbackInvalid(n,e)})),t.cmdTaskArray=[]},c.getPacketObj=function(e){var t=null;if(e&&e.raw){var n=e.raw.ser;r.notundef(n)&&(t=this.getObjWithSer(n))}return t},c.callPacketAckCallback=function(e){var t=this;if(e&&e.raw){var n=e.raw.ser;if(r.notundef(n)){t.clearTimerWithSer(n);var i=t.getCallbackWithSer(n);i&&(i.originUrl&&e.obj&&e.obj.file&&(e.obj.file._url_safe=e.obj.file.url,e.obj.file.url=i.originUrl,"audio"===e.obj.type&&(e.obj.file.mp3Url=i.originUrl+(~i.originUrl.indexOf("?")?"&":"?")+"audioTrans&type=mp3")),e.promise?e.promise.then((function(){i(e.error,e.obj)}),(function(r){r.callFunc="protocol::callPacketAckCallback",r.message="Resp Promoise Error: cmd: "+e.cmd+", ser: "+n;var a=o.customError("CALLBACK_ACK_ERR",r);t.logger.error("protocol::callPacketAckCallback: promise error "+JSON.stringify(r)),i(a,e.obj,e.content)})):i(e.error,e.obj,e.content))}}},c.onMessage=function(e){var t=this;t.heartbeat(),t.parser.parseResponse(e).then((function(e){if(e.notFound&&t.logger.warn("protocol::onMessage: packet not found "+JSON.stringify(e)),e.error){e.error.message=e.cmd+" error: "+e.error.message,t.logger.error("protocol::onMessage: packet error "+JSON.stringify(e.error)+"\uff0craw cmd "+e.rawStr);var n=e.raw||{};408!==n.code&&415!==n.code&&500!==n.code||a.saveErrEvent({code:n.code,module:e.cmd,accid:t.account})}e.frequencyControlDuration&&(t.logger.error("protocol::onMessage: server freq control "+JSON.stringify(e.cmd)),t.frequencyControlMap=t.frequencyControlMap||{},t.frequencyControlMap[e.cmd]={from:+new Date,duration:e.frequencyControlDuration}),e.obj=t.getPacketObj(e),"heartbeat"!==e.cmd&&t.logger.log("protocol::recvCmd: "+e.cmd);var i="process"+r.capFirstLetter(e.service);if(t[i])if("syncDone"===e.cmd){if(t.cmdCallbackMap[e.raw.ser]&&t.cmdCallbackMap[e.raw.ser].isImSyncDataCb){t.cmdCallbackMap[e.raw.ser].isImSyncDataCb=!1;var o=function(e,t){this.checkNosReqNum++,this.getNosOriginUrlReqNum<=0||this.checkNosReqNum>=20?this[e](t):setTimeout(o,300)}.bind(t,i,e);setTimeout((function(){o.call(t,i,e)}),10)}}else t[i](e);else t.logger.warn("protocol::onMessage: "+i+" not found");t.callPacketAckCallback(e)}))},c.onMiscError=function(e,t,n){t&&this.notifyError(e,t,n)},c.onCustomError=function(e,t){var n=o.customError(e,t),r=t.message||"\u672a\u77e5\u9519\u8bef";this.onMiscError(r,n)},c.notifyError=function(e,t,n){this.isConnected()&&(this.logger.error((e||"")+" "+this.name,t,n),this.options.onerror(t,n))},c.emitAPI=function(e){var t=e.type,n=e.obj;this.api.emit(t,n)},e.exports=s,n(327),n(325),n(324),n(323),n(322)},function(e,t,n){var r=n(33),i=n(28),a=n(21),o=n(55),s=n(18),c=n(69),u=Object.getOwnPropertyDescriptor;t.f=n(17)?u:function(e,t){if(e=a(e),t=o(t,!0),c)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(68),i=n(50).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){e.exports=n(20)},function(e,t,n){var r=n(39),i=n(14),a=n(65),o=n(20),s=n(26),c=n(116),u=n(38),l=n(85),m=n(7)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,f,g,h,y){c(n,t,f);var b,v,S,T=function(e){if(!d&&e in A)return A[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},M=t+" Iterator",C="values"==g,k=!1,A=e.prototype,I=A[m]||A["@@iterator"]||g&&A[g],P=I||T(g),x=g?C?T("entries"):P:void 0,O="Array"==t&&A.entries||I;if(O&&(S=l(O.call(new e)))!==Object.prototype&&S.next&&(u(S,M,!0),r||"function"==typeof S[m]||o(S,m,p)),C&&I&&"values"!==I.name&&(k=!0,P=function(){return I.call(this)}),r&&!y||!d&&!k&&A[m]||o(A,m,P),s[t]=P,s[M]=p,g)if(b={values:C?P:T("values"),keys:h?P:T("keys"),entries:x},y)for(v in b)v in A||a(A,v,b[v]);else i(i.P+i.F*(d||k),t,b);return b}},function(e,t,n){var r=n(32);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(18),i=n(21),a=n(121)(!1),o=n(52)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)n!=o&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~a(u,n)||u.push(n));return u}},function(e,t,n){e.exports=!n(17)&&!n(24)((function(){return 7!=Object.defineProperty(n(57)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=n(0),o=a.undef,s=a.notundef,c=a.exist,u=n(131),l=n(183),m="#%@all@%#",d={p2p:0,team:1,superTeam:5},p={0:"p2p",1:"team",5:"superTeam"},f=Object.keys(d),g=l.typeMap,h=l.validTypes;function y(e){a.verifyOptions(e,"scene to type","msg::Message"),a.verifyParamValid("scene",e.scene,f,"msg::Message"),this.scene=d[e.scene],this.to=""+e.to,this.type=g[e.type],this.resend=e.resend?1:0,e.resend?(a.verifyOptions(e,"idClient","msg::Message"),this.idClient=e.idClient):this.idClient=a.guid(),s(e.subType)&&(a.isInt(+e.subType)&&+e.subType>0?this.subType=+e.subType:a.onParamError("subType\u53ea\u80fd\u662f\u5927\u4e8e0\u7684\u6574\u6570","msg::Message"));var t=e.replyMsg;t&&t.idServer&&t.from&&t.to&&t.time&&(this.replyMsgFromAccount=t.from,this.replyMsgToAccount=t.to,this.replyMsgTime=t.time,this.replyMsgIdServer=t.idServer,this.replyMsgIdClient=t.idClient,t.threadMsgFromAccount&&t.threadMsgIdServer&&t.threadMsgTime&&t.threadMsgToAccount?(this.threadMsgFromAccount=t.threadMsgFromAccount,this.threadMsgToAccount=t.threadMsgToAccount,this.threadMsgTime=t.threadMsgTime,this.threadMsgIdServer=t.threadMsgIdServer,this.threadMsgIdClient=t.threadMsgIdClient):(this.threadMsgFromAccount=t.from,this.threadMsgToAccount=t.to,this.threadMsgTime=t.time,this.threadMsgIdServer=t.idServer,this.threadMsgIdClient=t.idClient)),s(e.text)&&(this.body=""+e.text),s(e.custom)&&("object"===(0,i.default)(e.custom)?this.custom=JSON.stringify(e.custom):this.custom=""+e.custom),s(e.body)&&(this.body=""+e.body),s(e.pushContent)&&(this.pushContent=""+e.pushContent),s(e.pushPayload)&&(this.pushPayload=""+e.pushPayload);var n=e.apns;if(s(n)&&"team"===e.scene){var r=n.accounts;s(r)&&a.verifyParamType("apns.accounts",r,"array","msg::Message"),this.apnsAccounts=r?JSON.stringify(r):m,this.apnsContent=n.content||e.pushContent||"",a.verifyBooleanWithDefault(n,"forcePush",!0,"options.apns","msg::Message"),this.apnsForcePush=n.forcePush?1:0}s(e.isHistoryable)&&(this.isHistoryable=e.isHistoryable?1:0),s(e.isRoamingable)&&(this.isRoamingable=e.isRoamingable?1:0),s(e.isSyncable)&&(this.isSyncable=e.isSyncable?1:0),s(e.cc)&&(this.cc=e.cc?1:0),s(e.env)&&(this.env=e.env),s(e.isPushable)&&(this.isPushable=e.isPushable?1:0),s(e.isOfflinable)&&(this.isOfflinable=e.isOfflinable?1:0),s(e.isUnreadable)&&(this.isUnreadable=e.isUnreadable?1:0),s(e.needPushNick)&&(this.needPushNick=e.needPushNick?1:0),s(e.needMsgReceipt)&&(this.needMsgReceipt=e.needMsgReceipt?1:0),s(e.yidunEnable)&&(this.yidunEnable=e.yidunEnable?1:0),s(e.needUpdateSession)&&(this.needUpdateSession=!1===e.needUpdateSession?0:1),s(e.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=e.antiSpamUsingYidun?1:0),s(e.clientAntiSpam)&&(this.clientAntiSpam=e.clientAntiSpam?1:0),s(e.antiSpamContent)&&("object"===(0,i.default)(e.antiSpamContent)?this.antiSpamContent=JSON.stringify(e.antiSpamContent):this.antiSpamContent=""+e.antiSpamContent),s(e.antiSpamBusinessId)&&("object"===(0,i.default)(e.antiSpamBusinessId)?this.antiSpamBusinessId=JSON.stringify(e.antiSpamBusinessId):this.antiSpamBusinessId=""+e.antiSpamBusinessId),s(e.yidunAntiCheating)&&(this.yidunAntiCheating=e.yidunAntiCheating)}a.merge(y.prototype,l.prototype),y.prototype.getScene=function(){return p[this.scene]},y.getType=l.getType,y.reverse=function(e){var t,n=p[e.scene];if(t="1"===e.delete?{delete:!0,scene:n||e.scene,from:e.from,time:+e.time,to:""+e.to}:{scene:n||e.scene,from:e.from,fromNick:e.fromNick,fromClientType:u.reverseType(e.fromClientType),fromDeviceId:e.fromDeviceId,to:""+e.to,time:+e.time,type:y.getType(e),text:c(e.body)?e.body:e.text||"",isHistoryable:o(e.isHistoryable)||1==+e.isHistoryable,isRoamingable:o(e.isRoamingable)||1==+e.isRoamingable,isSyncable:o(e.isSyncable)||1==+e.isSyncable,cc:o(e.cc)||1==+e.cc,isPushable:o(e.isPushable)||1==+e.isPushable,isOfflinable:o(e.isOfflinable)||1==+e.isOfflinable,isUnreadable:o(e.isUnreadable)||1==+e.isUnreadable,isReplyMsg:o(e.isReplyMsg)||1==+e.isReplyMsg,needPushNick:o(e.needPushNick)||1==+e.needPushNick,needMsgReceipt:1==+e.needMsgReceipt,isLocal:!1},e.isInBlackList&&(t.isInBlackList=1==+e.isInBlackList),s(e.isMuted)&&(t.isMuted=1==+e.isMuted),s(e.resend)&&(t.resend=1==+e.resend),s(e.idClient)&&(t.idClient=e.idClient),s(e.idServer)&&(t.idServer=""+e.idServer),s(e.userUpdateTime)&&(t.userUpdateTime=+e.userUpdateTime),s(e.custom)&&(t.custom=e.custom),s(e.callbackExt)&&(t.callbackExt=e.callbackExt),s(e.subType)&&(t.subType=+e.subType),s(e.pushContent)&&(t.pushContent=e.pushContent),s(e.pushPayload)&&(t.pushPayload=e.pushPayload),s(e.tempTeamMemberCount)&&(t.tempTeamMemberCount=+e.tempTeamMemberCount),s(e.apnsAccounts)){if(t.apns={},e.apnsAccounts!==m){var r=e.apnsAccounts;try{t.apns.accounts=JSON.parse(r)}catch(e){t.apns.accounts=[]}}t.apns.content=e.apnsContent||"",t.apns.forcePush=1==+e.apnsForcePush}return t.status=e.status||"success",s(e.filter)&&(t.filter=e.filter),e.replyMsgIdServer&&e.threadMsgIdServer&&(["replyMsgFromAccount","replyMsgToAccount","replyMsgTime","replyMsgIdServer","replyMsgIdClient","threadMsgFromAccount","threadMsgToAccount","threadMsgTime","threadMsgIdServer","threadMsgIdClient"].forEach((function(n){t[n]=e[n]})),t.replyMsgTime=+t.replyMsgTime,t.threadMsgTime=+t.threadMsgTime),t},y.setExtra=function(e,t){e.target=y.getMsgTarget(e,t),e.sessionId=e.scene+"-"+e.target,l.setFlow(e,t)},y.getMsgTarget=function(e,t){return"p2p"===e.scene?e.to===t?e.from:e.to:"team"===e.scene||"superTeam"===e.scene?e.to:void 0},y.deduplication=function(e){var t,n={},r=[];return e.forEach((function(e){t=e.idClient,n[t]||(n[t]=!0,r.push(e))})),r},y.sortMsgs=function(e){return e=e.slice(0),a.sortObjArray(e,{sortPath:"time"}),e},y.getLastMsg=function(e){return(e=y.sortMsgs(e))[e.length-1]},y.getLastNotIgnoredMsg=function(e){for(var t=null,n=(e=y.sortMsgs(e)).length-1;n>=0;n--)if(!(t=e[n]).ignore)return t;return null},y.getMaxTimetag=function(e){return y.getLastMsg(e).time},y.validScenes=f,y.validTypes=h,y.sceneMap=d,y.sceneReverseMap=p,e.exports=y},function(e,t,n){var r=n(44);e.exports.f=function(e){return new function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)}(e)}},function(e,t,n){var r=n(32),i=n(7)("toStringTag"),a="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,o;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?r(t):"Object"==(o=r(t))&&"function"==typeof t.callee?"Arguments":o}},function(e,t,n){var r=n(72),i=n(7)("iterator"),a=n(26);e.exports=n(6).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||a[r(e)]}},function(e,t,n){var r=n(15),i=r.f,a=n(172);function o(e){e.onload&&this.once("load",e.onload),e.onerror&&this.once("error",e.onerror),e.onbeforesend&&this.once("beforesend",e.onbeforesend),e.onaftersend&&this.once("aftersend",e.onaftersend);var t=(e=this.options=r.fetch({method:"GET",url:"",sync:!1,data:null,headers:{},cookie:!1,timeout:6e4,type:"text",form:null,input:null,putFileAtEnd:!1,proxyUrl:""},e)).headers;r.notexist(t["Content-Type"])&&(t["Content-Type"]="application/x-www-form-urlencoded"),this.send()}var s=o.prototype=Object.create(a.prototype);s.send=function(){var e=this,t=e.options;setTimeout((function(){try{try{e.emit("beforesend",t)}catch(e){console.log("error:","ignore error ajax beforesend,",e)}e.doSend()}catch(t){console.log("error:","ignore error server error,",t),e.onError("serverError","\u8bf7\u6c42\u5931\u8d25:"+t.message)}}),0)},s.doSend=i,s.afterSend=function(){var e=this;setTimeout((function(){e.emit("aftersend",e.options)}),0)},s.onLoad=function(e){var t=this.options,n=e.status,r=e.result;if("number"!=typeof n||0!==n)if(0===(""+n).indexOf("2")){if("json"===t.type)try{r=JSON.parse(r)}catch(e){return console.log("error:","ignore error parse json,",e),void this.onError("parseError",r)}this.emit("load",r)}else this.onError("serverError","\u670d\u52a1\u5668\u8fd4\u56de\u5f02\u5e38\u72b6\u6001",{status:n,result:r,date:e.date});else this.onError("netError","\u7f51\u7edc\u9519\u8bef")},s.onError=function(e,t,n){var i=r.isObject(n)?n:{};i.code=e||"error",i.message=t||"\u53d1\u751f\u9519\u8bef",this.emit("error",i)},s.onTimeout=function(){this.onError("timeout","\u8bf7\u6c42\u8d85\u65f6")},s.abort=function(){this.onError("abort","\u5ba2\u6237\u7aef\u4e2d\u6b62")},s.header=function(e){var t=this;if(!r.isArray(e))return t.getResponseHeader(e||"");var n={};return e.forEach((function(e){n[e]=t.header(e)})),n},s.getResponseHeader=i,s.destroy=i,e.exports=o},,function(e,t,n){var r=n(5),i={genUrlSep:function(e){return-1===(e=""+e).indexOf("?")?"?imageView&":"&"},urlQuery2Object:function(e){if("[object String]"!==Object.prototype.toString.call(e)||""===e)return{};var t=e.indexOf("?");if(-1!==t){var n=e.slice(t+1).split("&"),r={};return n.forEach((function(e){if(~e.indexOf("=")){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])}else r[e]=""})),r}},url2object:function(e){"[object String]"!==Object.prototype.toString.call(e)&&(e="");var t=(e=e||"").indexOf("https")>=0?"https://":"http://",n=e.replace(t,"");n.indexOf("?")>=0&&(n=n.substring(0,n.indexOf("?")));var r=n.split("/");n=r[0];var i="";if(r.length>0&&(i=r.slice(1).join("/")),-1===e.indexOf("?"))return{protocol:t,hostname:n,path:i,query:{}};var a=e.substr(e.indexOf("?")+1).split("&"),o={};return a.forEach((function(e){if(e.indexOf("=")>0){var t=e.split("=");o[t[0]]=decodeURIComponent(t[1])}else o[e]=""})),{protocol:t,hostname:n,path:i,query:o}},object2url:function(e){var t=e.protocol,n=e.hostname,r=e.path,i=e.query;t=t||"http://",n=n||"",r&&(n=n+"/"+r),i=i||{};var a=[];for(var o in i)"imageView"!==o&&a.push(o+"="+encodeURIComponent(i[o]));return a.length>0?""+t+n+"?imageView&"+a.join("&"):""+t+n},genPrivateUrl:function(e){var t=i.url2object(e),n=t.hostname,a=t.path,o=r.downloadUrl,s=r.downloadHostList,c=r.nosCdnEnable,u=r.serverNosConfig.cdnDomain,l=decodeURIComponent(r.serverNosConfig.objectPrefix),m=decodeURIComponent(a),d=m.indexOf(l);if(u&&d>-1&&c)return""+t.protocol+u+"/"+m.slice(d);if(s.includes(n)&&a.includes("/")){var p=a.indexOf("/"),f=a.substring(0,p),g=a.substring(p+1);return o.replace("{bucket}",f).replace("{object}",g)}var h=s.filter((function(e){return"string"==typeof n&&n.includes(e)}))[0],y=h?n.replace(h,"").replace(/\W/g,""):null;return y?o.replace("{bucket}",y).replace("{object}",a):e}};e.exports=i},function(e,t){e.exports=function(e,t){for(var n=t.split(".");n.length;){var r=n.shift(),i=!1;if("?"==r[r.length-1]&&(r=r.slice(0,-1),i=!0),!(e=e[r])&&i)return e}return e}},function(e,t){},function(e,t,n){var r=n(8).document;e.exports=r&&r.documentElement},,function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=n(76),o=n(0),s=o.notundef,c=o.exist,u=n(131),l=n(183),m=l.typeMap;function d(e){e.resend?(o.verifyOptions(e,"idClient","msg::Message"),this.idClient=e.idClient):this.idClient=o.guid(),this.type=m[e.type],this.resend=e.resend?1:0,s(e.subType)&&(o.isInt(+e.subType)&&+e.subType>0?this.subType=+e.subType:o.onParamError("subType\u53ea\u80fd\u662f\u5927\u4e8e0\u7684\u6574\u6570","msg::Message")),s(e.custom)&&("object"===(0,i.default)(e.custom)?this.custom=JSON.stringify(e.custom):this.custom=""+e.custom),s(e.text)&&(this.body=""+e.text),s(e.body)&&(this.body=""+e.body),s(e.yidunEnable)&&(this.yidunEnable=e.yidunEnable?1:0),s(e.antiSpamUsingYidun)&&(this.antiSpamUsingYidun=e.antiSpamUsingYidun?1:0),s(e.antiSpamContent)&&("object"===(0,i.default)(e.antiSpamContent)?this.antiSpamContent=JSON.stringify(e.antiSpamContent):this.antiSpamContent=""+e.antiSpamContent),s(e.antiSpamBusinessId)&&("object"===(0,i.default)(e.antiSpamBusinessId)?this.antiSpamBusinessId=JSON.stringify(e.antiSpamBusinessId):this.antiSpamBusinessId=""+e.antiSpamBusinessId),s(e.yidunAntiCheating)&&(this.yidunAntiCheating=e.yidunAntiCheating+""),s(e.skipHistory)&&(this.skipHistory=e.skipHistory?1:0),s(e.highPriority)&&(this.highPriority=e.highPriority?1:0),s(e.clientAntiSpam)&&(this.clientAntiSpam=e.clientAntiSpam?1:0),s(e.env)&&(this.env=e.env),s(e.notifyTargetTags)&&(this.notifyTargetTags=e.notifyTargetTags)}d.validTypes=l.validTypes,o.merge(d.prototype,l.prototype),d.getType=l.getType,d.reverse=function(e){var t=o.filterObj(e,"chatroomId idClient from fromNick fromAvatar _fromAvatar_safe fromCustom userUpdateTime custom status notifyTargetTags");return s(t.fromAvatar)&&(t.fromAvatar=(0,a.genPrivateUrl)(t.fromAvatar)),t=o.merge(t,{fromClientType:u.reverseType(e.fromClientType),time:+e.time,type:d.getType(e),text:c(e.body)?e.body:e.text||"",resend:1==+e.resend}),s(t.userUpdateTime)&&(t.userUpdateTime=+t.userUpdateTime),s(e.callbackExt)&&(t.callbackExt=e.callbackExt),s(e.subType)&&(t.subType=+e.subType),t.status=t.status||"success",t},d.setExtra=function(e,t){l.setFlow(e,t)},e.exports=d},function(e,t,n){t.__esModule=!0;var r,i=(r=n(157))&&r.__esModule?r:{default:r};t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default((function(e,n){return function r(a,o){try{var s=t[a](o),c=s.value}catch(e){return void n(e)}if(!s.done)return i.default.resolve(c).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(c)}("next")}))}}},function(e,t,n){e.exports=n(159)},function(e,t){e.exports=function e(t,n){var r,i,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,o=/(^[ ]*|[ ]*$)/g,s=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,c=/^0x[0-9a-f]+$/i,u=/^0/,l=function(t){return e.insensitive&&(""+t).toLowerCase()||""+t},m=l(t).replace(o,"")||"",d=l(n).replace(o,"")||"",p=m.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),f=d.replace(a,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),g=parseInt(m.match(c),16)||1!==p.length&&m.match(s)&&Date.parse(m),h=parseInt(d.match(c),16)||g&&d.match(s)&&Date.parse(d)||null;if(h){if(g<h)return-1;if(g>h)return 1}for(var y=0,b=Math.max(p.length,f.length);y<b;y++){if(r=!(p[y]||"").match(u)&&parseFloat(p[y])||p[y]||0,i=!(f[y]||"").match(u)&&parseFloat(f[y])||f[y]||0,isNaN(r)!==isNaN(i))return isNaN(r)?1:-1;if(typeof r!=typeof i&&(r+="",i+=""),r<i)return-1;if(r>i)return 1}return 0}},function(e,t,n){var r=n(18),i=n(43),a=n(52)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},,function(e,t,n){var r={link:{id:1,heartbeat:2,negotiateTransport:5,initTransport:6},sync:{id:5,sync:1,syncTeamMembers:2},misc:{id:6,getSimpleNosToken:1,getNosToken:2,notifyUploadLog:3,uploadSdkLogUrl:4,audioToText:5,processImage:6,getNosTokenTrans:7,notifyTransLog:8,fetchFile:9,fetchFileList:10,removeFile:11,getClientAntispam:17,fileQuickTransfer:18,getNosOriginUrl:22,getServerTime:23,getNosAccessToken:24,deleteNosAccessToken:25,getNosCdnHost:26},avSignal:{id:15,signalingCreate:1,signalingDelay:2,signalingClose:3,signalingJoin:4,signalingLeave:5,signalingInvite:6,signalingCancel:7,signalingReject:8,signalingAccept:9,signalingControl:10,signalingNotify:11,signalingMutilClientSyncNotify:12,signalingUnreadMessageSyncNotify:13,signalingChannelsSyncNotify:14,signalingGetChannelInfo:15}},i={heartbeat:{sid:r.link.id,cid:r.link.heartbeat},negotiateTransport:{sid:r.link.id,cid:r.link.negotiateTransport,params:[{type:"int",name:"sdkVersion"},{type:"Property",name:"negotiateTransportTag"}]},initTransport:{sid:r.link.id,cid:r.link.initTransport,params:[{type:"Property",name:"initTransportTag"}]},getSimpleNosToken:{sid:r.misc.id,cid:r.misc.getSimpleNosToken,params:[{type:"int",name:"num"}]},getNosToken:{sid:r.misc.id,cid:r.misc.getNosToken,params:[{type:"String",name:"responseBody"},{type:"Property",name:"nosToken",entity:"nosToken"}]},uploadSdkLogUrl:{sid:r.misc.id,cid:r.misc.uploadSdkLogUrl,params:[{type:"string",name:"url"}]},audioToText:{sid:r.misc.id,cid:r.misc.audioToText,params:[{type:"Property",name:"audioToText"}]},processImage:{sid:r.misc.id,cid:r.misc.processImage,params:[{type:"String",name:"url"},{type:"PropertyArray",name:"imageOps",entity:"imageOp"}]},getClientAntispam:{sid:r.misc.id,cid:r.misc.getClientAntispam,params:[{type:"Property",name:"clientAntispam"}]},fileQuickTransfer:{sid:r.misc.id,cid:r.misc.fileQuickTransfer,params:[{type:"Property",name:"fileQuickTransfer"}]},getNosOriginUrl:{sid:r.misc.id,cid:r.misc.getNosOriginUrl,params:[{type:"Property",name:"nosFileUrlTag"}]},getServerTime:{sid:r.misc.id,cid:r.misc.getServerTime,params:[]},getNosAccessToken:{sid:r.misc.id,cid:r.misc.getNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},deleteNosAccessToken:{sid:r.misc.id,cid:r.misc.deleteNosAccessToken,params:[{type:"Property",name:"nosAccessTokenTag"}]},getNosTokenTrans:{sid:r.misc.id,cid:r.misc.getNosTokenTrans,params:[{type:"Property",name:"transToken"}]},fetchFile:{sid:r.misc.id,cid:r.misc.fetchFile,params:[{type:"String",name:"docId"}]},fetchFileList:{sid:r.misc.id,cid:r.misc.fetchFileList,params:[{type:"Property",name:"fileListParam"}]},removeFile:{sid:r.misc.id,cid:r.misc.removeFile,params:[{type:"String",name:"docId"}]},getNosCdnHost:{sid:r.misc.id,cid:r.misc.getNosCdnHost,params:[]},signalingCreate:{sid:r.avSignal.id,cid:r.avSignal.signalingCreate,params:[{type:"Property",name:"avSignalTag"}]},signalingDelay:{sid:r.avSignal.id,cid:r.avSignal.signalingDelay,params:[{type:"Property",name:"avSignalTag"}]},signalingClose:{sid:r.avSignal.id,cid:r.avSignal.signalingClose,params:[{type:"Property",name:"avSignalTag"}]},signalingJoin:{sid:r.avSignal.id,cid:r.avSignal.signalingJoin,params:[{type:"Property",name:"avSignalTag"}]},signalingLeave:{sid:r.avSignal.id,cid:r.avSignal.signalingLeave,params:[{type:"Property",name:"avSignalTag"}]},signalingInvite:{sid:r.avSignal.id,cid:r.avSignal.signalingInvite,params:[{type:"Property",name:"avSignalTag"}]},signalingCancel:{sid:r.avSignal.id,cid:r.avSignal.signalingCancel,params:[{type:"Property",name:"avSignalTag"}]},signalingReject:{sid:r.avSignal.id,cid:r.avSignal.signalingReject,params:[{type:"Property",name:"avSignalTag"}]},signalingAccept:{sid:r.avSignal.id,cid:r.avSignal.signalingAccept,params:[{type:"Property",name:"avSignalTag"}]},signalingControl:{sid:r.avSignal.id,cid:r.avSignal.signalingControl,params:[{type:"Property",name:"avSignalTag"}]},signalingGetChannelInfo:{sid:r.avSignal.id,cid:r.avSignal.signalingGetChannelInfo,params:[{type:"Property",name:"avSignalTag"}]}};e.exports={idMap:r,cmdConfig:i,packetConfig:{"1_2":{service:"link",cmd:"heartbeat"},"1_5":{service:"link",cmd:"negotiateTransport",response:[{type:"Property",name:"negotiateTransportTag"}]},"1_6":{service:"link",cmd:"initTransport",response:[{type:"Property",name:"initTransportTag"}]},"6_1":{service:"misc",cmd:"getSimpleNosToken",response:[{type:"PropertyArray",name:"nosTokens",entity:"nosToken"}]},"6_2":{service:"misc",cmd:"getNosToken",response:[{type:"Property",name:"nosToken"}]},"6_3":{service:"misc",cmd:"notifyUploadLog"},"6_4":{service:"misc",cmd:"uploadSdkLogUrl"},"6_5":{service:"misc",cmd:"audioToText",response:[{type:"String",name:"text"}]},"6_6":{service:"misc",cmd:"processImage",response:[{type:"String",name:"url"}]},"6_7":{service:"misc",cmd:"getNosTokenTrans",response:[{type:"Property",name:"nosToken"},{type:"String",name:"docId"}]},"6_8":{service:"misc",cmd:"notifyTransLog",response:[{type:"Property",name:"transInfo"}]},"6_9":{service:"misc",cmd:"fetchFile",response:[{type:"Property",name:"info",entity:"transInfo"}]},"6_10":{service:"misc",cmd:"fetchFileList",response:[{type:"PropertyArray",name:"list",entity:"transInfo"},{type:"Number",name:"totalCount"}]},"6_11":{service:"misc",cmd:"removeFile",response:[{type:"String",name:"res"}]},"6_17":{service:"misc",cmd:"getClientAntispam",response:[{type:"Property",name:"clientAntispam"}]},"6_18":{service:"misc",cmd:"fileQuickTransfer",response:[{type:"Property",name:"fileQuickTransfer"}]},"6_22":{service:"misc",cmd:"getNosOriginUrl",response:[{type:"Property",name:"nosFileUrlTag"}]},"6_23":{service:"misc",cmd:"getServerTime",response:[{type:"Number",name:"time"}]},"6_24":{service:"misc",cmd:"getNosAccessToken",response:[{type:"Property",name:"nosAccessTokenTag"}]},"6_25":{service:"misc",cmd:"deleteNosAccessToken"},"6_26":{service:"misc",cmd:"getNosCdnHost",response:[{type:"Property",name:"nosConfigTag"}]},"15_1":{service:"avSignal",cmd:"signalingCreate",response:[{type:"Property",name:"avSignalTag"}]},"15_2":{service:"avSignal",cmd:"signalingDelay",response:[{type:"Property",name:"avSignalTag"}]},"15_3":{service:"avSignal",cmd:"signalingClose",response:[{type:"Property",name:"avSignalTag"}]},"15_4":{service:"avSignal",cmd:"signalingJoin",response:[{type:"Property",name:"avSignalTag"}]},"15_5":{service:"avSignal",cmd:"signalingLeave",response:[]},"15_6":{service:"avSignal",cmd:"signalingInvite",response:[]},"15_7":{service:"avSignal",cmd:"signalingCancel",response:[]},"15_8":{service:"avSignal",cmd:"signalingReject",response:[]},"15_9":{service:"avSignal",cmd:"signalingAccept",response:[]},"15_10":{service:"avSignal",cmd:"signalingControl",response:[]},"15_11":{service:"avSignal",cmd:"signalingNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_12":{service:"avSignal",cmd:"signalingMutilClientSyncNotify",response:[{type:"Property",name:"avSignalTag"}]},"15_13":{service:"avSignal",cmd:"signalingUnreadMessageSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_14":{service:"avSignal",cmd:"signalingChannelsSyncNotify",response:[{type:"PropertyArray",name:"avSignalTag"}]},"15_15":{service:"avSignal",cmd:"signalingGetChannelInfo",response:[{type:"Property",name:"avSignalTag"}]}}}},,function(e,t,n){var r=n(12),i=n(19),a=n(71);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r,i,a,o=n(30),s=n(152),c=n(79),u=n(57),l=n(8),m=l.process,d=l.setImmediate,p=l.clearImmediate,f=l.MessageChannel,g=l.Dispatch,h=0,y={},b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},v=function(e){b.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++h]=function(){s("function"==typeof e?e:Function(e),t)},r(h),h},p=function(e){delete y[e]},"process"==n(32)(m)?r=function(e){m.nextTick(o(b,e,1))}:g&&g.now?r=function(e){g.now(o(b,e,1))}:f?(a=(i=new f).port2,i.port1.onmessage=v,r=o(a.postMessage,a,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",v,!1)):r="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),b.call(e)}}:function(e){setTimeout(o(b,e,1),0)}),e.exports={set:d,clear:p}},function(e,t,n){var r=n(12),i=n(44),a=n(7)("species");e.exports=function(e,t){var n,o=r(e).constructor;return void 0===o||null==(n=r(o)[a])?t:i(n)}},function(e,t,n){var r=n(7)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],o=a[r]();o.next=function(){return{done:n=!0}},a[r]=function(){return o},e(a)}catch(e){}return n}},function(e,t,n){var r=n(26),i=n(7)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[i]===e)}},function(e,t,n){var r=n(12);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(e,t,n){var r,i=n(76),a=n(0),o=n(29),s=n(206),c=n(321),u=n(320),l=n(319),m=n(318),d=n(317);function p(e){this.mixin(e)}p.prototype=Object.create(function(){}.prototype,{protocol:{value:null,writable:!0,enumerable:!0,configurable:!0}}),p.prototype.setProtocol=function(e){this.protocol=e},p.prototype.mixin=function(e){var t=this;this.configMap=this.configMap||{},["idMap","cmdConfig","packetConfig"].forEach((function(n){t.configMap[n]=a.merge({},t.configMap[n],e.configMap&&e.configMap[n])})),["serializeMap","unserializeMap"].forEach((function(n){t[n]=a.merge({},t[n],e[n])}))},p.prototype.createCmd=(r=1,function(e,t){var n=this,i=this.configMap.cmdConfig[e],o="heartbeat"===e?0:r++;return o>32767&&(o=1,r=2),e={SID:i.sid,CID:i.cid,SER:o},i.params&&(e.Q=[],i.params.forEach((function(r){var i=r.type,o=r.name,s=r.entity,c=t[o];if(!a.undef(c)){switch(i){case"PropertyArray":i="ArrayMable",c=c.map((function(e){return{t:"Property",v:n.serialize(e,s)}}));break;case"Property":c=n.serialize(c,o);break;case"bool":c=c?"true":"false"}e.Q.push({t:i,v:c})}}))),e}),p.prototype.parseResponse=function(e){var t=this;return new Promise((function(n,r){var i=JSON.parse(e),s={raw:i,rawStr:e,error:o.genError(i.code)},c=t.configMap.packetConfig[i.sid+"_"+i.cid];if(!c)return s.notFound={sid:i.sid,cid:i.cid},void n(s);var u=i.r,l="notify"===c.service&&!c.cmd;if(s.isNotify=l,l){var m=i.r[1].headerPacket;if(c=t.configMap.packetConfig[m.sid+"_"+m.cid],u=i.r[1].body,!c)return s.notFound={sid:m.sid,cid:m.cid},void n(s)}if(s.service=c.service,s.cmd=c.cmd,s.error){var d=i.sid+"_"+i.cid;if(l&&(d=m.sid+"_"+m.cid),s.error.cmd=s.cmd,s.error.callFunc="protocol::parseResponse: "+d,416===s.error.code){var p=u[0];p&&(s.frequencyControlDuration=1e3*p)}}var f=!1;s.error&&c.trivialErrorCodes&&(f=-1!==c.trivialErrorCodes.indexOf(s.error.code));var g=[];if((!s.error||f)&&c.response){s.content={};var h=function(e,t,n,r){if(e&&"msg"===r||"sysMsg"===r){var i=n.content[r];a.isObject(i)&&!i.idServer&&(i.idServer=""+t.r[0])}};c.response.forEach((function(e,n){var r=u[n];if(!a.undef(r)){var o=e.type,c=e.name,m=e.entity||c;switch(o){case"Property":g.push(t.unserialize(r,m).then(function(e,t,n,r,i){n.content[r]=i,h(e,t,n,r)}.bind(this,l,i,s,c)));break;case"PropertyArray":s.content[c]=[],r.forEach((function(e,n){g.push(t.unserialize(e,m).then(function(e,t,r){e.content[t][n]=r}.bind(this,s,c)))}));break;case"KVArray":s.content[c]=r,h(l,i,s,c);break;case"long":case"Long":case"byte":case"Byte":case"Number":s.content[c]=+r;break;default:s.content[c]=r,h(l,i,s,c)}}}))}Promise.all(g).then((function(){n(s)}))}))},p.prototype.serialize=function(e,t){var n=this.serializeMap[t],r={};for(var i in n)e.hasOwnProperty(i)&&(r[n[i]]=e[i]);return r},p.prototype.matchNosSafeUrl=function(e){if(!a.isString(e)||!~e.indexOf("_im_url=1"))return!1;var t=(0,i.urlQuery2Object)(e);return!(!t||!t._im_url||1!=t._im_url)},p.prototype.getOneNosOriginUrl=function(e,t,n){var r=this;return new Promise((function(i,a){r.protocol.getNosOriginUrlReqNum++,r.protocol.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:e}},(function(e,a,o){r.protocol.getNosOriginUrlReqNum--,e?console.warn("error: get nos originUrl failed",e):(t["_"+n+"_safe"]=t[n],t[n]=o.nosFileUrlTag&&o.nosFileUrlTag.originUrl),i()}))}))},p.prototype.checkObjSafeUrl=function(e,t,n){var r=this;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(a.isString(o)){if(this.matchNosSafeUrl(o)){var s=this.getOneNosOriginUrl(o,e,i);t.push(s),n.push(s)}}else a.isObject(o)?this.checkObjSafeUrl(o,t,n):a.isArray(o)&&o.forEach((function(e){a.isObject(e)&&r.checkObjSafeUrl(e,t,n)}))}};var f=["url","avatar","fromAvatar","chatroomAvatar"];p.prototype.unserialize=function(e,t){var n=this;return new Promise((function(r,i){var a=n.unserializeMap[t],o={},s=[];if(e)for(var c in a){var u=[];if(e.hasOwnProperty(c)&&(o[a[c]]=e[c],!n.protocol.keepNosSafeUrl))if("attach"===a[c]&&e[c]&&e[c].indexOf&&~e[c].indexOf("_im_url=1"))try{var l=JSON.parse(e[c]);n.checkObjSafeUrl(l,u,s),Promise.all(u).then(function(e,t){e.attach=JSON.stringify(t)}.bind(n,o,l))}catch(e){console.warn(e)}else~f.indexOf(a[c])&&e[c]&&n.matchNosSafeUrl(e[c])&&s.push(n.getOneNosOriginUrl(e[c],o,a[c]))}Promise.all(s).then((function(e){r(o)}))}))},p.prototype.syncUnserialize=function(e,t){var n=this.unserializeMap[t],r={};if(e)for(var i in n)e.hasOwnProperty(i)&&(r[n[i]]=e[i]);return r};var g=new p({configMap:s,serializeMap:c,unserializeMap:u}),h=new p({configMap:l,serializeMap:m,unserializeMap:d});e.exports={IM:g,Chatroom:h}},function(e,t,n){var r=n(15),i=r.getGlobal(),a={},o=i.name||"_parent",s=[],c=[];a.addMsgListener=function(e){s.push(e)};var u,l,m,d,p=(u=/^([\w]+?:\/\/.*?(?=\/|$))/i,function(e){return e=e||"",u.test(e)?RegExp.$1:"*"}),f=function(){var e=unescape(i.name||"").trim();if(e&&0===e.indexOf("MSG|")){i.name="";var t=r.string2object(e.replace("MSG|",""),"|"),n=(t.origin||"").toLowerCase();n&&"*"!==n&&0!==location.href.toLowerCase().indexOf(n)||function(e){for(var t=0,n=s.length;t<n;t++)try{s[t].call(null,e)}catch(e){}}({data:JSON.parse(t.data||"null"),source:i.frames[t.self]||t.self,origin:p(t.ref||("undefined"==typeof document?"":document.referrer))})}},g=(m=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return!0;return!1},function(){if(c.length){l=[];for(var e,t=c.length-1;t>=0;t--)e=c[t],m(l,e.w)||(l.push(e.w),c.splice(t,1),e.w.name=e.d);l=null}}),h=a.startTimer=(d=!1,function(){d||(d=!0,i.postMessage||(setInterval(g,100),setInterval(f,20)))});a.postMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.fillUndef(t,{origin:"*",source:o}),i.postMessage){var n=t.data;i.FormData||(n=JSON.stringify(n)),e.postMessage(n,t.origin)}else{if(h(),r.isObject(t)){var a={};a.origin=t.origin||"",a.ref=location.href,a.self=t.source,a.data=JSON.stringify(t.data),t="MSG|"+r.object2string(a,"|",!0)}c.unshift({w:e,d:escape(t)})}},e.exports=a},,,function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=n(0),o=a.undef,s=a.notundef,c=n(96).IM,u=n(132),l=n(101),m={customP2p:100,customTeam:101,customSuperTeam:103,deleteMsgP2p:7,deleteMsgTeam:8,deleteMsgSuperTeam:12,deleteOnewayMsgP2p:13,deleteOnewayMsgTeam:14},d={0:"applyTeam",1:"rejectTeamApply",2:"teamInvite",3:"rejectTeamInvite",5:"friendRequest",6:"deleteFriend",7:"deleteMsgP2p",8:"deleteMsgTeam",12:"deleteMsgSuperTeam",13:"deleteMsgP2pOneWay",14:"deleteMsgTeamOneWay",15:"applySuperTeam",16:"rejectSuperTeamApply",17:"superTeamInvite",18:"rejectSuperTeamInvite",100:"customP2p",101:"customTeam",103:"customSuperTeam",102:"customP2p"},p={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"},f=["team","superTeam","friend","msg"],g={applyTeam:"team",rejectTeamApply:"team",teamInvite:"team",rejectTeamInvite:"team",applySuperTeam:"superTeam",rejectSuperTeamApply:"superTeam",superTeamInvite:"superTeam",rejectSuperTeamInvite:"superTeam",addFriend:"friend",applyFriend:"friend",passFriendApply:"friend",rejectFriendApply:"friend",deleteFriend:"friend",deleteMsg:"msg"};function h(e){a.verifyOptions(e,"type to","sysmsg::SystemMessage"),a.verifyParamValid("type",e.type,h.validTypes,"sysmsg::SystemMessage"),-1!==e.type.indexOf("custom")&&(a.verifyOptions(e,"content","sysmsg::SystemMessage"),this.attach=e.content,s(e.apnsText)&&(this.apnsText=""+e.apnsText),s(e.pushPayload)&&("object"===(0,i.default)(e.pushPayload)?this.pushPayload=JSON.stringify(e.pushPayload):this.pushPayload=""+e.pushPayload),s(e.sendToOnlineUsersOnly)&&(this.sendToOnlineUsersOnly=e.sendToOnlineUsersOnly?0:1),s(e.cc)&&(this.cc=e.cc?1:0),s(e.isPushable)&&(this.isPushable=e.isPushable?1:0),s(e.isUnreadable)&&(this.isUnreadable=e.isUnreadable?1:0),s(e.needPushNick)&&(this.needPushNick=e.needPushNick?1:0)),0===e.type.indexOf("deleteMsg")&&(e.apnsText&&(this.apnsText=e.apnsText),e.pushPayload&&(this.pushPayload=e.pushPayload),e.attach&&(this.attach=e.attach)),this.time=e.time||+new Date,this.type=m[e.type],this.to=e.to,s(e.from)&&(this.from=e.from),s(e.ps)&&(this.ps=e.ps),s(e.deletedIdClient)&&(this.deletedIdClient=e.deletedIdClient),s(e.deletedIdServer)&&(this.deletedIdServer=e.deletedIdServer),s(e.opeAccount)&&(this.opeAccount=e.opeAccount),s(e.yidunEnable)&&(this.yidunEnable=e.yidunEnable?1:0),s(e.antiSpamContent)&&("object"===(0,i.default)(e.antiSpamContent)?this.antiSpamContent=JSON.stringify(e.antiSpamContent):this.antiSpamContent=""+e.antiSpamContent),s(e.antiSpamBusinessId)&&("object"===(0,i.default)(e.antiSpamBusinessId)?this.antiSpamBusinessId=JSON.stringify(e.antiSpamBusinessId):this.antiSpamBusinessId=""+e.antiSpamBusinessId),s(e.env)&&(this.env=e.env),this.idClient=e.idClient||a.guid()}h.validTypes=Object.keys(m).concat(Object.keys(g)),h.validCategories=["team","friend"],h.isCustom=function(e){return"custom"===e.type},h.reverse=function(e){var t={time:+e.time,to:e.to,type:d[e.type]};if(s(e.from)&&(t.from=e.from),s(e.idServer)&&(t.idServer=""+e.idServer),s(e.deletedIdClient)&&(t.deletedIdClient=e.deletedIdClient),s(e.deletedIdServer)&&(t.deletedIdServer=""+e.deletedIdServer),s(e.deletedMsgTime)&&(t.deletedMsgTime=+e.deletedMsgTime),s(e.deletedMsgFromNick)&&(t.deletedMsgFromNick=""+e.deletedMsgFromNick),s(e.opeAccount)&&(t.opeAccount=e.opeAccount),s(e.ps)&&(t.ps=e.ps),s(e.callbackExt)&&(t.callbackExt=e.callbackExt),e.attach=e.attach?""+e.attach:"","customP2p"===t.type||"customTeam"===t.type||"customSuperTeam"===t.type)t.content=e.attach,s(e.apnsText)&&(t.apnsText=e.apnsText),s(e.pushPayload)&&(t.pushPayload=e.pushPayload),a.merge(t,{sendToOnlineUsersOnly:o(e.sendToOnlineUsersOnly)||0==+e.sendToOnlineUsersOnly,cc:o(e.cc)||1==+e.cc,isPushable:o(e.isPushable)||1==+e.isPushable,isUnreadable:o(e.isUnreadable)||1==+e.isUnreadable,needPushNick:s(e.needPushNick)&&1==+e.needPushNick}),t.scene=t.type.slice(6).toLowerCase(),t.type="custom";else if(0===t.type.indexOf("deleteMsg")){e.apnsText&&(t.apnsText=e.apnsText),e.pushPayload&&(t.pushPayload=e.pushPayload),e.attach&&(t.attach=e.attach);var n=t.type.toLowerCase();n.indexOf("p2p")>-1?t.scene="p2p":n.indexOf("superteam")>-1?t.scene="superTeam":n.indexOf("team")>-1&&(t.scene="team"),t.type="deleteMsg"}else{if(e.attach){t.attach={};var r=JSON.parse(e.attach);s(r.vt)?(t.type=p[r.vt],r.serverex&&1===r.serverex[0]&&(t.serverex=r.serverex[1]),delete t.attach):(s(r.tinfo)&&(t.attach.team=u.reverse(c.syncUnserialize(r.tinfo,"team"))),s(r.tlist)&&(t.attach.member=l.reverse(c.syncUnserialize(r.tlist,"teamMember"))),s(r.attach)&&(t.attach.custom=r.attach))}t.category=g[t.type],t.read=!1,t.state="init"}return s(e.cc)&&(t.cc=1==+e.cc),t.status=e.status||"success",s(e.filter)&&(t.filter=e.filter),t},h.reverseSysMsgs=function(e,t){var n=(t=t||{}).mapper,r=a.isFunction(n);return e.map((function(e){return e=h.reverse(e),r&&(e=n(e)),e}))},h.completeUnread=function(e){var t;return e=e||{},f.forEach((function(t){delete e[t]})),Object.keys(g).forEach((function(n){e[n]=e[n]||0,e[n]<0&&(e[n]=0),e[t=g[n]]=e[t]||0,e[t]=e[t]+e[n]})),e.total=0,f.forEach((function(t){e.total+=e[t]})),e},e.exports=h},function(e,t,n){var r=n(0),i=r.notundef,a=r.fillPropertyWithDefault,o={0:"normal",1:"owner",2:"manager"};function s(e){r.verifyOptions(e,"teamId","team::TeamMember"),r.verifyParamAtLeastPresentOne(e,"nickInTeam muteTeam muteNotiType custom","team::TeamMember"),this.teamId=e.teamId,i(e.account)&&(this.account=e.account),i(e.nickInTeam)&&(this.nickInTeam=e.nickInTeam),i(e.muteNotiType)?this.bits=e.muteNotiType:i(e.muteTeam)&&(this.bits=0,e.muteTeam&&(this.bits+=1)),i(e.mute)&&(this.mute=e.mute?1:0),i(e.custom)&&(this.custom=""+e.custom)}s.reverse=function(e){var t=r.copy(e);if(i(t.teamId)&&(t.teamId=""+t.teamId),i(t.type)&&(t.type=o[t.type]),i(t.active)&&(t.active=1==+t.active),i(t.valid)&&(t.valid=1==+t.valid),i(t.mute)&&(t.mute=1==+t.mute),i(t.joinTime)&&(t.joinTime=+t.joinTime),i(t.updateTime)&&(t.updateTime=+t.updateTime),i(t.bits)){var n=t.bits;delete t.bits,t.muteTeam=!!(1&n),t.muteNotiType=n}return i(t.teamId)&&i(t.account)&&(t.id=s.genId(t.teamId,t.account)),t},s.reverseMembers=function(e){return e.map((function(e){return s.reverse(e)}))},s.fillProperties=function(e){var t=a(e,"mute",!1),n=a(e,"custom","");return t||n},s.genId=function(e,t){return e+"-"+t},s.accounts2ids=function(e,t){return t.map((function(t){return s.genId(e,t)}))},s.assembleMembers=function(e,t){return r.isArray(t)||(t=[t]),t.map((function(t){return s.assembleMember(e,t)}))},s.assembleMember=function(e,t){return{id:s.genId(e.teamId,t),account:t,teamId:e.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:e.memberUpdateTime,updateTime:e.memberUpdateTime,active:!0,valid:!0,invitorAccid:""}},s.assembleOwner=function(e){var t=s.assembleMember(e,e.owner);return t.type="owner",t},e.exports=s},function(e,t,n){var r=n(5);"undefined"!=typeof window&&(window.console||r.isWeixinApp||(window.console={log:function(){},info:function(){},warn:function(){},error:function(){}}))},function(e,t,n){n(47)("observable")},function(e,t,n){n(47)("asyncIterator")},function(e,t,n){var r=n(21),i=n(64).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?function(e){try{return i(e)}catch(e){return o.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(32);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(35),i=n(49),a=n(33);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,s=n(e),c=a.f,u=0;s.length>u;)c.call(e,o=s[u++])&&t.push(o);return t}},function(e,t,n){var r=n(34)("meta"),i=n(19),a=n(18),o=n(13).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(24)((function(){return c(Object.preventExtensions({}))})),l=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},m=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!a(e,r)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return u&&m.NEED&&c(e)&&!a(e,r)&&l(e),e}}},function(e,t,n){var r=n(8),i=n(18),a=n(17),o=n(14),s=n(65),c=n(108).KEY,u=n(24),l=n(51),m=n(38),d=n(34),p=n(7),f=n(48),g=n(47),h=n(107),y=n(106),b=n(12),v=n(19),S=n(21),T=n(55),M=n(28),C=n(59),k=n(105),A=n(63),I=n(13),P=n(35),x=A.f,O=I.f,_=k.f,w=r.Symbol,E=r.JSON,j=E&&E.stringify,R=p("_hidden"),N=p("toPrimitive"),L={}.propertyIsEnumerable,D=l("symbol-registry"),B=l("symbols"),F=l("op-symbols"),U=Object.prototype,G="function"==typeof w,H=r.QObject,W=!H||!H.prototype||!H.prototype.findChild,z=a&&u((function(){return 7!=C(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=x(U,t);r&&delete U[t],O(e,t,n),r&&e!==U&&O(U,t,r)}:O,q=function(e){var t=B[e]=C(w.prototype);return t._k=e,t},V=G&&"symbol"==typeof w.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof w},K=function(e,t,n){return e===U&&K(F,t,n),b(e),t=T(t,!0),b(n),i(B,t)?(n.enumerable?(i(e,R)&&e[R][t]&&(e[R][t]=!1),n=C(n,{enumerable:M(0,!1)})):(i(e,R)||O(e,R,M(1,{})),e[R][t]=!0),z(e,t,n)):O(e,t,n)},J=function(e,t){b(e);for(var n,r=h(t=S(t)),i=0,a=r.length;a>i;)K(e,n=r[i++],t[n]);return e},Q=function(e){var t=L.call(this,e=T(e,!0));return!(this===U&&i(B,e)&&!i(F,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,R)&&this[R][e])||t)},Y=function(e,t){if(e=S(e),t=T(t,!0),e!==U||!i(B,t)||i(F,t)){var n=x(e,t);return!n||!i(B,t)||i(e,R)&&e[R][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=_(S(e)),r=[],a=0;n.length>a;)i(B,t=n[a++])||t==R||t==c||r.push(t);return r},Z=function(e){for(var t,n=e===U,r=_(n?F:S(e)),a=[],o=0;r.length>o;)!i(B,t=r[o++])||n&&!i(U,t)||a.push(B[t]);return a};G||(s((w=function(){if(this instanceof w)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===U&&t.call(F,n),i(this,R)&&i(this[R],e)&&(this[R][e]=!1),z(this,e,M(1,n))};return a&&W&&z(U,e,{configurable:!0,set:t}),q(e)}).prototype,"toString",(function(){return this._k})),A.f=Y,I.f=K,n(64).f=k.f=X,n(33).f=Q,n(49).f=Z,a&&!n(39)&&s(U,"propertyIsEnumerable",Q,!0),f.f=function(e){return q(p(e))}),o(o.G+o.W+o.F*!G,{Symbol:w});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;$.length>ee;)p($[ee++]);for(var te=P(p.store),ne=0;te.length>ne;)g(te[ne++]);o(o.S+o.F*!G,"Symbol",{for:function(e){return i(D,e+="")?D[e]:D[e]=w(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in D)if(D[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),o(o.S+o.F*!G,"Object",{create:function(e,t){return void 0===t?C(e):J(C(e),t)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:Y,getOwnPropertyNames:X,getOwnPropertySymbols:Z}),E&&o(o.S+o.F*(!G||u((function(){var e=w();return"[null]"!=j([e])||"{}"!=j({a:e})||"{}"!=j(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(v(t)||void 0!==e)&&!V(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,j.apply(E,r)}}),w.prototype[N]||n(20)(w.prototype,N,w.prototype.valueOf),m(w,"Symbol"),m(Math,"Math",!0),m(r.JSON,"JSON",!0)},function(e,t,n){n(109),n(78),n(104),n(103),e.exports=n(6).Symbol},function(e,t,n){e.exports={default:n(110),__esModule:!0}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(113),i=n(112),a=n(26),o=n(21);e.exports=n(66)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t,n){var r=n(13),i=n(12),a=n(35);e.exports=n(17)?Object.defineProperties:function(e,t){i(e);for(var n,o=a(t),s=o.length,c=0;s>c;)r.f(e,n=o[c++],t[n]);return e}},function(e,t,n){var r=n(59),i=n(28),a=n(38),o={};n(20)(o,n(7)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var r=n(53),i=n(54);e.exports=function(e){return function(t,n){var a,o,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(a=s.charCodeAt(c))<55296||a>56319||c+1===u||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):a:e?s.slice(c,c+2):o-56320+(a-55296<<10)+65536}}},function(e,t,n){n(36),n(42),e.exports=n(48).f("iterator")},function(e,t,n){e.exports={default:n(118),__esModule:!0}},function(e,t,n){var r=n(53),i=Math.max,a=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):a(e,t)}},function(e,t,n){var r=n(21),i=n(60),a=n(120);e.exports=function(e){return function(t,n,o){var s,c=r(t),u=i(c.length),l=a(o,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(35),i=n(49),a=n(33),o=n(43),s=n(67),c=Object.assign;e.exports=!c||n(24)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r}))?function(e,t){for(var n=o(e),c=arguments.length,u=1,l=i.f,m=a.f;c>u;)for(var d,p=s(arguments[u++]),f=l?r(p).concat(l(p)):r(p),g=f.length,h=0;g>h;)m.call(p,d=f[h++])&&(n[d]=p[d]);return n}:c},function(e,t,n){var r=n(14);r(r.S+r.F,"Object",{assign:n(122)})},function(e,t,n){n(123),e.exports=n(6).Object.assign},function(e,t,n){e.exports={default:n(124),__esModule:!0}},,,function(e,t,n){var r=n(62),i=n(0),a=i.undef,o=i.notundef,s=n(5),c=n(96),u=n(304),l=n(204);function m(e){i.verifyOptions(e,"appKey account chatroomId chatroomAddresses","protocol::ChatroomProtocol"),e.isAnonymous||i.verifyOptions(e,"token","protocol::ChatroomProtocol"),i.verifyParamType("chatroomAddresses",e.chatroomAddresses,"array","protocol::ChatroomProtocol"),i.verifyCallback(e,"onconnect onerror onwillreconnect ondisconnect onmsg onmsgs onrobots","protocol::ChatroomProtocol"),r.call(this,e)}var d=r.fn,p=m.fn=m.prototype=Object.create(d);p.init=function(){d.init.call(this),c.Chatroom.setProtocol(this),this.parser=c.Chatroom,this.sendCmd.bind(this),this.syncResult={},this.timetags={},this.msgBuffer=[]},p.reset=function(){var e=this;d.reset.call(e);var t=e.options;a(t.msgBufferInterval)&&(t.msgBufferInterval=300),i.verifyParamType("msgBufferInterval",t.msgBufferInterval,"number","protocol::ChatroomProtocol.reset"),a(t.msgBufferSize)&&(t.msgBufferSize=500),i.verifyParamType("msgBufferSize",t.msgBufferSize,"number","protocol::ChatroomProtocol.reset"),o(t.chatroomAddresses)&&(e.socketUrls=t.chatroomAddresses.map((function(t){return s.formatSocketUrl({url:t,secure:e.options.secure})})),e.socketUrlsBackup=e.socketUrls.slice(0))},p.processChatroom=function(e){switch(e.cmd){case"login":e.error||(e.obj={chatroom:u.reverse(e.content.chatroom),member:l.reverse(e.content.chatroomMember)},this.cdnInfo={},this.initCdnData(),clearTimeout(this.queryCdnTimer),this.onCdnMsgInfo(e.content.chatroomCdnInfo));break;case"kicked":this.onKicked(e);break;case"logout":break;case"sendMsg":this.onSendMsg(e);break;case"msg":this.onMsg(e),this.cdnInfo&&this.cdnInfo.enable&&this.correctCdnTime(+e.content.msg.time);break;case"getChatroomMembers":case"getChatroomMembersByTag":this.onChatroomMembers(e);break;case"getChatroomMemberCountByTag":this.onGetChatroomMemberCountByTag(e);break;case"getHistoryMsgs":this.onHistoryMsgs(e);break;case"markChatroomMember":this.onMarkChatroomMember(e);break;case"closeChatroom":break;case"getChatroom":this.onChatroom(e);break;case"updateChatroom":break;case"updateMyChatroomMemberInfo":delete e.obj.chatroomMember;break;case"getChatroomMembersInfo":this.onChatroomMembersInfo(e);break;case"kickChatroomMember":case"updateChatroomMemberTempMute":break;case"queueList":e.error||(e.obj=e.content);break;case"syncRobot":this.onSyncRobot(e);break;case"notifyCdnInfo":this.onCdnMsgInfo(e.content&&e.content.chatroomCdnInfo)}},p.onChatroom=function(e){e.error||(e.obj.chatroom=u.reverse(e.content.chatroom))},e.exports=m,n(438),n(437),n(436),n(427)},function(e,t,n){t.__esModule=!0;var r=a(n(146)),i=a(n(143));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,c=(0,i.default)(e);!(r=(s=c.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){var r=n(0);function i(){}i.parse=function(e){var t=e.split("|");return{scene:t[0],to:t[1]}},i.genSessionByMsg=function(e){return{id:e.sessionId,scene:e.scene,to:e.target,updateTime:e.time,lastMsg:e}},i.appendLastMsg=function(e){var t=e.lastMsg;e["last"+r.capFirstLetter(t.type)+"Msg"]=t,e["last"+r.capFirstLetter(t.flow)+"Msg"]=t},i.genSessionByMsgs=function(e,t){var n=e.getLastNotIgnoredMsg(t);return n?i.genSessionByMsg(n):null},i.trim=function(e){delete e.msgReceiptSendTime,delete e.msgReceiptServerTime,delete e.ack,delete e.unreadMsgs,delete e.isDeleted},i.isComplete=function(e){return e.id&&e.scene&&e.to},e.exports=i},function(e,t,n){var r,i=((r=n(41))&&r.__esModule?r:{default:r}).default.clientTypeMap;function a(){}a.reverse=function(e){var t=e;return t.type=i[t.type],t},a.reverseType=function(e){return i[e]||e},e.exports=a},function(e,t,n){var r=n(0),i=r.notundef,a=r.fillPropertyWithDefault,o=Object.keys,s={},c={},u=[],l={},m={normal:0,advanced:1},d={0:"normal",1:"advanced"},p=o(m),f=s.joinMode={noVerify:0,needVerify:1,rejectAll:2};c.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},u.push("join"),l.joinMode=o(f);var g=s.beInviteMode={needVerify:0,noVerify:1};c.beInviteMode={0:"needVerify",1:"noVerify"},u.push("beInvite"),l.beInviteMode=o(g);var h=s.inviteMode={manager:0,all:1};c.inviteMode={0:"manager",1:"all"},u.push("invite"),l.inviteMode=o(h);var y=s.updateTeamMode={manager:0,all:1};c.updateTeamMode={0:"manager",1:"all"},u.push("updateTeam"),l.updateTeamMode=o(y);var b=s.updateCustomMode={manager:0,all:1};function v(e){switch(r.verifyOptions(e,"action","team::Team"),e.action){case"create":r.verifyOptions(e,"teamId",!1,"team::Team"),r.verifyOptions(e,"type name","team::Team"),r.verifyParamValid("type",e.type,p,"team::Team"),i(e.level)&&(r.verifyParamType("level",e.level,"number","team::Team"),this.level=e.level);break;case"update":r.verifyOptions(e,"teamId","team::Team"),r.verifyOptions(e,"type",!1,"team::Team")}i(e.teamId)&&(this.teamId=e.teamId),i(e.type)&&(this.type=m[e.type]),i(e.avatar)&&(this.avatar=""+e.avatar),i(e.name)&&(this.name=""+e.name),i(e.intro)&&(this.intro=""+e.intro),i(e.announcement)&&(this.announcement=""+e.announcement),u.forEach(this.setMode.bind(this,e)),i(e.custom)&&(this.custom=""+e.custom)}c.updateCustomMode={0:"manager",1:"all"},u.push("updateCustom"),l.updateCustomMode=o(b),v.prototype.setMode=function(e,t){i(e[t+="Mode"])&&(r.verifyParamValid(t,e[t],l[t],"team::Team"),this[t]=s[t][e[t]])},v.reverse=function(e,t){var n=r.copy(e);if(i(n.teamId)&&(n.teamId=""+n.teamId),i(n.type)&&(n.type=d[n.type]),i(n.level)&&(n.level=+n.level),i(n.valid)&&(n.valid=1==+n.valid),i(n.memberNum)&&(n.memberNum=+n.memberNum),i(n.memberUpdateTime)&&(n.memberUpdateTime=+n.memberUpdateTime),i(n.createTime)&&(n.createTime=+n.createTime),i(n.updateTime)&&(n.updateTime=+n.updateTime),i(n.validToCurrentUser)&&(n.validToCurrentUser="1"===n.validToCurrentUser),i(n.mute)&&(n.mute="1"===n.mute),i(n.muteType))switch(n.muteType){case"0":n.mute=!1,n.muteType="none";break;case"1":n.mute=!0,n.muteType="normal";break;case"3":n.mute=!0,n.muteType="all"}else i(n.mute)&&(1===n.mute?(n.mute=!0,n.muteType="normal"):(n.mute=!1,n.muteType="none"));return u.forEach(function(e,t){i(e[t+="Mode"])&&(e[t]=c[t][e[t]])}.bind(null,n)),delete n.bits,t||v.fillProperties(n),n},v.fillProperties=function(e){var t=a(e,"beInviteMode","needVerify"),n=a(e,"inviteMode","manager"),r=a(e,"updateTeamMode","manager"),i=a(e,"updateCustomMode","manager"),o=a(e,"avatar","");return t||n||r||i||o},e.exports=v},,,function(e,t,n){var r=n(40),i=n(16),a="https://statistic.live.126.net/statics/report/common/form",o="nimErrEvent",s={reportErrEventUrl:a,localKey:o,reportErrEvent:function(e){try{var t=localStorage.getItem(o);if(!t)return;t=JSON.parse(t);var n=[];Object.keys(t).forEach((function(e){n.push(t[e])}));var s={app_key:e.appKey,sdk_ver:e.sdk_ver,platform:"Web",os_ver:i.os.family+" "+i.os.version,manufacturer:i.manufacturer,model:i.name};r(a,{method:"POST",timeout:2e3,headers:{"Content-Type":"application/json"},data:JSON.stringify({common:{device_id:e.deviceId,sdk_type:"IM"},event:{logReport:n,deviceinfo:s}}),onload:function(){localStorage.removeItem(o)},onerror:function(e){}})}catch(e){}},saveErrEvent:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.code&&e.module)try{var t=localStorage.getItem(o)||"{}";t=JSON.parse(t);var n=e.code+e.module+e.accid;t[n]?t[n].count++:t[n]={errorCode:e.code,module:e.module,accid:e.accid,timestamp:(new Date).getTime(),count:1},localStorage.setItem(o,JSON.stringify(t))}catch(e){}}};s.sendBeacon="undefined"!=typeof navigator&&navigator&&navigator.sendBeacon&&navigator.sendBeacon.bind(navigator)||function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.send(t)},e.exports=s},,,function(e,t,n){var r=n(76),i=n(81),a=n(0),o=n(5);function s(e){switch(a.notundef(e.type)?a.verifyFileType(e.type,"msg::FileMessage"):e.type="file",a.verifyOptions(e,"file","msg::FileMessage"),a.verifyOptions(e.file,"url ext size",!0,"file.","msg::FileMessage"),e.type){case"image":c.verifyFile(e.file,"msg::FileMessage");break;case"audio":u.verifyFile(e.file,"msg::FileMessage");break;case"video":l.verifyFile(e.file,"msg::FileMessage")}i.call(this,e),this.attach=JSON.stringify(e.file)}s.prototype=Object.create(i.prototype),s.reverse=function(e){var t=i.reverse(e);return e.attach=e.attach?""+e.attach:"",t.file=e.attach?JSON.parse(e.attach):{},t.file.url=(0,r.genPrivateUrl)(t.file.url),"audio"!==t.type||t.file.mp3Url||(t.file.mp3Url=t.file.url+(~t.file.url.indexOf("?")?"&":"?")+"audioTrans&type=mp3"),o.httpsEnabled&&0!==t.file.url.indexOf("https://")&&(t.file.url=t.file.url.replace("http","https")),t},e.exports=s;var c=n(424),u=n(423),l=n(422)},function(e,t,n){var r=n(46),i=n(128),a=n(5),o=n(304),s=n(426),c=n(0),u=c.verifyOptions,l=c.verifyParamType,m=n(96).Chatroom;function d(e){return this.subType="chatroom",this.nosScene=e.nosScene||"chatroom",this.nosSurvivalTime=e.nosSurvivalTime,e.Protocol=i,e.Message=s,e.constructor=d,e.isAnonymous&&(e.account=e.account||"nimanon_"+c.guid(),e.isAnonymous=1,c.verifyOptions(e,"chatroomNick","api::Chatroom"),e.chatroomAvatar=e.chatroomAvatar||" "),this.init(e)}d.Protocol=i,d.parser=m,d.use=r.use,d.getInstance=function(e){return e.isAnonymous&&(e.account=e.account||"nimanon_"+c.guid(),e.isAnonymous=1,c.verifyOptions(e,"chatroomNick","api::Chatroom.getInstance"),e.chatroomAvatar=e.chatroomAvatar||" "),r.getInstance.call(this,e)},d.genInstanceName=function(e){return c.verifyOptions(e,"chatroomId","api::Chatroom.genInstanceName"),"Chatroom-account-"+e.account+"-chatroomId-"+e.chatroomId};var p=d.fn=d.prototype=Object.create(r.prototype);d.info=p.info=a.info,p.getChatroom=function(e){this.processCallback(e),this.sendCmd("getChatroom",e)},p.updateChatroom=function(e){u(e,"chatroom needNotify","api::updateChatroom"),l("needNotify",e.needNotify,"boolean"),this.processCustom(e),this.processCallback(e),e.chatroom=new o(e.chatroom),this.sendCmd("updateChatroom",e)},p.closeChatroom=function(e){this.processCustom(e),this.processCallback(e),this.sendCmd("closeChatroom",e)},e.exports=d,n(416),n(415),n(414)},function(e,t,n){var r=n(76),i=n(70),a=n(0),o=n(5);function s(e){switch(a.notundef(e.type)?a.verifyFileType(e.type,"msg::FileMessage"):e.type="file",a.verifyOptions(e,"file","msg::FileMessage"),a.verifyOptions(e.file,"url ext size",!0,"file.","msg::FileMessage"),e.type){case"image":c.verifyFile(e.file,"msg::FileMessage");break;case"audio":u.verifyFile(e.file,"msg::FileMessage");break;case"video":l.verifyFile(e.file,"msg::FileMessage")}i.call(this,e),this.attach=JSON.stringify(e.file)}s.prototype=Object.create(i.prototype),s.reverse=function(e){var t=i.reverse(e);return e.attach=e.attach?""+e.attach:"",t.file=e.attach?JSON.parse(e.attach):{},t.file.url=(0,r.genPrivateUrl)(t.file.url),"audio"!==t.type||t.file.mp3Url||(t.file.mp3Url=t.file.url+(~t.file.url.indexOf("?")?"&":"?")+"audioTrans&type=mp3"),o.httpsEnabled&&0!==t.file.url.indexOf("https://")&&(t.file.url=t.file.url.replace("http","https")),t},e.exports=s;var c=n(470),u=n(469),l=n(468)},function(e,t,n){var r=n(12),i=n(73);e.exports=n(6).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){n(42),n(36),e.exports=n(141)},function(e,t,n){e.exports={default:n(142),__esModule:!0}},function(e,t,n){var r=n(72),i=n(7)("iterator"),a=n(26);e.exports=n(6).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(r(t))}},function(e,t,n){n(42),n(36),e.exports=n(144)},function(e,t,n){e.exports={default:n(145),__esModule:!0}},function(e,t,n){var r=n(14),i=n(71),a=n(90);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=a(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){var r=n(14),i=n(6),a=n(8),o=n(92),s=n(89);r(r.P+r.R,"Promise",{finally:function(e){var t=o(this,i.Promise||a.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then((function(){return n}))}:e,n?function(n){return s(t,e()).then((function(){throw n}))}:e)}})},function(e,t,n){var r=n(8),i=n(6),a=n(13),o=n(17),s=n(7)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];o&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(20);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){var r=n(8),i=n(91).set,a=r.MutationObserver||r.WebKitMutationObserver,o=r.process,s=r.Promise,c="process"==n(32)(o);e.exports=function(){var e,t,n,u=function(){var r,i;for(c&&(r=o.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(c)n=function(){o.nextTick(u)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve();n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var m=!0,d=document.createTextNode("");new a(u).observe(d,{characterData:!0}),n=function(){d.data=m=!m}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(30),i=n(95),a=n(94),o=n(12),s=n(60),c=n(73),u={},l={};(t=e.exports=function(e,t,n,m,d){var p,f,g,h,y=d?function(){return e}:c(e),b=r(n,m,t?2:1),v=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(p=s(e.length);p>v;v++)if((h=t?b(o(f=e[v])[0],f[1]):b(e[v]))===u||h===l)return h}else for(g=y.call(e);!(f=g.next()).done;)if((h=i(g,b,f.value,t))===u||h===l)return h}).BREAK=u,t.RETURN=l},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r,i,a,o,s=n(39),c=n(8),u=n(30),l=n(72),m=n(14),d=n(19),p=n(44),f=n(154),g=n(153),h=n(92),y=n(91).set,b=n(151)(),v=n(71),S=n(90),T=n(89),M=c.TypeError,C=c.process,k=c.Promise,A="process"==l(C),I=function(){},P=i=v.f,x=!!function(){try{var e=k.resolve(1),t=(e.constructor={})[n(7)("species")]=function(e){e(I,I)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(I)instanceof t}catch(e){}}(),O=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},_=function(e,t){if(!e._n){e._n=!0;var n=e._c;b((function(){for(var r=e._v,i=1==e._s,a=0,o=function(t){var n,a,o,s=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{s?(i||(2==e._h&&j(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),o=!0)),n===t.promise?u(M("Promise-chain cycle")):(a=O(n))?a.call(n,c,u):c(n)):u(r)}catch(e){l&&!o&&l.exit(),u(e)}};n.length>a;)o(n[a++]);e._c=[],e._n=!1,t&&!e._h&&w(e)}))}},w=function(e){y.call(c,(function(){var t,n,r,i=e._v,a=E(e);if(a&&(t=S((function(){A?C.emit("unhandledRejection",i,e):(n=c.onunhandledrejection)?n({promise:e,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),e._h=A||E(e)?2:1),e._a=void 0,a&&t.e)throw t.v}))},E=function(e){return 1!==e._h&&0===(e._a||e._c).length},j=function(e){y.call(c,(function(){var t;A?C.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},R=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),_(t,!0))},N=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw M("Promise can't be resolved itself");(t=O(e))?b((function(){var r={_w:n,_d:!1};try{t.call(e,u(N,r,1),u(R,r,1))}catch(e){R.call(r,e)}})):(n._v=e,n._s=1,_(n,!1))}catch(e){R.call({_w:n,_d:!1},e)}}};x||(k=function(e){f(this,k,"Promise","_h"),p(e),r.call(this);try{e(u(N,this,1),u(R,this,1))}catch(e){R.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(150)(k.prototype,{then:function(e,t){var n=P(h(this,k));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=A?C.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&_(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new r;this.promise=e,this.resolve=u(N,e,1),this.reject=u(R,e,1)},v.f=P=function(e){return e===k||e===o?new a(e):i(e)}),m(m.G+m.W+m.F*!x,{Promise:k}),n(38)(k,"Promise"),n(149)("Promise"),o=n(6).Promise,m(m.S+m.F*!x,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),m(m.S+m.F*(s||!x),"Promise",{resolve:function(e){return T(s&&this===o?k:this,e)}}),m(m.S+m.F*!(x&&n(93)((function(e){k.all(e).catch(I)}))),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,a=S((function(){var n=[],a=0,o=1;g(e,!1,(function(e){var s=a++,c=!1;n.push(void 0),o++,t.resolve(e).then((function(e){c||(c=!0,n[s]=e,--o||r(n))}),i)})),--o||r(n)}));return a.e&&i(a.v),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=S((function(){g(e,!1,(function(e){t.resolve(e).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(e,t,n){n(78),n(36),n(42),n(155),n(148),n(147),e.exports=n(6).Promise},function(e,t,n){e.exports={default:n(156),__esModule:!0}},function(e,t){!function(t){var n,r=Object.prototype,i=r.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag",u="object"==typeof e,l=t.regeneratorRuntime;if(l)u&&(e.exports=l);else{(l=t.regeneratorRuntime=u?e.exports:{}).wrap=S;var m="suspendedStart",d="suspendedYield",p="executing",f="completed",g={},h={};h[o]=function(){return this};var y=Object.getPrototypeOf,b=y&&y(y(w([])));b&&b!==r&&i.call(b,o)&&(h=b);var v=k.prototype=M.prototype=Object.create(h);C.prototype=v.constructor=k,k.constructor=C,k[c]=C.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===C||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(v),e},l.awrap=function(e){return{__await:e}},A(I.prototype),I.prototype[s]=function(){return this},l.AsyncIterator=I,l.async=function(e,t,n,r){var i=new I(S(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},A(v),v[c]="Generator",v[o]=function(){return this},v.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=w,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=i.call(o,"catchLoc"),u=i.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),O(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:w(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),g}}}function S(e,t,n,r){var i=t&&t.prototype instanceof M?t:M,a=Object.create(i.prototype),o=new _(r||[]);return a._invoke=function(e,t,n){var r=m;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=P(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===m)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=T(e,t,n);if("normal"===c.type){if(r=n.done?f:d,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function T(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function M(){}function C(){}function k(){}function A(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function I(e){var t;this._invoke=function(n,r){function a(){return new Promise((function(t,a){!function t(n,r,a,o){var s=T(e[n],e,r);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&i.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,a,o)}),(function(e){t("throw",e,a,o)})):Promise.resolve(u).then((function(e){c.value=e,a(c)}),o)}o(s.arg)}(n,r,t,a)}))}return t=t?t.then(a,a):a()}}function P(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,P(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=T(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,g;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function w(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(e,t,n){var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(158),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t,n){var r=n(76),i=n(0),a={unknown:0,male:1,female:2},o={0:"unknown",1:"male",2:"female"};function s(e){i.merge(this,e),i.notundef(this.gender)&&(i.verifyParamValid("gender",this.gender,s.validGenders,"user::User"),this.gender=a[this.gender]),i.notundef(this.email)&&""!==this.email&&i.verifyEmail("email",this.email,"user::User"),i.notundef(this.birth)&&""!==this.birth&&i.verifyBirth("birth",this.birth,"user::User"),i.notundef(this.tel)&&""!==this.tel&&i.verifyTel("tel",this.tel,"user::User")}s.reverse=function(e){var t=i.filterObj(e,"account nick avatar _avatar_safe sign gender email birth tel custom createTime updateTime");return i.notundef(t.avatar)&&(t.avatar=(0,r.genPrivateUrl)(t.avatar)),i.notundef(t.gender)&&(t.gender=o[t.gender]),i.notundef(t.createTime)&&(t.createTime=+t.createTime),i.notundef(t.updateTime)&&(t.updateTime=+t.updateTime),t},s.reverseUsers=function(e){return e.map((function(e){return s.reverse(e)}))},s.validGenders=Object.keys(a),e.exports=s},function(e,t,n){var r=n(13),i=n(28);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(30),i=n(14),a=n(43),o=n(95),s=n(94),c=n(60),u=n(161),l=n(73);i(i.S+i.F*!n(93)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,i,m,d=a(e),p="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,h=void 0!==g,y=0,b=l(d);if(h&&(g=r(g,f>2?arguments[2]:void 0,2)),null==b||p==Array&&s(b))for(n=new p(t=c(d.length));t>y;y++)u(n,y,h?g(d[y],y):d[y]);else for(m=b.call(d),n=new p;!(i=m.next()).done;y++)u(n,y,h?o(m,g,[i.value,y],!0):i.value);return n.length=y,n}})},function(e,t,n){n(36),n(162),e.exports=n(6).Array.from},function(e,t,n){e.exports={default:n(163),__esModule:!0}},function(e,t,n){t.__esModule=!0;var r,i=(r=n(164))&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){var r=n(0),i=r.notundef,a=r.fillPropertyWithDefault,o={0:"normal",1:"owner",2:"manager"};function s(e){r.verifyOptions(e,"teamId","superTeam::TeamMember"),r.verifyParamAtLeastPresentOne(e,"nickInTeam muteTeam custom","superTeam::SuperTeamMember"),this.teamId=e.teamId,i(e.account)&&(this.account=e.account),i(e.nickInTeam)&&(this.nickInTeam=e.nickInTeam),i(e.muteTeam)&&(this.bits=0,e.muteTeam&&(this.bits+=1)),i(e.mute)&&(this.mute=e.mute?1:0),i(e.custom)&&(this.custom=""+e.custom)}s.reverse=function(e){var t=r.copy(e);if(i(t.teamId)&&(t.teamId=""+t.teamId),i(t.type)&&(t.type=o[t.type]),i(t.active)&&(t.active=1==+t.active),i(t.valid)&&(t.valid=1==+t.valid),i(t.mute)&&(t.mute=1==+t.mute),i(t.joinTime)&&(t.joinTime=+t.joinTime),i(t.updateTime)&&(t.updateTime=+t.updateTime),i(t.bits)){var n=t.bits;delete t.bits,t.muteTeam=!!(1&n)}return i(t.teamId)&&i(t.account)&&(t.id=s.genId(t.teamId,t.account)),t},s.reverseMembers=function(e){return e.map((function(e){return s.reverse(e)}))},s.fillProperties=function(e){var t=a(e,"mute",!1),n=a(e,"custom","");return t||n},s.genId=function(e,t){return e+"-"+t},s.accounts2ids=function(e,t){return t.map((function(t){return s.genId(e,t)}))},s.assembleMembers=function(e,t){return r.isArray(t)||(t=[t]),t.map((function(t){return s.assembleMember(e,t)}))},s.assembleMember=function(e,t){return{id:s.genId(e.teamId,t),account:t,teamId:e.teamId,type:"normal",nickInTeam:"",muteTeam:!1,mute:!1,joinTime:e.memberUpdateTime,updateTime:e.memberUpdateTime,active:!0,valid:!0}},s.assembleOwner=function(e){var t=s.assembleMember(e,e.owner);return t.type="owner",t},e.exports=s},function(e,t,n){var r=n(5),i=r.chunkSize,a=n(58),o={mp4:"video/mp4",avi:"video/x-msvideo",wmv:"video/x-ms-wmv",mpeg:"video/mpeg",mov:"video/quicktime",aac:"audio/x-aac",wma:"audio/x-ms-wma",wav:"audio/x-wav",mp3:"audio/mp3"};e.exports=function e(t,n,s,c){var u={file:t.data[n],fileSize:t.data[n].size,fileUploadedSize:0,percentage:0},l=t.url;function m(e){var n=u.fileUploadedSize+e.loaded,r=Math.floor(1e4*n/u.fileSize)/100;if(parseInt(r)>=100&&(r=100,m=function(){}),u.percentage!==r){u.percentage=r;var i={docId:t.docId,total:u.fileSize,loaded:n,percentage:r,percentageText:r+"%"};t.fileInput&&(i.fileInput=t.fileInput),t.blob&&(i.blob=t.blob),t.uploadprogress(i)}}function d(r){var i,o,l,m=r&&r.code;function d(){try{if(r.result)var e=JSON.parse(r.result);else e=r;s.onError(e)}catch(e){s.onError(e)}}0===u.fileUploadedSize&&t.nosLbsUrls&&t.nosLbsUrls.length>0&&"abort"!==m?t.edgeList?c<t.edgeList.length-1?e(t,n,s,c+1):d():(i=0,o=t.nosToken.bucket,l=t.nosLbsUrls,new Promise((function(e,t){function n(){a(l[i],{query:{version:"1.0",bucketname:o},method:"GET",onerror:r,onload:function(t){try{(t=JSON.parse(t))&&t.upload&&t.upload.length?e(t.upload):r()}catch(e){r()}}})}function r(){i<l.length-1?(i++,n()):e([])}n()}))).then((function(r){r.length>0?(t.edgeList=r,t.updateNosEdgeList&&t.updateNosEdgeList(r),e(t,n,s,c+1)):d()})):d()}"number"!=typeof c&&(c=-1),t.edgeList&&t.edgeList.length&&(c=c>0?c:0,l=t.edgeList[c]),l+="/"+t.nosToken.bucket+"/"+t.nosToken.objectName;var p=t.data.file&&t.data.file.type;if(!p||p.indexOf("/")<0){var f=(t.fileInputName||"").split(".").pop();"image"===t.type?p="image/"+("jpg"===f?"jpeg":f):"audio"!==t.type&&"video"!==t.type||(p=o[f])}var g={query:{offset:0,complete:i>=u.fileSize,version:"1.0"},headers:{"Content-Type":p||"application/octet-stream","x-nos-token":t.nosToken.token},method:"POST",timeout:0,onaftersend:function(){t.beginupload(s)},onuploading:m,onload:function e(n){try{n=JSON.parse(n)}catch(n){return void s.onError(n)}if(n.errMsg||n.errCode)s.onError(n);else if(n.offset<u.fileSize)delete g.onaftersend,u.fileUploadedSize=n.offset,s.sn=function(t,n,r,o){var s=t.offset,c=t.offset+i;return n.data=o.file.slice(s,c),n.query.offset=t.offset,n.query.complete=c>=o.fileSize,n.query.context=t.context,n.onuploading=m,n.onload=e,n.onerror=d,a(l,n)}(n,g,0,u);else{var o=r.genFileUrl(t.nosToken);"image"===t.type?a(o+"?imageInfo",{onload:function(e){try{e=JSON.parse(e),t.uploaddone(null,{docId:n.docId,w:e.Width,h:e.Height,orientation:e.Orientation||"",type:e.Type,size:e.Size||u.fileSize})}catch(e){c(e)}},onerror:function(e){if("undefined"!=typeof Image){var r=new Image;r.src=o,r.onload=function(){t.uploaddone(null,{docId:n.docId,w:r.width,h:r.height,size:u.fileSize})}}else c(e)}}):"video"===t.type||"audio"===t.type?a(o+"?vinfo",{onload:function(e){try{(e=JSON.parse(e)).GetVideoInfo&&e.GetVideoInfo.VideoInfo&&(e=e.GetVideoInfo.VideoInfo),t.uploaddone(null,{docId:n.docId,w:e.Width,h:e.Height,dur:e.Duration,orientation:e.Rotate,audioCodec:e.AudioCodec,videoCodec:e.VideoCodec,container:e.Container,size:e.Size||u.fileSize})}catch(e){c(e)}},onerror:c}):t.uploaddone(null,{docId:n.docId,size:u.fileSize})}function c(e){s.onError(e)}},onerror:d};return g.data=u.file.slice(0,i),a(l,g)}},function(e,t,n){var r=n(58);e.exports=function(e,t){return t.method="POST",t.headers=t.headers||{},t.headers["Content-Type"]="multipart/form-data",t.timeout=0,t.type=t.type||"json",r(e,t)}},function(e,t,n){var r,i,a=n(15),o=n(58),s=(r=/json/i,i=/post/i,function(e,t){var n=(t=t||{}).data=t.data||{},s=t.headers=t.headers||{},c=a.checkWithDefault(s,"Accept","application/json"),u=a.checkWithDefault(s,"Content-Type","application/json");return r.test(c)&&(t.type="json"),i.test(t.method)&&r.test(u)&&(t.data=JSON.stringify(n)),o(e,t)});e.exports=s},function(e,t,n){var r=n(15),i=n(97),a=n(74),o={};function s(e){this.init(),a.call(this,e)}var c=a.prototype,u=s.prototype=Object.create(c);u.init=function(){var e="NEJ-AJAX-DATA:",t=!1;function n(t){var n=t.data;if(0===n.indexOf(e)){var r=(n=JSON.parse(n.replace(e,""))).key,i=o[r];i&&(delete o[r],n.result=decodeURIComponent(n.result||""),i.onLoad(n))}}return function(){!function(){if(!t){t=!0;var e=r.getGlobal();e.postMessage?r.on(e,"message",n):i.addMsgListener(n)}}()}}(),u.doSend=function(){var e=this.options,t=r.url2origin(e.url),n=e.proxyUrl||t+"/res/nej_proxy_frame.html",a=o[n];if(r.isArray(a))a.push(this.doSend.bind(this,e));else{if(!a)return o[n]=[this.doSend.bind(this,e)],void r.createIframe({src:n,onload:function(e){var t=o[n];o[n]=r.target(e).contentWindow,t.forEach((function(e){try{e()}catch(e){console.log("error:",e)}}))}});if(!this.aborted){var s=this.key=r.uniqueID();o[s]=this;var c=r.fetch({method:"GET",url:"",data:null,headers:{},timeout:0},e);c.key=s,i.postMessage(a,{data:c}),this.afterSend()}}},u.abort=function(){this.aborted=!0,delete o[this.key],c.abort.call(this)},e.exports=s},function(e,t,n){var r=n(15),i=n(74),a=n(97),o="NEJ-UPLOAD-RESULT:",s={};function c(e){this.init(),i.call(this,e)}var u=i.prototype,l=c.prototype=Object.create(u);l.init=function(){var e=!1;function t(e){var t=e.data;if(0===t.indexOf(o)){var n=(t=JSON.parse(t.replace(o,""))).key,r=s[n];r&&(delete s[n],t.result=decodeURIComponent(t.result||""),r.onLoad(t.result))}}return function(){!function(){if(!e){e=!0;var n=r.getGlobal();n.postMessage?r.on(n,"message",t):(a.addMsgListener(t),a.startTimer())}}()}}(),l.doSend=function(){var e=this,t=e.options,n=e.key="zoro-ajax-upload-iframe-"+r.uniqueID();s[n]=e;var i=e.form=r.html2node('<form style="display:none;"></form>');"undefined"==typeof document?console.log("error: document is undefined"):document.body.appendChild(i),i.target=n,i.method="POST",i.enctype="multipart/form-data",i.encoding="multipart/form-data";var a=t.url,o=r.genUrlSep(a);i.action=a+o+"_proxy_=form";var c=t.data,u=[],l=[];function m(){u.forEach((function(e,t){var n=l[t];n.parentNode&&(e.name=n.name,r.isFunction(e.setAttribute)&&e.setAttribute("form",n.getAttribute("form")),n.parentNode.replaceChild(e,n))}))}c&&r.getKeys(c,t.putFileAtEnd).forEach((function(e){var t=c[e];if(t.tagName&&"INPUT"===t.tagName.toUpperCase()){if("file"===t.type){var n=t,a=n.cloneNode(!0);n.parentNode.insertBefore(a,n);var o=r.dataset(n,"name");o&&(n.name=o),i.appendChild(n),r.isFunction(n.setAttribute)&&(n.setAttribute("form",""),n.removeAttribute("form")),u.push(t),l.push(a)}}else{var s=r.html2node('<input type="hidden"/>');s.name=e,s.value=t,i.appendChild(s)}}));var d=e.iframe=r.createIframe({name:n,onload:function(){e.aborted?m():(r.on(d,"load",e.checkResult.bind(e)),i.submit(),m(),e.afterSend())}})},l.checkResult=function(){var e,t;try{if((t=((e=this.iframe.contentWindow.document.body).innerText||e.textContent||"").trim()).indexOf(o)>=0||e.innerHTML.indexOf(o)>=0)return}catch(e){return void console.log("error:","ignore error if not same domain,",e)}this.onLoad(t)},l.onLoad=function(e){u.onLoad.call(this,{status:200,result:e}),r.remove(this.form),r.remove(this.iframe),u.destroy.call(this)},l.destroy=function(){r.remove(this.iframe),r.remove(this.form)},l.abort=function(){this.aborted=!0,delete s[this.key],u.abort.call(this)},e.exports=c},function(e,t,n){var r;!function(t){function i(){}var a=i.prototype,o=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}a.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},a.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},a.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},a.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],t)&&r[n].push(i?t:{listener:t,once:!1});return this},a.on=c("addListener"),a.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},a.once=c("addOnceListener"),a.defineEvent=function(e){return this.getListeners(e),this},a.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},a.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&-1!==(n=s(i[r],t))&&i[r].splice(n,1);return this},a.off=c("removeListener"),a.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},a.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},a.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},a.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},a.removeAllListeners=c("removeEvent"),a.emitEvent=function(e,t){var n,r,i,a,o=this.getListenersAsObject(e);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},a.trigger=c("emitEvent"),a.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},a.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=o,i},void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}(this||{})},function(e,t,n){var r=n(15),i=n(74);function a(e){e.onuploading&&this.on("uploading",e.onuploading),i.call(this,e)}var o=i.prototype,s=a.prototype=Object.create(o);s.doSend=function(){var e=this.options,t=e.headers,n=this.xhr=new XMLHttpRequest;if("multipart/form-data"===t["Content-Type"]){delete t["Content-Type"],n.upload.onprogress=this.onProgress.bind(this),n.upload.onload=this.onProgress.bind(this);var i=e.data;e.data=new window.FormData,i&&r.getKeys(i,e.putFileAtEnd).forEach((function(t){var n=i[t];n.tagName&&"INPUT"===n.tagName.toUpperCase()?"file"===n.type&&[].forEach.call(n.files,(function(t){e.data.append(r.dataset(n,"name")||n.name||t.name||"file-"+r.uniqueID(),t)})):e.data.append(t,n)}))}else t["x-nos-token"]&&(n.upload.onprogress=this.onProgress.bind(this),n.upload.onload=this.onProgress.bind(this));n.onreadystatechange=this.onStateChange.bind(this),0!==e.timeout&&(this.timer=setTimeout(this.onTimeout.bind(this),e.timeout)),n.open(e.method,e.url,!e.sync),Object.keys(t).forEach((function(e){n.setRequestHeader(e,t[e])})),e.cookie&&"withCredentials"in n&&(n.withCredentials=!0),n.send(e.data),this.afterSend()},s.onProgress=function(e){e.lengthComputable&&e.loaded<=e.total&&this.emit("uploading",e)},s.onStateChange=function(){var e,t=this.xhr;4===t.readyState&&(e={status:t.status,result:t.responseText||""},this.onLoad(e))},s.getResponseHeader=function(e){var t=this.xhr;return t?t.getResponseHeader(e):""},s.destroy=function(){clearTimeout(this.timer);try{this.xhr.onreadystatechange=r.f,this.xhr.abort()}catch(e){console.log("error:","ignore error ajax destroy,",e)}o.destroy.call(this)},e.exports=a},function(e,t,n){n(213).polyfill(),n(5).isBrowser=!0},,,,,,,,function(e,t){e.exports=function(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString},function(e,t,n){var r=n(41);function i(){}i.typeMap={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,g2:12,custom:100};var a=i.typeReverseMap={0:"text",1:"image",2:"audio",3:"video",4:"geo",5:"notification",6:"file",10:"tip",11:"robot",12:"g2",100:"custom"};i.validTypes=Object.keys(i.typeMap),i.setFlow=function(e,t){var n=t===e.from;n&&t===e.to&&(n=r.deviceId===e.fromDeviceId),e.flow=n?"out":"in","robot"===e.type&&e.content&&e.content.msgOut&&(e.flow="in")},i.getType=function(e){var t=e.type;return a[t]||t},e.exports=i},function(module,exports,__webpack_require__){(function(global,module){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;function getGlobal(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==global?global:{}}var root=getGlobal(),io=module.exports;void 0===root.location&&(root.location=null),root.io?module&&(module.exports=io=root.io):root.io=io,function(){var e,t,n;e=module.exports,t=root,n=e,n.version="0.9.11",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,r){var i,a,o=n.util.parseUri(e);t&&t.location&&(o.protocol=o.protocol||t.location.protocol.slice(0,-1),o.host=o.host||(t.document?t.document.domain:t.location.hostname),o.port=o.port||t.location.port),i=n.util.uniqueUri(o);var s={host:o.ipv6uri?"["+o.host+"]":o.host,secure:"https"===o.protocol,port:o.port||("https"===o.protocol?443:80),query:o.query||""};return n.util.merge(s,r),!s["force new connection"]&&n.sockets[i]||(a=new n.Socket(s)),!s["force new connection"]&&a&&(n.sockets[i]=a),(a=a||n.sockets[i]).of(o.path.length>1?o.path:"")},function(e,t){var n=e.util={},r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){var t=e,n=e.indexOf("["),a=e.indexOf("]");-1!=n&&-1!=a&&(e=e.substring(0,n)+e.substring(n,a).replace(/:/g,";")+e.substring(a,e.length));for(var o=r.exec(e||""),s={},c=14;c--;)s[i[c]]=o[c]||"";return-1!=n&&-1!=a&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s},n.uniqueUri=function(e){var n=e.protocol,r=e.host,i=e.port;return"document"in t&&t.document?(r=r||document.domain,i=i||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(r=r||"localhost",i||"https"!=n||(i=443)),(n||"http")+"://"+r+":"+(i||80)},n.query=function(e,t){var r=n.chunkQuery(e||""),i=[];for(var a in n.merge(r,n.chunkQuery(t||"")),r)r.hasOwnProperty(a)&&i.push(a+"="+r[a]);return i.length?"?"+i.join("&"):""},n.chunkQuery=function(e){for(var t,n={},r=e.split("&"),i=0,a=r.length;i<a;++i)(t=r[i].split("="))[0]&&(n[t[0]]=t[1]);return n};var a=!1;n.load=function(e){if("undefined"!=typeof document&&document&&"complete"===document.readyState||a)return e();n.on(t,"load",e,!1)},n.on=function(e,t,n,r){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,r)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new(root[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}return null},void 0!==root&&n.load((function(){a=!0})),n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts)return e();n.load((function(){setTimeout(e,100)}))},n.merge=function(e,t,r,i){var a,o=i||[],s=void 0===r?2:r;for(a in t)t.hasOwnProperty(a)&&n.indexOf(o,a)<0&&("object"==typeof e[a]&&s?n.merge(e[a],t[a],s-1,o):(e[a]=t[a],o.push(t[a])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.intersect=function(e,t){for(var r=[],i=e.length>t.length?e:t,a=e.length>t.length?t:e,o=0,s=a.length;o<s;o++)~n.indexOf(i,a[o])&&r.push(a[o]);return r},n.indexOf=function(e,t,n){var r=e.length;for(n=n<0?n+r<0?0:n+r:n||0;n<r&&e[n]!==t;n++);return r<=n?-1:n},n.toArray=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(e){return!1}return null!=e.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(void 0!==io?io:module.exports,root),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){var n=this;function r(){n.removeListener(e,r),t.apply(this,arguments)}return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var r=this.$events[e];if(t.util.isArray(r)){for(var i=-1,a=0,o=r.length;a<o;a++)if(r[a]===n||r[a].listener&&r[a].listener===n){i=a;break}if(i<0)return this;r.splice(i,1),r.length||delete this.$events[e]}else(r===n||r.listener&&r.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return void 0===e?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,r);else{if(!t.util.isArray(n))return!1;for(var i=n.slice(),a=0,o=i.length;a<o;a++)i[a].apply(this,r)}return!0}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(exports,nativeJSON){if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,(function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function str(e,t){var n,r,i,a,o,s=gap,c=t[e];switch(c instanceof Date&&(c=date(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,n=0;n<a;n+=1)o[n]=str(n,c)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],c))&&o.push(quote(r)+(gap?": ":":")+i);else for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(i=str(r,c))&&o.push(quote(r)+(gap?": ":":")+i);return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("socket.io:: replacer cannot JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(e,t,i)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("socket.io:: reviver cannot JSON.parse")}}(void 0!==io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var n=e.parser={},r=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],i=n.reasons=["transport not supported","client not handshaken","unauthorized"],a=n.advice=["reconnect"],o=t.JSON,s=t.util.indexOf;n.encodePacket=function(e){var t=s(r,e.type),n=e.id||"",c=e.endpoint||"",u=e.ack,l=null;switch(e.type){case"error":var m=e.reason?s(i,e.reason):"",d=e.advice?s(a,e.advice):"";""===m&&""===d||(l=m+(""!==d?"+"+d:""));break;case"message":""!==e.data&&(l=e.data);break;case"event":var p={name:e.name};e.args&&e.args.length&&(p.args=e.args),l=o.stringify(p);break;case"json":l=o.stringify(e.data);break;case"connect":e.qs&&(l=e.qs);break;case"ack":l=e.ackId+(e.args&&e.args.length?"+"+o.stringify(e.args):"")}var f=[t,n+("data"==u?"+":""),c];return null!=l&&f.push(l),f.join(":")},n.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var n=0,r=e.length;n<r;n++)t+="\ufffd"+e[n].length+"\ufffd"+e[n];return t};var c=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){if(!(s=e.match(c)))return{};var t=s[2]||"",n=(e=s[5]||"",{type:r[s[1]],endpoint:s[4]||""});switch(t&&(n.id=t,s[3]?n.ack="data":n.ack=!0),n.type){case"error":var s=e.split("+");n.reason=i[s[0]]||"",n.advice=a[s[1]]||"";break;case"message":n.data=e||"";break;case"event":try{var u=o.parse(e);n.name=u.name,n.args=u.args}catch(e){}n.args=n.args||[];break;case"json":try{n.data=o.parse(e)}catch(e){}break;case"connect":n.qs=e||"";break;case"ack":if((s=e.match(/^([0-9]+)(\+)?(.*)/))&&(n.ackId=s[1],n.args=[],s[3]))try{n.args=s[3]?o.parse(s[3]):[]}catch(e){}}return n},n.decodePayload=function(e){var t=function(e,t){for(var n=0,r=e;r<t.length;r++){if("\ufffd"==t.charAt(r))return n;n++}return n};if("\ufffd"==e.charAt(0)){for(var r=[],i=1,a="";i<e.length;i++)if("\ufffd"==e.charAt(i)){var o=e.substr(i+1).substr(0,a);if("\ufffd"!=e.charAt(i+1+Number(a))&&i+1+Number(a)!=e.length){var s=Number(a);l=t(i+s+1,e),o=e.substr(i+1).substr(0,s+l),i+=l}r.push(n.decodePacket(o)),i+=Number(a)+1,a=""}else a+=e.charAt(i);return r}return[n.decodePacket(e)]}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.heartbeats=function(){return!0},n.prototype.onData=function(e){if(this!==this.socket.transport)return this;if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==e){var n=t.parser.decodePayload(e);if(n&&n.length)for(var r=0,i=n.length;r<i;r++)this.onPacket(n[r])}return this},n.prototype.onPacket=function(e){return this.socket.setHeartbeatTimeout(),"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),"error"==e.type&&"reconnect"==e.advice&&(this.isOpen=!1),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout((function(){e.onDisconnect()}),this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket?(this.socket.transport===this?this.socket.onDisconnect():this.socket.setBuffer(!1),this):this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.isOpen=!1,this.socket.transport===this?this.socket.onClose():this.socket.setBuffer(!1),this.onDisconnect(),this.onDisconnectDone instanceof Function&&this.onDisconnectDone(null),this.onConnectionOver instanceof Function&&this.onConnectionOver(null)},n.prototype.onDisconnectDone=function(){},n.prototype.onConnectionOver=function(){},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(e,t,n){function r(e){if(this.options={port:80,secure:!1,document:"document"in n&&document,resource:"socket.io",transports:e.transports||t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var r=this;t.util.on(n,"beforeunload",(function(){r.disconnectSync()}),!1)}this.options["auto connect"]&&this.connect()}function i(){}e.Socket=r,t.util.mixin(r,t.EventEmitter),r.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},r.prototype.publish=function(){var e;for(var t in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t)).$emit.apply(e,arguments)},r.prototype.handshake=function(e){var n=this,r=this.options;function a(t){t instanceof Error?(n.connecting=!1,n.onError(t.message)):e.apply(null,t.split(":"))}var o=["http"+(r.secure?"s":"")+":/",r.host+":"+r.port,r.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS&&"undefined"!=typeof document&&document){var s=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=o+"&jsonp="+t.j.length,c.onreadystatechange=function(){"loaded"==this.readyState&&c.parentNode&&(c.parentNode.removeChild(c),n.connecting=!1,!n.reconnecting&&n.onError("Server down or port not open"),n.publish("handshake_failed"))},s.parentNode.insertBefore(c,s),t.j.push((function(e){a(e),c.parentNode.removeChild(c)}))}else{var u=t.util.request();u.open("GET",o,!0),u.timeout=1e4,this.isXDomain()&&(u.withCredentials=!0),u.onreadystatechange=function(){4==u.readyState&&(u.onreadystatechange=i,200==u.status?a(u.responseText):403==u.status?(n.connecting=!1,n.onError(u.responseText),n.publish("handshake_failed")):(n.connecting=!1,!n.reconnecting&&n.onError(u.responseText),n.publish("handshake_failed")))},u.ontimeout=function(e){n.connecting=!1,!n.reconnecting&&n.onError(u.responseText),n.publish("handshake_failed")},u.send(null)}},r.prototype.connect=function(e){if(this.connecting)return this;var n=this;return n.connecting=!0,this.handshake((function(r,i,a,o){n.sessionid=r,n.closeTimeout=1e3*a,n.heartbeatTimeout=1e3*i,n.transports||(n.transports=n.origTransports=o?t.util.intersect(o.split(","),n.options.transports):n.options.transports),n.setHeartbeatTimeout(),n.once("connect",(function(){clearTimeout(n.connectTimeoutTimer),n.connectTimeoutTimer=null,e&&"function"==typeof e&&e()})),n.doConnect()})),this},r.prototype.doConnect=function(){var e=this;if(e.transport&&e.transport.clearTimeouts(),e.transport=e.getTransport(e.transports),!e.transport)return e.publish("connect_failed");e.transport.ready(e,(function(){e.connecting=!0,e.publish("connecting",e.transport.name),e.transport.open(),e.options["connect timeout"]&&(e.connectTimeoutTimer&&clearTimeout(e.connectTimeoutTimer),e.connectTimeoutTimer=setTimeout(e.tryNextTransport.bind(e),e.options["connect timeout"]))}))},r.prototype.getTransport=function(e){for(var n,r=e||this.transports,i=0;n=r[i];i++)if(t.Transport[n]&&t.Transport[n].check(this)&&(!this.isXDomain()||t.Transport[n].xdomainCheck(this)))return new t.Transport[n](this,this.sessionid);return null},r.prototype.tryNextTransport=function(){if(!this.connected&&(this.connecting=!1,this.options["try multiple transports"])){for(var e=this.transports;e.length>0&&e.splice(0,1)[0]!=this.transport.name;);e.length?this.doConnect():this.publish("connect_failed")}},r.prototype.setHeartbeatTimeout=function(){if(clearTimeout(this.heartbeatTimeoutTimer),!this.transport||this.transport.heartbeats()){var e=this;this.heartbeatTimeoutTimer=setTimeout((function(){e.transport&&e.transport.onClose()}),this.heartbeatTimeout)}},r.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},r.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.options.manualFlush||this.flushBuffer())},r.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},r.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},r.prototype.disconnectSync=function(){var e=t.util.request(),n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,!1),e.send(null),this.onDisconnect("booted")},r.prototype.isXDomain=function(){var e=n&&n.location||{},t=e.port||("https:"==e.protocol?443:80);return this.options.host!==e.hostname||this.options.port!=t},r.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},r.prototype.onOpen=function(){this.open=!0},r.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},r.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},r.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},r.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(t||n)&&(this.transport.close(),this.transport.clearTimeouts(),t&&(this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect()),n&&(this.connectTimeoutTimer&&clearTimeout(this.connectTimeoutTimer),this.tryNextTransport()))},r.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],r=this.options["reconnection limit"];function i(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer),e.removeListener("connect_failed",a),e.removeListener("connect",a),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=n}function a(){if(e.reconnecting)return e.connected?i():e.connecting&&e.reconnecting?e.reconnectionTimer=setTimeout(a,1e3):void(e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),i()):(e.on("connect_failed",a),e.options["try multiple transports"]=!0,e.transports=e.origTransports,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<r&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(a,e.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(a,this.reconnectionDelay),this.on("connect",a)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports,root),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new r(this,"json"),this.ackPackets=0,this.acks={}}function r(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],r={type:"event",name:e};return"function"==typeof n&&(r.id=++this.ackPackets,r.ack="data",this.acks[r.id]=n,t=t.slice(0,t.length-1)),r.args=t,this.packet(r)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){var n=this;function r(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var i=["message",e.data];"data"==e.ack?i.push(r):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,i);break;case"event":i=[e.name].concat(e.args),"data"==e.ack&&i.push(r),this.$emit.apply(this,i);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":console.error("SocketIO on packet error: ",e),e.advice?this.socket.onError(e):"unauthorized"===e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},r.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},r.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),function(e,t,n){function r(e){t.Transport.apply(this,arguments)}e.websocket=r,t.util.inherit(r,t.Transport),r.prototype.name="websocket",r.prototype.open=function(){var e,r=t.util.query(this.socket.options.query),i=this;return e||(e=n.MozWebSocket||n.WebSocket),this.websocket=new e(this.prepareUrl()+r),this.websocket.onopen=function(){i.onOpen(),i.socket.setBuffer(!1)},this.websocket.onmessage=function(e){i.onData(e.data)},this.websocket.onclose=function(){i.socket.setBuffer(!0),i.onClose()},this.websocket.onerror=function(e){i.onError(e)},this},t.util.ua.iDevice?r.prototype.send=function(e){var t=this;return setTimeout((function(){t.websocket.send(e)}),0),this}:r.prototype.send=function(e){return this.websocket.send(e),this},r.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++)this.packet(e[t]);return this},r.prototype.close=function(){return this.websocket.close(),this},r.prototype.onError=function(e){this.socket.onError(e)},r.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},r.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},r.xdomainCheck=function(){return!0},t.transports.push("websocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,root),function(e,t,n){function r(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function i(){}e.XHR=r,t.util.inherit(r,t.Transport),r.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},r.prototype.payload=function(e){for(var n=[],r=0,i=e.length;r<i;r++)n.push(t.parser.encodePacket(e[r]));this.send(t.parser.encodePayload(n))},r.prototype.send=function(e){return this.post(e),this},r.prototype.post=function(e){var t=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=i,t.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=i,t.posting=!1,200==this.status?t.socket.setBuffer(!1):t.onClose())},this.sendXHR.send(e)},r.prototype.close=function(){return this.onClose(),this},r.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),r=t.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(e||"GET",this.prepareUrl()+r,!0),"POST"==e)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(e){}return n},r.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},r.check=function(e,r){try{var i=t.util.request(r),a=n.XDomainRequest&&i instanceof XDomainRequest,o=e&&e.options&&e.options.secure?"https:":"http:",s=n.location&&o!=n.location.protocol;if(i&&(!a||!s))return!0}catch(e){}return!1},r.xdomainCheck=function(e){return r.check(e,!0)}}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,root),function(e,t,n){function r(){t.Transport.XHR.apply(this,arguments)}function i(){}e["xhr-polling"]=r,t.util.inherit(r,t.Transport.XHR),t.util.merge(r,t.Transport.XHR),r.prototype.name="xhr-polling",r.prototype.heartbeats=function(){return!1},r.prototype.open=function(){return t.Transport.XHR.prototype.open.call(this),!1},r.prototype.get=function(){if(this.isOpen){var e=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){this.onload=i,this.onerror=i,e.retryCounter=1,e.onData(this.responseText),e.get()},this.xhr.onerror=function(){e.retryCounter++,!e.retryCounter||e.retryCounter>3?e.onClose():e.get()}):this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=i,200==this.status?(e.onData(this.responseText),e.get()):e.onClose())},this.xhr.send(null)}},r.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(e){}this.xhr=null}},r.prototype.ready=function(e,n){var r=this;t.util.defer((function(){n.call(r)}))},t.transports.push("xhr-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,root),__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return io}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}).call(this,__webpack_require__(31),__webpack_require__(326)(module))},function(e,t,n){var r={1:"ROOM_CLOSE",2:"ROOM_JOIN",3:"INVITE",4:"CANCEL_INVITE",5:"REJECT",6:"ACCEPT",7:"LEAVE",8:"CONTROL"},i={1:"accid",2:"uid",3:"createTime",4:"expireTime",5:"web_uid"},a={10404:"ROOM_NOT_EXISTS",10405:"ROOM_HAS_EXISTS",10406:"ROOM_MEMBER_NOT_EXISTS",10407:"ROOM_MEMBER_HAS_EXISTS",10408:"INVITE_NOT_EXISTS",10409:"INVITE_HAS_REJECT",10410:"INVITE_HAS_ACCEPT",10201:"PEER_NIM_OFFLINE",10202:"PEER_PUSH_OFFLINE",10419:"ROOM_MEMBER_EXCEED",10420:"ROOM_MEMBER_HAS_EXISTS_OTHER_CLIENT",10417:"UID_CONFLICT"};e.exports={parseAvSignalType:function(e){return r[e]||e},parseAvSignalMember:function(e){var t={};return Object.keys(e).forEach((function(n){t[i[n]]=e[n]})),t},parseAvSignalError:function(e){return e.message=a[e.code]||e.message||e,e}}},function(e,t,n){var r=n(0),i={stripmeta:0,blur:2,quality:3,crop:4,rotate:5,thumbnail:7,interlace:9},a={0:"stripmeta",1:"type",2:"blur",3:"quality",4:"crop",5:"rotate",6:"pixel",7:"thumbnail",8:"watermark",9:"interlace",10:"tmp"};function o(e){r.verifyOptions(e,"type","image::ImageOp"),r.verifyParamValid("type",e.type,o.validTypes,"image::ImageOp"),r.merge(this,e),this.type=i[e.type]}o.validTypes=Object.keys(i),o.reverse=function(e){var t=r.copy(e);return t.type=a[t.type],t},o.reverseImageOps=function(e){return e.map((function(e){return o.reverse(e)}))},e.exports=o},function(e,t,n){var r=n(0),i={fromDataURL:function(e){var t=r.getGlobal(),n=void 0;n=e.split(",")[0].indexOf("base64")>=0?t.atob(e.split(",")[1]):t.decodeURIComponent(e.split(",")[1]);for(var i=e.split(",")[0].split(":")[1].split(";")[0],a=new Uint8Array(n.length),o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return new t.Blob([a],{type:i})}};e.exports=i},function(e,t,n){var r=n(0),i={file:{md5:"$(Etag)",size:"$(ObjectSize)"},image:{md5:"$(Etag)",size:"$(ObjectSize)",w:"$(ImageInfo.Width)",h:"$(ImageInfo.Height)",orientation:"$(ImageInfo.Orientation)"},audio:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Audio.Duration)"},video:{md5:"$(Etag)",size:"$(ObjectSize)",dur:"$(AVinfo.Video.Duration)",w:"$(AVinfo.Video.Width)",h:"$(AVinfo.Video.Height)"}},a={genResponseBody:function(e){return i[e=e||"file"]},parseResponse:function(e,t){r.notundef(e.size)&&(e.size=+e.size),r.notundef(e.w)&&(e.w=+e.w),r.notundef(e.h)&&(e.h=+e.h),r.notundef(e.dur)&&(e.dur=+e.dur);var n=e.orientation;if(r.notundef(n)&&(delete e.orientation,t&&("right, top"===n||"left, bottom"===n))){var i=e.w;e.w=e.h,e.h=i}return e}};e.exports=a},,,,,,,,,,,,,,,function(e,t,n){var r;e.exports=(r=n(61),n(302),void(r.lib.Cipher||function(e){var t=r,n=t.lib,i=n.Base,a=n.WordArray,o=n.BufferedBlockAlgorithm,s=t.enc,c=(s.Utf8,s.Base64),u=t.algo.EvpKDF,l=n.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?v:y}return function(t){return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}}}()}),m=(n.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),t.mode={}),d=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=m.CBC=function(){var e=d.extend();function t(e,t,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var a=0;a<n;a++)e[t+a]^=r[a]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize;t.call(this,e,n,i),r.encryptBlock(e,n),this._prevBlock=e.slice(n,n+i)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,i=r.blockSize,a=e.slice(n,n+i);r.decryptBlock(e,n),t.call(this,e,n,i),this._prevBlock=a}}),e}(),f=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(i);var c=a.create(o,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},g=(n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:f}),reset:function(){var e;l.reset.call(this);var t=this.cfg,n=t.iv,r=t.mode;this._xformMode==this._ENC_XFORM_MODE?e=r.createEncryptor:(e=r.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,n&&n.words):(this._mode=e.call(r,this,n&&n.words),this._mode.__creator=e)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e,t=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(t.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),t.unpad(e)),e},blockSize:4}),n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),h=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;return(n?a.create([1398893684,1701076831]).concat(n).concat(t):t).toString(c)},parse:function(e){var t,n=c.parse(e),r=n.words;return 1398893684==r[0]&&1701076831==r[1]&&(t=a.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),g.create({ciphertext:n,salt:t})}},y=n.SerializableCipher=i.extend({cfg:i.extend({format:h}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r),a=i.finalize(t),o=i.cfg;return g.create({ciphertext:a,key:n,iv:o.iv,algorithm:e,mode:o.mode,padding:o.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){r||(r=a.random(8));var i=u.create({keySize:t+n}).compute(e,r),o=a.create(i.words.slice(t),4*n);return i.sigBytes=4*t,g.create({key:i,iv:o,salt:r})}},v=n.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:b}),encrypt:function(e,t,n,r){var i=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=i.iv;var a=y.encrypt.call(this,e,t,i.key,r);return a.mixIn(i),a},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var i=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);return r.iv=i.iv,y.decrypt.call(this,e,t,i.key,r)}})}()))},function(e,t,n){var r=n(76),i=n(0),a=i.notundef,o={"-2":"unset","-1":"restricted",0:"common",1:"owner",2:"manager",3:"guest",4:"anonymous"};function s(e){a(e.nick)&&(this.nick=""+e.nick),a(e.avatar)&&(this.avatar=""+e.avatar),a(e.custom)&&(this.custom=""+e.custom)}s.reverse=function(e){var t=i.copy(e);return a(t.chatroomId)&&(t.chatroomId=""+t.chatroomId),a(t.avatar)&&(t.avatar=(0,r.genPrivateUrl)(t.avatar)),a(t.type)&&(t.type=o[t.type]),a(t.level)&&(t.level=+t.level),a(t.online)&&(t.online=1==+t.online),a(t.enterTime)&&(t.enterTime=+t.enterTime),a(t.guest)&&(t.guest=1==+t.guest),a(t.blacked)&&(t.blacked=1==+t.blacked),a(t.gaged)&&(t.gaged=1==+t.gaged),a(t.valid)&&(t.valid=1==+t.valid),a(t.updateTime)&&(t.updateTime=+t.updateTime),a(t.tempMuted)?t.tempMuted=1==+t.tempMuted:t.tempMuted=!1,a(t.tempMuteDuration)?t.tempMuteDuration=+t.tempMuteDuration:t.tempMuteDuration=0,t.online||delete t.enterTime,t.guest&&(t.type="guest",delete t.valid),"common"!==t.type&&delete t.level,delete t.guest,t},s.reverseMembers=function(e){return e.map((function(e){return s.reverse(e)}))},s.validTypes=Object.keys(o),s.typeReverseMap=o,e.exports=s},function(e,t,n){var r=n(16),i=n(312),a=n(184),o=n(84),s=n(77),c=n(0),u=n(210),l=n(187),m=n(40),d=n(306),p=n(305);e.exports=function(e){c.merge(e,{platform:r,xhr:i,io:a,naturalSort:o,deepAccess:s,util:c,support:u,blob:l,ajax:m,LoggerPlugin:d,usePlugin:p})}},function(e,t,n){var r=n(0),i=n(87),a=r.merge({},i.idMap,{auth:{id:2,login:3,kicked:5,logout:6,multiPortLogin:7,kick:8},user:{id:3,updatePushToken:1,appBackground:2,markInBlacklist:3,getBlacklist:4,markInMutelist:5,getMutelist:6,getRelations:8,getUsers:7,updateMyInfo:10,updateDonnop:15,syncMyInfo:109,syncUpdateMyInfo:110},notify:{id:4,markRead:3,syncOfflineMsgs:4,batchMarkRead:5,syncOfflineSysMsgs:6,syncOfflineNetcallMsgs:8,syncRoamingMsgs:9,syncMsgReceipts:12,syncRobots:15,syncBroadcastMsgs:16,syncSuperTeamRoamingMsgs:17,syncOfflineSuperTeamSysMsgs:18,syncDeleteSuperTeamMsgOfflineRoaming:19,syncDeleteMsgSelf:21,syncSessionsWithMoreRoaming:22,syncStickTopSessions:23,syncSessionHistoryMsgsDelete:24},sync:{id:5,sync:1,syncTeamMembers:2,syncSuperTeamMembers:3},msg:{id:7,sendMsg:1,msg:2,sysMsg:3,getHistoryMsgs:6,sendCustomSysMsg:7,searchHistoryMsgs:8,deleteSessions:9,getSessions:10,syncSendMsg:101,sendMsgReceipt:11,msgReceipt:12,deleteMsg:13,msgDeleted:14,markSessionAck:16,markSessionAckBatch:25,broadcastMsg:17,clearServerHistoryMsgs:18,getServerSessions:19,getServerSession:20,updateServerSession:21,deleteServerSessions:22,deleteMsgSelf:23,deleteMsgSelfBatch:24,msgFtsInServer:26,onClearServerHistoryMsgs:118,syncUpdateServerSession:121,onDeleteMsgSelf:123,onDeleteMsgSelfBatch:124},msgExtend:{id:23,getThreadMsgs:1,getMsgsByIdServer:2,addQuickComment:3,deleteQuickComment:4,onQuickComment:5,onDeleteQuickComment:6,getQuickComments:7,addCollect:8,deleteCollects:9,updateCollect:10,getCollects:11,addStickTopSession:12,deleteStickTopSession:13,updateStickTopSession:14,addMsgPin:15,updateMsgPin:16,deleteMsgPin:17,onAddMsgPin:18,onUpdateMsgPin:19,onDeleteMsgPin:20,getMsgPins:21,syncAddQuickComment:103,syncDeleteQuickComment:104,syncAddStickTopSession:112,syncDeleteStickTopSession:113,syncUpdateStickTopSession:114,syncAddMsgPin:115,syncUpdateMsgPin:116,syncDeleteMsgPin:117},team:{id:8,createTeam:1,sendTeamMsg:2,teamMsg:3,teamMsgs:4,addTeamMembers:5,removeTeamMembers:6,updateTeam:7,leaveTeam:8,getTeam:9,getTeams:10,getTeamMembers:11,dismissTeam:12,applyTeam:13,passTeamApply:14,rejectTeamApply:15,addTeamManagers:16,removeTeamManagers:17,transferTeam:18,updateInfoInTeam:19,updateNickInTeam:20,acceptTeamInvite:21,rejectTeamInvite:22,getTeamHistoryMsgs:23,searchTeamHistoryMsgs:24,updateMuteStateInTeam:25,getMyTeamMembers:26,getMutedTeamMembers:27,sendTeamMsgReceipt:28,getTeamMsgReads:29,getTeamMsgReadAccounts:30,notifyTeamMsgReads:31,muteTeamAll:32,getTeamMemberInvitorAccid:33,getTeamsById:34,syncMyTeamMembers:126,syncTeams:109,syncTeamMembers:111,syncCreateTeam:101,syncSendTeamMsg:102,syncUpdateTeamMember:119},superTeam:{id:21,sendSuperTeamMsg:2,superTeamMsg:3,addSuperTeamMembers:5,removeSuperTeamMembers:6,leaveSuperTeam:7,updateSuperTeam:8,getSuperTeam:9,getSuperTeams:12,updateInfoInSuperTeam:10,getMySuperTeamMembers:11,getSuperTeamMembers:13,getSuperTeamHistoryMsgs:14,getSuperTeamMembersByJoinTime:15,sendSuperTeamCustomSysMsg:16,deleteSuperTeamMsg:17,superTeamMsgDelete:18,superTeamCustomSysMsg:19,applySuperTeam:20,passSuperTeamApply:21,rejectSuperTeamApply:22,acceptSuperTeamInvite:23,rejectSuperTeamInvite:24,markSuperTeamSessionAck:25,addSuperTeamManagers:26,removeSuperTeamManagers:27,updateSuperTeamMute:28,updateSuperTeamMembersMute:29,updateNickInSuperTeam:30,transferSuperTeam:31,markSuperTeamSessionsAck:32,getSuperTeamMembersByAccounts:33,getMutedSuperTeamMembers:34,syncMySuperTeamMembers:111,syncSuperTeams:109,syncSuperTeamMembers:113,syncCreateSuperTeam:101,syncSendSuperTeamMsg:102,syncUpdateSuperTeamMember:110,syncDeleteSuperTeamMsg:117},friend:{id:12,friendRequest:1,syncFriendRequest:101,deleteFriend:2,syncDeleteFriend:102,updateFriend:3,syncUpdateFriend:103,getFriends:4},chatroom:{id:13,getChatroomAddress:1},filter:{id:101,sendFilterMsg:1,filterMsg:2,filterSysMsg:3,sendFilterCustomSysMsg:7},eventService:{id:14,publishEvent:1,pushEvent:2,subscribeEvent:3,unSubscribeEventsByAccounts:4,unSubscribeEventsByType:5,querySubscribeEventsByAccounts:6,querySubscribeEventsByType:7,pushEvents:9},proxyService:{id:22,httpProxy:1,onProxyMsg:2}}),o=r.merge({},i.cmdConfig,{login:{sid:a.auth.id,cid:a.auth.login,params:[{type:"Property",name:"login"}]},logout:{sid:a.auth.id,cid:a.auth.logout},kick:{sid:a.auth.id,cid:a.auth.kick,params:[{type:"StrArray",name:"deviceIds"}]},updatePushToken:{sid:a.user.id,cid:a.user.updatePushToken,params:[{type:"String",name:"tokenName"},{type:"String",name:"token"},{type:"int",name:"pushkit"}]},appBackground:{sid:a.user.id,cid:a.user.appBackground,params:[{type:"bool",name:"isBackground"},{type:"Int",name:"badge"}]},markInBlacklist:{sid:a.user.id,cid:a.user.markInBlacklist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getBlacklist:{sid:a.user.id,cid:a.user.getBlacklist,params:[{type:"long",name:"time"}]},markInMutelist:{sid:a.user.id,cid:a.user.markInMutelist,params:[{type:"String",name:"account"},{type:"bool",name:"isAdd"}]},getMutelist:{sid:a.user.id,cid:a.user.getMutelist,params:[{type:"long",name:"time"}]},getRelations:{sid:a.user.id,cid:a.user.getRelations,params:[{type:"long",name:"timetag"}]},getUsers:{sid:a.user.id,cid:a.user.getUsers,params:[{type:"StrArray",name:"accounts"}]},updateMyInfo:{sid:a.user.id,cid:a.user.updateMyInfo,params:[{type:"Property",name:"user"}]},updateDonnop:{sid:a.user.id,cid:a.user.updateDonnop,params:[{type:"Property",name:"donnop"}]},markRead:{sid:a.notify.id,cid:a.notify.markRead,params:[{type:"long",name:"id"},{type:"ph",name:"ph"}]},batchMarkRead:{sid:a.notify.id,cid:a.notify.batchMarkRead,params:[{type:"byte",name:"sid"},{type:"byte",name:"cid"},{type:"LongArray",name:"ids"}]},sync:{sid:a.sync.id,cid:a.sync.sync,params:[{type:"Property",name:"sync"}]},syncTeamMembers:{sid:a.sync.id,cid:a.sync.syncTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},syncSuperTeamMembers:{sid:a.sync.id,cid:a.sync.syncSuperTeamMembers,params:[{type:"LongLongMap",name:"sync"}]},sendMsg:{sid:a.msg.id,cid:a.msg.sendMsg,params:[{type:"Property",name:"msg"}]},getHistoryMsgs:{sid:a.msg.id,cid:a.msg.getHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},sendCustomSysMsg:{sid:a.msg.id,cid:a.msg.sendCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},searchHistoryMsgs:{sid:a.msg.id,cid:a.msg.searchHistoryMsgs,params:[{type:"String",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSessions:{sid:a.msg.id,cid:a.msg.getSessions,params:[{type:"long",name:"time"}]},deleteSessions:{sid:a.msg.id,cid:a.msg.deleteSessions,params:[{type:"StrArray",name:"sessions"}]},sendMsgReceipt:{sid:a.msg.id,cid:a.msg.sendMsgReceipt,params:[{type:"Property",name:"msgReceipt"}]},deleteMsg:{sid:a.msg.id,cid:a.msg.deleteMsg,params:[{type:"Property",name:"sysMsg"}]},markSessionAck:{sid:a.msg.id,cid:a.msg.markSessionAck,params:[{type:"byte",name:"scene"},{type:"String",name:"to"},{type:"long",name:"timetag"}]},markSessionAckBatch:{sid:a.msg.id,cid:a.msg.markSessionAckBatch,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},clearServerHistoryMsgs:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParams"}]},clearServerHistoryMsgsWithSync:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs,params:[{type:"Property",name:"clearMsgsParamsWithSync"}]},msgFtsInServer:{sid:a.msg.id,cid:a.msg.msgFtsInServer,params:[{type:"Property",name:"msgFullSearchRequestTag"}]},onClearServerHistoryMsgs:{sid:a.msg.id,cid:a.msg.clearServerHistoryMsgs},getServerSessions:{sid:a.msg.id,cid:a.msg.getServerSessions,params:[{type:"Property",name:"sessionReqTag"}]},getServerSession:{sid:a.msg.id,cid:a.msg.getServerSession,params:[{type:"Property",name:"session"}]},updateServerSession:{sid:a.msg.id,cid:a.msg.updateServerSession,params:[{type:"Property",name:"session"}]},deleteServerSessions:{sid:a.msg.id,cid:a.msg.deleteServerSessions,params:[{type:"PropertyArray",name:"sessions",entity:"session"}]},deleteMsgSelf:{sid:a.msg.id,cid:a.msg.deleteMsgSelf,params:[{type:"Property",name:"deleteMsgSelfTag"}]},deleteMsgSelfBatch:{sid:a.msg.id,cid:a.msg.deleteMsgSelfBatch,params:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},onDeleteMsgSelf:{sid:a.msg.id,cid:a.msg.onDeleteMsgSelf},onDeleteMsgSelfBatch:{sid:a.msg.id,cid:a.msg.onDeleteMsgSelfBatch},sendSuperTeamMsg:{sid:a.superTeam.id,cid:a.superTeam.sendSuperTeamMsg,params:[{type:"Property",name:"msg"}]},addSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.addSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},removeSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.removeSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},leaveSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.leaveSuperTeam,params:[{type:"long",name:"teamId"}]},updateSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeam,params:[{type:"Property",name:"team"}]},getSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeam,params:[{type:"long",name:"teamId"}]},getSuperTeams:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeams,params:[{type:"long",name:"timetag"}]},getSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},updateInfoInSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateInfoInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},getSuperTeamHistoryMsgs:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},applySuperTeam:{sid:a.superTeam.id,cid:a.superTeam.applySuperTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passSuperTeamApply:{sid:a.superTeam.id,cid:a.superTeam.passSuperTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamApply:{sid:a.superTeam.id,cid:a.superTeam.rejectSuperTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},acceptSuperTeamInvite:{sid:a.superTeam.id,cid:a.superTeam.acceptSuperTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectSuperTeamInvite:{sid:a.superTeam.id,cid:a.superTeam.rejectSuperTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},markSuperTeamSessionAck:{sid:a.superTeam.id,cid:a.superTeam.markSuperTeamSessionAck,params:[{type:"long",name:"to"},{type:"long",name:"timetag"}]},addSuperTeamManagers:{sid:a.superTeam.id,cid:a.superTeam.addSuperTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeSuperTeamManagers:{sid:a.superTeam.id,cid:a.superTeam.removeSuperTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateSuperTeamMute:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeamMute,params:[{type:"long",name:"teamId"},{type:"int",name:"mute"}]},updateSuperTeamMembersMute:{sid:a.superTeam.id,cid:a.superTeam.updateSuperTeamMembersMute,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"int",name:"mute"}]},updateNickInSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.updateNickInSuperTeam,params:[{type:"Property",name:"superTeamMember"}]},transferSuperTeam:{sid:a.superTeam.id,cid:a.superTeam.transferSuperTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},markSuperTeamSessionsAck:{sid:a.superTeam.id,cid:a.superTeam.markSuperTeamSessionsAck,params:[{type:"PropertyArray",name:"sessionAckTags",entity:"sessionAckTag"}]},getSuperTeamMembersByJoinTime:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembersByJoinTime,params:[{type:"long",name:"teamId"},{type:"long",name:"joinTime"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},getSuperTeamMembersByAccounts:{sid:a.superTeam.id,cid:a.superTeam.getSuperTeamMembersByAccounts,params:[{type:"StrArray",name:"memberIds"}]},getMutedSuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getMutedSuperTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"joinTime"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},sendSuperTeamCustomSysMsg:{sid:a.superTeam.id,cid:a.superTeam.sendSuperTeamCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},deleteSuperTeamMsg:{sid:a.superTeam.id,cid:a.superTeam.deleteSuperTeamMsg,params:[{type:"Property",name:"sysMsg"}]},getMySuperTeamMembers:{sid:a.superTeam.id,cid:a.superTeam.getMySuperTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},createTeam:{sid:a.team.id,cid:a.team.createTeam,params:[{type:"Property",name:"team"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"}]},sendTeamMsg:{sid:a.team.id,cid:a.team.sendTeamMsg,params:[{type:"Property",name:"msg"}]},addTeamMembers:{sid:a.team.id,cid:a.team.addTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"},{type:"String",name:"ps"},{type:"String",name:"attach"}]},removeTeamMembers:{sid:a.team.id,cid:a.team.removeTeamMembers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},updateTeam:{sid:a.team.id,cid:a.team.updateTeam,params:[{type:"Property",name:"team"}]},leaveTeam:{sid:a.team.id,cid:a.team.leaveTeam,params:[{type:"long",name:"teamId"}]},getTeam:{sid:a.team.id,cid:a.team.getTeam,params:[{type:"long",name:"teamId"}]},getTeams:{sid:a.team.id,cid:a.team.getTeams,params:[{type:"long",name:"timetag"}]},getTeamsById:{sid:a.team.id,cid:a.team.getTeamsById,params:[{type:"longArray",name:"teamIds"}]},getTeamMembers:{sid:a.team.id,cid:a.team.getTeamMembers,params:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},dismissTeam:{sid:a.team.id,cid:a.team.dismissTeam,params:[{type:"long",name:"teamId"}]},applyTeam:{sid:a.team.id,cid:a.team.applyTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"ps"}]},passTeamApply:{sid:a.team.id,cid:a.team.passTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamApply:{sid:a.team.id,cid:a.team.rejectTeamApply,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},addTeamManagers:{sid:a.team.id,cid:a.team.addTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},removeTeamManagers:{sid:a.team.id,cid:a.team.removeTeamManagers,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},transferTeam:{sid:a.team.id,cid:a.team.transferTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"bool",name:"leave"}]},updateInfoInTeam:{sid:a.team.id,cid:a.team.updateInfoInTeam,params:[{type:"Property",name:"teamMember"}]},updateNickInTeam:{sid:a.team.id,cid:a.team.updateNickInTeam,params:[{type:"Property",name:"teamMember"}]},acceptTeamInvite:{sid:a.team.id,cid:a.team.acceptTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"}]},rejectTeamInvite:{sid:a.team.id,cid:a.team.rejectTeamInvite,params:[{type:"long",name:"teamId"},{type:"String",name:"from"},{type:"String",name:"ps"}]},getTeamHistoryMsgs:{sid:a.team.id,cid:a.team.getTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"long",name:"lastMsgId"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},searchTeamHistoryMsgs:{sid:a.team.id,cid:a.team.searchTeamHistoryMsgs,params:[{type:"long",name:"to"},{type:"long",name:"beginTime"},{type:"long",name:"endTime"},{type:"String",name:"keyword"},{type:"int",name:"limit"},{type:"bool",name:"reverse"}]},updateMuteStateInTeam:{sid:a.team.id,cid:a.team.updateMuteStateInTeam,params:[{type:"long",name:"teamId"},{type:"String",name:"account"},{type:"int",name:"mute"}]},getMyTeamMembers:{sid:a.team.id,cid:a.team.getMyTeamMembers,params:[{type:"LongArray",name:"teamIds"}]},getMutedTeamMembers:{sid:a.team.id,cid:a.team.getMutedTeamMembers,params:[{type:"long",name:"teamId"}]},sendTeamMsgReceipt:{sid:a.team.id,cid:a.team.sendTeamMsgReceipt,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReads:{sid:a.team.id,cid:a.team.getTeamMsgReads,params:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},getTeamMsgReadAccounts:{sid:a.team.id,cid:a.team.getTeamMsgReadAccounts,params:[{type:"Property",name:"teamMsgReceipt"}]},muteTeamAll:{sid:a.team.id,cid:a.team.muteTeamAll,params:[{type:"long",name:"teamId"},{type:"int",name:"mute"}]},getTeamMemberInvitorAccid:{sid:a.team.id,cid:a.team.getTeamMemberInvitorAccid,params:[{type:"long",name:"teamId"},{type:"StrArray",name:"accounts"}]},friendRequest:{sid:a.friend.id,cid:a.friend.friendRequest,params:[{type:"String",name:"account"},{type:"byte",name:"type"},{type:"String",name:"ps"}]},deleteFriend:{sid:a.friend.id,cid:a.friend.deleteFriend,params:[{type:"String",name:"account"},{type:"Property",name:"delFriendParams"}]},updateFriend:{sid:a.friend.id,cid:a.friend.updateFriend,params:[{type:"Property",name:"friend"}]},getFriends:{sid:a.friend.id,cid:a.friend.getFriends,params:[{type:"long",name:"timetag"}]},getChatroomAddress:{sid:a.chatroom.id,cid:a.chatroom.getChatroomAddress,params:[{type:"long",name:"chatroomId"},{type:"bool",name:"isWeixinApp"},{type:"number",name:"type"}]},sendFilterMsg:{sid:a.filter.id,cid:a.filter.sendFilterMsg,params:[{type:"Property",name:"msg"}]},sendFilterCustomSysMsg:{sid:a.filter.id,cid:a.filter.sendFilterCustomSysMsg,params:[{type:"Property",name:"sysMsg"}]},publishEvent:{sid:a.eventService.id,cid:a.eventService.publishEvent,params:[{type:"Property",name:"msgEvent"}]},pushEvent:{sid:a.eventService.id,cid:a.eventService.pushEvent},subscribeEvent:{sid:a.eventService.id,cid:a.eventService.subscribeEvent,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByAccounts:{sid:a.eventService.id,cid:a.eventService.unSubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},unSubscribeEventsByType:{sid:a.eventService.id,cid:a.eventService.unSubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},querySubscribeEventsByAccounts:{sid:a.eventService.id,cid:a.eventService.querySubscribeEventsByAccounts,params:[{type:"Property",name:"msgEventSubscribe"},{type:"StrArray",name:"accounts"}]},querySubscribeEventsByType:{sid:a.eventService.id,cid:a.eventService.querySubscribeEventsByType,params:[{type:"Property",name:"msgEventSubscribe"}]},pushEvents:{sid:a.eventService.id,cid:a.eventService.pushEvents},getThreadMsgs:{sid:a.msgExtend.id,cid:a.msgExtend.getThreadMsgs,params:[{type:"Property",name:"msg"},{type:"Property",name:"threadMsgReq"}]},getMsgsByIdServer:{sid:a.msgExtend.id,cid:a.msgExtend.getMsgsByIdServer,params:[{type:"PropertyArray",name:"reqMsgs",entity:"msg"}]},addQuickComment:{sid:a.msgExtend.id,cid:a.msgExtend.addQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},deleteQuickComment:{sid:a.msgExtend.id,cid:a.msgExtend.deleteQuickComment,params:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},getQuickComments:{sid:a.msgExtend.id,cid:a.msgExtend.getQuickComments,params:[{type:"PropertyArray",name:"commentReq",entity:"commentReq"}]},addCollect:{sid:a.msgExtend.id,cid:a.msgExtend.addCollect,params:[{type:"Property",name:"collect"}]},deleteCollects:{sid:a.msgExtend.id,cid:a.msgExtend.deleteCollects,params:[{type:"PropertyArray",name:"collectList",entity:"collect"}]},updateCollect:{sid:a.msgExtend.id,cid:a.msgExtend.updateCollect,params:[{type:"Property",name:"collect"}]},getCollects:{sid:a.msgExtend.id,cid:a.msgExtend.getCollects,params:[{type:"Property",name:"collectQuery"}]},addStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.addStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},updateStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.updateStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},deleteStickTopSession:{sid:a.msgExtend.id,cid:a.msgExtend.deleteStickTopSession,params:[{type:"Property",name:"stickTopSession"}]},addMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.addMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},updateMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.updateMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},deleteMsgPin:{sid:a.msgExtend.id,cid:a.msgExtend.deleteMsgPin,params:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"}]},getMsgPins:{sid:a.msgExtend.id,cid:a.msgExtend.getMsgPins,params:[{type:"Property",name:"msgPinReq"}]},httpProxy:{sid:a.proxyService.id,cid:a.proxyService.httpProxy,params:[{type:"Property",name:"proxyTag"}]}}),s=r.merge({},i.packetConfig,{"2_3":{service:"auth",cmd:"login",response:[{type:"Property",name:"loginRes"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"},{type:"Property",name:"aosPushInfo"}]},"2_5":{service:"auth",cmd:"kicked",response:[{type:"Number",name:"from"},{type:"Number",name:"reason"},{type:"String",name:"custom"},{type:"Number",name:"customClientType"}]},"2_6":{service:"auth",cmd:"logout"},"2_7":{service:"auth",cmd:"multiPortLogin",response:[{type:"Number",name:"state"},{type:"PropertyArray",name:"loginPorts",entity:"loginPort"}]},"2_8":{service:"auth",cmd:"kick",response:[{type:"StrArray",name:"deviceIds"}]},"3_1":{service:"user",cmd:"updatePushToken"},"3_2":{service:"user",cmd:"appBackground"},"3_3":{service:"user",cmd:"markInBlacklist"},"3_103":{service:"user",cmd:"syncMarkInBlacklist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_4":{service:"user",cmd:"getBlacklist",response:[{type:"StrArray",name:"blacklist"}]},"3_5":{service:"user",cmd:"markInMutelist"},"3_105":{service:"user",cmd:"syncMarkInMutelist",response:[{type:"String",name:"account"},{type:"Boolean",name:"isAdd"}]},"3_6":{service:"user",cmd:"getMutelist",response:[{type:"StrArray",name:"mutelist"}]},"3_8":{service:"user",cmd:"getRelations",response:[{type:"PropertyArray",name:"specialRelations",entity:"specialRelation"},{type:"Number",name:"timetag"}]},"3_7":{service:"user",cmd:"getUsers",response:[{type:"PropertyArray",name:"users",entity:"user"}]},"3_10":{service:"user",cmd:"updateMyInfo",response:[{type:"Number",name:"timetag"}]},"3_15":{service:"user",cmd:"updateDonnop",response:[{type:"Number",name:"timetag"}]},"3_115":{service:"user",cmd:"syncUpdateDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"3_109":{service:"user",cmd:"syncMyInfo",response:[{type:"Property",name:"user"},{type:"Number",name:"timetag"}]},"3_110":{service:"user",cmd:"syncUpdateMyInfo",response:[{type:"Property",name:"user"}]},"4_1":{service:"notify"},"4_2":{service:"notify"},"4_3":{service:"notify",cmd:"markRead"},"4_4":{service:"notify",cmd:"syncOfflineMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_5":{service:"notify",cmd:"batchMarkRead"},"4_6":{service:"notify",cmd:"syncOfflineSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_8":{service:"notify",cmd:"syncOfflineNetcallMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_9":{service:"notify",cmd:"syncRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_12":{service:"notify",cmd:"syncMsgReceipts",response:[{type:"PropertyArray",name:"msgReceipts",entity:"msgReceipt"},{type:"Number",name:"timetag"}]},"4_13":{service:"notify",cmd:"syncDonnop",response:[{type:"Property",name:"donnop"},{type:"Number",name:"timetag"}]},"4_14":{service:"notify",cmd:"syncSessionAck",response:[{type:"StrLongMap",name:"p2p"},{type:"LongLongMap",name:"team"},{type:"Number",name:"timetag"}]},"4_15":{service:"notify",cmd:"syncRobots",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"4_16":{service:"notify",cmd:"syncBroadcastMsgs",response:[{type:"PropertyArray",name:"broadcastMsgs",entity:"broadcastMsg"}]},"4_17":{service:"notify",cmd:"syncSuperTeamRoamingMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_18":{service:"notify",cmd:"syncOfflineSuperTeamSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"4_19":{service:"notify",cmd:"syncDeleteSuperTeamMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"4_20":{service:"notify",cmd:"syncSuperTeamSessionAck",response:[{type:"LongLongMap",name:"superTeam"},{type:"Number",name:"timetag"}]},"4_21":{service:"notify",cmd:"syncDeleteMsgSelf",response:[{type:"PropertyArray",name:"deletedMsgs",entity:"deleteMsgSelfTag"}]},"4_22":{service:"notify",cmd:"syncSessionsWithMoreRoaming",response:[{type:"PropertyArray",name:"sessions",entity:"msg"}]},"4_23":{service:"notify",cmd:"syncStickTopSessions",response:[{type:"Number",name:"timetag"},{type:"boolean",name:"modify"},{type:"PropertyArray",name:"sessions",entity:"stickTopSession"}]},"4_24":{service:"notify",cmd:"syncSessionHistoryMsgsDelete",response:[{type:"PropertyArray",name:"sessionHistoryMsgsDeleteTags",entity:"clearMsgsParamsWithSync"}]},"4_100":{service:"notify",cmd:"syncOfflineFilterMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"4_101":{service:"notify",cmd:"syncOfflineFilterSysMsgs",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"}]},"5_1":{service:"sync",cmd:"syncDone",response:[{type:"Number",name:"timetag"}]},"5_2":{service:"sync",cmd:"syncTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"5_3":{service:"sync",cmd:"syncSuperTeamMembersDone",response:[{type:"Number",name:"timetag"}]},"7_1":{service:"msg",cmd:"sendMsg",response:[{type:"Property",name:"msg"}],trivialErrorCodes:[7101]},"7_2":{service:"msg",cmd:"msg",response:[{type:"Property",name:"msg"}]},"7_3":{service:"msg",cmd:"sysMsg",response:[{type:"Property",name:"sysMsg"}]},"7_6":{service:"msg",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_7":{service:"msg",cmd:"sendCustomSysMsg",trivialErrorCodes:[7101]},"7_8":{service:"msg",cmd:"searchHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_9":{service:"msg",cmd:"deleteSessions"},"7_10":{service:"msg",cmd:"getSessions",response:[{type:"StrArray",name:"sessions"}]},"7_101":{service:"msg",cmd:"syncSendMsg",response:[{type:"Property",name:"msg"}]},"7_11":{service:"msg",cmd:"sendMsgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_12":{service:"msg",cmd:"msgReceipt",response:[{type:"Property",name:"msgReceipt"}]},"7_13":{service:"msg",cmd:"onDeleteMsg"},"7_14":{service:"msg",cmd:"onMsgDeleted",response:[{type:"Property",name:"sysMsg"}]},"7_15":{service:"msg",cmd:"onDeleteMsgOfflineRoaming",response:[{type:"PropertyArray",name:"sysMsgs",entity:"sysMsg"},{type:"Number",name:"timetag"},{type:"Number",name:"type"}]},"7_16":{service:"msg",cmd:"onMarkSessionAck"},"7_17":{service:"msg",cmd:"broadcastMsg",response:[{type:"Property",name:"broadcastMsg"}]},"7_18":{service:"msg",cmd:"clearServerHistoryMsgs",response:[{type:"Long",name:"timetag"}]},"7_19":{service:"session",cmd:"getServerSessions",response:[{type:"Property",name:"sessionReqTag"},{type:"PropertyArray",name:"sessionList",entity:"session"}]},"7_20":{service:"session",cmd:"getServerSession",response:[{type:"Property",name:"session"}]},"7_21":{service:"session",cmd:"updateServerSession"},"7_22":{service:"session",cmd:"deleteServerSessions"},"7_23":{service:"msg",cmd:"deleteMsgSelf",response:[{type:"Long",name:"timetag"}]},"7_24":{service:"msg",cmd:"deleteMsgSelfBatch",response:[{type:"Long",name:"timetag"}]},"7_25":{service:"msg",cmd:"onMarkSessionAckBatch"},"7_26":{service:"msg",cmd:"msgFtsInServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"7_118":{service:"msg",cmd:"onClearServerHistoryMsgs",response:[{type:"Property",name:"sessionHistoryMsgsDeleteTag",entity:"clearMsgsParamsWithSync"}]},"7_123":{service:"msg",cmd:"onDeleteMsgSelf",response:[{type:"Property",name:"deleteMsgSelfTag"}]},"7_124":{service:"msg",cmd:"onDeleteMsgSelfBatch",response:[{type:"PropertyArray",name:"deleteMsgSelfTags",entity:"deleteMsgSelfTag"}]},"7_116":{service:"msg",cmd:"syncMarkSessionAck",response:[{type:"Number",name:"scene"},{type:"String",name:"to"},{type:"Number",name:"timetag"}]},"7_121":{service:"msg",cmd:"syncUpdateServerSession",response:[{type:"Property",name:"session"}]},"23_1":{service:"msgExtend",cmd:"getThreadMsgs",response:[{type:"Property",name:"threadMsg",entity:"msg"},{type:"Property",name:"threadMsgsMeta"},{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_2":{service:"msgExtend",cmd:"getMsgsByIdServer",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"23_3":{service:"msgExtend",cmd:"addQuickComment",response:[{type:"Number",name:"timetag"}]},"23_4":{service:"msgExtend",cmd:"deleteQuickComment",response:[{type:"Number",name:"timetag"}]},"23_5":{service:"msgExtend",cmd:"onQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_6":{service:"msgExtend",cmd:"onDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_7":{service:"msgExtend",cmd:"getQuickComments",response:[{type:"PropertyArray",name:"commentRes",entity:"commentRes"}]},"23_8":{service:"msgExtend",cmd:"addCollect",response:[{type:"Property",name:"collect"}]},"23_9":{service:"msgExtend",cmd:"deleteCollects",response:[{type:"Number",name:"deleteNum"}]},"23_10":{service:"msgExtend",cmd:"updateCollect",response:[{type:"Property",name:"collect"}]},"23_11":{service:"msgExtend",cmd:"getCollects",response:[{type:"Number",name:"total"},{type:"PropertyArray",name:"collectList",entity:"collect"}]},"23_12":{service:"msgExtend",cmd:"addStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_13":{service:"msgExtend",cmd:"deleteStickTopSession",response:[{type:"Number",name:"timetag"}]},"23_14":{service:"msgExtend",cmd:"updateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_15":{service:"msgExtend",cmd:"addMsgPin",response:[{type:"Number",name:"timetag"}]},"23_16":{service:"msgExtend",cmd:"updateMsgPin",response:[{type:"Number",name:"timetag"}]},"23_17":{service:"msgExtend",cmd:"deleteMsgPin",response:[{type:"Number",name:"timetag"}]},"23_18":{service:"msgExtend",cmd:"onAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_19":{service:"msgExtend",cmd:"onUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_20":{service:"msgExtend",cmd:"onDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_21":{service:"msgExtend",cmd:"getMsgPins",response:[{type:"Number",name:"timetag"},{type:"Boolean",name:"modify"},{type:"PropertyArray",name:"pins",entity:"msgPinRes"}]},"23_103":{service:"msgExtend",cmd:"syncAddQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_104":{service:"msgExtend",cmd:"syncDeleteQuickComment",response:[{type:"Property",name:"msg"},{type:"Property",name:"comment"}]},"23_112":{service:"msgExtend",cmd:"syncAddStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_113":{service:"msgExtend",cmd:"syncDeleteStickTopSession",response:[{type:"Number",name:"timetag"},{type:"Property",name:"stickTopSession"}]},"23_114":{service:"msgExtend",cmd:"syncUpdateStickTopSession",response:[{type:"Property",name:"stickTopSession"}]},"23_115":{service:"msgExtend",cmd:"syncAddMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_116":{service:"msgExtend",cmd:"syncUpdateMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"23_117":{service:"msgExtend",cmd:"syncDeleteMsgPin",response:[{type:"Property",name:"msg"},{type:"Property",name:"pinTag"},{type:"Number",name:"timetag"}]},"21_2":{service:"superTeam",cmd:"sendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_3":{service:"superTeam",cmd:"superTeamMsg",response:[{type:"Property",name:"msg"}]},"21_5":{service:"superTeam",cmd:"addSuperTeamMembers",response:[{type:"StrArray",name:"abortedAccidList"},{type:"long",name:"timetag"}]},"21_6":{service:"superTeam",cmd:"removeSuperTeamMembers"},"21_7":{service:"superTeam",cmd:"leaveSuperTeam"},"21_8":{service:"superTeam",cmd:"updateSuperTeam",response:[{type:"long",name:"teamId"},{type:"long",name:"timetag"}]},"21_9":{service:"superTeam",cmd:"getSuperTeam",response:[{type:"Property",name:"team"}]},"21_12":{service:"superTeam",cmd:"getSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_10":{service:"superTeam",cmd:"updateInfoInSuperTeam"},"21_13":{service:"superTeam",cmd:"getSuperTeamMembers",response:[{type:"long",name:"timetag"}]},"21_11":{service:"superTeam",cmd:"getMySuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_14":{service:"superTeam",cmd:"getSuperTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"21_15":{service:"superTeam",cmd:"getSuperTeamMembersByJoinTime",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_16":{service:"superTeam",cmd:"sendSuperTeamCustomSysMsg",trivialErrorCodes:[7101]},"21_17":{service:"superTeam",cmd:"onDeleteSuperTeamMsg"},"21_18":{service:"superTeam",cmd:"onSuperTeamMsgDelete",response:[{type:"Property",name:"sysMsg"}]},"21_19":{service:"superTeam",cmd:"superTeamCustomSysMsg",response:[{type:"Property",name:"sysMsg"}]},"21_20":{service:"superTeam",cmd:"applySuperTeam",response:[{type:"Property",name:"team"}]},"21_21":{service:"superTeam",cmd:"passSuperTeamApply"},"21_22":{service:"superTeam",cmd:"rejectSuperTeamApply"},"21_23":{service:"superTeam",cmd:"acceptSuperTeamInvite",response:[{type:"Property",name:"team"}]},"21_24":{service:"superTeam",cmd:"rejectSuperTeamInvite"},"21_25":{service:"superTeam",cmd:"onMarkSuperTeamSessionAck"},"21_26":{service:"superTeam",cmd:"addSuperTeamManagers"},"21_27":{service:"superTeam",cmd:"removeSuperTeamManagers"},"21_28":{service:"superTeam",cmd:"updateSuperTeamMute"},"21_29":{service:"superTeam",cmd:"updateSuperTeamMembersMute",response:[{type:"long",name:"timetag"}]},"21_30":{service:"superTeam",cmd:"updateNickInSuperTeam"},"21_31":{service:"superTeam",cmd:"transferSuperTeam"},"21_32":{service:"superTeam",cmd:"onMarkSuperTeamSessionsAck"},"21_33":{service:"superTeam",cmd:"getSuperTeamMembersByAccounts",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_34":{service:"superTeam",cmd:"getMutedSuperTeamMembers",response:[{type:"PropertyArray",name:"members",entity:"superTeamMember"}]},"21_113":{service:"superTeam",cmd:"syncSuperTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"superTeamMember"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_111":{service:"superTeam",cmd:"syncMySuperTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"superTeamMember"},{type:"long",name:"timetag"}]},"21_109":{service:"superTeam",cmd:"syncSuperTeams",response:[{type:"PropertyArray",name:"teams",entity:"superTeam"},{type:"bool",name:"isAll"},{type:"long",name:"timetag"}]},"21_101":{service:"superTeam",cmd:"syncCreateSuperTeam",response:[{type:"Property",name:"team"}]},"21_102":{service:"superTeam",cmd:"syncSendSuperTeamMsg",response:[{type:"Property",name:"msg"}]},"21_110":{service:"superTeam",cmd:"syncUpdateSuperTeamMember",response:[{type:"Property",name:"teamMember",entity:"superTeamMember"}]},"21_117":{service:"superTeam",cmd:"syncDeleteSuperTeamMsg",response:[{type:"Property",name:"sysMsg"}]},"21_125":{service:"superTeam",cmd:"syncMarkSuperTeamSessionAck",response:[{type:"Long",name:"to"},{type:"Long",name:"timetag"}]},"8_1":{service:"team",cmd:"createTeam",response:[{type:"Property",name:"team"},{type:"StrArray",name:"abortedAccidList"}]},"8_2":{service:"team",cmd:"sendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_3":{service:"team",cmd:"teamMsg",response:[{type:"Property",name:"msg"}]},"8_4":{service:"team",cmd:"teamMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_5":{service:"team",cmd:"addTeamMembers",response:[{type:"long",name:"time"},{type:"StrArray",name:"abortedAccidList"}]},"8_6":{service:"team",cmd:"removeTeamMembers"},"8_7":{service:"team",cmd:"updateTeam",response:[{type:"Number",name:"id"},{type:"Number",name:"time"}]},"8_8":{service:"team",cmd:"leaveTeam"},"8_9":{service:"team",cmd:"getTeam",response:[{type:"Property",name:"team"}]},"8_10":{service:"team",cmd:"getTeams",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"Number",name:"timetag"}]},"8_11":{service:"team",cmd:"getTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_12":{service:"team",cmd:"dismissTeam"},"8_13":{service:"team",cmd:"applyTeam",response:[{type:"Property",name:"team"}]},"8_14":{service:"team",cmd:"passTeamApply"},"8_15":{service:"team",cmd:"rejectTeamApply"},"8_16":{service:"team",cmd:"addTeamManagers"},"8_17":{service:"team",cmd:"removeTeamManagers"},"8_18":{service:"team",cmd:"transferTeam"},"8_19":{service:"team",cmd:"updateInfoInTeam"},"8_20":{service:"team",cmd:"updateNickInTeam"},"8_21":{service:"team",cmd:"acceptTeamInvite",response:[{type:"Property",name:"team"}]},"8_22":{service:"team",cmd:"rejectTeamInvite"},"8_23":{service:"team",cmd:"getTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_24":{service:"team",cmd:"searchTeamHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"8_25":{service:"team",cmd:"updateMuteStateInTeam"},"8_26":{service:"team",cmd:"getMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_27":{service:"team",cmd:"getMutedTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"teamMembers",entity:"teamMember"}]},"8_28":{service:"team",cmd:"sendTeamMsgReceipt",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_29":{service:"team",cmd:"getTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_30":{service:"team",cmd:"getTeamMsgReadAccounts",response:[{type:"Property",name:"teamMsgReceipt"},{type:"StrArray",name:"readAccounts"},{type:"StrArray",name:"unreadAccounts"}]},"8_31":{service:"team",cmd:"notifyTeamMsgReads",response:[{type:"PropertyArray",name:"teamMsgReceipts",entity:"teamMsgReceipt"}]},"8_32":{service:"team",cmd:"muteTeamAll",response:[]},"8_33":{service:"team",cmd:"getTeamMemberInvitorAccid",response:[{type:"object",name:"accountsMap"}]},"8_34":{service:"team",cmd:"getTeamsById",response:[{type:"PropertyArray",name:"teams",entity:"team"},{type:"StrArray",name:"tids"}],trivialErrorCodes:[816]},"8_126":{service:"team",cmd:"syncMyTeamMembers",response:[{type:"PropertyArray",name:"teamMembers",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_109":{service:"team",cmd:"syncTeams",response:[{type:"Number",name:"timetag"},{type:"PropertyArray",name:"teams",entity:"team"}]},"8_111":{service:"team",cmd:"syncTeamMembers",response:[{type:"Number",name:"teamId"},{type:"PropertyArray",name:"members",entity:"teamMember"},{type:"Number",name:"timetag"}]},"8_101":{service:"team",cmd:"syncCreateTeam",response:[{type:"Property",name:"team"}]},"8_102":{service:"team",cmd:"syncSendTeamMsg",response:[{type:"Property",name:"msg"}]},"8_119":{service:"team",cmd:"syncUpdateTeamMember",response:[{type:"Property",name:"teamMember"}]},"12_1":{service:"friend",cmd:"friendRequest"},"12_101":{service:"friend",cmd:"syncFriendRequest",response:[{type:"String",name:"account"},{type:"Number",name:"type"},{type:"String",name:"ps"}]},"12_2":{service:"friend",cmd:"deleteFriend"},"12_102":{service:"friend",cmd:"syncDeleteFriend",response:[{type:"String",name:"account"}]},"12_3":{service:"friend",cmd:"updateFriend"},"12_103":{service:"friend",cmd:"syncUpdateFriend",response:[{type:"Property",name:"friend"}]},"12_4":{service:"friend",cmd:"getFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_5":{service:"friend",cmd:"syncFriends",response:[{type:"PropertyArray",name:"friends",entity:"friend"},{type:"Number",name:"timetag"}]},"12_6":{service:"friend",cmd:"syncFriendUsers",response:[{type:"PropertyArray",name:"users",entity:"user"},{type:"Number",name:"timetag"}]},"13_1":{service:"chatroom",cmd:"getChatroomAddress",response:[{type:"StrArray",name:"address"}]},"14_1":{service:"eventService",cmd:"publishEvent",response:[{type:"Property",name:"msgEvent"}]},"14_2":{service:"eventService",cmd:"pushEvent",response:[{type:"Property",name:"msgEvent"}]},"14_3":{service:"eventService",cmd:"subscribeEvent",response:[{type:"StrArray",name:"accounts"}]},"14_4":{service:"eventService",cmd:"unSubscribeEventsByAccounts",response:[{type:"StrArray",name:"accounts"}]},"14_5":{service:"eventService",cmd:"unSubscribeEventsByType"},"14_6":{service:"eventService",cmd:"querySubscribeEventsByAccounts",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_7":{service:"eventService",cmd:"querySubscribeEventsByType",response:[{type:"PropertyArray",name:"msgEventSubscribes",entity:"msgEventSubscribe"}]},"14_9":{service:"eventService",cmd:"pushEvents",response:[{type:"PropertyArray",name:"msgEvents",entity:"msgEvent"}]},"22_1":{service:"proxyService",cmd:"httpProxy",response:[{type:"Property",name:"proxyTag"}]},"22_2":{service:"proxyService",cmd:"onProxyMsg",response:[{type:"Property",name:"proxyMsg",entity:"proxyMsgTag"}]},"101_1":{service:"filter",cmd:"sendFilterMsg",response:[{type:"Property",name:"msg"}]},"101_2":{service:"filter",cmd:"filterMsg",response:[{type:"Property",name:"msg"}]},"101_3":{service:"filter",cmd:"filterSysMsg",response:[{type:"Property",name:"sysMsg"}]},"101_7":{service:"filter",cmd:"sendFilterCustomSysMsg"}});e.exports={idMap:a,cmdConfig:o,packetConfig:s}},function(e,t,n){var r=n(0).notundef;function i(e){r(e.shouldPushNotificationWhenPCOnline)&&(this.open=e.shouldPushNotificationWhenPCOnline?2:1)}i.getDefaultConfig=function(){return{shouldPushNotificationWhenPCOnline:!0}},i.reverse=function(e){return{shouldPushNotificationWhenPCOnline:1!=+e.open}},e.exports=i},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){var r=n(0),i=r.notundef,a=r.fillPropertyWithDefault,o=Object.keys,s={},c={},u={},l=[],m={normal:0,advanced:1},d={0:"normal",1:"advanced"},p=s.joinMode={noVerify:0,needVerify:1,rejectAll:2};c.joinMode={0:"noVerify",1:"needVerify",2:"rejectAll"},u.joinMode=o(p),l.push("join");var f=s.beInviteMode={needVerify:0,noVerify:1};function g(e){r.verifyOptions(e,"action","superTeam::SuperTeam"),r.verifyOptions(e,"teamId","superTeam::SuperTeam"),i(e.teamId)&&(this.teamId=e.teamId),i(e.type)&&(this.type=m[e.type]),i(e.avatar)&&(this.avatar=""+e.avatar),i(e.name)&&(this.name=""+e.name),i(e.intro)&&(this.intro=""+e.intro),i(e.announcement)&&(this.announcement=""+e.announcement),i(e.custom)&&(this.custom=""+e.custom),l.forEach(this.setMode.bind(this,e))}c.beInviteMode={0:"needVerify",1:"noVerify"},l.push("beInvite"),u.beInviteMode=o(f),g.prototype.setMode=function(e,t){i(e[t+="Mode"])&&(r.verifyParamValid(t,e[t],u[t],"Superteam::Team"),this[t]=s[t][e[t]])},g.reverse=function(e,t){var n=r.copy(e);if(i(n.teamId)&&(n.teamId=""+n.teamId),i(n.type)&&(n.type=d[n.type]),i(n.level)&&(n.level=+n.level),i(n.valid)&&(n.valid=1==+n.valid),i(n.memberNum)&&(n.memberNum=+n.memberNum),i(n.memberUpdateTime)&&(n.memberUpdateTime=+n.memberUpdateTime),i(n.createTime)&&(n.createTime=+n.createTime),i(n.updateTime)&&(n.updateTime=+n.updateTime),i(n.validToCurrentUser)&&(n.validToCurrentUser="1"===n.validToCurrentUser),i(n.mute)&&(n.mute="1"===n.mute),i(n.muteType))switch(n.muteType){case"0":n.mute=!1,n.muteType="none";break;case"1":n.mute=!0,n.muteType="normal";break;case"3":n.mute=!0,n.muteType="all"}else i(n.mute)&&(1===n.mute?(n.mute=!0,n.muteType="normal"):(n.mute=!1,n.muteType="none"));return l.forEach(function(e,t){i(e[t+="Mode"])&&(e[t]=c[t][e[t]])}.bind(null,n)),delete n.bits,t||g.fillProperties(n),n},g.fillProperties=function(e){return a(e,"avatar","")},e.exports=g},function(e,t,n){var r={set:function(e,t,n){r[e]=t,n&&(n.support=t)}};e.exports=r},function(e,t,n){(function(r){var i,a,o=(a=n(10))&&a.__esModule?a:{default:a};!function(a,s){var c,u=(a=void 0!==a?a:"undefined"!=typeof self?self:void 0!==r?r:{}).IDBKeyRange||a.webkitIDBKeyRange,l="readwrite",m=Object.prototype.hasOwnProperty,d=function(){if(!c&&!(c=a.indexedDB||a.webkitIndexedDB||a.mozIndexedDB||a.oIndexedDB||a.msIndexedDB||(null===a.indexedDB&&a.shimIndexedDB?a.shimIndexedDB:s)))throw"IndexedDB required";return c},p=function(e){return e},f=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},g=function(e){return"function"==typeof e},h=function(e){return e===s},y=function(e,t){var n=this,r=!1;this.name=t,this.getIndexedDB=function(){return e},this.add=function(t){if(r)throw"Database has been closed";for(var i=[],a=0,o=0;o<arguments.length-1;o++)if(Array.isArray(arguments[o+1]))for(var s=0;s<arguments[o+1].length;s++)i[a]=arguments[o+1][s],a++;else i[a]=arguments[o+1],a++;var c=e.transaction(t,l),u=c.objectStore(t);return new Promise((function(e,t){i.forEach((function(e){var t;if(e.item&&e.key){var n=e.key;e=e.item,t=u.add(e,n)}else t=u.add(e);t.onsuccess=function(t){var n=t.target,r=n.source.keyPath;null===r&&(r="__id__"),Object.defineProperty(e,r,{value:n.result,enumerable:!0})}})),c.oncomplete=function(){e(i,n)},c.onerror=function(e){e.preventDefault(),t(e)},c.onabort=function(e){t(e)}}))},this.updateAndDelete=function(t,n,i){if(r)throw"Database has been closed";var a=e.transaction(t,l),o=a.objectStore(t),s=o.keyPath;return new Promise((function(e,t){n.forEach((function(e){if(e.item&&e.key){var t=e.key;e=e.item,o.put(e,t)}else o.put(e)})),i.forEach((function(e){o.delete(e[s])})),a.oncomplete=function(){e([n,i])},a.onerror=function(e){t(e)}}))},this.update=function(t){if(r)throw"Database has been closed";for(var i,a=[],o=1;o<arguments.length;o++)i=arguments[o],Array.isArray(i)?a=a.concat(i):a.push(i);var s=e.transaction(t,l),c=s.objectStore(t);return c.keyPath,new Promise((function(e,t){a.forEach((function(e){var t;if(e.item&&e.key){var n=e.key;e=e.item,t=c.put(e,n)}else t=c.put(e);t.onsuccess=function(e){},t.onerror=function(e){}})),s.oncomplete=function(){e(a,n)},s.onerror=function(e){t(e)},s.onabort=function(e){t(e)}}))},this.remove=function(t,n,i,a,o,c,m){if(r)throw"Database has been closed";var d=e.transaction(t,l),p=d.objectStore(t);return new Promise((function(e,t){function r(e){return e===s||null===e}var l;(r(a)&&(a=-1/0),r(o)&&(o=1/0),null===n||Array.isArray(n)||(n=[n]),r(i))?null!==n?n.forEach((function(e){p.delete(e)})):p.delete(range=u.bound(a,o,c,m)):(l=null!==n?u.only(n[0]):u.bound(a,o,c,m),p.index(i).openCursor(l).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())});d.oncomplete=function(){e()},d.onerror=function(e){t(e)},d.onabort=function(e){t(e)}}))},this.clear=function(t){if(r)throw"Database has been closed";var n=e.transaction(t,l);return n.objectStore(t).clear(),new Promise((function(e,t){n.oncomplete=function(){e()},n.onerror=function(e){t(e)}}))},this.close=function(){r||(e.close(),r=!0,delete S[t])},this.get=function(t,n){if(r)throw"Database has been closed";var i=e.transaction(t),a=i.objectStore(t).get(n);return new Promise((function(e,t){a.onsuccess=function(t){e(t.target.result)},i.onerror=function(e){t(e)}}))},this.query=function(t,n){if(r)throw"Database has been closed";return new b(t,e,n)},this.count=function(t,n){if(r)throw"Database has been closed";e.transaction(t).objectStore(t)};for(var i=0,a=e.objectStoreNames.length;i<a;i++)!function(e){for(var t in n[e]={},n)m.call(n,t)&&"close"!==t&&(n[e][t]=function(t){return function(){var r=[e].concat([].slice.call(arguments,0));return n[t].apply(n,r)}}(t))}(e.objectStoreNames[i])},b=function(e,t,n){var r=this,i=!1,a=!1,c=function(r,c,m,d,p,f,h){return new Promise((function(y,b){var v=i||a?l:"readonly",S=t.transaction(e,v),T=S.objectStore(e),M=n?T.index(n):T,C=r?u[r].apply(null,c):null,k=[],A=[C],I=0;p=p||null,f=f||[],"count"!==m&&A.push(d||"next");var P=!!i&&Object.keys(i);M[m].apply(M,A).onsuccess=function(e){var t=e.target.result;if((void 0===t?"undefined":(0,o.default)(t))===(0,o.default)(0))k=t;else if(t)if(null!==p&&p[0]>I)I=p[0],t.advance(p[0]);else if(null!==p&&I>=p[0]+p[1]);else{var n=!0,r="value"in t?t.value:t.key;f.forEach((function(e){e&&e.length&&(2===e.length?n=n&&r[e[0]]===e[1]:g(e[0])&&(n=n&&e[0].apply(s,[r])))})),n&&(I++,k.push(h(r)),a?t.delete():i&&(r=function(e){for(var t=0;t<P.length;t++){var n=P[t],r=i[n];r instanceof Function&&(r=r(e)),e[n]=r}return e}(r),t.update(r))),t.continue()}},S.oncomplete=function(){y(k)},S.onerror=function(e){b(e)},S.onabort=function(e){b(e)}}))},m=function(e,t){var n="next",r="openCursor",o=[],s=null,u=p,l=!1,m=function(){return c(e,t,r,l?n+"unique":n,s,o,u)},d=function(){return n=null,r="count",{execute:m}},y=function e(){return 1==(s="array"===f(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments,0,2)).length&&s.unshift(0),function(e){return"number"===f(e)}(s[1])||(s=null),{execute:m,count:d,keys:b,filter:v,asc:S,desc:T,distinct:M,modify:C,limit:e,map:k,remove:A}},b=function e(t){return(t=!!h(t)||!!t)&&(r="openKeyCursor"),{execute:m,keys:e,filter:v,asc:S,desc:T,distinct:M,modify:C,limit:y,map:k,remove:A}},v=function e(){return o.push(Array.prototype.slice.call(arguments,0,2)),{execute:m,count:d,keys:b,filter:e,asc:S,desc:T,distinct:M,modify:C,limit:y,map:k,remove:A}},S=function e(t){return t=!!h(t)||!!t,n=t?"next":"prev",{execute:m,count:d,keys:b,filter:v,asc:e,desc:T,distinct:M,modify:C,limit:y,map:k,remove:A}},T=function e(t){return t=!!h(t)||!!t,n=t?"prev":"next",{execute:m,count:d,keys:b,filter:v,asc:S,desc:e,distinct:M,modify:C,limit:y,map:k,remove:A}},M=function e(t){return t=!!h(t)||!!t,l=t,{execute:m,count:d,keys:b,filter:v,asc:S,desc:T,distinct:e,modify:C,limit:y,map:k,remove:A}},C=function e(t){return i=t,{execute:m,count:d,keys:b,filter:v,asc:S,desc:T,distinct:M,modify:e,limit:y,map:k,remove:A}},k=function e(t){return g(t)&&(u=t),{execute:m,count:d,keys:b,filter:v,asc:S,desc:T,distinct:M,modify:C,limit:y,map:e,remove:A}},A=function e(t){return t=!!h(t)||!!t,a=t,{execute:m,count:d,keys:b,filter:v,asc:S,desc:T,distinct:M,modify:C,limit:y,map:k,remove:e}};return{execute:m,count:d,keys:b,filter:v,asc:S,desc:T,distinct:M,modify:C,limit:y,map:k,remove:A}};"only bound upperBound lowerBound".split(" ").forEach((function(e){r[e]=function(){return new m(e,arguments)}})),this.filter=function(){var e=new m(null,null);return e.filter.apply(e,arguments)},this.all=function(){return this.filter()}},v=function(e,t,n,r){var i=e.target.result,a=new y(i,t);return S[t]=i,Promise.resolve(a)},S={},T={version:"0.10.2",open:function(e){var t;return new Promise((function(n,r){if(S[e.server])v({target:{result:S[e.server]}},e.server,e.version,e.schema).then(n,r);else{try{t=d().open(e.server,e.version)}catch(e){r(e)}t.onsuccess=function(t){v(t,e.server,e.version,e.schema).then(n,r)},t.onupgradeneeded=function(t){!function(e,t,n){for(var r in"function"==typeof t&&(t=t()),t){var i,a=t[r];for(var o in i=!m.call(t,r)||n.objectStoreNames.contains(r)?e.currentTarget.transaction.objectStore(r):n.createObjectStore(r,a.key),a.indexes){var s=a.indexes[o];try{i.index(o)}catch(e){i.createIndex(o,s.key||o,Object.keys(s).length?s:{unique:!1})}}}}(t,e.schema,t.target.result)},t.onerror=function(e){r(e)}}}))},remove:function(e){return new Promise((function(t,n){if(!e)return t();var r,i;(void 0===e?"undefined":(0,o.default)(e))===y&&(e=e.name),"string"==typeof e&&(r=S[e]),r&&"function"==typeof r.close&&r.close();try{i=d().deleteDatabase(e)}catch(e){n(e)}i.onsuccess=function(n){delete S[e],t(e)},i.onerror=function(e){n(e)},i.onblocked=function(e){n(e)}}))}};void 0!==e&&void 0!==e.exports?e.exports=T:(i=function(){return T}.call(t,n,t,e))===s||(e.exports=i)}(void 0)}).call(this,n(31))},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],l=!1,m=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):m=-1,u.length&&p())}function p(){if(!l){var e=s(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++m<t;)c&&c[m].run();m=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||l||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){(function(t,n){var r;r=function(){function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,a=void 0,o=void 0,s=function(e,t){f[i]=e,f[i+1]=t,2===(i+=2)&&(o?o(g):S())},c="undefined"!=typeof window?window:void 0,u=c||{},l=u.MutationObserver||u.WebKitMutationObserver,m="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function p(){var e=setTimeout;return function(){return e(g,1)}}var f=new Array(1e3);function g(){for(var e=0;e<i;e+=2)(0,f[e])(f[e+1]),f[e]=void 0,f[e+1]=void 0;i=0}var h,y,b,v,S=void 0;function T(e,t){var n=this,r=new this.constructor(k);void 0===r[C]&&D(r);var i=n._state;if(i){var a=arguments[i-1];s((function(){return N(i,r,a,n._result)}))}else j(n,r,e,t);return r}function M(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(k);return O(t,e),t}m?S=function(){return t.nextTick(g)}:l?(y=0,b=new l(g),v=document.createTextNode(""),b.observe(v,{characterData:!0}),S=function(){v.data=y=++y%2}):d?((h=new MessageChannel).port1.onmessage=g,S=function(){return h.port2.postMessage(0)}):S=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(g)}:p()}catch(e){return p()}}():p();var C=Math.random().toString(36).substring(2);function k(){}var A=void 0,I={error:null};function P(e){try{return e.then}catch(e){return I.error=e,I}}function x(t,n,r){n.constructor===t.constructor&&r===T&&n.constructor.resolve===M?function(e,t){1===t._state?w(e,t._result):2===t._state?E(e,t._result):j(t,void 0,(function(t){return O(e,t)}),(function(t){return E(e,t)}))}(t,n):r===I?(E(t,I.error),I.error=null):void 0===r?w(t,n):e(r)?function(e,t,n){s((function(e){var r=!1,i=function(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}(n,t,(function(n){r||(r=!0,t!==n?O(e,n):w(e,n))}),(function(t){r||(r=!0,E(e,t))}),e._label);!r&&i&&(r=!0,E(e,i))}),e)}(t,n,r):w(t,n)}function O(e,t){var n,r;e===t?E(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?w(e,t):x(e,t,P(t)))}function _(e){e._onerror&&e._onerror(e._result),R(e)}function w(e,t){e._state===A&&(e._result=t,e._state=1,0!==e._subscribers.length&&s(R,e))}function E(e,t){e._state===A&&(e._state=2,e._result=t,s(_,e))}function j(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+1]=n,i[a+2]=r,0===a&&e._state&&s(R,e)}function R(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?N(n,r,i,a):i(a);e._subscribers.length=0}}function N(t,n,r,i){var a=e(r),o=void 0,s=void 0,c=void 0,u=void 0;if(a){if((o=function(e,t){try{return e(t)}catch(e){return I.error=e,I}}(r,i))===I?(u=!0,s=o.error,o.error=null):c=!0,n===o)return void E(n,new TypeError("A promises callback cannot return that same promise."))}else o=i,c=!0;n._state!==A||(a&&c?O(n,o):u?E(n,s):1===t?w(n,o):2===t&&E(n,o))}var L=0;function D(e){e[C]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}var B=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[C]||D(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&w(this.promise,this._result))):E(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===A&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===M){var i=P(e);if(i===T&&e._state!==A)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===F){var a=new n(k);x(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===A&&(this._remaining--,2===e?E(r,n):this._result[t]=n),0===this._remaining&&w(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),F=function(){function e(t){this[C]=L++,this._result=this._state=void 0,this._subscribers=[],k!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(e,t){try{t((function(t){O(e,t)}),(function(t){E(e,t)}))}catch(t){E(e,t)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},e}();return F.prototype.then=T,F.all=function(e){return new B(this,e).promise},F.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},F.resolve=M,F.reject=function(e){var t=new this(k);return E(t,e),t},F._setScheduler=function(e){o=e},F._setAsap=function(e){s=e},F._asap=s,F.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=F},F.Promise=F,F},e.exports=r()}).call(this,n(212),n(31))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r,i,a,o,s,c,u,l;e.exports=(r=n(61),n(432),n(431),o=(a=(i=r).lib).Base,s=a.WordArray,u=(c=i.algo).MD5,l=c.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:u,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n,r=this.cfg,i=r.hasher.create(),a=s.create(),o=a.words,c=r.keySize,u=r.iterations;o.length<c;){n&&i.update(n),n=i.update(e).finalize(t),i.reset();for(var l=1;l<u;l++)n=i.finalize(n),i.reset();a.concat(n)}return a.sigBytes=4*c,a}}),i.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)},r.EvpKDF)},function(e,t,n){var r,i,a;e.exports=(r=n(61),a=(i=r).lib.WordArray,i.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var i=[],a=0;a<n;a+=3)for(var o=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;s<4&&a+.75*s<n;s++)i.push(r.charAt(o>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;i.length%4;)i.push(c);return i.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var i=0;i<n.length;i++)r[n.charCodeAt(i)]=i}var o=n.charAt(64);if(o){var s=e.indexOf(o);-1!==s&&(t=s)}return function(e,t,n){for(var r=[],i=0,o=0;o<t;o++)if(o%4){var s=n[e.charCodeAt(o-1)]<<o%4*2|n[e.charCodeAt(o)]>>>6-o%4*2;r[i>>>2]|=s<<24-i%4*8,i++}return a.create(r,i)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},r.enc.Base64)},function(e,t,n){var r=n(0),i=r.notundef,a=r.undef;function o(e){i(e.name)&&(this.name=""+e.name),i(e.announcement)&&(this.announcement=""+e.announcement),i(e.broadcastUrl)&&(this.broadcastUrl=""+e.broadcastUrl),i(e.custom)&&(this.custom=""+e.custom),i(e.queuelevel)&&(this.queuelevel=parseInt(e.queuelevel))}o.reverse=function(e){var t=r.copy(e);return a(t.announcement)&&(t.announcement=""),a(t.broadcastUrl)&&(t.broadcastUrl=""),a(t.custom)&&(t.custom=""),i(t.createTime)&&(t.createTime=+t.createTime),i(t.updateTime)&&(t.updateTime=+t.updateTime),i(t.onlineMemberNum)&&(t.onlineMemberNum=+t.onlineMemberNum),i(t.mute)&&(t.mute="1"===t.mute),t},e.exports=o},function(e,t,n){var r=n(41);e.exports=function(e){var t,n,i;e.db&&(r.db=e.db),e.rnfs&&(r.rnfs=e.rnfs,r.rnfs.size||(r.rnfs.size=1048576),r.rnfs.nimPromise=(t=r.rnfs,n=t.size/2-256,i=r.rnfs.DocumentDirectoryPath+"/nimlog_0.log",t.exists(i).then((function(e){return e?t.stat(i):Promise.reject(0)})).then((function(e){return e&&e.size>n?Promise.reject(1):Promise.reject(0)})).catch((function(e){return"number"==typeof e?t.nimIndex=e:console.error("initRnfs::ERROR",e),Promise.resolve()}))))}},function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r};function a(e){var t=this,n=e.url||null;t.level={debug:0,log:1,info:2,warn:3,error:4}[e.level]||0,t.logCache=[],t.logNum=1,t.timeInterval=5e3,window.onerror=function(e,n,r,i,a){t.error(a)},setInterval((function(){t.logCache.length>0&&n&&t.postLogs(n,t.logCache)}),t.timeInterval)}a.prototype.debug=function(){this.level>0||(console.debug.apply(this,arguments),this.cacheLogs.apply(this,["[degbug]"].concat(arguments)))},a.prototype.log=function(){this.level>1||(console.log.apply(this,arguments),this.cacheLogs.apply(this,["[log]"].concat(arguments)))},a.prototype.info=function(){this.level>2||(console.info.apply(this,arguments),this.cacheLogs.apply(this,["[info]"].concat(arguments)))},a.prototype.warn=function(){this.level>3||(console.warn.apply(this,arguments),this.cacheLogs.apply(this,["[warn]"].concat(arguments)))},a.prototype.error=function(){this.level>4||(console.error.apply(this,arguments),this.cacheLogs.apply(this,["[error]"].concat(arguments)))},a.prototype.cacheLogs=function(e,t){for(var n=[],r=0;r<t.length;r++){var a=t[r];"object"===(void 0===a?"undefined":(0,i.default)(a))?n.push(JSON.stringify(a)):n.push(a)}var o=this.logNum+++" "+e+" "+n.join("; ");this.logCache.push(o.replace("%c",""))},a.prototype.postLogs=function(e,t){var n=this,r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(console.info("LoggerPlugin::\u65e5\u5fd7\u4e0a\u62a5\u5b8c\u6210"),n.logCache=[],n.timeInterval=5e3):n.timeInterval+=5e3)},r.open("POST",e),r.setRequestHeader("Content-Type","plain/text;charset=utf-8"),r.timeout=360,r.send(t.join("\n"))},e.exports=a},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t,n){var r=n(182);e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===i.call(e)?function(e,t,n){for(var r=0,i=e.length;r<i;r++)a.call(e,r)&&t.call(n,e[r],r,e)}(e,t,n):"string"==typeof e?function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e.charAt(r),r,e)}(e,t,n):function(e,t,n){for(var r in e)a.call(e,r)&&t.call(n,e[r],r,e)}(e,t,n)};var i=Object.prototype.toString,a=Object.prototype.hasOwnProperty},function(e,t){(t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")}).left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,n){var r=n(309),i=n(308);e.exports=function(e){if(!e)return{};var t={};return i(r(e).split("\n"),(function(e){var n,i=e.indexOf(":"),a=r(e.slice(0,i)).toLowerCase(),o=r(e.slice(i+1));void 0===t[a]?t[a]=o:(n=t[a],"[object Array]"===Object.prototype.toString.call(n)?t[a].push(o):t[a]=[t[a],o])})),t}},function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,n(31))},function(e,t,n){var r=n(311),i=n(182),a=n(310),o=n(307);function s(e,t,n){var r=e;return i(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=o(t,{uri:e}),r.callback=n,r}function c(e,t,n){return u(t=s(e,t,n))}function u(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function i(){if(!s){var t;clearTimeout(l),t=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var r=y,i=null;return 0!==t?(r={body:function(){var e=void 0;if(e=u.response?u.response:u.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(u),h)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:d,headers:{},url:m,rawRequest:u},u.getAllResponseHeaders&&(r.headers=a(u.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),n(i,r,r.body)}}var o,s,u=e.xhr||null;u||(u=e.cors||e.useXDR?new c.XDomainRequest:new c.XMLHttpRequest);var l,m=u.url=e.uri||e.url,d=u.method=e.method||"GET",p=e.body||e.data,f=u.headers=e.headers||{},g=!!e.sync,h=!1,y={body:void 0,headers:{},statusCode:0,method:d,url:m,rawRequest:u};if("json"in e&&!1!==e.json&&(h=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),u.onreadystatechange=function(){4===u.readyState&&setTimeout(i,0)},u.onload=i,u.onerror=r,u.onprogress=function(){},u.onabort=function(){s=!0},u.ontimeout=r,u.open(d,m,!g,e.username,e.password),g||(u.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(l=setTimeout((function(){if(!s){s=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),u.setRequestHeader)for(o in f)f.hasOwnProperty(o)&&u.setRequestHeader(o,f[o]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(u.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(u),u.send(p||null),u}e.exports=c,c.XMLHttpRequest=r.XMLHttpRequest||function(){},c.XDomainRequest="withCredentials"in new c.XMLHttpRequest?c.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){c["delete"===e?"del":e]=function(t,n,r){return(n=s(t,n,r)).method=e.toUpperCase(),u(n)}}))},function(e,t,n){var r=n(0);function i(e,t){Number.isInteger(e.type)||r.onParamError("Collect.type\u53ea\u80fd\u662f\u6574\u6570",t),r.notundef(e.uniqueId)&&(this.uniqueId=e.uniqueId),this.type=e.type,this.data=e.data||"",this.custom=e.custom||""}i.reverse=function(e){var t=Object.assign({},e);return t.type=+t.type,t.createTime=+t.createTime,t.updateTime=+t.updateTime,t},e.exports=i},function(e,t,n){var r=n(0),i=r.notundef;function a(e,t){Number.isInteger(e.body)||r.onParamError("body\u53ea\u80fd\u662f\u6574\u6570",t),this.body=e.body,this.from=e.from||"",this.custom=e.custom||"",i(e.pushTitle)&&(this.pushTitle=e.pushTitle),i(e.apnsText)&&(this.apnsText=e.apnsText),i(e.pushPayload)&&(this.pushPayload=e.pushPayload),i(e.needPush)&&(this.needPush=!0===e.needPush?1:0),i(e.needBadge)&&(this.needBadge=!0===e.needBadge?1:0)}a.reverse=function(e){var t=Object.assign({},e);return i(e.needBadge)&&(t.needBadge=1==+e.needBadge),i(e.needPush)&&(t.needPush=1==+e.needPush),t.body=+e.body,t.time=+e.time,t},e.exports=a},function(e,t,n){var r=n(0),i=r.notundef,a={addFriend:1,applyFriend:2,passFriendApply:3,rejectFriendApply:4},o={1:"addFriend",2:"applyFriend",3:"passFriendApply",4:"rejectFriendApply"};function s(e){r.verifyOptions(e,"account","friend::Friend"),r.verifyParamAtLeastPresentOne(e,"alias custom","friend::Friend"),this.account=e.account,i(e.alias)&&(this.alias=e.alias),i(e.custom)&&(this.custom=e.custom)}s.reverse=function(e){var t=r.filterObj(e,"account alias custom createTime updateTime serverex");return i(e.flag)&&(t.valid="1"===e.flag),i(t.createTime)&&(t.createTime=+t.createTime),i(t.updateTime)&&(t.updateTime=+t.updateTime),t},s.validTypes=function(){return Object.keys(a)},s.getByteFromType=function(e){return a[e]},s.getTypeFromByte=function(e){return o[e]},s.assembleFriend=function(e){var t=+new Date;return Object.assign({},e,{alias:"",createTime:t,custom:"",updateTime:t,valid:!0})},e.exports=s},function(e,t,n){t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){e.exports={imLogin:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",112:"isReactNative",1e3:"token"},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time"},login:{1:"appKey",2:"account",3:"deviceId",5:"chatroomId",8:"appLogin",20:"chatroomNick",21:"chatroomAvatar",22:"chatroomCustom",23:"chatroomEnterCustom",26:"session",38:"isAnonymous",39:"tags",40:"notifyTargetTags",_21_safe:"_chatroomAvatar_safe"},chatroom:{1:"id",3:"name",4:"announcement",5:"broadcastUrl",12:"custom",14:"createTime",15:"updateTime",16:"queuelevel",100:"creator",101:"onlineMemberNum",102:"mute"},msg:{1:"idClient",2:"type",3:"attach",4:"custom",5:"resend",6:"userUpdateTime",7:"fromNick",8:"fromAvatar",9:"fromCustom",10:"yidunEnable",11:"antiSpamContent",12:"skipHistory",13:"body",14:"antiSpamBusinessId",15:"clientAntiSpam",16:"antiSpamUsingYidun",20:"time",21:"from",22:"chatroomId",23:"fromClientType",25:"highPriority",27:"callbackExt",28:"subType",29:"yidunAntiCheating",30:"env",31:"notifyTargetTags",_8_safe:"_fromAvatar_safe"},chatroomMember:{1:"chatroomId",2:"account",3:"type",4:"level",5:"nick",6:"avatar",7:"custom",8:"online",9:"guest",10:"enterTime",12:"blacked",13:"gaged",14:"valid",15:"updateTime",16:"tempMuted",17:"tempMuteDuration",_6_safe:"_avatar_safe"},chatroomCdnInfo:{1:"enable",2:"cdnUrls",3:"timestamp",4:"interval",5:"decryptType",6:"decryptKey",7:"timeout"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"}}},function(e,t,n){e.exports={imLogin:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,isReactNative:112,token:1e3,customTag:38},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24},login:{appKey:1,account:2,deviceId:3,chatroomId:5,appLogin:8,chatroomNick:20,chatroomAvatar:21,chatroomCustom:22,chatroomEnterCustom:23,session:26,isAnonymous:38,tags:39,notifyTargetTags:40},chatroom:{id:1,name:3,announcement:4,broadcastUrl:5,custom:12,createTime:14,updateTime:15,queuelevel:16,creator:100,onlineMemberNum:101,mute:102},msg:{idClient:1,type:2,attach:3,custom:4,resend:5,userUpdateTime:6,fromNick:7,fromAvatar:8,fromCustom:9,yidunEnable:10,antiSpamContent:11,skipHistory:12,body:13,antiSpamBusinessId:14,clientAntiSpam:15,antiSpamUsingYidun:16,time:20,from:21,chatroomId:22,fromClientType:23,highPriority:25,callbackExt:27,subType:28,yidunAntiCheating:29,env:30,notifyTargetTags:31},chatroomMember:{chatroomId:1,account:2,type:3,level:4,nick:5,avatar:6,custom:7,online:8,guest:9,enterTime:10,blacked:12,gaged:13,valid:14,updateTime:15,tempMuted:16,tempMuteDuration:17},chatroomCdnInfo:{enable:1,cdnUrls:2,timestamp:3,interval:4,decryptType:5,decryptKey:6,timeout:7},tagMemberReq:{tag:1,time:2,limit:3},tagMuteReq:{tag:1,duration:2,needNotify:3,custom:4,notifyTargetTags:5}}},function(e,t,n){var r=n(0),i=n(87),a=r.merge({},i.idMap,{chatroom:{id:13,login:2,kicked:3,logout:4,sendMsg:6,msg:7,getChatroomMembers:8,getHistoryMsgs:9,markChatroomMember:11,closeChatroom:12,getChatroom:13,updateChatroom:14,updateMyChatroomMemberInfo:15,getChatroomMembersInfo:16,kickChatroomMember:17,updateChatroomMemberTempMute:19,queueOffer:20,queuePoll:21,queueList:22,peak:23,queueDrop:24,queueInit:25,queueChange:26,updateTagMembersTempMute:30,getChatroomMembersByTag:31,getChatroomMemberCountByTag:32,notifyCdnInfo:99},user:{id:3,syncRobot:16}}),o=r.merge({},i.cmdConfig,{login:{sid:a.chatroom.id,cid:a.chatroom.login,params:[{type:"byte",name:"type"},{type:"Property",name:"login"},{type:"Property",name:"imLogin"}]},logout:{sid:a.chatroom.id,cid:a.chatroom.logout},sendMsg:{sid:a.chatroom.id,cid:a.chatroom.sendMsg,params:[{type:"Property",name:"msg"}]},getChatroomMembers:{sid:a.chatroom.id,cid:a.chatroom.getChatroomMembers,params:[{type:"byte",name:"type"},{type:"long",name:"time"},{type:"int",name:"limit"}]},getHistoryMsgs:{sid:a.chatroom.id,cid:a.chatroom.getHistoryMsgs,params:[{type:"long",name:"timetag"},{type:"int",name:"limit"},{type:"bool",name:"reverse"},{type:"LongArray",name:"msgTypes"}]},markChatroomMember:{sid:a.chatroom.id,cid:a.chatroom.markChatroomMember,params:[{type:"string",name:"account"},{type:"int",name:"type"},{type:"bool",name:"isAdd"},{type:"int",name:"level"},{type:"string",name:"custom"}]},closeChatroom:{sid:a.chatroom.id,cid:a.chatroom.closeChatroom,params:[{type:"string",name:"custom"}]},getChatroom:{sid:a.chatroom.id,cid:a.chatroom.getChatroom},updateChatroom:{sid:a.chatroom.id,cid:a.chatroom.updateChatroom,params:[{type:"Property",name:"chatroom"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"}]},updateMyChatroomMemberInfo:{sid:a.chatroom.id,cid:a.chatroom.updateMyChatroomMemberInfo,params:[{type:"Property",name:"chatroomMember"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"},{type:"bool",name:"needSave"}]},getChatroomMembersInfo:{sid:a.chatroom.id,cid:a.chatroom.getChatroomMembersInfo,params:[{type:"StrArray",name:"accounts"}]},kickChatroomMember:{sid:a.chatroom.id,cid:a.chatroom.kickChatroomMember,params:[{type:"string",name:"account"},{type:"string",name:"custom"}]},updateChatroomMemberTempMute:{sid:a.chatroom.id,cid:a.chatroom.updateChatroomMemberTempMute,params:[{type:"String",name:"account"},{type:"long",name:"duration"},{type:"bool",name:"needNotify"},{type:"String",name:"custom"}]},queueOffer:{sid:a.chatroom.id,cid:a.chatroom.queueOffer,params:[{type:"string",name:"elementKey"},{type:"string",name:"elementValue"},{type:"bool",name:"transient"}]},queuePoll:{sid:a.chatroom.id,cid:a.chatroom.queuePoll,params:[{type:"string",name:"elementKey"}]},queueList:{sid:a.chatroom.id,cid:a.chatroom.queueList},peak:{sid:a.chatroom.id,cid:a.chatroom.peak},queueDrop:{sid:a.chatroom.id,cid:a.chatroom.queueDrop},queueInit:{sid:a.chatroom.id,cid:a.chatroom.queueInit,params:[{type:"int",name:"limit"}]},queueChange:{sid:a.chatroom.id,cid:a.chatroom.queueChange,params:[{type:"StrStrMap",name:"elementMap"},{type:"bool",name:"needNotify"},{type:"string",name:"notifyExt"}]},updateTagMembersTempMute:{sid:a.chatroom.id,cid:a.chatroom.updateTagMembersTempMute,params:[{type:"Property",name:"tagMuteReq"}]},getChatroomMemberCountByTag:{sid:a.chatroom.id,cid:a.chatroom.getChatroomMemberCountByTag,params:[{type:"String",name:"tag"}]},getChatroomMembersByTag:{sid:a.chatroom.id,cid:a.chatroom.getChatroomMembersByTag,params:[{type:"Property",name:"tagMemberReq"}]},notifyCdnInfo:{sid:a.chatroom.id,cid:a.chatroom.notifyCdnInfo},syncRobot:{sid:a.user.id,cid:a.user.syncRobot,params:[{type:"long",name:"timetag"}]}}),s=r.merge({},i.packetConfig,{"4_10":{service:"notify"},"4_11":{service:"notify"},"3_16":{service:"chatroom",cmd:"syncRobot",response:[{type:"PropertyArray",name:"robots",entity:"robot"}]},"13_2":{service:"chatroom",cmd:"login",response:[{type:"Property",name:"chatroom"},{type:"Property",name:"chatroomMember"},{type:"Property",name:"chatroomCdnInfo"}]},"13_3":{service:"chatroom",cmd:"kicked",response:[{type:"Number",name:"reason"},{type:"String",name:"custom"}]},"13_4":{service:"chatroom",cmd:"logout"},"13_6":{service:"chatroom",cmd:"sendMsg",response:[{type:"Property",name:"msg"}]},"13_7":{service:"chatroom",cmd:"msg",response:[{type:"Property",name:"msg"}]},"13_8":{service:"chatroom",cmd:"getChatroomMembers",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_9":{service:"chatroom",cmd:"getHistoryMsgs",response:[{type:"PropertyArray",name:"msgs",entity:"msg"}]},"13_11":{service:"chatroom",cmd:"markChatroomMember",response:[{type:"Property",name:"chatroomMember"}]},"13_12":{service:"chatroom",cmd:"closeChatroom"},"13_13":{service:"chatroom",cmd:"getChatroom",response:[{type:"Property",name:"chatroom"}]},"13_14":{service:"chatroom",cmd:"updateChatroom"},"13_15":{service:"chatroom",cmd:"updateMyChatroomMemberInfo"},"13_16":{service:"chatroom",cmd:"getChatroomMembersInfo",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_17":{service:"chatroom",cmd:"kickChatroomMember"},"13_19":{service:"chatroom",cmd:"updateChatroomMemberTempMute"},"13_20":{service:"chatroom",cmd:"queueOffer"},"13_21":{service:"chatroom",cmd:"queuePoll",response:[{type:"String",name:"elementKey"},{type:"String",name:"elementValue"}]},"13_22":{service:"chatroom",cmd:"queueList",response:[{type:"KVArray",name:"queueList"}]},"13_23":{service:"chatroom",cmd:"peak",response:[{type:"String",name:"elementKey"},{type:"String",name:"elementValue"}]},"13_24":{service:"chatroom",cmd:"queueDrop"},"13_25":{service:"chatroom",cmd:"queueInit"},"13_26":{service:"chatroom",cmd:"queueChange",response:[{type:"StrArray",name:"elementKeyArray"}]},"13_30":{service:"chatroom",cmd:"updateTagMembersTempMute"},"13_31":{service:"chatroom",cmd:"getChatroomMembersByTag",response:[{type:"PropertyArray",name:"members",entity:"chatroomMember"}]},"13_32":{service:"chatroom",cmd:"getChatroomMemberCountByTag",response:[{type:"long",name:"count"}]},"13_99":{service:"chatroom",cmd:"notifyCdnInfo",response:[{type:"Property",name:"chatroomCdnInfo"}]}});e.exports={idMap:a,cmdConfig:o,packetConfig:s}},function(e,t,n){e.exports={negotiateTransportTag:{"-1":"version",1:"serializeList",101:"serialize"},initTransportTag:{},nosToken:{1:"objectName",2:"token",3:"bucket",4:"expireTime",7:"expireSec",8:"tag",9:"shortUrl"},audioToText:{2:"url"},imageOp:{0:"type",1:"stripmeta",2:"typeType",3:"blurRadius",4:"blurSigma",5:"qualityQuality",6:"cropX",7:"cropY",8:"cropWidth",9:"cropHeight",10:"rotateAngle",11:"pixelPixel",12:"thumbnailMode",13:"thumbnailWidth",14:"thumbnailHeight",15:"thumbnailAxisX",16:"thumbnailAxisY",17:"thumbnailCenterX",18:"thumbnailCenterY",19:"thumbnailEnlarge",20:"thumbnailToStatic",21:"watermarkType",22:"watermarkGravity",23:"watermarkDissolve",24:"watermarkDx",25:"watermarkDy",26:"watermarkImage",27:"watermarkText",28:"watermarkFont",29:"watermarkFontSize",30:"watermarkFontColor",31:"interlace"},robot:{4:"account",5:"nick",6:"avatar",7:"intro",8:"config",9:"valid",10:"createTime",11:"updateTime",12:"custid",13:"botid",14:"bindTime",_6_safe:"_avatar_safe"},clientAntispam:{1:"version",2:"md5",3:"nosurl",4:"thesaurus"},fileQuickTransfer:{1:"md5",2:"url",3:"size",4:"threshold",_2_safe:"_url_safe"},transToken:{1:"name",2:"type",3:"transType",4:"size",5:"extra",6:"body"},transInfo:{1:"docId",2:"name",3:"prefix",4:"size",5:"type",6:"state",7:"transType",8:"transSize",9:"pageCount",10:"picInfo",11:"extra",12:"flag"},nosFileUrlTag:{0:"safeUrl",1:"originUrl"},nosAccessTokenTag:{0:"token",1:"url",2:"userAgent",3:"ext"},nosConfigTag:{1:"bucket",2:"cdnDomain",3:"expire",4:"objectNamePrefix"},fileListParam:{1:"fromDocId",2:"limit"},avSignalTag:{1:"type",2:"channelName",3:"channelId",4:"channelCreateTime",5:"channelExpireTime",6:"creator",7:"ext",8:"channelInValid",10:"from",11:"to",12:"requestId",13:"needPush",14:"pushTitle",15:"pushContent",16:"pushPayload",17:"needBadge",18:"members",19:"attach",20:"attachExt",21:"isSave",22:"msgid",23:"uid",24:"time"},login:{3:"clientType",4:"os",6:"sdkVersion",8:"appLogin",9:"protocolVersion",10:"pushTokenName",11:"pushToken",13:"deviceId",18:"appKey",19:"account",24:"browser",26:"session",32:"deviceInfo",38:"customTag",39:"customClientType",40:"sdkHumanVersion",112:"isReactNative",115:"authType",116:"loginExt",1e3:"token"},loginRes:{17:"lastLoginDeviceId",38:"customTag",102:"connectionId",103:"ip",104:"port",106:"country",111:"hasXMPush"},loginPort:{3:"type",4:"os",5:"mac",13:"deviceId",19:"account",32:"deviceInfo",38:"customTag",102:"connectionId",103:"ip",109:"time"},aosPushInfo:{110:"pushType",111:"hasTokenPreviously"},sync:{1:"myInfo",2:"offlineMsgs",3:"teams",6:"netcallMsgs",7:"roamingMsgs",9:"relations",11:"friends",12:"sessions",13:"friendUsers",14:"msgReceipts",15:"myTeamMembers",16:"donnop",17:"deleteMsg",18:"sessionAck",19:"robots",20:"broadcastMsgs",21:"avSignal",22:"superTeams",23:"myInfoInSuperTeams",24:"superTeamRoamingMsgs",25:"deleteSuperTeamMsg",26:"superTeamSessionAck",27:"deleteMsgSelf",28:"stickTopSessions",29:"sessionHistoryMsgsDelete",100:"filterMsgs"},donnop:{1:"open"},sessionReqTag:{1:"minTimestamp",2:"maxTimestamp",3:"needLastMsg",4:"limit",5:"hasMore"},session:{1:"id",2:"updateTime",3:"ext",4:"lastMsg",5:"lastMsgType"},superTeam:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},superTeamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"createTime",11:"updateTime",12:"custom",13:"mute",14:"invitoraccid",15:"joinTime"},team:{1:"teamId",3:"name",4:"type",5:"owner",6:"level",7:"selfCustom",8:"valid",9:"memberNum",10:"memberUpdateTime",11:"createTime",12:"updateTime",13:"validToCurrentUser",14:"intro",15:"announcement",16:"joinMode",17:"bits",18:"custom",19:"serverCustom",20:"avatar",21:"beInviteMode",22:"inviteMode",23:"updateTeamMode",24:"updateCustomMode",100:"mute",101:"muteType",_20_safe:"_avatar_safe"},teamMember:{1:"teamId",3:"account",4:"type",5:"nickInTeam",7:"bits",8:"active",9:"valid",10:"joinTime",11:"updateTime",12:"custom",13:"mute",14:"invitorAccid"},msg:{0:"scene",1:"to",2:"from",4:"fromClientType",5:"fromDeviceId",6:"fromNick",7:"time",8:"type",9:"body",10:"attach",11:"idClient",12:"idServer",13:"resend",14:"userUpdateTime",15:"custom",16:"pushPayload",17:"pushContent",18:"apnsAccounts",19:"apnsContent",20:"apnsForcePush",21:"yidunEnable",22:"antiSpamContent",23:"antiSpamBusinessId",24:"clientAntiSpam",25:"antiSpamUsingYidun",26:"needMsgReceipt",28:"needUpdateSession",29:"replyMsgFromAccount",30:"replyMsgToAccount",31:"replyMsgTime",32:"replyMsgIdServer",33:"replyMsgIdClient",34:"threadMsgFromAccount",35:"threadMsgToAccount",36:"threadMsgTime",37:"threadMsgIdServer",38:"threadMsgIdClient",39:"delete",40:"callbackExt",41:"subType",42:"yidunAntiCheating",43:"env",100:"isHistoryable",101:"isRoamingable",102:"isSyncable",104:"isMuted",105:"cc",106:"isInBlackList",107:"isPushable",108:"isOfflinable",109:"isUnreadable",110:"needPushNick",111:"isReplyMsg",112:"tempTeamMemberCount"},threadMsgReq:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse"},threadMsgsMeta:{1:"total",2:"lastMsgTime"},comment:{1:"from",2:"body",3:"time",4:"custom",5:"needPush",6:"needBadge",7:"pushTitle",8:"apnsText",9:"pushPayload"},commentReq:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",100:"timestamp"},commentRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"detail",8:"modify",100:"timestamp"},collect:{1:"id",2:"type",3:"data",4:"custom",5:"uniqueId",6:"createTime",7:"updateTime"},collectQuery:{1:"beginTime",2:"endTime",3:"lastMsgId",4:"limit",5:"reverse",6:"type"},stickTopSession:{1:"id",2:"topCustom",3:"createTime",4:"updateTime"},pinTag:{1:"pinFrom",2:"pinCustom",3:"createTime",4:"updateTime"},msgPinReq:{1:"sessionId",2:"timetag"},msgPinRes:{1:"scene",2:"from",3:"to",4:"time",5:"idServer",6:"idClient",7:"pinFrom",8:"pinCustom"},msgReceipt:{1:"to",2:"from",7:"time",11:"idClient"},teamMsgReceipt:{0:"teamId",1:"idServer",100:"read",101:"unread",102:"idClient",103:"account"},deleteMsgSelfTag:{1:"scene",2:"from",3:"to",4:"idServer",5:"idClient",6:"time",7:"deletedTime",8:"custom"},sysMsg:{0:"time",1:"type",2:"to",3:"from",4:"ps",5:"attach",6:"idServer",7:"sendToOnlineUsersOnly",8:"apnsText",9:"pushPayload",10:"deletedIdClient",11:"deletedIdServer",12:"yidunEnable",13:"antiSpamContent",14:"deletedMsgTime",15:"deletedMsgFromNick",16:"opeAccount",21:"env",22:"callbackExt",105:"cc",107:"isPushable",109:"isUnreadable",110:"needPushNick"},broadcastMsg:{1:"broadcastId",2:"fromAccid",3:"fromUid",4:"timestamp",5:"body"},friend:{4:"account",5:"flag",6:"beflag",7:"source",8:"alias",9:"bits",10:"custom",11:"createTime",12:"updateTime",13:"serverex"},user:{1:"account",3:"nick",4:"avatar",5:"sign",6:"gender",7:"email",8:"birth",9:"tel",10:"custom",12:"createTime",13:"updateTime",_4_safe:"_avatar_safe"},specialRelation:{0:"account",1:"isMuted",2:"isBlacked",3:"createTime",4:"updateTime"},msgType:{0:"text",1:"picture",2:"audio",3:"video",4:"location",5:"notification",6:"file",7:"netcall_audio",8:"netcall_vedio",9:"datatunnel_new",10:"tips",11:"robot",100:"custom"},msgEvent:{1:"type",2:"value",3:"idClient",4:"custom",5:"validTime",6:"broadcastType",7:"sync",8:"validTimeType",9:"durable",10:"time",11:"idServer",12:"clientType",13:"serverConfig",14:"serverCustom",101:"appid",103:"account",104:"enableMultiClient",106:"consid"},msgEventSubscribe:{1:"type",2:"subscribeTime",3:"sync",102:"to",104:"from",105:"time"},clearMsgsParams:{1:"account",2:"delRoam"},clearMsgsParamsWithSync:{0:"type",1:"otherAccid",2:"delRoam",3:"toTid",4:"isSyncSelf",5:"fromAccid",6:"time",7:"ext"},msgFullSearchRequestTag:{1:"keyword",2:"fromTime",3:"toTime",4:"sessionLimit",5:"msgLimit",6:"order",7:"p2pList",8:"teamList",9:"senderList",10:"msgTypeList",11:"msgSubTypeList"},delFriendParams:{1:"delAlias"},proxyTag:{1:"zone",2:"path",3:"method",4:"header",5:"body"},proxyMsgTag:{1:"from",2:"body",3:"time"}}},function(e,t,n){e.exports={negotiateTransportTag:{version:-1,serializeList:1,serialize:101},initTransportTag:{},nosToken:{objectName:1,token:2,bucket:3,expireTime:4,expireSec:7,tag:8,shortUrl:9},audioToText:{url:2},imageOp:{type:0,stripmeta:1,typeType:2,blurRadius:3,blurSigma:4,qualityQuality:5,cropX:6,cropY:7,cropWidth:8,cropHeight:9,rotateAngle:10,pixelPixel:11,thumbnailMode:12,thumbnailWidth:13,thumbnailHeight:14,thumbnailAxisX:15,thumbnailAxisY:16,thumbnailCenterX:17,thumbnailCenterY:18,thumbnailEnlarge:19,thumbnailToStatic:20,watermarkType:21,watermarkGravity:22,watermarkDissolve:23,watermarkDx:24,watermarkDy:25,watermarkImage:26,watermarkText:27,watermarkFont:28,watermarkFontSize:29,watermarkFontColor:30,interlace:31},robot:{account:4,nick:5,avatar:6,intro:7,config:8,valid:9,createTime:10,updateTime:11,custid:12,botid:13,bindTime:14},clientAntispam:{version:1,md5:2,nosurl:3,thesaurus:4},fileQuickTransfer:{md5:1,url:2,size:3,threshold:4},transToken:{name:1,type:2,transType:3,size:4,extra:5,body:6},transInfo:{docId:1,name:2,prefix:3,size:4,type:5,state:6,transType:7,transSize:8,pageCount:9,picInfo:10,extra:11,flag:12},nosFileUrlTag:{safeUrl:0,originUrl:1},nosAccessTokenTag:{token:0,url:1,userAgent:2,ext:3},fileListParam:{fromDocId:1,limit:2},avSignalTag:{type:1,channelName:2,channelId:3,channelCreateTime:4,channelExpireTime:5,creator:6,ext:7,channelInValid:8,from:10,to:11,requestId:12,needPush:13,pushTitle:14,pushContent:15,pushPayload:16,needBadge:17,members:18,attach:19,attachExt:20,isSave:21,msgid:22,uid:23,time:24},login:{clientType:3,os:4,sdkVersion:6,appLogin:8,protocolVersion:9,pushTokenName:10,pushToken:11,deviceId:13,appKey:18,account:19,browser:24,session:26,deviceInfo:32,isReactNative:112,token:1e3,customTag:38,customClientType:39,sdkHumanVersion:40,authType:115,loginExt:116},loginRes:{lastLoginDeviceId:17,customTag:38,connectionId:102,ip:103,port:104,country:106,hasXMPush:111},loginPort:{type:3,os:4,mac:5,deviceId:13,account:19,deviceInfo:32,connectionId:102,ip:103,time:109,customTag:38},aosPushInfo:{pushType:110,hasTokenPreviously:111},sync:{myInfo:1,offlineMsgs:2,teams:3,netcallMsgs:6,roamingMsgs:7,relations:9,friends:11,sessions:12,friendUsers:13,msgReceipts:14,myTeamMembers:15,donnop:16,deleteMsg:17,sessionAck:18,robots:19,broadcastMsgs:20,avSignal:21,superTeams:22,myInfoInSuperTeams:23,superTeamRoamingMsgs:24,deleteSuperTeamMsg:25,superTeamSessionAck:26,deleteMsgSelf:27,stickTopSessions:28,sessionHistoryMsgsDelete:29,filterMsgs:100},donnop:{open:1},sessionReqTag:{minTimestamp:1,maxTimestamp:2,needLastMsg:3,limit:4,hasMore:5},session:{id:1,updateTime:2,ext:3,lastMsg:4},superTeam:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},superTeamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,createTime:10,updateTime:11,custom:12,mute:13,invitoraccid:14,joinTime:15},team:{teamId:1,name:3,type:4,owner:5,level:6,selfCustom:7,valid:8,memberNum:9,memberUpdateTime:10,createTime:11,updateTime:12,validToCurrentUser:13,intro:14,announcement:15,joinMode:16,bits:17,custom:18,serverCustom:19,avatar:20,beInviteMode:21,inviteMode:22,updateTeamMode:23,updateCustomMode:24,mute:100,muteType:101},teamMember:{teamId:1,account:3,type:4,nickInTeam:5,bits:7,active:8,valid:9,joinTime:10,updateTime:11,custom:12,mute:13,invitorAccid:14},msg:{scene:0,to:1,from:2,fromClientType:4,fromDeviceId:5,fromNick:6,time:7,type:8,body:9,attach:10,idClient:11,idServer:12,resend:13,userUpdateTime:14,custom:15,pushPayload:16,pushContent:17,apnsAccounts:18,apnsContent:19,apnsForcePush:20,yidunEnable:21,antiSpamContent:22,antiSpamBusinessId:23,clientAntiSpam:24,antiSpamUsingYidun:25,needMsgReceipt:26,needUpdateSession:28,replyMsgFromAccount:29,replyMsgToAccount:30,replyMsgTime:31,replyMsgIdServer:32,replyMsgIdClient:33,threadMsgFromAccount:34,threadMsgToAccount:35,threadMsgTime:36,threadMsgIdServer:37,threadMsgIdClient:38,delete:39,callbackExt:40,subType:41,yidunAntiCheating:42,env:43,isHistoryable:100,isRoamingable:101,isSyncable:102,isMuted:104,cc:105,isInBlackList:106,isPushable:107,isOfflinable:108,isUnreadable:109,needPushNick:110,isReplyMsg:111,tempTeamMemberCount:112},threadMsgReq:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5},threadMsgsMeta:{total:1,lastMsgTime:2},comment:{from:1,body:2,time:3,custom:4,needPush:5,needBadge:6,pushTitle:7,apnsText:8,pushPayload:9},commentReq:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,timestamp:100},commentRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,detail:7,modify:8,timestamp:100},collect:{id:1,type:2,data:3,custom:4,uniqueId:5,createTime:6,updateTime:7},collectQuery:{beginTime:1,endTime:2,lastMsgId:3,limit:4,reverse:5,type:6},stickTopSession:{id:1,topCustom:2,createTime:3,updateTime:4},pinTag:{pinFrom:1,pinCustom:2,createTime:3,updateTime:4},msgPinReq:{sessionId:1,timetag:2},msgPinRes:{scene:1,from:2,to:3,time:4,idServer:5,idClient:6,pinFrom:7,pinCustom:8},msgReceipt:{to:1,from:2,time:7,idClient:11},teamMsgReceipt:{teamId:0,idServer:1,read:100,unread:101,idClient:102,account:103},deleteMsgSelfTag:{scene:1,from:2,to:3,idServer:4,idClient:5,time:6,deletedTime:7,custom:8},sysMsg:{time:0,type:1,to:2,from:3,ps:4,attach:5,idServer:6,sendToOnlineUsersOnly:7,apnsText:8,pushPayload:9,deletedIdClient:10,deletedIdServer:11,yidunEnable:12,antiSpamContent:13,deletedMsgTime:14,deletedMsgFromNick:15,opeAccount:16,env:21,callbackExt:22,cc:105,isPushable:107,isUnreadable:109,needPushNick:110},broadcastMsg:{broadcastId:1,fromAccid:2,fromUid:3,timestamp:4,body:5},friend:{account:4,flag:5,beflag:6,source:7,alias:8,bits:9,custom:10,createTime:11,updateTime:12,serverex:13},user:{account:1,nick:3,avatar:4,sign:5,gender:6,email:7,birth:8,tel:9,custom:10,createTime:12,updateTime:13},specialRelation:{account:0,isMuted:1,isBlacked:2,createTime:3,updateTime:4},msgType:{text:0,picture:1,audio:2,video:3,location:4,notification:5,file:6,netcall_audio:7,netcall_vedio:8,datatunnel_new:9,tips:10,robot:11,custom:100},msgEvent:{type:1,value:2,idClient:3,custom:4,validTime:5,broadcastType:6,sync:7,validTimeType:8,durable:9,time:10,idServer:11,clientType:12,serverConfig:13,serverCustom:14,appid:101,account:103,enableMultiClient:104,consid:106},msgEventSubscribe:{type:1,subscribeTime:2,sync:3,to:102,from:104,time:105},clearMsgsParams:{account:1,delRoam:2},clearMsgsParamsWithSync:{type:0,otherAccid:1,isDeleteRoam:2,toTid:3,isSyncSelf:4,fromAccid:5,time:6,ext:7},msgFullSearchRequestTag:{keyword:1,fromTime:2,toTime:3,sessionLimit:4,msgLimit:5,order:6,p2pList:7,teamList:8,senderList:9,msgTypeList:10,msgSubTypeList:11},delFriendParams:{delAlias:1},proxyTag:{zone:1,path:2,method:3,header:4,body:5},proxyMsgTag:{from:1,body:2,time:3},sessionAckTag:{scene:1,to:2,timetag:3}}},function(e,t,n){var r=n(62).fn,i=n(0),a=n(185);r.processAvSignal=function(e){switch(e.cmd){case"signalingCreate":case"signalingDelay":case"signalingClose":case"signalingJoin":case"signalingLeave":case"signalingInvite":case"signalingCancel":case"signalingReject":case"signalingAccept":case"signalingControl":case"signalingSyncMsgRead":case"signalingGetChannelInfo":break;case"signalingNotify":this.onSignalingNotify(e);break;case"signalingMutilClientSyncNotify":this.onSignalingMutilClientSyncNotify(e);break;case"signalingUnreadMessageSyncNotify":this.onSignalingUnreadMessageSyncNotify(e);break;case"signalingChannelsSyncNotify":this.onSignalingMembersSyncNotify(e);break;default:this.logger.warn("avSignal::unhandled cmd:",e.cmd)}};var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.needPush&&(e.needPush="1"===e.needPush),e.needBadge&&(e.needBadge="1"===e.needBadge),e.channelInValid&&(e.channelInValid="1"===e.channelInValid),e.attach){var t=JSON.parse(e.attach);e.eventType=a.parseAvSignalType(t.type)}if(e.members){var n=JSON.parse(e.members);e.members=n.map((function(e){return a.parseAvSignalMember(e)}))}return e};r.onSignalingNotify=function(e){if(e.error){var t=e.error;this.logger.error("protocal::avSignal:onSignalingNotify error",t),this.emitAPI({type:"error",error:t}),this.options.onerror(t)}else{e.raw&&e.raw.r&&e.raw.r.length&&e.content&&e.content.avSignalTag&&(e.content.avSignalTag.msgid=e.raw.r[0]);var n=e.content.avSignalTag;n=Array.isArray(n)?n.map((function(e){return o(e)})):o(n),this.emitAPI({type:"signalingNotify",obj:n}),i.isFunction(this.options.onSignalingNotify)&&this.options.onSignalingNotify(n)}},r.onSignalingMutilClientSyncNotify=function(e){if(e.error){var t=e.error;this.logger.error("protocal::avSignal:onSignalingMutilClientSyncNotify error",t),this.emitAPI({type:"error",error:t}),this.options.onerror(t)}else{var n=e.content.avSignalTag;n=Array.isArray(n)?n.map((function(e){return o(e)})):o(n),this.emitAPI({type:"signalingMutilClientSyncNotify",obj:n}),i.isFunction(this.options.onSignalingMutilClientSyncNotify)&&this.options.onSignalingMutilClientSyncNotify(n)}},r.onSignalingUnreadMessageSyncNotify=function(e){if(e.error){var t=e.error;this.logger.error("protocal::avSignal:onSignalingUnreadMessageSyncNotify error",t),this.emitAPI({type:"error",error:t}),this.options.onerror(t)}else{var n=e.content.avSignalTag;Array.isArray(n)&&(n=n.map((function(e){return o(e)}))),this.emitAPI({type:"signalingUnreadMessageSyncNotify",obj:n}),i.isFunction(this.options.onSignalingUnreadMessageSyncNotify)&&this.options.onSignalingUnreadMessageSyncNotify(n)}},r.onSignalingMembersSyncNotify=function(e){if(e.error){var t=e.error;this.logger.error("protocal::avSignal:onSignalingMembersSyncNotify error",t),this.emitAPI({type:"error",error:t}),this.options.onerror(t)}else{var n=e.content.avSignalTag;Array.isArray(n)||(n=[n]),n=n.map((function(e){return o(e)})),this.emitAPI({type:"signalingChannelsSyncNotify",obj:n}),i.isFunction(this.options.onSignalingMembersSyncNotify)&&this.options.onSignalingMembersSyncNotify(n)}}},function(e,t,n){var r=n(62).fn,i=n(186),a=n(5),o=(n(0),n(41));r.processMisc=function(e){switch(e.cmd){case"getSimpleNosToken":e.error||(e.obj=e.content.nosTokens[0]);break;case"getNosToken":e.error||(e.obj=e.content.nosToken);break;case"uploadSdkLogUrl":e.error?this.logger.error("uploadSdkLogUrl::error",e.error):this.logger.info("uploadSdkLogUrl::success",e.obj&&e.obj.url);break;case"notifyUploadLog":e.error||(a.isRN?this.uploadLocalLogRN():a.isBrowser&&this.uploadLocalLogWeb(),this.emitAPI({type:"notifyUploadLog"}));break;case"audioToText":e.error||(e.obj.text=e.content.text);break;case"processImage":e.obj.imageOps=i.reverseImageOps(e.obj.imageOps),e.error||(e.obj={url:e.content.url});break;case"getNosTokenTrans":e.error||(e.obj={nosToken:e.content.nosToken,docId:e.content.docId});break;case"getNosOriginUrl":e.error||(e.obj=e.content.nosFileUrlTag.originUrl);break;case"notifyTransLog":e.error||this.emitAPI({type:"notifyTransLog",obj:e.content.transInfo});break;case"fetchFile":case"fetchFileList":case"removeFile":e.error||(e.obj=e.content);break;case"getServerTime":e.obj=e.content&&e.content.time;break;case"getNosCdnHost":this.getNosCdnHost(e)}},r.uploadLocalLogRN=function(e){if(a.isRN&&o.rnfs){var t=o.rnfs,n=this,r=t.nimIndex,i=(t.nimIndex+1)%2;t.nimPromise=t.nimPromise.then((function(){return Promise.all([t.exists(s(r)),t.exists(s(i))])})).then((function(e){return e&&(e[0]||e[1])?e[0]&&e[1]?t.copyFile(s(i),s(2)).then((function(){return t.readFile(s(r))})).then((function(e){return t.appendFile(s(2),e)})):e[0]?t.copyFile(s(r),s(2)):void(e[1]&&t.copyFile(s(i),s(2))):Promise.reject()})).then((function(e){return new Promise((function(e,r){n.api.previewFile({filePath:s(2),done:function(r,i){if(Promise.all([t.unlink(s(2)),t.unlink(s(1)),t.unlink(s(0))]).finally((function(){e()})),r)n.logger.error("nim::uploadLocalLogRN:previewFile:error",r);else{var a=i.url;a.indexOf("?")>0?a+="&":a+="?",a+="download="+(new Date).getTime()+"_rn.log",n.api.uploadSdkLogUrl({url:a})}}})}))})).catch((function(e){t.unlink(s(2)).catch((function(e){})),n.logger.error("nim::protocol::uploadLocalLogRN",e)}))}function s(e){return t.DocumentDirectoryPath+"/nimlog_"+e+".log"}},r.uploadLocalLogWeb=function(){var e=this;!1!==this.options.dbLog&&this.logger._local?this.logger._local.fetchLog().then((function(t){e.api.previewFile({blob:new Blob([t.logs],{type:"text/plain"}),done:function(n,r){if(n)e.logger.error("uploadLocalLogWeb::previewFile:error",n);else{e.logger.log("uploadLocalLogWeb::previewFile:success",r);var i=r.url;i+=(i.indexOf("?")>0?"&":"?")+"download="+(new Date).getTime()+"_web.log",e.api.uploadSdkLogUrl({url:i}),e.logger._local.deleteLogs(t.time).then((function(){e.logger.log("uploadLocalLogWeb::deleteLogs success")})).catch((function(t){return e.logger.error("uploadLocalLogWeb::deleteLogs:error ,",t)}))}}})})).catch((function(t){e.logger.error("uploadLocalLogWeb::fetchLog:error",t)})):this.logger.warn("uploadLocalLogWeb::no dbLog")},r.getNosCdnHost=function(e){var t=this,n=e.error;if(n&&(n.callFunc="events::getNosCdnHost",t.onCustomError("getNosCdnHost","EVENT_GET_NOS_CDN_HOST_ERROR",n)),e.content&&e.content.nosConfigTag){var r=e.content.nosConfigTag,i="",o="";0!==r.expire&&r.cdnDomain?-1===r.expire?(i=r.cdnDomain,o=r.objectNamePrefix):(i=r.cdnDomain,o=r.objectNamePrefix,t.nosCdnHostTimer&&clearTimeout(t.nosCdnHostTimer),t.nosCdnHostTimer=setTimeout((function(){t.sendCmd("getNosCdnHost",{})}),800*parseInt(r.expire))):(i="",o=""),a.serverNosConfig.cdnDomain=i,a.serverNosConfig.objectPrefix=o,a.hasLocalStorage&&(localStorage.setItem("nim_cdn_domain",i),localStorage.setItem("nim_object_prefix",o))}}},function(e,t,n){var r=n(62).fn,i=n(5);r.processLink=function(e){switch(e.cmd){case"heartbeat":this.startHeartbeat()}},r.startHeartbeat=function(){var e=this;e.stopHeartbeat(),e.heartbeatTimer=setTimeout((function(){e.sendCmd("heartbeat",null,e.onHeartbeat.bind(e))}),i.heartbeatInterval)},r.stopHeartbeat=function(){this.heartbeatTimer&&(clearTimeout(this.heartbeatTimer),this.heartbeatTimer=null)},r.onHeartbeat=function(e,t){if(e){if(this.syncing)return this.logger.warn("onHeartbeat::ignore error in connecting"),void this.startHeartbeat();e.callFunc="link::onHeartbeat",this.onCustomError("heartbeat error",e),this.heartbeatFail++,this.logger.warn("onHeartbeat::error ",e.code,e),"Error_Timeout"===e.code&&(this.getOnlineStatus()?this.heartbeatFail>1?(this.forceDisconnect(),this.onDisconnect(1,"link::onHeartbeat")):this.sendCmd("heartbeat",null,this.onHeartbeat.bind(this)):this.startHeartbeat())}else this.heartbeatFail=0},r.getOnlineStatus="undefined"!==typeof navigator&&"boolean"==typeof navigator.onLine?function(){return navigator.onLine}:function(){return!0},r.heartbeat=function(){}},function(e,t,n){var r,i,a=(r=n(37))&&r.__esModule?r:{default:r},o=n(62).fn,s=n(29),c=n(16),u=n(131),l=n(41),m=n(5),d=n(135),p=n(0),f=p.notundef;o.login=function(){this.doLogin()},o.doLogin=function(){var e=this,t=this;Promise.resolve().then((function(){return t.assembleLogin()})).then((function(n){var r=e.socket&&e.socket.socket&&e.socket.socket.sessionid;if(r){if(e.socketIds||(e.socketIds={}),e.socketIds[r])return void e.logger.warn("onConnect::repeat login",r);e.socketIds[r]=!0}else e.logger.warn("onConnect:: no socketId ",e.socket&&e.socket.socket);e.logger.warn("link::doLogin: "+r),t.sendCmd("login",(0,a.default)({},n),t.onLogin.bind(t)),t.autoconnect=!1}))},o.genSessionKey=(i={},function(){var e=this.name;return i[e]=i[e]||p.guid()}),o.assembleIMLogin=function(){var e=this.options,t=e.account,n=this.autoconnect?0:1;this.sdkSession=this.genSessionKey();var r={appLogin:n,appKey:e.appKey,account:t,token:e.token,sdkVersion:m.info.sdkVersion,sdkHumanVersion:m.info.sdkHumanVersion,protocolVersion:m.info.protocolVersion,os:c.os.toString(),browser:c.name+" "+c.version,clientType:m.CLIENTTYPE||16,session:this.sdkSession,deviceId:l.deviceId,isReactNative:m.isRN?1:0,customTag:e.customTag||""};return e.customClientType&&(r.customClientType=+e.customClientType),e.authType&&(r.authType=+e.authType),e.loginExt&&(r.loginExt=e.loginExt),r},o.onLogin=function(e,t){var n=this,r=0;n.loginResult=t,e?n.onAuthError(e,"link::onLogin"):(this.heartbeatFail=0,this.hasLogin=!0,n.startHeartbeat(),n.afterLogin(t),n.initOnlineListener(),r=5e3),!0===n.options.logReport&&setTimeout((function(){var e={appKey:n.options.appKey,sdk_ver:m.info.version,deviceId:l.deviceId};d.reportErrEvent(e)}),r)},o.afterLogin=p.emptyFunc,o.notifyLogin=function(){var e=this.loginResult;this.logger.info("link::notifyLogin: on connect",e),this.options.onconnect(e)},o.logout=function(){var e="done disconnect";if(this.doLogout)return this.doLogout=!1,e="done logout",void this.onAuthError(new s(e,"logout"),"link::logout");if(this.isConnected()){var t=new s(e,"logout");this.onAuthError(t,"link::logout")}},o.onKicked=function(e){var t=e.content,n=t.from,r=t.reason,i=t.custom,a=t.customClientType,o={reason:this.kickedReasons[r]||"unknown",message:this.kickedMessages[r]||"\u672a\u77e5\u539f\u56e0"};if(f(n)&&(o.from=u.reverseType(n)),f(i)&&(o.custom=i),+a>0&&(o.customClientType=a),this.logger.warn("link::onKicked:",o),"silentlyKick"!==o.reason){var c=new s("\u88ab\u8e22\u4e86","kicked");p.merge(c,o),this.onAuthError(c,"link::onKicked")}else this.logger.warn("link::onKicked: silentlyKick"),this.forceDisconnect(),this.onDisconnect(1,"link::onKicked")},o.onAuthError=function(e,t){var n=e&&e.code;if(this.logger.error("onAuthError ",t,n),/^(Error_Internet_Disconnected|Error_Timeout|Error_Connection_Socket_State_not_Match)$/.test(n))return this.forceDisconnect(),void this.onDisconnect(1,"link::onAuthError::"+n);(e=e||s.newConnectionError({callFunc:t})).callFunc=e.callFunc||t||null,this.shouldReconnect=!1,this.markAllCallbackInvalid(e),this.notifyDisconnect(e)}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){var r=n(62).fn,i=n(29),a=n(208),o=n(184),s=n(5),c=n(0);r.initConnect=function(){this.socket=null,this.retryCount=0,this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.doLogout=!1},r.resetConnect=function(){var e=this.options;c.notundef(e.needReconnect)?(c.verifyParamType("needReconnect",e.needReconnect,"boolean","link::resetConnect"),this.needReconnect=e.needReconnect):this.needReconnect=!0,this.logger.info("link::resetConnect: needReconnect "+this.needReconnect),c.notundef(e.reconnectionAttempts)&&c.verifyParamType("reconnectionAttempts",e.reconnectionAttempts,"number","link::resetConnect"),c.notundef(e.noCacheLinkUrl)&&c.verifyParamType("noCacheLinkUrl",e.noCacheLinkUrl,"boolean","link::resetConnect"),this.reconnectionAttempts="number"==typeof e.reconnectionAttempts?e.reconnectionAttempts:1/0,this.backoff=new a({min:s.reconnectionDelay,max:s.reconnectionDelayMax,jitter:s.reconnectionJitter})},r.connect=function(e){if(clearTimeout(this.connectTimer),this.isConnected())this.logger.warn("link::connect: already connected");else if(this.connecting)this.logger.warn("link::connect: already connecting");else if(this.connecting=!0,this.hasNotifyDisconnected=!1,this.socket&&this.forceDisconnect(),this.logger.info("link::connect: connect to new socket\u3002option autoconnect "+this.options.autoconnect+" "+this.autoconnect),"string"==typeof this.options.socketUrl)this.connectToUrl(this.options.socketUrl);else{var t=this.getNextSocketUrl();t&&!this.options.noCacheLinkUrl?this.connectToUrl(t):this.refreshSocketUrl()}},r.getNextSocketUrl=function(){return this.socketUrls.shift()},r.isConnected=function(){return!!this.socket&&!!this.socket.socket&&this.socket.socket.connected},r.connectToUrl=function(e){var t=this;if(e=e||"",t.logger.info("link::connectToUrl: "+e),"undefined"==typeof window){var n=c.getGlobal(),r=e.split(":");n&&!n.location&&r.length>1&&(n.location={protocol:r.shift(),port:r.pop(),hostname:r.join("")}),this.options.transports=["websocket"]}var i=this.options.transports||["websocket","xhr-polling"];t.socket=o.connect(e,{transports:i,reconnect:!1,"force new connection":!0,"connect timeout":s.connectTimeout}),t.logger.info("link::connectToUrl: socket url: "+e+", transports: "+JSON.stringify(i)),t.socket.on("connect",t.onConnect.bind(t)),t.socket.on("handshake_failed",t.onHandshakeFailed.bind(t)),t.socket.on("connect_failed",t.onConnectFailed.bind(t)),t.socket.on("error",t.onError.bind(t)),t.socket.on("message",t.onMessage.bind(t)),t.socket.on("disconnect",(function(n){t.logger.warn("link::connectToUrl: socket url: "+e+", disconnected"),t.hasLogin=!1,t.doLogout?t.logout():t.onDisconnect(!0,"link::socketDisconnect")}))},r.disconnect=function(e){var t=this;function n(n){t.logger.info("link::disconnect: socket finally closed, ",n),clearTimeout(t.disconnectCallbackTimer),e(n)}e instanceof Function||(e=function(){}),clearTimeout(t.connectTimer),t.disconnectCallbackTimer=setTimeout((function(){e.call(t,"mark disconnected due to timeout")}),1e4),t.socket&&t.socket.socket&&t.socket.socket.transport?t.socket.socket.transport.onDisconnectDone=function(e){n(e)}:n(null),t.isConnected()?(t.logger.warn("link::disconnect: start disconnecting"),t.logout()):t.connecting?(t.logger.warn("link::disconnect: abort connecting"),t.disconnectSocket()):(t.logger.warn("link::disconnect: start otherwise"),t.connecting=!1,t.shouldReconnect=!1,t.needReconnect=!1,t.socket=null,t.options.ondisconnect({callFunc:"link::disconnect",message:"manually disconnect status"}))},r.onConnect=function(){this.backoff&&this.backoff.reset(),this.retryCount=0,this.connecting=!1,this.shouldReconnect=!0,this.hasNotifyDisconnected=!1,this.logger.info("link::onConnect: socket onconnected, start login"),this.login(),this.api.reportLogs({event:"ws_connected"})},r.onHandshakeFailed=function(){this.logger.warn("link::onHandshakeFailed: shandshake failed"),this.api.reportLogs({event:"ws_handshake_failed"}),this.onDisconnect(1,"link::onHandshakeFailed")},r.onConnectFailed=function(){this.api.reportLogs({event:"ws_connect_failed"}),this.onDisconnect(1,"link::onConnectFailed")},r.onError=function(){var e=arguments[0];if(e){if(this.api.reportLogs({event:"connect_timeout"}),void 0!==e.x5ImgDecodeStatus)return;if("[object Object]"===Object.prototype.toString.call(e)&&Object.keys(e).length<=0)return;this.onMiscError("\u8fde\u63a5\u9519\u8bef",new i(e,"LINK_ERROR",{callFunc:"link::onError"}))}this.connecting=!1},r.onDisconnect=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.logger.warn("socket::onDisconnect: "+t+" "+e),1!==e&&(this.connected=e),this.connecting=!1,this.markAllCallbackInvalid(i.newNetworkError({callFunc:t})),this.stopHeartbeat(),this.reconnect()},r.willReconnect=function(){return this.shouldReconnect&&this.needReconnect&&this.retryCount<this.reconnectionAttempts},r.reconnect=function(){this.willReconnect()?(this.socket&&(this.logger.info("link::reconnect: try to force disconnect"),this.forceDisconnect()),this.doReconnect()):this.notifyDisconnect()},r.doReconnect=function(){var e=this;this.logger.warn("doReconnect"),e.socket=null,e.connected&&(e.autoconnect=!0),e.retryCount++,e.appLogin=1,e.hasLogin=!1;var t=e.backoff.duration();e.logger.info("link::reconnect: will retry after "+t+"ms, retryCount "+e.retryCount);var n=e.options.onwillreconnect({retryCount:e.retryCount,duration:t});clearTimeout(e.connectTimer),e.connectTimer=setTimeout((function(){1==+e.options.authType&&n instanceof Promise?(e.logger.info("link::reconnect: wait onwillreconnect promise"),n.finally((function(){return e.connect()}))):e.connect()}),t)},r.notifyConnectError=function(e){var t=i.newConnectError({message:e,callFunc:"link::notifyConnectError"});this.logger.error("link::notifyConnectError:",t),this.options.onerror(t)},r.notifyDisconnect=function(e){this.hasNotifyDisconnected?this.logger.warn("notifyDisconnect:: already notified"):(this.hasNotifyDisconnected=!0,this.disconnectSocket(),this.forceDisconnect(),(e=e||new i).retryCount=this.retryCount,e.willReconnect=this.willReconnect(),this.backoff&&this.backoff.reset(),this.retryCount=0,this.logger.info("link::notifyDisconnect: ondisconnected",e),this.options.ondisconnect(e),this.onWbNotifyHangup instanceof Function&&this.onWbNotifyHangup({content:{account:this.account,channelId:null,timetag:+Date()}}))},r.disconnectSocket=function(){if(this.isConnected()||this.connecting){this.connecting=!1,this.shouldReconnect=!1;try{this.socket.disconnect()}catch(e){this.socket&&"function"==typeof this.socket.removeAllListeners&&this.socket.removeAllListeners(),this.logger.info("link::disconnectSocket: disconnect failed, error ",e)}}},r.initOnlineListener=function(e){this.needReconnect&&this.options&&this.options.quickReconnect?"undefined"!=typeof window&&c.isFunction(window.addEventListener)?this.onlineListener||(this.onlineListener=function(){var e=this;this.logger.log("onlineListener start"),this&&this.isConnected()&&!this.connecting?(this.stopHeartbeat(),this.sendCmd("heartbeat",null,(function(t){if(t){e.logger.info("onlineListener heartbeat detect error",t);try{e.forceDisconnect(),e.onDisconnect(1,"link::onHeartbeat")}catch(t){e.logger.info("onlineListener heartbeat websocket.onclose",t)}}else e.logger.log("onlineListener heartbeat detect success")}))):this.logger.log("onlineListener disconnected or connecting",this&&this.isConnected(),this.connecting)}.bind(this),this.logger.info("initOnlineListener success"),window.addEventListener("online",this.onlineListener)):this.logger.warn("initOnlineListener no window.addEventListener"):this.logger.warn("initOnlineListener no quickReconnect")},r.forceDisconnect=function(){var e=this.socket||{};this.socket=null,"function"==typeof e.removeAllListeners&&e.removeAllListeners(),"function"==typeof e.disconnect&&e.disconnect(),this.hasLogin=!1}},function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=n(46).fn,o=n(0),s=n(87),c=n(185);a.signalingCreate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.channelName,r=e.ext;return o.verifyOptions(e,"type","api::signalling"),this.sendCmdUsePromise("signalingCreate",{avSignalTag:{type:t,channelName:n,ext:r}}).then((function(e){var t=e.avSignalTag;return Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.verifyOptions(e,"channelId","api::signalling"),this.sendCmdUsePromise("signalingDelay",{avSignalTag:e}).then((function(e){var t=e.avSignalTag;return Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingClose=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offlineEnabled;return o.verifyOptions(e,"channelId","api::signalling"),this.sendCmdUsePromise("signalingClose",{avSignalTag:o.merge(e,{isSave:!0===t?1:0})}).then((function(e){var t=e.avSignalTag;return t.offlineEnabled=1===t.isSave,delete t.isSave,Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingJoin=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offlineEnabled;return o.verifyOptions(e,"channelId","api::signalling"),this.sendCmdUsePromise("signalingJoin",{avSignalTag:o.merge(e,{isSave:!0===t?1:0})}).then((function(e){var t=e.avSignalTag,n=t.members;return"string"==typeof t.members&&(n=JSON.parse(t.members).map((function(e){return c.parseAvSignalMember(e)}))),t.members=n,Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingLeave=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.offlineEnabled;return o.verifyOptions(e,"channelId","api::signalling"),this.sendCmdUsePromise("signalingLeave",{avSignalTag:o.merge(e,{isSave:!0===t?1:0})}).then((function(e){var t=e.avSignalTag;return t.offlineEnabled=1===t.isSave,delete t.isSave,Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingGetChannelInfo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channelName;return o.verifyOptions(e,"channelName","api::signalling"),this.sendCmdUsePromise("signalingGetChannelInfo",{avSignalTag:{channelName:t}}).then((function(e){var t=e.avSignalTag,n=t.members;return"string"==typeof t.members&&(n=JSON.parse(t.members).map((function(e){return c.parseAvSignalMember(e)}))),t.members=n,Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingInvite=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.account,n=e.offlineEnabled,r=e.pushInfo,a=void 0===r?{}:r;o.verifyOptions(e,"channelId requestId account","api::signalling"),"object"===(0,i.default)(a.pushPayload)&&(a.pushPayload=JSON.stringify(a.pushPayload));var s=o.merge(e,a,{to:t,isSave:!0===n?1:0,needPush:!0===a.needPush?1:0,needBadge:!1===a.needBadge?0:1});return this.sendCmdUsePromise("signalingInvite",{avSignalTag:s}).then((function(e){var t=e.avSignalTag;return t.offlineEnabled=1===t.isSave,t.needBadge=1===t.needBadge,t.needPush=1===t.needPush,delete t.isSave,Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingCancel=function(e){var t=e.account,n=e.offlineEnabled;return o.verifyOptions(e,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingCancel",{avSignalTag:o.merge(e,{to:t,isSave:!0===n?1:0})}).then((function(e){var t=e.avSignalTag;return t.offlineEnabled=1===t.isSave,delete t.isSave,Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingCreateAndJoin=function(e){var t=this,n=e.channelName,r=e.uid,i=void 0===r?0:r,a=e.offlineEnabled,s=void 0===a||a,c=e.attachExt,u=void 0===c?"":c;return this.signalingCreate(e).catch((function(e){return 10405===e.code?(t.logger.warn("api::avSignal:signalingCall room already exists:",e),t.signalingGetChannelInfo({channelName:n})):Promise.reject(e)})).then((function(e){var n={channelId:e.channelId,offlineEnabled:s,attachExt:u};return i&&o.merge(n,{uid:i}),t.signalingJoin(n)}))},a.signalingCall=function(e){var t=this,n=e.account,r=e.offlineEnabled,i=e.requestId;o.verifyOptions(e,"type requestId account","api::signalling");var a="";return this.signalingCreateAndJoin(e).then((function(o){a=o.channelId||a,t.logger.info("api::avSignal:signalingCall join:",a);var s={channelId:a,account:n,requestId:i,offlineEnabled:r,attachExt:e.attachExt||"",pushInfo:e.pushInfo||{}};return t.signalingInvite(s)}))},a.signalingReject=function(e){var t=e.account,n=e.offlineEnabled;return o.verifyOptions(e,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingReject",{avSignalTag:o.merge(e,{to:t,isSave:!0===n?1:0})}).then((function(e){var t=e.avSignalTag;return t.offlineEnabled=1===t.isSave,delete t.isSave,Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingAccept=function(e){var t=this,n=e.account,r=e.offlineEnabled;return o.verifyOptions(e,"channelId requestId account","api::signalling"),this.sendCmdUsePromise("signalingAccept",{avSignalTag:o.merge(e,{to:n,isSave:!0===r?1:0})}).then((function(e){var t=e.avSignalTag;return t.offlineEnabled=1===t.isSave,delete t.isSave,Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))})).then((function(n){if(e.autoJoin){var r={channelId:e.channelId,offlineEnabled:e.offlineEnabled,attachExt:e.joinAttachExt,uid:e.uid};return t.signalingJoin(r)}return n}))},a.signalingControl=function(e){var t=e.account;return o.verifyOptions(e,"channelId","api::signalling"),this.sendCmdUsePromise("signalingControl",{avSignalTag:o.merge(e,t?{to:t}:{})}).then((function(e){var t=e.avSignalTag;return Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingSync=function(){return this.sendCmdUsePromise("sync",{sync:{avSignal:0}}).then((function(e){var t=e.avSignalTag;return Promise.resolve(t)})).catch((function(e){return Promise.reject(c.parseAvSignalError(e))}))},a.signalingMarkMsgRead=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.verifyOptions(e,"msgid","api::signalling");var t=s.idMap.avSignal,n=void 0;return n="string"==typeof e.msgid?[e.msgid]:e.msgid,this.sendCmd("batchMarkRead",{sid:t.id,cid:t.signalingNotify,ids:n})}},function(e,t,n){var r=n(46).fn,i=n(0),a=n(40),o=n(5),s=n(16);(s=s||{}).name=s.name||"",s.version=s.version||"",r.reportLogs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=t.options,r=o.ntServerAddress;if(r){var c=o.info;e=i.merge(e,{appkey:n.appKey,uid:n.account,os:"web",session:t.protocol.sdkSession||"",ver:c.sdkVersion,type:t.subType,platform:""+s.name.toLowerCase()+s.version.replace(/(\.\d+)+$/,"")});var u=r+i.genUrlSep(r),l=[];for(var m in e)l.push(m+"="+e[m]);u+=l.join("&"),a(u,{proxyUrl:i.url2origin(u)+"/lbs/res/cors/nej_proxy_frame.html",timeout:o.xhrTimeout,onload:function(){},onerror:function(e){t.logger.error("report::ajax report error",e)}})}}},function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=n(0),o=n(46).fn;function s(e,t,n,r){var i=!1,a="";if(1===n?e.indexOf(t)>=0&&(i=!0,a=t):2===n&&(a=new RegExp(t,"g")).test(e)&&(i=!0),i&&""!==a)switch(r){case 1:return e.replace(a,"**");case 2:return{code:2};case 3:return{code:3}}return e}function c(e,t){for(var n=t.match,r=t.operate,a=e,o=0;o<t.keys.length;o++){var c=t.keys[o],u=c.match||n,l=c.operate||r;try{if("object"===(void 0===(a=s(a,c.key,u,l))?"undefined":(0,i.default)(a)))return a}catch(e){this.logger.warn("misc::filterContent: js cannot parse this regexp ",e)}}return a}o.uploadSdkLogUrl=function(e){return a.verifyOptions(e,"url","misc::uploadSdkLogUrl"),this.cbAndSendCmd("uploadSdkLogUrl",e)},o.getClientAntispamLexicon=function(e){var t=this,n=(e=e||{}).done;n instanceof Function||(n=function(){}),e={clientAntispam:{version:0}};var r=this;return this.protocol.sendCmd("getClientAntispam",e,(function(e,i,a){e?(r.protocol.logger.error("misc::getClientAntispamLexicon:",e),n.call(t,e,{})):(n.call(t,null,a),r.antispamLexicon=a.clientAntispam||{})}))},o.filterClientAntispam=function(e){var t=e.content,n=e.antispamLexicon;if(!t)return{code:404,errmsg:"\u5f85\u53cd\u5783\u573e\u6587\u672ccontent\u4e0d\u5b58\u5728"};n=n||this.antispamLexicon||{};var r=this.antispamLexicon&&this.antispamLexicon.thesaurus;if(!r)return{code:404,errmsg:"\u6ca1\u6709\u53cd\u5783\u573e\u8bcd\u5e93\u6216\u8005\u8bcd\u5e93\u683c\u5f0f\u4e0d\u5408\u6cd5"};try{r=JSON.parse(r).thesaurus}catch(e){return this.protocol.logger.error("misc::filterClientAntispam: parse thesaurus error"),{code:500,errmsg:"\u53cd\u5783\u573e\u8bcd\u5e93\u683c\u5f0f\u4e0d\u5408\u6cd5"}}for(var a=t,o=0;o<r.length;o++)if("object"===(void 0===(a=c.call(this,a,r[o]))?"undefined":(0,i.default)(a))){if(2===a.code)return{code:200,type:2,errmsg:"\u5efa\u8bae\u62d2\u7edd\u53d1\u9001",content:t,result:""};if(3===a.code)return{code:200,type:3,errmsg:"\u5efa\u8bae\u670d\u52a1\u5668\u5904\u7406\u53cd\u5783\u573e\uff0c\u53d1\u6d88\u606f\u5e26\u4e0a\u5b57\u6bb5clientAntiSpam",content:t,result:t}}return a===t?{code:200,type:0,errmsg:"",content:t,result:a}:{code:200,type:1,errmsg:"\u5df2\u5bf9\u7279\u6b8a\u5b57\u7b26\u505a\u4e86\u8fc7\u6ee4",content:t,result:a}},o.getServerTime=function(e){this.processCallback(e),this.sendCmd("getServerTime",{},e.callback)},o.getNosAccessToken=function(e){a.verifyOptions(e,"url","misc::getNosAccessToken"),this.processCallback(e);var t={url:e.url};e.userAgent&&(t.userAgent=e.userAgentv),e.ext&&(t.ext=e.ext),this.sendCmd("getNosAccessToken",{nosAccessTokenTag:t},(function(t,n,r){var i=r&&r.nosAccessTokenTag&&r.nosAccessTokenTag.token,a=e.url,o=i?{token:i,resUrl:a.indexOf("?")?a+"&token="+i:a+"?token="+i}:{};e.done(t,o)}))},o.deleteNosAccessToken=function(e){a.verifyOptions(e,"token","misc::deleteNosAccessToken"),this.processCallback(e),this.sendCmd("deleteNosAccessToken",{nosAccessTokenTag:{token:e.token}},e.callback)}},function(e,t,n){var r,i,a=(r=n(10))&&r.__esModule?r:{default:r},o=n(76),s=n(0),c=n(46).fn;c.viewImageSync=function(e){var t=this.options;s.verifyOptions(e,"url","nos::viewImageSync");var n=e.url,r=(0,o.url2object)(n),i=r.protocol,c=r.hostname,u=r.path,l=r.query;if("boolean"==typeof e.strip&&(l.stripmeta=e.strip?1:0),"number"==typeof e.quality&&(s.verifyParamMin("quality",e.quality,0,"nos::viewImageSync"),s.verifyParamMax("quality",e.quality,100,"nos::viewImageSync"),l.quality=Math.round(e.quality)),"boolean"==typeof e.interlace&&(l.interlace=e.interlace?1:0),"number"==typeof e.rotate&&(l.rotate=Math.round(e.rotate)),"object"===(0,a.default)(e.thumbnail)){var m=e.thumbnail.mode||"crop",d=e.thumbnail.width,p=e.thumbnail.height;if(d>=0&&p>=0&&d<4096&&p<4096&&(d>0||p>0)){switch(m){case"crop":m="y";break;case"contain":m="x";break;case"cover":m="z";break;default:m="x"}l.thumbnail=""+d+m+p}}if(t.downloadUrl){var f=(0,o.url2object)(e.url),g=t.downloadUrl,h=f.path,y=h.indexOf("/");if(-1!==y){var b=h.substring(0,y),v=h.substring(y+1);g=g.replace("{bucket}",b).replace("{object}",v)}var S=(0,o.url2object)(g);return(0,o.object2url)({protocol:S.protocol,hostname:S.hostname,path:S.path,query:s.merge(S.query,l)})}return(0,o.object2url)({protocol:i,hostname:c,path:u,query:l})},c.viewImageStripMeta=function(e){s.verifyOptions(e,"url strip","nos::viewImageStripMeta"),s.verifyParamType("strip",e.strip,"boolean","nos::viewImageStripMeta");var t="stripmeta="+(e.strip?1:0),n=(0,o.genUrlSep)(e.url);return e.url+n+t},c.viewImageQuality=function(e){s.verifyOptions(e,"url quality","nos::viewImageQuality"),s.verifyParamType("quality",e.quality,"number","nos::viewImageQuality"),s.verifyParamMin("quality",e.quality,0,"nos::viewImageQuality"),s.verifyParamMax("quality",e.quality,100,"nos::viewImageQuality");var t="quality="+Math.round(e.quality),n=(0,o.genUrlSep)(e.url);return e.url+n+t},c.viewImageInterlace=function(e){s.verifyOptions(e,"url","nos::viewImageInterlace");var t=(0,o.genUrlSep)(e.url);return e.url+t+"interlace=1"},c.viewImageRotate=function(e){for(s.verifyOptions(e,"url angle","nos::viewImageRotate"),s.verifyParamType("angle",e.angle,"number","nos::viewImageRotate");e.angle<0;)e.angle=e.angle+360;e.angle=e.angle%360;var t="rotate="+Math.round(e.angle),n=(0,o.genUrlSep)(e.url);return e.url+n+t},c.viewImageBlur=function(e){s.verifyOptions(e,"url radius sigma","nos::viewImageBlur"),s.verifyParamType("radius",e.radius,"number","nos::viewImageBlur"),s.verifyParamMin("radius",e.radius,1,"nos::viewImageBlur"),s.verifyParamMax("radius",e.radius,50,"nos::viewImageBlur"),s.verifyParamType("sigma",e.sigma,"number","nos::viewImageBlur"),s.verifyParamMin("sigma",e.sigma,0,"nos::viewImageBlur");var t="blur="+Math.round(e.radius)+"x"+Math.round(e.sigma),n=(0,o.genUrlSep)(e.url);return e.url+n+t},c.viewImageCrop=function(e){s.verifyOptions(e,"url x y width height","nos::viewImageCrop"),s.verifyParamType("x",e.x,"number","nos::viewImageCrop"),s.verifyParamMin("x",e.x,0,"nos::viewImageCrop"),s.verifyParamType("y",e.y,"number","nos::viewImageCrop"),s.verifyParamMin("y",e.y,0,"nos::viewImageCrop"),s.verifyParamType("width",e.width,"number","nos::viewImageCrop"),s.verifyParamMin("width",e.width,0,"nos::viewImageCrop"),s.verifyParamType("height",e.height,"number","nos::viewImageCrop"),s.verifyParamMin("height",e.height,0,"nos::viewImageCrop");var t="crop="+Math.round(e.x)+"_"+Math.round(e.y)+"_"+Math.round(e.width)+"_"+Math.round(e.height),n=(0,o.genUrlSep)(e.url);return e.url+n+t},c.viewImageThumbnail=(i={cover:"z",contain:"x",crop:"y"},function(e){s.verifyOptions(e,"url mode","nos::viewImageThumbnail"),s.verifyParamValid("mode",e.mode,Object.keys(i),"nos::viewImageThumbnail"),"contain"===e.mode?s.verifyParamAtLeastPresentOne(e,"width height","nos::viewImageThumbnail"):s.verifyOptions(e,"width height","nos::viewImageThumbnail"),s.undef(e.width)&&(e.width=0),s.undef(e.height)&&(e.height=0),s.verifyParamType("width",e.width,"number","nos::viewImageThumbnail"),s.verifyParamMin("width",e.width,0,"nos::viewImageThumbnail"),s.verifyParamType("height",e.height,"number","nos::viewImageThumbnail"),s.verifyParamMin("height",e.height,0,"nos::viewImageThumbnail");var t=Math.round(e.width),n=Math.round(e.height),r="thumbnail="+t+i[e.mode]+n;"crop"===e.mode&&s.notundef(e.axis)&&(s.undef(e.axis.x)&&(e.axis.x=5),s.undef(e.axis.y)&&(e.axis.y=5),s.verifyParamMin("axis.x",e.axis.x,0,"nos::viewImageThumbnail"),s.verifyParamMax("axis.x",e.axis.x,10,"nos::viewImageThumbnail"),s.verifyParamMin("axis.y",e.axis.y,0,"nos::viewImageThumbnail"),s.verifyParamMax("axis.y",e.axis.y,10,"nos::viewImageThumbnail"),r=r+"&axis="+Math.round(e.axis.x)+"_"+Math.round(e.axis.y)),s.notundef(e.enlarge)&&(s.verifyParamType("enlarge",e.enlarge,"boolean","nos::viewImageThumbnail"),e.enlarge&&(r+="&enlarge=1"));var a=(0,o.genUrlSep)(e.url);return e.url+a+r})},function(e,t,n){var r,i=n(0),a=n(46).fn,o=n(186),s=n(188),c=n(29);a.transDoc=function(e){i.verifyOptions(e,"fileInput done","nos::transDoc");try{var t=e.fileInput.files[0],n=e.fileInputName=t.name,r={ppt:1,pptx:2,pdf:3,doc:6,docx:7},a=n.substring(n.lastIndexOf(".")+1);if(["ppt","pdf","pptx","doc","docx"].indexOf(a)<0)return void e.done(c.newNoFileError("\u8bf7\u4e0a\u4f20\u6b63\u786e\u683c\u5f0f\u7684\u6587\u4ef6\u3010ppt, pptx, pdf, doc, docx\u3011",{callFunc:"nos: transDoc",fileInput:e.fileInput}),e)}catch(t){return void e.done(c.newNoFileError("\u8bf7\u4e0a\u4f20\u6b63\u786e\u7684\u6587\u4ef6\u8282\u70b9",{callFunc:"msg::previewFile",fileInput:e.fileInput}),e)}var o=JSON.stringify(s.genResponseBody("file")||{}).replace(/"/gi,'\\"'),u={transToken:{name:n,type:r[a],transType:"png"===e.transcode?11:10,size:t.size,body:o}};this.getNosTokenTrans({responseBody:u,nosToken:{nosScene:e.nosScene||this.nosScene,nosSurvivalTime:e.nosSurvivalTime},callback:function(t,n){t?e.done(t):(e.nosToken=n.nosToken,e.docId=n.docId,this._doPreviewFile(e))}.bind(this)})},a.getSimpleNosToken=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.num=1,i.verifyOptions(e),this.cbAndSendCmd("getSimpleNosToken",e)},a.getNosToken=function(e){var t=e.callback,n=e.nosToken,r=e.responseBody,i={tag:n.nosScene};n.nosSurvivalTime&&n.nosSurvivalTime!==1/0&&(i.expireSec=n.nosSurvivalTime),this.sendCmd("getNosToken",{responseBody:r,nosToken:i},t)},a.getNosTokenTrans=function(e){this.sendCmd("getNosTokenTrans",e.responseBody,e.callback)},a.packFileDownloadName=function(e){i.verifyOptions(e,"url name",!0,"","nos::packFileDownloadName");var t=e.url;return t+i.genUrlSep(t)+"download="+encodeURIComponent(e.name)},a.audioToMp3=function(e){i.verifyOptions(e,"url","nos::audioToMp3");var t=e.url;return t+i.genUrlSep(t)+"audioTrans&type=mp3"},a.removeFile=function(e){this.sendCmd("removeFile",e,e.callback)},a.fetchFile=function(e){this.sendCmd("fetchFile",e,e.callback)},a.fetchFileList=function(e){this.sendCmd("fetchFileList",e,e.callback)},a.stripImageMeta=function(e){return this.beforeProcessImage(e,"stripmeta")},a.qualityImage=function(e){return this.beforeProcessImage(e,"quality")},a.interlaceImage=function(e){return this.beforeProcessImage(e,"interlace")},a.rotateImage=function(e){return this.beforeProcessImage(e,"rotate")},a.blurImage=function(e){return this.beforeProcessImage(e,"blur")},a.cropImage=function(e){return this.beforeProcessImage(e,"crop")},a.thumbnailImage=function(e){return this.beforeProcessImage(e,"thumbnail")},a.beforeProcessImage=function(e,t){var n=i.copy(e);return n.type=t,e.ops=[n],this.processImage(e)},a.processImage=function(e){var t=this;i.verifyOptions(e,"url ops",!0,"","nos::processImage"),i.verifyParamType("ops",e.ops,"array","nos::processImage");var n=e.ops.map((function(e){return i.verifyOptions(e,"type",!0,"","nos::processImage"),i.verifyParamValid("type",e.type,o.validTypes,"nos::processImage"),t["gen"+e.type.slice(0,1).toUpperCase()+e.type.slice(1)+"Op"](e)}));t.processCallback(e),t.sendCmd("processImage",{url:e.url,imageOps:n},e.callback)},a.genStripmetaOp=function(e){return new o({type:e.type,stripmeta:e.strip?1:0})},a.genQualityOp=function(e){i.verifyOptions(e,"quality",!0,"","nos::genQualityOp"),i.verifyParamType("quality",e.quality,"number","nos::genQualityOp"),i.verifyParamMin("quality",e.quality,0,"nos::genQualityOp"),i.verifyParamMax("quality",e.quality,100,"nos::genQualityOp");var t=Math.round(e.quality);return new o({type:e.type,qualityQuality:t})},a.genInterlaceOp=function(e){return new o({type:e.type})},a.genRotateOp=function(e){for(i.verifyOptions(e,"angle",!0,"","nos::genRotateOp"),i.verifyParamType("angle",e.angle,"number","nos::genRotateOp");e.angle<0;)e.angle=e.angle+360;e.angle=e.angle%360;var t=Math.round(e.angle);return new o({type:e.type,rotateAngle:t})},a.genBlurOp=function(e){i.verifyOptions(e,"radius sigma","nos::genBlurOp"),i.verifyParamType("radius",e.radius,"number","nos::genBlurOp"),i.verifyParamMin("radius",e.radius,1,"nos::genBlurOp"),i.verifyParamMax("radius",e.radius,50,"nos::genBlurOp"),i.verifyParamType("sigma",e.sigma,"number","nos::genBlurOp"),i.verifyParamMin("sigma",e.sigma,0,"nos::genBlurOp");var t=Math.round(e.radius),n=Math.round(e.sigma);return new o({type:e.type,blurRadius:t,blurSigma:n})},a.genCropOp=function(e){i.verifyOptions(e,"x y width height","nos::genCropOp"),i.verifyParamType("x",e.x,"number","nos::genCropOp"),i.verifyParamMin("x",e.x,0,"nos::genCropOp"),i.verifyParamType("y",e.y,"number","nos::genCropOp"),i.verifyParamMin("y",e.y,0,"nos::genCropOp"),i.verifyParamType("width",e.width,"number","nos::genCropOp"),i.verifyParamMin("width",e.width,0,"nos::genCropOp"),i.verifyParamType("height",e.height,"number","nos::genCropOp"),i.verifyParamMin("height",e.height,0,"nos::genCropOp");var t=Math.round(e.x),n=Math.round(e.y),r=Math.round(e.width),a=Math.round(e.height);return new o({type:e.type,cropX:t,cropY:n,cropWidth:r,cropHeight:a})},a.genThumbnailOp=(r={cover:"z",contain:"x",crop:"y"},function(e){i.verifyOptions(e,"mode","nos::genThumbnailOp"),i.verifyParamValid("mode",e.mode,Object.keys(r),"nos::genThumbnailOp"),"contain"===e.mode?i.verifyParamAtLeastPresentOne(e,"width height","nos::genThumbnailOp"):i.verifyOptions(e,"width height","nos::genThumbnailOp"),i.undef(e.width)&&(e.width=0),i.undef(e.height)&&(e.height=0),i.verifyParamType("width",e.width,"number","nos::genThumbnailOp"),i.verifyParamMin("width",e.width,0,"nos::genThumbnailOp"),i.verifyParamType("height",e.height,"number","nos::genThumbnailOp"),i.verifyParamMin("height",e.height,0,"nos::genThumbnailOp");var t=Math.round(e.width),n=Math.round(e.height),a=new o({type:e.type,thumbnailMode:r[e.mode],thumbnailWidth:t,thumbnailHeight:n});if("crop"===e.mode&&i.notundef(e.axis)){i.undef(e.axis.x)&&(e.axis.x=5),i.undef(e.axis.y)&&(e.axis.y=5),i.verifyParamMin("axis.x",e.axis.x,0,"nos::genThumbnailOp"),i.verifyParamMax("axis.x",e.axis.x,10,"nos::genThumbnailOp"),i.verifyParamMin("axis.y",e.axis.y,0,"nos::genThumbnailOp"),i.verifyParamMax("axis.y",e.axis.y,10,"nos::genThumbnailOp");var s=Math.round(e.axis.x),c=Math.round(e.axis.y);a.thumbnailAxisX=s,a.thumbnailAxisY=c}return i.notundef(e.enlarge)&&(i.verifyParamType("enlarge",e.enlarge,"boolean","nos::genThumbnailOp"),e.enlarge&&(a.thumbnailEnlarge=1)),a.thumbnailToStatic=this.options.thumbnailToStatic?1:0,a}),a.getNosOriginUrl=function(e){i.verifyOptions(e,"safeShortUrl",!0,"","nos::getNosOriginUrl"),i.verifyParamType("safeShortUrl",e.safeShortUrl,"string","nos::getNosOriginUrl"),/^http(s)?:/.test(e.safeShortUrl)&&~e.safeShortUrl.indexOf("im_url=1")?(this.processCallback(e),this.sendCmd("getNosOriginUrl",{nosFileUrlTag:{safeUrl:e.safeShortUrl}},e.callback)):e.done(new c("\u53c2\u6570 \u201csafeShortUrl\u201d \u5185\u5bb9\u975e\u6587\u4ef6\u5b89\u5168\u77ed\u94fe",{callFunc:"nos: getNosOriginUrl"}),e)}},function(e,t,n){var r=n(5),i=n(0),a=n(29),o=n(40).upload,s=n(40).chunkUpload,c=n(40).abort,u=i.supportFormData;function l(e){var t=this;t.options=i.copy(e),i.verifyOptions(e,"url fileName"),i.verifyParamPresentJustOne(e,"blob fileInput"),i.verifyCallback(e,"beginupload uploadprogress uploaddone"),e.fileInput&&(e.fileInput=i.verifyFileInput(e.fileInput)),e.type&&i.verifyFileType(e.type),e.timeout?i.verifyParamType("timeout",e.timeout,"number"):e.timeout=6e5,i.verifyFileUploadCallback(e),e.data={},e.params&&i.merge(e.data,e.params);var n=e.fileName,c=e.fileInput;if(u){if(c){var l=e.type?i.filterFiles(c.files,e.type):[].slice.call(c.files,0);if(!l||!l.length)return void e.uploaddone(a.newWrongFileTypeError("\u672a\u8bfb\u53d6\u5230"+e.type+"\u7c7b\u578b\u7684\u6587\u4ef6, \u8bf7\u786e\u4fdd\u6587\u4ef6\u9009\u62e9\u8282\u70b9\u7684\u6587\u4ef6\u4e0d\u4e3a\u7a7a, \u5e76\u4e14\u8bf7\u786e\u4fdd\u9009\u62e9\u4e86"+e.type+"\u7c7b\u578b\u7684\u6587\u4ef6"));e.data[n]=l[0];var m=c.files[0].size}else if(e.blob){if(e.data[n]=e.blob,"file"!==e.type&&e.blob.type&&-1===e.blob.type.indexOf(e.type))return void e.uploaddone(a.newWrongFileTypeError("\u672a\u8bfb\u53d6\u5230"+e.type+"\u7c7b\u578b\u7684\u6587\u4ef6, \u8bf7\u786e\u4fdd\u9009\u62e9\u4e86"+e.type+"\u7c7b\u578b\u7684\u6587\u4ef6"));m=e.blob.size}if(e.maxSize&&m>e.maxSize)return void e.uploaddone(a.newFileTooLargeError("\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7"+e.maxSize+"\u9650\u5236"));if(!e.commonUpload)return m>r.chunkMaxSize?void e.uploaddone(a.newFileTooLargeError("\u76f4\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7"+r.chunkMaxSize+"\u9650\u5236")):void(t.sn=s(e,n,t,-1));if(m>r.commonMaxSize)return void e.uploaddone(a.newFileTooLargeError("\u666e\u901a\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7"+r.commonMaxSize+"\u9650\u5236"))}else i.dataset(c,"name",n),e.data.input=c;var d={data:e.data,onaftersend:function(){e.beginupload(t)},onuploading:function(t){var n=Math.floor(1e4*t.loaded/t.total)/100,r={docId:e.docId,total:t.total,loaded:t.loaded,percentage:n,percentageText:n+"%"};e.fileInput&&(r.fileInput=e.fileInput),e.blob&&(r.blob=e.blob),e.uploadprogress(r)},onload:function(n){n.docId=e.docId,n.Error?t.onError(n):e.uploaddone(null,n)},onerror:function(n){try{if(n.result)var r=JSON.parse(n.result);else r=n;t.onError(r)}catch(r){console.log("error: ignore error if could not parse obj.result",r),e.uploaddone(new a(n.message,n.code),t.options)}}};u||(d.mode="iframe"),d.putFileAtEnd=!0,t.sn=o(e.url,d)}l.prototype.onError=function(e){var t,n,r,i=this.options;n=(t=(e=e||{}).Error||e||{}).Code||t.code||"unknown",r=t.Message||t.message||"\u672a\u77e5\u9519\u8bef",i.uploaddone(new a(n+"("+r+")",n))},l.prototype.abort=function(){c(this.sn)},e.exports=l},function(e,t,n){var r,i;void 0===(i="function"==typeof(r=function(e){return function(t){(t=t||{}).arrayAccessForm=t.arrayAccessForm||"none",t.emptyNodeForm=t.emptyNodeForm||"text",t.jsAttributeFilter=t.jsAttributeFilter,t.jsAttributeConverter=t.jsAttributeConverter,t.attributeConverters=t.attributeConverters||[],t.datetimeAccessFormPaths=t.datetimeAccessFormPaths||[],t.arrayAccessFormPaths=t.arrayAccessFormPaths||[],void 0===t.enableToStringFunc&&(t.enableToStringFunc=!0),void 0===t.skipEmptyTextNodesForObj&&(t.skipEmptyTextNodesForObj=!0),void 0===t.stripWhitespaces&&(t.stripWhitespaces=!0),void 0===t.useDoubleQuotes&&(t.useDoubleQuotes=!0),void 0===t.ignoreRoot&&(t.ignoreRoot=!1),void 0===t.escapeMode&&(t.escapeMode=!0),void 0===t.attributePrefix&&(t.attributePrefix="_"),void 0===t.selfClosingElements&&(t.selfClosingElements=!0),void 0===t.keepCData&&(t.keepCData=!1),void 0===t.jsDateUTC&&(t.jsDateUTC=!1),function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|^\n+|(\s|\n)+$/g,"")}),"function"!=typeof Date.prototype.toISOString&&(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"})}();var n=1,r=3,i=4,a=8,o=9;function s(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!==t||(t=e.nodeName),t}function c(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"):e}function u(e,n,r){switch(t.arrayAccessForm){case"property":e[n]instanceof Array?e[n+"_asArray"]=e[n]:e[n+"_asArray"]=[e[n]]}if(!(e[n]instanceof Array)&&t.arrayAccessFormPaths.length>0){for(var i=!1,a=0;a<t.arrayAccessFormPaths.length;a++){var o=t.arrayAccessFormPaths[a];if("string"==typeof o){if(o===r){i=!0;break}}else if(o instanceof RegExp){if(o.test(r)){i=!0;break}}else if("function"==typeof o&&o(n,r)){i=!0;break}}i&&(e[n]=[e[n]])}}function l(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"===(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function m(e,c){return e.nodeType===o?function(e){for(var r={},i=e.childNodes,a=0;a<i.length;a++){var o=i.item(a);if(o.nodeType===n){var c=s(o);t.ignoreRoot?r=m(o,c):r[c]=m(o,c)}}return r}(e):e.nodeType===n?function(e,n){for(var r={__cnt:0},i=e.childNodes,o=0;o<i.length;o++){var c=i.item(o),d=s(c);c.nodeType!==a&&(r.__cnt++,null==r[d]?(r[d]=m(c,n+"."+d),u(r,d,n+"."+d)):(r[d]instanceof Array||(r[d]=[r[d]],u(r,d,n+"."+d)),r[d][r[d].length]=m(c,n+"."+d)))}for(var p=0;p<e.attributes.length;p++){var f=e.attributes.item(p);r.__cnt++;for(var g=f.value,h=0;h<t.attributeConverters.length;h++){var y=t.attributeConverters[h];y.test.call(null,f.name,f.value)&&(g=y.convert.call(null,f.name,f.value))}r[t.attributePrefix+f.name]=g}var b=e.prefix;return b&&(r.__cnt++,r.__prefix=b),r["#text"]&&(r.__text=r["#text"],r.__text instanceof Array&&(r.__text=r.__text.join("\n")),t.escapeMode&&(r.__text=r.__text.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&amp;/g,"&")),t.stripWhitespaces&&(r.__text=r.__text.trim()),delete r["#text"],"property"===t.arrayAccessForm&&delete r["#text_asArray"],r.__text=function(e,n,r){if(t.datetimeAccessFormPaths.length>0)for(var i=r.split(".#")[0],a=0;a<t.datetimeAccessFormPaths.length;a++){var o=t.datetimeAccessFormPaths[a];if("string"==typeof o){if(o===i)return l(e)}else if(o instanceof RegExp){if(o.test(i))return l(e)}else if("function"==typeof o&&o(i))return l(e)}return e}(r.__text,0,n+".#text")),r.hasOwnProperty("#cdata-section")&&(r.__cdata=r["#cdata-section"],delete r["#cdata-section"],"property"===t.arrayAccessForm&&delete r["#cdata-section_asArray"]),1===r.__cnt&&r.__text?r=r.__text:0===r.__cnt&&"text"===t.emptyNodeForm?r="":r.__cnt>1&&void 0!==r.__text&&t.skipEmptyTextNodesForObj&&(t.stripWhitespaces&&""===r.__text||""===r.__text.trim())&&delete r.__text,delete r.__cnt,t.keepCData||r.hasOwnProperty("__text")||!r.hasOwnProperty("__cdata")?(t.enableToStringFunc&&(r.__text||r.__cdata)&&(r.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}),r):r.__cdata?r.__cdata:""}(e,c):e.nodeType===r||e.nodeType===i?e.nodeValue:null}function d(e,n,r,i){var a="<"+(e&&e.__prefix?e.__prefix+":":"")+n;if(r)for(var o=0;o<r.length;o++){var s=r[o],u=e[s];t.escapeMode&&(u=c(u)),a+=" "+s.substr(t.attributePrefix.length)+"=",t.useDoubleQuotes?a+='"'+u+'"':a+="'"+u+"'"}return a+(i?" />":">")}function p(e,t){return"</"+(e&&e.__prefix?e.__prefix+":":"")+t+">"}function f(e,n){return"property"===t.arrayAccessForm&&(i="_asArray",-1!==(r=n.toString()).indexOf(i,r.length-i.length))||0===n.toString().indexOf(t.attributePrefix)||0===n.toString().indexOf("__")||e[n]instanceof Function;var r,i}function g(e){var t=0;if(e instanceof Object)for(var n in e)f(e,n)||t++;return t}function h(e){var n=[];if(e instanceof Object)for(var r in e)-1===r.toString().indexOf("__")&&0===r.toString().indexOf(t.attributePrefix)&&n.push(r);return n}function y(e){var n="";return e instanceof Object?n+=function(e){var n="";return e.__cdata&&(n+="<![CDATA["+e.__cdata+"]]>"),e.__text&&(t.escapeMode?n+=c(e.__text):n+=e.__text),n}(e):null!==e&&(t.escapeMode?n+=c(e):n+=e),n}function b(e,n,r){var i="";return t.jsAttributeFilter&&t.jsAttributeFilter.call(null,n,e)||(t.jsAttributeConverter&&(e=t.jsAttributeConverter.call(null,n,e)),null!=e&&""!==e||!t.selfClosingElements?"object"==typeof e?"[object Array]"===Object.prototype.toString.call(e)?i+=function(e,t,n){var r="";if(0===e.length)r+=d(e,t,n,!0);else for(var i=0;i<e.length;i++)r+=b(e[i],t,h(e[i]));return r}(e,n,r):e instanceof Date?(i+=d(e,n,r,!1),i+=t.jsDateUTC?e.toUTCString():e.toISOString(),i+=p(e,n)):g(e)>0||e.__text||e.__cdata?(i+=d(e,n,r,!1),i+=v(e),i+=p(e,n)):t.selfClosingElements?i+=d(e,n,r,!0):(i+=d(e,n,r,!1),i+=p(e,n)):(i+=d(e,n,r,!1),i+=y(e),i+=p(e,n)):i+=d(e,n,r,!0)),i}function v(e){var t="";if(g(e)>0)for(var n in e)if(!f(e,n)){var r=e[n];t+=b(r,n,h(r))}return t+y(e)}function S(t){if(void 0===t)return null;if("string"!=typeof t)return null;var n=null,r=null;if(e)r=(n=new e).parseFromString(t,"text/xml");else if(window&&window.DOMParser){n=new window.DOMParser;var i=null;if(!window.ActiveXObject&&!("ActiveXObject"in window))try{i=n.parseFromString("INVALID","text/xml").childNodes[0].namespaceURI}catch(e){i=null}try{r=n.parseFromString(t,"text/xml"),null!==i&&r.getElementsByTagNameNS(i,"parsererror").length>0&&(r=null)}catch(e){r=null}}else 0===t.indexOf("<?")&&(t=t.substr(t.indexOf("?>")+2)),(r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(t);return r}this.asArray=function(e){return null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?l(e):e},this.xml2dom=function(e){return S(e)},this.dom2js=function(e){return m(e,null)},this.js2dom=function(e){return S(this.js2xml(e))},this.xml2js=function(e){var t=S(e);return null!=t?this.dom2js(t):null},this.js2xml=function(e){return v(e)},this.getVersion=function(){return"3.1.1"}}})?r.apply(t,[]):r)||(e.exports=i)},function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=n(46).fn,o=n(0),s=n(334),c=n(29),u=n(5),l=n(188),m=n(333),d=n(187);a.sendText=function(e){return this.processCallback(e),e.msg=new this.message.TextMessage(e),this.sendMsg(e)},a.previewFile=function(e){if(o.verifyOptions(e,"done","msg::previewFile"),e.type||(e.type="file"),o.verifyParamPresentJustOne(e,"dataURL blob fileInput filePath wxFilePath fileObject","msg::previewFile"),o.exist(e.maxSize)&&o.verifyParamType("maxSize",e.maxSize,"number","api::previewFile"),o.exist(e.commonUpload)&&o.verifyParamType("commonUpload",e.commonUpload,"boolean","api::previewFile"),e.nosSurvivalTime?(o.verifyParamType("nosSurvivalTime",e.nosSurvivalTime,"number","api::Base.getInstance"),o.verifyParamMin("nosSurvivalTime",e.nosSurvivalTime,86400,"api::Base.getInstance")):e.nosSurvivalTime=this.nosSurvivalTime,e.filePath=e.filePath||e.wxFilePath,delete e.wxFilePath,e.dataURL)e.blob=d.fromDataURL(e.dataURL);else if(e.blob);else if(e.fileInput){if(e.fileInput=o.verifyFileInput(e.fileInput,"msg::previewFile"),e.fileInput.files){if(!e.fileInput.files.length)return void e.done(c.newNoFileError("\u8bf7\u9009\u62e9"+e.type+"\u6587\u4ef6",{callFunc:"msg::previewFile",fileInput:e.fileInput}),e);e.fileSize=e.fileInput.files[0].size}e.fileInputName=o.getFileName(e.fileInput)}this.processCallback(e);var t=JSON.stringify(l.genResponseBody(e.type)||{}).replace(/"/gi,'\\"'),n=null,r=e.transcode?"getNosTokenTrans":"getNosToken";if(e.transcode){o.verifyOptions(e,"fileInput","msg::previewFile");var i=o.getFileInfo(e.fileInput);n={transToken:{name:i.name,type:i.transcodeType,transType:"png"===e.transcode?11:10,size:i.size,body:t}}}else n=t;this[r]({responseBody:n,nosToken:{nosScene:e.nosScene||this.nosScene,nosSurvivalTime:e.nosSurvivalTime},callback:function(t,n){t?e.done(t):(e.transcode?(e.nosToken=n.nosToken,e.docId=n.docId):e.nosToken=n,this._doPreviewFile(e))}.bind(this)})},a._doPreviewFile=function(e){var t,n=this,r=e.uploaddone,a=u.genUploadUrl(e.nosToken.bucket),s=u.chunkUploadUrl;e.commonUpload||!s||u.isWeixinApp||u.isNodejs||u.isRN?(e.commonUpload=!0,t=a):(this.logger.info("use chunkUrl: ",s,u.nosLbsUrls),t=s,e.nosLbsUrls=u.nosLbsUrls,n.edgeList?e.edgeList=n.edgeList:e.updateNosEdgeList=function(e){n.edgeList=e});var d=this.assembleUploadParams(e.nosToken);function p(t,i,a){if(e.uploaddone=r,t)e.done(t,e.callback.options);else{if(i=l.parseResponse(i,n.options.exifOrientation),a||(i.url=u.genDownloadUrl(e.nosToken,d.Object,u.serverNosConfig.cdnDomain),e.nosToken.shortUrl&&(i._url_safe=e.nosToken.shortUrl)),o.exist(e.fileInputName))i.name=e.fileInputName;else if(e.blob){var s=e.blob.name;if(i.name=s||"blob-"+i.md5,!s){var c=e.blob.type;i.ext=c.slice(c.lastIndexOf("/")+1)}}else e.filePath?i.name=e.filePath:e.fileObject&&(i.name=e.fileObject.fileName);if(!i.ext){var m=i.name.lastIndexOf(".");i.ext=-1===m?"unknown":i.name.slice(m+1)}i.size=i.size||0,e.done(null,o.copy(i))}}if(u.isWeixinApp)o.verifyOptions(e,"filePath","msg::_doPreviewFile"),n.fileQuickTransfer(e,p,(function(){var r=wx.uploadFile({url:t,filePath:e.filePath,name:"file",formData:d,fail:function(e){p({code:"FAILED",msg:e}),n.protocol.logger.error("error:","api::msg:upload file failed",e)},success:function(e){if(200===e.statusCode)try{p(null,JSON.parse(e.data))}catch(t){n.protocol.logger.error("error:","parse wx upload file res error",t),p({code:"PARSE_WX_UPLOAD_FILE_RES_ERROR",str:e.data,msg:e.errMsg})}else p({code:e.statusCode,msg:e.errMsg})}});"function"==typeof e.uploadprogress&&r&&r.onProgressUpdate((function(t){e.uploadprogress({total:t.totalBytesExpectedToSend,loaded:t.totalBytesSent,percentage:t.progress,percentageText:t.progress+"%"})}))}));else if(u.isNodejs){var f={url:t,name:"file",formData:d,success:function(e){if(200===e.statusCode)try{p(null,JSON.parse(e.data))}catch(t){n.protocol.logger.error("error:","parse nodejs upload file res error",t),p({code:"PARSE_NODEJS_UPLOAD_FILE_RES_ERROR",str:e.data,msg:e.errMsg})}else p({code:e.statusCode,msg:e.errMsg})},fail:function(e){p({code:"FAILED",msg:e}),n.protocol.logger.error("error:","api::msg:upload file failed",e)}};if(e.filePath)f.filePath=e.filePath;else{if("object"!==(0,i.default)(e.fileObject))throw new c("Nodejs\u4e0a\u4f20fileObject\u53c2\u6570\u7c7b\u578b\u5e94\u5982 {fileName:..,fileData:..} ");f.fileData=e.fileObject.fileData}n.fileQuickTransfer(e,p,(function(){m.uploadFile(f)}))}else if(u.isRN){var g={url:t,name:"file",formData:d,filePath:e.filePath,success:function(e){if(e.ok&&200===e.status)try{e.md5=e.headers.map&&e.headers.map.etag&&e.headers.map.etag[0]||"UNKNOWN",p(null,e)}catch(t){n.protocol.logger.error("error:","parse React Native upload file res error",t),p({code:"PARSE_React_Native_UPLOAD_FILE_RES_ERROR",res:e})}else p({code:e.status,msg:e.statusText})},fail:function(e){p({code:"FAILED",msg:e}),n.protocol.logger.error("error:","api::msg:upload file failed",e)}};n.fileQuickTransfer(e,p,(function(){m.uploadFile(g)}))}else e.uploaddone=p,e.url=t,e.params=d,e.fileName="file",n.fileQuickTransfer(e,p,(function(){return new m(e)}))},a.fileQuickTransfer=function(e,t,n){var r=this;e=e||{},t instanceof Function||(t=function(){}),n instanceof Function||(n=function(){});var i=e.fastPass;if(i)try{i=JSON.parse(i),e.fastPass=i}catch(e){r.protocol.logger.error("\u5feb\u4f20\u53c2\u6570\u89e3\u6790\u5931\u8d25")}var a=e.fileInputName||e.name||e.blob&&e.blob.name||"",o=e.fileSize||e.size||e.blob&&e.blob.size||0,s=i?((i.md5||e.digest||"")+"").trim():"",c=e.type||e.blob&&e.blob.type;if(s&&o>=u.threshold){var l=!0,m={name:a,md5:s,ext:a.slice(a.lastIndexOf(".")+1),type:c};switch(c){case"image":i&&i.w&&i.h?(m.w=i.w,m.h=i.h):(l=!1,r.protocol.logger.error("\u5feb\u4f20 image \u6587\u4ef6\u7f3a\u5c11\u53c2\u6570 w \u6216 h"));break;case"video":i&&i.w&&i.h&&i.dur?(m.w=i.w,m.h=i.h,m.dur=i.dur):(l=!1,r.protocol.logger.error("\u5feb\u4f20 video \u6587\u4ef6\u7f3a\u5c11\u53c2\u6570 w \u6216 h \u6216 dur"));break;case"audio":i&&i.dur?m.dur=i.dur:(l=!1,r.protocol.logger.error("\u5feb\u4f20 audio \u6587\u4ef6\u7f3a\u5c11\u53c2\u6570 dur"))}if(!l)return void n();var d={fileQuickTransfer:{md5:s}};return o&&(d.fileQuickTransfer.size=o),this.protocol.sendCmd("fileQuickTransfer",d,(function(e,i,a){!e&&a&&a.fileQuickTransfer&&a.fileQuickTransfer.url||(r.protocol.logger.error("misc::fileQuickTransfer: not found",e,i),n()),a&&a.fileQuickTransfer&&a.fileQuickTransfer.threshold&&(u.threshold=a.fileQuickTransfer.threshold||0),a&&a.fileQuickTransfer&&a.fileQuickTransfer.url&&(m.size=o||a.fileQuickTransfer.size,m.url=a.fileQuickTransfer.url,a.fileQuickTransfer._url_safe&&(m._url_safe=a.fileQuickTransfer._url_safe),t(e,m,!0))}))}n()},a.sendFile=function(e){if(e.type||(e.type="file"),o.verifyParamPresentJustOne(e,"dataURL blob fileInput file filePath wxFilePath fileObject","msg::sendFile"),o.exist(e.maxSize)&&o.verifyParamType("maxSize",e.maxSize,"number","api::previewFile"),o.exist(e.commonUpload)&&o.verifyParamType("commonUpload",e.commonUpload,"boolean","api::previewFile"),this.processCallback(e),e.filePath=e.filePath||e.wxFilePath,delete e.wxFilePath,e.dataURL)this._previewAndSendFile(e);else if(e.blob)this._previewAndSendFile(e);else if(e.fileInput){if(e.fileInput=o.verifyFileInput(e.fileInput,"msg::sendFile"),e.fileInput.files&&!e.fileInput.files.length)return void e.done(c.newNoFileError("\u8bf7\u9009\u62e9"+e.type+"\u6587\u4ef6",{callFunc:"msg::sendFile",fileInput:e.fileInput}),e.callback.options);this._previewAndSendFile(e)}else if(e.filePath||e.fileObject)this._previewAndSendFile(e);else if(e.file){var t,n=e.file._url_safe;return n&&(t=e.file.url,e.file.url=n,delete e.file._url_safe),e.msg=new this.message.FileMessage(e),this.sendMsg(e,t)}},a._previewAndSendFile=function(e){var t=this;o.verifyCallback(e,"uploaddone beforesend","msg::_previewAndSendFile");var n=e.done;e.done=function(r,i){if(e.done=n,r)e.uploaddone(r,e.callback.options),e.done(r,e.callback.options);else{if(/chatroom/.test(e.scene))return;var a;e.uploaddone(null,o.copy(i));var s=i._url_safe;s&&(a=i.url,i.url=s,delete i._url_safe),e.file=i,e.msg=new t.message.FileMessage(e),e.beforesend(t.sendMsg(e,a))}},t.previewFile(e)},a.assembleUploadParams=function(e){return e?{Object:decodeURIComponent(e.objectName),"x-nos-token":e.token,"x-nos-entity-type":"json"}:null},a.deleteFile=function(e){o.verifyParamPresentJustOne(e,"docId","msg::deleteFile"),this.removeFile({docId:e.docId,callback:function(t,n){t?e.error&&e.error(t,n):e.success&&e.success(n)}})},a.getFile=function(e){o.verifyParamPresentJustOne(e,"docId","msg::getFile"),this.fetchFile({docId:e.docId,callback:function(t,n){t?e.error&&e.error(t,n):e.success&&e.success(n.info)}})},a.getFileList=function(e){var t=e.fromDocId,n=void 0===t?"":t,r=e.limit,i=void 0===r?10:r,a={limit:i};n&&(a.fromDocId=n),this.fetchFileList({fileListParam:a,callback:function(t,n){t?(i>30&&(t.message=t.message+"::\u6587\u6863\u6761\u6570\u8d85\u8fc7\u9650\u5236:30"),e.error&&e.error(t,n)):e.success&&e.success(n)}})},a.sendGeo=function(e){return this.processCallback(e),e.msg=new this.message.GeoMessage(e),this.sendMsg(e)},a.sendTipMsg=function(e){return this.processCallback(e),e.msg=new this.message.TipMessage(e),this.sendMsg(e)},a.sendCustomMsg=function(e){return this.processCallback(e),e.msg=new this.message.CustomMessage(e),this.sendMsg(e)},a.sendRobotMsg=function(e){return this.processCallback(e),e.msg=new this.message.RobotMessage(e),this.sendMsg(e)},a.sendMsg=function(e,t){var n,r=this.protocol,i=e.msg,a={},s=!!e.isLocal;if(this.logger.warn("sendMsg::start: "+i.idClient),s&&(e.time&&(i.time=e.time),e.idClient&&(i.idClient=e.idClient),e.localFrom&&(n=e.localFrom+"")),e.resend&&("out"!==e.flow||"fail"!==e.status))return o.onError("\u53ea\u80fd\u91cd\u53d1\u53d1\u9001\u5931\u8d25\u7684\u6d88\u606f");e.callback.options.idClient=i.idClient,this.beforeSendMsg(e,a);var c=e.rtnMsg=this.formatReturnMsg(i,n);return t&&!this.options.keepNosSafeUrl&&c.file&&(c.file._url_safe=c.file.url,c.file.url=t,"audio"===c.type&&(c.file.mp3Url=t+(~t.indexOf("?")?"&":"?")+"audioTrans&type=mp3")),c.hasOwnProperty("chatroomId")&&!c.chatroomId?o.onError("\u804a\u5929\u5ba4\u672a\u8fde\u63a5"):(s&&(c.status="success",c.isLocal=!0),r.storeSendMsg&&(a.promise=r.storeSendMsg(c)),e.cbaop=function(e){if(e)return 7101===e.code&&(c.isInBlackList=!0),"server"!==e.from?(c.status="fail",r.updateSendMsgError&&r.updateSendMsgError(c),c):void 0},s||(t&&!this.options.keepNosSafeUrl&&e.callback&&(e.callback.originUrl=t),a.msg=i,this.sendCmd(e.cmd,a,e.callback)),this.afterSendMsg(e),s&&setTimeout((function(){c=o.simpleClone(c),e.done(null,c)}),0),o.copy(c))},a.beforeSendMsg=function(){},a.afterSendMsg=function(){},a.formatReturnMsg=function(e,t){return e=o.copy(e),this.protocol.completeMsg(e),e.status="sending",t&&(e.from=t),this.message.reverse(e)},a.resendMsg=function(e){return o.verifyOptions(e,"msg","msg::resendMsg"),this.trimMsgFlag(e),e.resend=!0,this._sendMsgByType(e)},a.forwardMsg=function(e){return o.verifyOptions(e,"msg","msg::forwardMsg"),this.trimMsgFlag(e),this.beforeForwardMsg(e),e.forward=!0,e.msg.idClient=o.guid(),this._sendMsgByType(e)},a.trimMsgFlag=function(e){e&&e.msg&&(e.msg=o.copy(e.msg),delete e.msg.resend,delete e.msg.forward)},a.beforeForwardMsg=function(){},a._sendMsgByType=function(e){switch(o.verifyOptions(e,"msg","msg::_sendMsgByType"),o.verifyParamValid("msg.type",e.msg.type,this.message.validTypes,"msg::_sendMsgByType"),o.merge(e,e.msg),e.type){case"text":return this.sendText(e);case"image":case"audio":case"video":case"file":return this.sendFile(e);case"geo":return this.sendGeo(e);case"custom":return this.sendCustomMsg(e);case"tip":return this.sendTipMsg(e);default:throw new c("\u4e0d\u80fd\u53d1\u9001\u7c7b\u578b\u4e3a "+e.type+" \u7684\u6d88\u606f")}},a.parseRobotTemplate=function(e){if(/<template[^>\/]+\/>/.test(e))return{raw:e,json:[{type:"text",name:"",text:""}]};if(!/<template[^>\/]+>/.test(e))return{raw:e,json:[{type:"text",name:"",text:e}]};var t=new s({escapeMode:!1});e=e.replace(/<template [^>]+>/,"<template>");var n=t.xml2js(e);n=n.template.LinearLayout,Array.isArray(n)||(n=[n]);var r=[];return n=n.forEach((function(e){e.image&&(r=r.concat(a(e))),e.text&&(r=r.concat(i(e))),e.link&&(r=r.concat(function(e){if(e.link){var t=e.link;Array.isArray(t)||(t=[t]),t=t.map((function(e){return e.image&&(e.image=a(e)),e.text&&(e.text=i(e)),"url"===e._type?(e.type="url",e.style=e._style||"",e.target=e._target,delete e._target,delete e._style):"block"===e._type&&(e.type="block",e.style=e._style||"",e.params=e._params||"",e.target=e._target,delete e._params,delete e._target,delete e._style),delete e._type,e})),e.link=t}return e.link}(e)))})),{raw:e,json:r};function i(e){return Array.isArray(e.text)||(e.text=[e.text]),e.text=e.text.map((function(e){return{type:"text",name:e._name,text:e.__text}})),e.text}function a(e){return Array.isArray(e.image)||(e.image=[e.image]),e.image=e.image.map((function(e){return{type:"image",name:e._name,url:e._url}})),e.image}}},function(e,t,n){var r=n(46).fn;r.isConnected=function(){return!!this.protocol&&this.protocol.isConnected()},r.connect=function(){this.protocol.appLogin=0,this.protocol.connect(!0)},r.disconnect=function(e){e=e||{},this.protocol.disconnect(e.done)}},function(e,t,n){var r=n(211),i={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=null,this.expire=e.expire||72,this.name=e.name}var o=a.prototype;o.init=function(){var e=this;if(!this.server)return r.open({server:"nim-log-"+this.name,version:1,schema:i}).then((function(t){e.server=t}))},o.putLog=function(e){var t=this;if(!this.server)return Promise.reject("no db server");var n=e.slice(-1)[0].time-36e5*this.expire;return this.deleteLogs(n).then((function(){return t.server.add("log",e)}))},o.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then((function(e){var t={},n=e.slice(-1)[0];return t.logs=e.map((function(e){return e.log})).join("\r\n"),t.time=n&&n.time,t})):Promise.reject("no db server")},o.deleteLogs=function(e){return this.server?this.server.remove("log",null,"time",0,e):Promise.reject("no db server")},e.exports=a},function(e,t,n){e.exports=function(e,t,n,r){try{try{var i;try{i=new window.Blob([e])}catch(t){(i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),i=i.getBlob()}var a=window.URL||window.webkitURL,o=a.createObjectURL(i),s=new window[t](o,n);return a.revokeObjectURL(o),s}catch(r){return new window[t]("data:application/javascript,".concat(encodeURIComponent(e)),n)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new window[t](r,n)}}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,i.default)('!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=70)}([function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(17)("wks"),o=n(8),i=n(0).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,e,n){var r=n(57),o=n(24);t.exports=function(t){return r(o(t))}},function(t,e,n){t.exports=!n(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(11),o=n(33),i=n(21),u=Object.defineProperty;e.f=n(4)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(5),o=n(9);t.exports=n(4)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(7);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(0),o=n(22),i=n(23),u=n(14),c=n(5).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||c(e,t,{value:u.f(t)})}},function(t,e,n){e.f=n(2)},function(t,e,n){var r=n(5).f,o=n(1),i=n(2)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(0),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(17)("keys"),o=n(8);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(29),o=n(16);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){t.exports={}},function(t,e,n){var r=n(7);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can\'t convert object to primitive value")}},function(t,e){var n=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=!0},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can\'t call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(29),o=n(16).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(1),o=n(3),i=n(56)(!1),u=n(18)("IE_PROTO");t.exports=function(t,e){var n,c=o(t),s=0,f=[];for(n in c)n!=u&&r(c,n)&&f.push(n);for(;e.length>s;)r(c,n=e[s++])&&(~i(f,n)||f.push(n));return f}},function(t,e,n){var r=n(11),o=n(58),i=n(16),u=n(18)("IE_PROTO"),c=function(){},s=function(){var t,e=n(32)("iframe"),r=i.length;for(e.style.display="none",n(53).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\\/script>"),t.close(),s=t.F;r--;)delete s.prototype[i[r]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(c.prototype=r(t),n=new c,c.prototype=null,n[u]=t):n=s(),void 0===e?n:o(n,e)}},function(t,e,n){t.exports=n(6)},function(t,e,n){var r=n(7),o=n(0).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e,n){t.exports=!n(4)&&!n(10)(function(){return 7!=Object.defineProperty(n(32)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(0),o=n(22),i=n(61),u=n(6),c=n(1),s=function(t,e,n){var f,a,l,p=t&s.F,y=t&s.G,d=t&s.S,v=t&s.P,h=t&s.B,m=t&s.W,b=y?o:o[e]||(o[e]={}),g=b.prototype,x=y?r:d?r[e]:(r[e]||{}).prototype;for(f in y&&(n=e),n)(a=!p&&x&&void 0!==x[f])&&c(b,f)||(l=a?x[f]:n[f],b[f]=y&&"function"!=typeof x[f]?n[f]:h&&a?i(l,r):m&&x[f]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):v&&"function"==typeof l?i(Function.call,l):l,v&&((b.virtual||(b.virtual={}))[f]=l,t&s.R&&g&&!g[f]&&u(g,f,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){"use strict";var r=n(23),o=n(34),i=n(31),u=n(6),c=n(20),s=n(59),f=n(15),a=n(52),l=n(2)("iterator"),p=!([].keys&&"next"in[].keys()),y=function(){return this};t.exports=function(t,e,n,d,v,h,m){s(n,e,d);var b,g,x,w=function(t){if(!p&&t in _)return _[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",O="values"==v,j=!1,_=t.prototype,P=_[l]||_["@@iterator"]||v&&_[v],k=P||w(v),L=v?O?w("entries"):k:void 0,E="Array"==e&&_.entries||P;if(E&&(x=a(E.call(new t)))!==Object.prototype&&x.next&&(f(x,S,!0),r||"function"==typeof x[l]||u(x,l,y)),O&&P&&"values"!==P.name&&(j=!0,k=function(){return P.call(this)}),r&&!m||!p&&!j&&_[l]||u(_,l,k),c[e]=k,c[S]=y,v)if(b={values:O?k:w("values"),keys:h?k:w("keys"),entries:L},m)for(g in b)g in _||i(_,g,b[g]);else o(o.P+o.F*(p||j),e,b);return b}},function(t,e,n){n(13)("observable")},function(t,e,n){n(13)("asyncIterator")},function(t,e){},function(t,e,n){var r=n(12),o=n(9),i=n(3),u=n(21),c=n(1),s=n(33),f=Object.getOwnPropertyDescriptor;e.f=n(4)?f:function(t,e){if(t=i(t),e=u(e,!0),s)try{return f(t,e)}catch(t){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(3),o=n(26).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return u.slice()}}(t):o(r(t))}},function(t,e,n){var r=n(28);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(19),o=n(27),i=n(12);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,c=n(t),s=i.f,f=0;c.length>f;)s.call(t,u=c[f++])&&e.push(u);return e}},function(t,e,n){var r=n(8)("meta"),o=n(7),i=n(1),u=n(5).f,c=0,s=Object.isExtensible||function(){return!0},f=!n(10)(function(){return s(Object.preventExtensions({}))}),a=function(t){u(t,r,{value:{i:"O"+ ++c,w:{}}})},l=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!s(t))return"F";if(!e)return"E";a(t)}return t[r].i},getWeak:function(t,e){if(!i(t,r)){if(!s(t))return!0;if(!e)return!1;a(t)}return t[r].w},onFreeze:function(t){return f&&l.NEED&&s(t)&&!i(t,r)&&a(t),t}}},function(t,e,n){"use strict";var r=n(0),o=n(1),i=n(4),u=n(34),c=n(31),s=n(43).KEY,f=n(10),a=n(17),l=n(15),p=n(8),y=n(2),d=n(14),v=n(13),h=n(42),m=n(41),b=n(11),g=n(7),x=n(3),w=n(21),S=n(9),O=n(30),j=n(40),_=n(39),P=n(5),k=n(19),L=_.f,E=P.f,M=j.f,D=r.Symbol,A=r.JSON,T=A&&A.stringify,I=y("_hidden"),N=y("toPrimitive"),C={}.propertyIsEnumerable,F=a("symbol-registry"),B=a("symbols"),R=a("op-symbols"),G=Object.prototype,q="function"==typeof D,V=r.QObject,K=!V||!V.prototype||!V.prototype.findChild,W=i&&f(function(){return 7!=O(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=L(G,e);r&&delete G[e],E(t,e,n),r&&t!==G&&E(G,e,r)}:E,H=function(t){var e=B[t]=O(D.prototype);return e._k=t,e},J=q&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},z=function(t,e,n){return t===G&&z(R,e,n),b(t),e=w(e,!0),b(n),o(B,e)?(n.enumerable?(o(t,I)&&t[I][e]&&(t[I][e]=!1),n=O(n,{enumerable:S(0,!1)})):(o(t,I)||E(t,I,S(1,{})),t[I][e]=!0),W(t,e,n)):E(t,e,n)},Y=function(t,e){b(t);for(var n,r=h(e=x(e)),o=0,i=r.length;i>o;)z(t,n=r[o++],e[n]);return t},Q=function(t){var e=C.call(this,t=w(t,!0));return!(this===G&&o(B,t)&&!o(R,t))&&(!(e||!o(this,t)||!o(B,t)||o(this,I)&&this[I][t])||e)},U=function(t,e){if(t=x(t),e=w(e,!0),t!==G||!o(B,e)||o(R,e)){var n=L(t,e);return!n||!o(B,e)||o(t,I)&&t[I][e]||(n.enumerable=!0),n}},X=function(t){for(var e,n=M(x(t)),r=[],i=0;n.length>i;)o(B,e=n[i++])||e==I||e==s||r.push(e);return r},Z=function(t){for(var e,n=t===G,r=M(n?R:x(t)),i=[],u=0;r.length>u;)!o(B,e=r[u++])||n&&!o(G,e)||i.push(B[e]);return i};q||(c((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===G&&e.call(R,n),o(this,I)&&o(this[I],t)&&(this[I][t]=!1),W(this,t,S(1,n))};return i&&K&&W(G,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",function(){return this._k}),_.f=U,P.f=z,n(26).f=j.f=X,n(12).f=Q,n(27).f=Z,i&&!n(23)&&c(G,"propertyIsEnumerable",Q,!0),d.f=function(t){return H(y(t))}),u(u.G+u.W+u.F*!q,{Symbol:D});for(var $="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;$.length>tt;)y($[tt++]);for(var et=k(y.store),nt=0;et.length>nt;)v(et[nt++]);u(u.S+u.F*!q,"Symbol",{for:function(t){return o(F,t+="")?F[t]:F[t]=D(t)},keyFor:function(t){if(!J(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){K=!0},useSimple:function(){K=!1}}),u(u.S+u.F*!q,"Object",{create:function(t,e){return void 0===e?O(t):Y(O(t),e)},defineProperty:z,defineProperties:Y,getOwnPropertyDescriptor:U,getOwnPropertyNames:X,getOwnPropertySymbols:Z}),A&&u(u.S+u.F*(!q||f(function(){var t=D();return"[null]"!=T([t])||"{}"!=T({a:t})||"{}"!=T(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(g(e)||void 0!==t)&&!J(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!J(e))return e}),r[1]=e,T.apply(A,r)}}),D.prototype[N]||n(6)(D.prototype,N,D.prototype.valueOf),l(D,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){n(44),n(38),n(37),n(36),t.exports=n(22).Symbol},function(t,e,n){t.exports={default:n(45),__esModule:!0}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e){t.exports=function(){}},function(t,e,n){"use strict";var r=n(48),o=n(47),i=n(20),u=n(3);t.exports=n(35)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):o(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){n(49);for(var r=n(0),o=n(6),i=n(20),u=n(2)("toStringTag"),c="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),s=0;s<c.length;s++){var f=c[s],a=r[f],l=a&&a.prototype;l&&!l[u]&&o(l,u,f),i[f]=i.Array}},function(t,e,n){var r=n(24);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(1),o=n(51),i=n(18)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(0).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(25),o=Math.max,i=Math.min;t.exports=function(t,e){return(t=r(t))<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(25),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(3),o=n(55),i=n(54);t.exports=function(t){return function(e,n,u){var c,s=r(e),f=o(s.length),a=i(u,f);if(t&&n!=n){for(;f>a;)if((c=s[a++])!=c)return!0}else for(;f>a;a++)if((t||a in s)&&s[a]===n)return t||a||0;return!t&&-1}}},function(t,e,n){var r=n(28);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(5),o=n(11),i=n(19);t.exports=n(4)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),c=u.length,s=0;c>s;)r.f(t,n=u[s++],e[n]);return t}},function(t,e,n){"use strict";var r=n(30),o=n(9),i=n(15),u={};n(6)(u,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(60);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(25),o=n(24);t.exports=function(t){return function(e,n){var i,u,c=String(o(e)),s=r(n),f=c.length;return s<0||s>=f?t?"":void 0:(i=c.charCodeAt(s))<55296||i>56319||s+1===f||(u=c.charCodeAt(s+1))<56320||u>57343?t?c.charAt(s):i:t?c.slice(s,s+2):u-56320+(i-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(62)(!0);n(35)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(63),n(50),t.exports=n(14).f("iterator")},function(t,e,n){t.exports={default:n(64),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r=u(n(65)),o=u(n(46)),i="function"==typeof o.default&&"symbol"==typeof r.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};function u(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof o.default&&"symbol"===i(r.default)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":i(t)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(r){var o,i,u=n(66),c=(i=u)&&i.__esModule?i:{default:i};!function(i,u){var s,f=(i=void 0!==i?i:"undefined"!=typeof self?self:void 0!==r?r:{}).IDBKeyRange||i.webkitIDBKeyRange,a="readonly",l="readwrite",p=Object.prototype.hasOwnProperty,y=function(){if(!s&&!(s=i.indexedDB||i.webkitIndexedDB||i.mozIndexedDB||i.oIndexedDB||i.msIndexedDB||(null===i.indexedDB&&i.shimIndexedDB?i.shimIndexedDB:u)))throw"IndexedDB required";return s},d=function(t){return t},v=function(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()},h=function(t){return"function"==typeof t},m=function(t){return t===u},b=function(t,e){var n=this,r=!1;this.name=e,this.getIndexedDB=function(){return t},this.add=function(e){if(r)throw"Database has been closed";for(var o=[],i=0,u=0;u<arguments.length-1;u++)if(Array.isArray(arguments[u+1]))for(var c=0;c<arguments[u+1].length;c++)o[i]=arguments[u+1][c],i++;else o[i]=arguments[u+1],i++;var s=t.transaction(e,l),f=s.objectStore(e);return new Promise(function(t,e){o.forEach(function(t){var e;if(t.item&&t.key){var n=t.key;t=t.item,e=f.add(t,n)}else e=f.add(t);e.onsuccess=function(e){var n=e.target,r=n.source.keyPath;null===r&&(r="__id__"),Object.defineProperty(t,r,{value:n.result,enumerable:!0})}}),s.oncomplete=function(){t(o,n)},s.onerror=function(t){t.preventDefault(),e(t)},s.onabort=function(t){e(t)}})},this.updateAndDelete=function(e,n,o){if(r)throw"Database has been closed";var i=t.transaction(e,l),u=i.objectStore(e),c=u.keyPath;return new Promise(function(t,e){n.forEach(function(t){if(t.item&&t.key){var e=t.key;t=t.item,u.put(t,e)}else u.put(t)}),o.forEach(function(t){u.delete(t[c])}),i.oncomplete=function(){t([n,o])},i.onerror=function(t){e(t)}})},this.update=function(e){if(r)throw"Database has been closed";for(var o,i=[],u=1;u<arguments.length;u++)o=arguments[u],Array.isArray(o)?i=i.concat(o):i.push(o);var c=t.transaction(e,l),s=c.objectStore(e);s.keyPath;return new Promise(function(t,e){i.forEach(function(t){var e;if(t.item&&t.key){var n=t.key;t=t.item,e=s.put(t,n)}else e=s.put(t);e.onsuccess=function(t){},e.onerror=function(t){}}),c.oncomplete=function(){t(i,n)},c.onerror=function(t){e(t)},c.onabort=function(t){e(t)}})},this.remove=function(e,n,o,i,c,s,a){if(r)throw"Database has been closed";var p=t.transaction(e,l),y=p.objectStore(e);return new Promise(function(t,e){function r(t){return t===u||null===t}if(r(i)&&(i=-1/0),r(c)&&(c=1/0),null===n||Array.isArray(n)||(n=[n]),r(o))null!==n?n.forEach(function(t){y.delete(t)}):y.delete(range=f.bound(i,c,s,a));else{var l=void 0;l=null!==n?f.only(n[0]):f.bound(i,c,s,a),y.index(o).openCursor(l).onsuccess=function(t){var e=t.target.result;e&&(e.delete(),e.continue())}}p.oncomplete=function(){t()},p.onerror=function(t){e(t)},p.onabort=function(t){e(t)}})},this.clear=function(e){if(r)throw"Database has been closed";var n=t.transaction(e,l);n.objectStore(e).clear();return new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(t){e(t)}})},this.close=function(){r||(t.close(),r=!0,delete w[e])},this.get=function(e,n){if(r)throw"Database has been closed";var o=t.transaction(e),i=o.objectStore(e).get(n);return new Promise(function(t,e){i.onsuccess=function(e){t(e.target.result)},o.onerror=function(t){e(t)}})},this.query=function(e,n){if(r)throw"Database has been closed";return new g(e,t,n)},this.count=function(e,n){if(r)throw"Database has been closed";t.transaction(e).objectStore(e)};for(var o=0,i=t.objectStoreNames.length;o<i;o++)!function(t){for(var e in n[t]={},n)p.call(n,e)&&"close"!==e&&(n[t][e]=function(e){return function(){var r=[t].concat([].slice.call(arguments,0));return n[e].apply(n,r)}}(e))}(t.objectStoreNames[o])},g=function(t,e,n){var r=this,o=!1,i=!1,s=function(r,s,p,y,d,v,m){return new Promise(function(b,g){var x=o||i?l:a,w=e.transaction(t,x),S=w.objectStore(t),O=n?S.index(n):S,j=r?f[r].apply(null,s):null,_=[],P=[j],k=0;d=d||null,v=v||[],"count"!==p&&P.push(y||"next");var L=!!o&&Object.keys(o);O[p].apply(O,P).onsuccess=function(t){var e=t.target.result;if((void 0===e?"undefined":(0,c.default)(e))===(0,c.default)(0))_=e;else if(e)if(null!==d&&d[0]>k)k=d[0],e.advance(d[0]);else if(null!==d&&k>=d[0]+d[1]);else{var n=!0,r="value"in e?e.value:e.key;v.forEach(function(t){t&&t.length&&(2===t.length?n=n&&r[t[0]]===t[1]:h(t[0])&&(n=n&&t[0].apply(u,[r])))}),n&&(k++,_.push(m(r)),i?e.delete():o&&(r=function(t){for(var e=0;e<L.length;e++){var n=L[e],r=o[n];r instanceof Function&&(r=r(t)),t[n]=r}return t}(r),e.update(r))),e.continue()}},w.oncomplete=function(){b(_)},w.onerror=function(t){g(t)},w.onabort=function(t){g(t)}})},p=function(t,e){var n="next",r="openCursor",u=[],c=null,f=d,a=!1,l=function(){return s(t,e,r,a?n+"unique":n,c,u,f)},p=function(){return n=null,r="count",{execute:l}},y=function t(){var e;return e=arguments[0],1==(c="array"===v(e)?arguments[0]:Array.prototype.slice.call(arguments,0,2)).length&&c.unshift(0),function(t){return"number"===v(t)}(c[1])||(c=null),{execute:l,count:p,keys:b,filter:g,asc:x,desc:w,distinct:S,modify:O,limit:t,map:j,remove:_}},b=function t(e){return(e=!!m(e)||!!e)&&(r="openKeyCursor"),{execute:l,keys:t,filter:g,asc:x,desc:w,distinct:S,modify:O,limit:y,map:j,remove:_}},g=function t(){return u.push(Array.prototype.slice.call(arguments,0,2)),{execute:l,count:p,keys:b,filter:t,asc:x,desc:w,distinct:S,modify:O,limit:y,map:j,remove:_}},x=function t(e){return e=!!m(e)||!!e,n=e?"next":"prev",{execute:l,count:p,keys:b,filter:g,asc:t,desc:w,distinct:S,modify:O,limit:y,map:j,remove:_}},w=function t(e){return e=!!m(e)||!!e,n=e?"prev":"next",{execute:l,count:p,keys:b,filter:g,asc:x,desc:t,distinct:S,modify:O,limit:y,map:j,remove:_}},S=function t(e){return e=!!m(e)||!!e,a=e,{execute:l,count:p,keys:b,filter:g,asc:x,desc:w,distinct:t,modify:O,limit:y,map:j,remove:_}},O=function t(e){return o=e,{execute:l,count:p,keys:b,filter:g,asc:x,desc:w,distinct:S,modify:t,limit:y,map:j,remove:_}},j=function t(e){return h(e)&&(f=e),{execute:l,count:p,keys:b,filter:g,asc:x,desc:w,distinct:S,modify:O,limit:y,map:t,remove:_}},_=function t(e){return e=!!m(e)||!!e,i=e,{execute:l,count:p,keys:b,filter:g,asc:x,desc:w,distinct:S,modify:O,limit:y,map:j,remove:t}};return{execute:l,count:p,keys:b,filter:g,asc:x,desc:w,distinct:S,modify:O,limit:y,map:j,remove:_}};"only bound upperBound lowerBound".split(" ").forEach(function(t){r[t]=function(){return new p(t,arguments)}}),this.filter=function(){var t=new p(null,null);return t.filter.apply(t,arguments)},this.all=function(){return this.filter()}},x=function(t,e,n,r){var o=t.target.result,i=new b(o,e);return w[e]=o,Promise.resolve(i)},w={},S={version:"0.10.2",open:function(t){var e;return new Promise(function(n,r){if(w[t.server])x({target:{result:w[t.server]}},t.server,t.version,t.schema).then(n,r);else{try{e=y().open(t.server,t.version)}catch(t){r(t)}e.onsuccess=function(e){x(e,t.server,t.version,t.schema).then(n,r)},e.onupgradeneeded=function(e){!function(t,e,n){for(var r in"function"==typeof e&&(e=e()),e){var o,i=e[r];for(var u in o=!p.call(e,r)||n.objectStoreNames.contains(r)?t.currentTarget.transaction.objectStore(r):n.createObjectStore(r,i.key),i.indexes){var c=i.indexes[u];try{o.index(u)}catch(t){o.createIndex(u,c.key||u,Object.keys(c).length?c:{unique:!1})}}}}(e,t.schema,e.target.result)},e.onerror=function(t){r(t)}}})},remove:function(t){return new Promise(function(e,n){if(!t)return e();var r,o;(void 0===t?"undefined":(0,c.default)(t))===b&&(t=t.name),"string"==typeof t&&(r=w[t]),r&&"function"==typeof r.close&&r.close();try{o=y().deleteDatabase(t)}catch(t){n(t)}o.onsuccess=function(n){delete w[t],e(t)},o.onerror=function(t){n(t)},o.onblocked=function(t){n(t)}})}};void 0!==t&&void 0!==t.exports?t.exports=S:(o=function(){return S}.call(e,n,e,t))===u||(t.exports=o)}(void 0)}).call(this,n(67))},function(t,e,n){"use strict";var r=n(68),o={log:{key:{keyPath:"time"},indexes:{level:{unique:!1},time:{unique:!0}}}};function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.server=null,this.expire=t.expire||72,this.name=t.name}var u=i.prototype;u.init=function(){var t=this;if(!this.server)return r.open({server:"nim-log-"+this.name,version:1,schema:o}).then(function(e){t.server=e})},u.putLog=function(t){var e=this;if(!this.server)return Promise.reject("no db server");var n=t.slice(-1)[0].time-36e5*this.expire;return this.deleteLogs(n).then(function(){return e.server.add("log",t)})},u.getAllLogs=function(){return this.server?this.server.query("log","time").all().execute().then(function(t){var e={},n=t.slice(-1)[0];return e.logs=t.map(function(t){return t.log}).join("\\r\\n"),e.time=n&&n.time,e}):Promise.reject("no db server")},u.deleteLogs=function(t){return this.server?this.server.remove("log",null,"time",0,t):Promise.reject("no db server")},t.exports=i},function(t,e,n){const r=n(69);let o=null;function i(t){return t&&"string"!=typeof t?t.message?t.message:t.target&&t.target.error?t.target.error.message:"unknown error":t}self.onmessage=function(t){switch(t.data.type){case"init":n=t.data.msg,(o=new r(n)).init().catch(t=>{postMessage({type:"error",msg:{msg:"dbLog init error",error:i(t)}})});break;case"fetch":o.getAllLogs().then(t=>{postMessage({type:"fetchDone",code:200,msg:t})}).catch(t=>{postMessage({type:"fetchDone",code:500,msg:i(t)})});break;case"delete":o.deleteLogs(e).catch(t=>{postMessage({type:"deleteLogs",code:500,msg:i(t)})});break;default:!function(t){if(!o)return;o.putLog(t).then(t=>{postMessage(200)}).catch(t=>{postMessage({type:"error",msg:{msg:"putLog error",error:i(t)}})})}(t.data)}var e,n}}]);',"Worker",void 0,void 0)};var r,i=(r=n(338))&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){var r=n(339),i=n(337),a=n(0).getGlobal(),o=n(16).name,s="function"==typeof r,c=a.indexedDB&&!/^(IE)$/.test(o);function u(e,t){this.logWorker=null,this.db=null,this.logQueue=[],this.callbackList=[],this.preTime=null,this.lastTime=+new Date,this.initLogLocal({name:e,expire:t})}var l=u.prototype;u.enable=!0,l.saveLog=function(e){var t=this.logQueue.length,n=this.logQueue[t-1];e.time!==this.preTime?((this.logQueue.length>50||e.time-this.lastTime>6e4&&this.logQueue.length>0)&&(this.doSaveLog(this.logQueue.slice(0)),this.lastTime=n.time,this.logQueue=[]),this.logQueue.push(e),this.preTime=e.time):n.log+="\r\n"+e.log},l.doSaveLog=function(){},l.initLogLocal=function(){},l.fetchLog=function(){},l.deleteLogs=function(e){},l.logError=function(){},c?s?(l.doSaveLog=function(e){this.logWorker.postMessage(e)},l.initLogLocal=function(e){var t=this;this.logWorker=new r({}),this.logWorker.onmessage=function(e){var n=e.data||{};switch(n.type){case"fetchDone":t.fetchLogDone(n.code,n.msg);break;case"error":t.logError(n.msg)}},this.logWorker.postMessage({type:"init",msg:e})},l.fetchLog=function(){var e=this;return new Promise((function(t,n){0===e.callbackList.length&&e.logWorker.postMessage({type:"fetch"}),e.callbackList.push(t),e.callbackList.push(n)}))},l.fetchLogDone=function(e,t){for(var n=200===e?0:1,r=0;r<this.callbackList.length/2;r++)this.callbackList[2*r+n](t);this.callbackList=[]},l.deleteLogs=function(e){return this.logWorker.postMessage({type:"delete",msg:e}),Promise.resolve()}):(l.doSaveLog=function(e){var t=this;this.db.putLog(e).catch((function(e){t.logError({msg:"putLog error",error:e})}))},l.initLogLocal=function(e){var t=this;this.db=new i(e),this.db.init().catch((function(e){t.logError({msg:"dbLog init error",error:e})}))},l.fetchLog=function(){return this.db.getAllLogs()},l.deleteLogs=function(e){return this.db.deleteLogs(e)}):u.enable=!1,e.exports=u},function(e,t,n){var r=n(16),i=n(0),a=n(5),o=n(41),s=n(340);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i.merge(this,{options:e,debug:!1,api:"log",style:"color:blue;",log:i.emptyFunc,info:i.emptyFunc,warn:i.emptyFunc,error:i.emptyFunc}),this.prefix=e.prefix||"",this.localEnable=s.enable&&e.dbLog&&e.account,this.setDebug(e.debug),this.localEnable&&(this._local=new s(e.account,e.expire),this._local.logError=this.error)}var u=c.prototype,l=["Chrome","Safari","Firefox"];u.setDebug=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(t.debug=e,e.style&&(t.style=e.style),i.exist(console))if(t.debug){var n=console;t.debug=function(){var e=t.formatArgsAndSave(arguments,"debug");-1!==l.indexOf(r.name)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("debug",e)},t.log=function(){var e=t.formatArgsAndSave(arguments,"log");-1!==l.indexOf(r.name)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("log",e)},t.info=function(){var e=t.formatArgsAndSave(arguments,"info");-1!==l.indexOf(r.name)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("info",e)},t.warn=function(){var e=t.formatArgsAndSave(arguments,"warn");-1!==l.indexOf(r.name)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("warn",e)},t.error=function(){var e=t.formatArgsAndSave(arguments,"error");-1!==l.indexOf(r.name)&&i.isString(e[0])&&(e[0]="%c"+e[0],e.splice(1,0,t.style)),t._log("error",e)},t.options.logFunc?t._log=function(){}:t._log=function(e,r){if(n[e])try{n[e].apply?t.chrome(e,r):t.ie(e,r)}catch(e){}},t.chrome=function(e,i){-1!==l.indexOf(r.name)?n[e].apply(n,i):t.ie(e,i)},t.ie=function(e,t){t.forEach((function(t){n[e](JSON.stringify(t,null,4))}))}}else if(a.isRN||this.localEnable||this.options.logFunc){var o=!a.isRN&&!this.localEnable;t.log=function(){t.formatArgsAndSave(arguments,"log",o)},t.info=function(){t.formatArgsAndSave(arguments,"info",o)},t.warn=function(){t.formatArgsAndSave(arguments,"warn",o)},t.error=function(){t.formatArgsAndSave(arguments,"error",o)}}},u.setLogDisabled=function(){this.localEnable=!1,this.log=function(){},this.info=function(){},this.warn=function(){},this.error=function(){}},u.formatArgsAndSave=function(e,t,n){e=[].slice.call(e,0);var r=new Date,a="[NIM LOG "+m(r.getMonth()+1)+"-"+m(r.getDate())+" "+m(r.getHours())+":"+m(r.getMinutes())+":"+m(r.getSeconds())+":"+m(r.getMilliseconds(),3)+" "+this.prefix.toUpperCase()+"]  ",o="";i.isString(e[0])?e[0]=a+e[0]:e.splice(0,0,a),e.forEach((function(t,n){i.isArray(t)||i.isObject(t)?(e[n]=i.simpleClone(t),o+=JSON.stringify(e[n])+" "):o+=t+" "}));var s=this.options.logFunc;return s&&i.isFunction(s[t])&&s[t].apply(s,e),!n&&this.writeLocalLog(o,t,+r),e},u.writeLocalLog=a.isRN?function(e,t){if(o.rnfs&&o.rnfs.writeFile&&o.rnfs.appendFile&&o.rnfs.DocumentDirectoryPath&&/error|warn|info/.test(t)){var n=o.rnfs,r=void 0,i=n.size/2-256;e+="\r\n",n.nimPromise=n.nimPromise.then((function(){return r=a(n.nimIndex),n.exists(r)})).then((function(t){return t?n.appendFile(r,e):n.writeFile(r,e)})).then((function(){return n.stat(r)})).then((function(e){if(e.size>i)return n.nimIndex++,n.nimIndex>1&&(n.nimIndex=n.nimIndex%2),n.unlink(a(n.nimIndex)).catch((function(e){return Promise.resolve()}))})).catch((function(e){console.error(e)}))}function a(e){return o.rnfs.DocumentDirectoryPath+"/nimlog_"+e+".log"}}:a.isBrowser?function(e,t,n){this._local&&this._local.saveLog({log:e,level:t,time:n})}:function(){};var m=function(e,t){t=t||2;for(var n=""+e;n.length<t;)n="0"+n;return n};e.exports=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(139).fn,i=n(0);r.queueOffer=function(e){i.verifyOptions(e,"elementKey elementValue","msg::queueOffer"),e.transient?e.transient=!0:e.transient=!1,this.processCallback(e),this.sendCmd("queueOffer",e,e.callback)},r.queuePoll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.elementKey=e.elementKey||"",this.processCallback(e),this.sendCmd("queuePoll",e,e.callback)},r.queueList=function(e){this.processCallback(e),this.sendCmd("queueList",e,e.callback)},r.peak=function(e){this.processCallback(e),this.sendCmd("peak",e,e.callback)},r.queueDrop=function(e){this.processCallback(e),this.sendCmd("queueDrop",e,e.callback)},r.queueChange=function(e){i.verifyOptions(e,"elementMap","msg::queueOffer"),e.needNotify?(e.needNotify=!0,i.verifyOptions(e,"notifyExt","msg::queueOffer")):e.needNotify=!1,this.processCallback(e),this.sendCmd("queueChange",e,e.callback)}},function(e,t,n){var r=n(0),i=r.undef,a=r.verifyOptions,o=r.verifyParamType,s=n(204),c=n(139).fn;c.updateMyChatroomMemberInfo=function(e){a(e,"member needNotify","member::updateMyChatroomMemberInfo"),o("needNotify",e.needNotify,"boolean","member::updateMyChatroomMemberInfo"),e.needSave=e.needSave||!1,o("needSave",e.needSave,"boolean","member::updateMyChatroomMemberInfo"),this.processCustom(e),this.processCallback(e),e.chatroomMember=new s(e.member),this.sendCmd("updateMyChatroomMemberInfo",e)},c.getChatroomMembers=function(e){a(e,"guest","member::getChatroomMembers"),o("guest",e.guest,"boolean","member::getChatroomMembers"),i(e.time)?e.time=0:o("time",e.time,"number","member::getChatroomMembers"),i(e.limit)?e.limit=100:o("limit",e.limit,"number","member::getChatroomMembers"),this.processCallback(e),e.guest?e.type=!1===e.desc?3:1:e.type=e.onlyOnline?2:0,this.sendCmd("getChatroomMembers",e)},c.getChatroomMembersByTag=function(e){a(e,"tag","getChatroomMembersByTag::rag"),i(e.time)?e.time=0:o("time",e.time,"number","getChatroomMembersByTag::time"),i(e.limit)?e.limit=100:o("limit",e.limit,"number","getChatroomMembersByTag::limit"),this.processCallback(e),this.sendCmd("getChatroomMembersByTag",{tagMemberReq:r.filterObj(e,"tag limit time"),callback:e.callback})},c.getChatroomMemberCountByTag=function(e){a(e,"tag","getChatroomMemberCountByTag::rag"),this.processCallback(e),this.sendCmd("getChatroomMemberCountByTag",e)},c.getChatroomMembersInfo=function(e){a(e,"accounts","member::getChatroomMembersInfo"),o("accounts",e.accounts,"array","member::getChatroomMembersInfo"),this.processCallback(e),this.sendCmd("getChatroomMembersInfo",e)},c.markChatroomIdentity=function(e){a(e,"identity","member::markChatroomIdentity"),e.type={manager:1,common:2,black:-1,mute:-2}[e.identity],delete e.identity,isNaN(e.type)?a(e,"identity",'member::markChatroomIdentity. The valid value of the identity is "manager" or "common" or "black" or "mute".'):this.markChatroomMember(e)},c.markChatroomManager=function(e){e.type=1,this.markChatroomMember(e)},c.markChatroomCommonMember=function(e){e.type=2,this.markChatroomMember(e)},c.markChatroomBlacklist=function(e){e.type=-1,this.markChatroomMember(e)},c.markChatroomGaglist=function(e){e.type=-2,this.markChatroomMember(e)},c.markChatroomMember=function(e){a(e,"account type isAdd","member::markChatroomMember"),o("isAdd",e.isAdd,"boolean","member::markChatroomMember"),i(e.level)?e.level=0:o("level",e.level,"number","member::markChatroomMember"),this.processCustom(e),this.processCallback(e),this.sendCmd("markChatroomMember",e)},c.kickChatroomMember=function(e){a(e,"account","member::kickChatroomMember"),this.processCustom(e),this.processCallback(e),this.sendCmd("kickChatroomMember",e)},c.updateChatroomMemberTempMute=function(e){a(e,"account duration needNotify","member::updateChatroomMemberTempMute"),o("duration",e.duration,"number","member::updateChatroomMemberTempMute"),o("needNotify",e.needNotify,"boolean","member::updateChatroomMemberTempMute"),this.processCustom(e),this.processCallback(e),this.sendCmd("updateChatroomMemberTempMute",e)},c.updateTagMembersTempMute=function(e){a(e,"tag duration needNotify","member::updateTagMembersTempMute"),o("duration",e.duration,"number","member::updateTagMembersTempMute"),o("needNotify",e.needNotify,"boolean","member::updateTagMembersTempMute"),this.processCustom(e),this.processCallback(e);var t=r.filterObj(e,"tag duration custom notifyTargetTags");t.needNotify=e.needNotify?1:0,this.sendCmd("updateTagMembersTempMute",{tagMuteReq:t,callback:e.callback})},c.getRobotList=function(e){i(e.timetag)&&(e.timetag=0),this.processCallback(e),this.sendCmd("syncRobot",e)}},function(e,t,n){var r=n(0),i=r.undef,a=n(139).fn;a.beforeSendMsg=function(e){e.cmd="sendMsg"};var o={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};a.getHistoryMsgs=function(e){r.verifyOptions(e),i(e.timetag)?e.timetag=0:r.verifyParamType("timetag",e.timetag,"number","msg::getHistoryMsgs"),i(e.limit)?e.limit=100:r.verifyParamType("limit",e.limit,"number","msg::getHistoryMsgs"),i(e.reverse)?e.reverse=!1:r.verifyParamType("reverse",e.reverse,"boolean","msg::getHistoryMsgs"),i(e.msgTypes)?e.msgTypes=[]:Array.isArray(e.msgTypes)?(e.msgTypes=e.msgTypes.map((function(e){return o[e]})),e.msgTypes=e.msgTypes.filter((function(e){return"number"==typeof e}))):"number"==typeof o[e.msgTypes]?e.msgTypes=[o[e.msgTypes]]:e.msgTypes=[],this.processCallback(e),this.sendCmd("getHistoryMsgs",e,(function(t,n,r){Array.isArray(r)&&(r=r.map((function(e){return o[e.type]&&(e.type=o[e.type]),e}))),e.callback(t,n,r)}))}},function(e,t,n){var r=n(81),i=n(0),a={welcome:"00",text:"01",link:"03"},o={"01":"text","02":"image","03":"answer",11:"template"};function s(e){i.verifyOptions(e,"content","msg::RobotMessage");var t=e.content;switch(t.type){case"welcome":i.undef(e.body)&&(this.body="\u6b22\u8fce\u6d88\u606f");break;case"text":i.verifyOptions(t,"content","msg::RobotMessage"),i.undef(e.body)&&(this.body=t.content);break;case"link":i.verifyOptions(t,"target","msg::RobotMessage")}t.type&&(t.type=a[t.type]),t={param:t,robotAccid:e.robotAccid},this.attach=JSON.stringify(t),e.type="robot",r.call(this,e)}s.prototype=Object.create(r.prototype),s.reverse=function(e){var t=r.reverse(e);if("robot"===t.type){var n=JSON.parse(e.attach);if(n.param&&(n.param.type=o[n.param.type]||"unknown"),n.robotMsg){var a=(n=i.merge(n,n.robotMsg)).message;"bot"===n.flag?n.message=a.map((function(e){return e.type=o[e.type]||"unknown",e})):n.flag,delete n.robotMsg}t.content=n}return t},e.exports=s},function(e,t,n){var r=n(81),i=n(0);function a(e){i.verifyOptions(e,"tip","msg::TipMessage"),e.type="tip",r.call(this,e),this.attach=e.tip}a.prototype=Object.create(r.prototype),a.reverse=function(e){var t=r.reverse(e);return t.tip=e.attach,t},e.exports=a},function(e,t,n){var r=n(81),i=n(0);function a(e){i.verifyOptions(e,"content","msg::CustomMessage"),e.type="custom",r.call(this,e),"string"!=typeof e.content&&(e.content=JSON.stringify(e.content)),this.attach=e.content}a.prototype=Object.create(r.prototype),a.reverse=function(e){var t=r.reverse(e);return t.content=e.attach,t},e.exports=a},function(e,t,n){var r=n(0).notundef,i=n(81),a={301:"memberEnter",302:"memberExit",303:"blackMember",304:"unblackMember",305:"gagMember",306:"ungagMember",307:"addManager",308:"removeManager",309:"addCommon",310:"removeCommon",311:"closeChatroom",312:"updateChatroom",313:"kickMember",314:"addTempMute",315:"removeTempMute",316:"updateMemberInfo",317:"updateQueue",318:"muteRoom",319:"unmuteRoom",320:"batchUpdateQueue",321:"addTempMuteTag",322:"removeTempMuteTag"};function o(){}o.prototype=Object.create(i.prototype),o.reverse=function(e){var t=i.reverse(e);if(e.attach=e.attach?""+e.attach:"",e.attach){var n=JSON.parse(e.attach);if(t.attach={type:a[n.id]},r(n.data)){var o=n.data;if(r(o.operator)&&(t.attach.from=o.operator),r(o.opeNick)&&(t.attach.fromNick=o.opeNick),r(o.target)&&(t.attach.to=o.target),r(o.tarNick)&&(t.attach.toNick=o.tarNick),r(o.muteDuration)&&(t.attach.duration=parseInt(o.muteDuration,10)),"memberEnter"===t.attach.type&&(r(o.muted)?t.attach.gaged=1==+o.muted:t.attach.gaged=!1,r(o.tempMuted)?t.attach.tempMuted=1==+o.tempMuted:t.attach.tempMuted=!1,r(o.muteTtl)?t.attach.tempMuteDuration=+o.muteTtl:t.attach.tempMuteDuration=0),r(o.ext)&&(t.attach.custom=o.ext),r(o.queueChange)){var s=JSON.parse(o.queueChange);switch(s._e){case"OFFER":t.attach.queueChange={type:"OFFER",elementKey:s.key,elementValue:s.content};break;case"POLL":t.attach.queueChange={type:"POLL",elementKey:s.key,elementValue:s.content};break;case"DROP":t.attach.queueChange={type:"DROP"};break;case"PARTCLEAR":case"BATCH_UPDATE":t.attach.queueChange={type:s._e,elementKv:s.kvObject}}}}}else t.attach={};return t},e.exports=o},function(e,t,n){var r=n(81),i=n(0);function a(e){e.type="geo",i.verifyOptions(e,"geo","msg::GeoMessage"),i.verifyOptions(e.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),i.verifyParamType("geo.lng",e.geo.lng,"number","msg::GeoMessage"),i.verifyParamType("geo.lat",e.geo.lat,"number","msg::GeoMessage"),i.verifyParamType("geo.title",e.geo.title,"string","msg::GeoMessage"),r.call(this,e),this.attach=JSON.stringify(e.geo)}a.prototype=Object.create(r.prototype),a.reverse=function(e){var t=r.reverse(e);return e.attach=e.attach?""+e.attach:"",t.geo=e.attach?JSON.parse(e.attach):{},t},e.exports=a},function(e,t,n){var r=n(138),i=n(0);function a(){}a.prototype=Object.create(r.prototype),a.verifyFile=function(e,t){i.verifyOptions(e,"dur w h",!0,"file.",t)},e.exports=a},function(e,t,n){var r=n(138),i=n(0);function a(){}a.prototype=Object.create(r.prototype),a.verifyFile=function(e,t){i.verifyOptions(e,"dur",!0,"file.",t)},e.exports=a},function(e,t,n){var r=n(0),i=n(138);function a(){}a.prototype=Object.create(i.prototype),a.verifyFile=function(e,t){r.verifyOptions(e,"w h",!0,"file.",t)},e.exports=a},function(e,t,n){var r=n(81),i=n(0);function a(e){i.verifyOptions(e,"text","msg::TextMessage"),e.type="text",r.call(this,e),this.attach=e.text,this.body=""}a.prototype=Object.create(r.prototype),a.reverse=function(e){var t=r.reverse(e);return t.text=e.attach,t},e.exports=a},function(e,t,n){var r=n(0),i=function(e){this.account=e.account},a=i.prototype,o=a.Message=n(81),s=a.TextMessage=n(425),c=a.FileMessage=n(138),u=a.GeoMessage=n(421),l=a.NotificationMessage=n(420),m=a.CustomMessage=n(419),d=a.TipMessage=n(418),p=a.RobotMessage=n(417);a.validTypes=o.validTypes,a.reverse=function(e){var t;switch(o.getType(e)){case"text":t=s.reverse(e);break;case"image":case"audio":case"video":case"file":t=c.reverse(e);break;case"geo":t=u.reverse(e);break;case"notification":t=l.reverse(e);break;case"custom":t=m.reverse(e);break;case"tip":t=d.reverse(e);break;case"robot":t=p.reverse(e);break;default:t=o.reverse(e)}return o.setExtra(t,this.account),t},a.reverseMsgs=function(e,t){var n,i,a=this;return e.map((function(e){return e=a.reverse(e),t&&((n=t.modifyObj)&&(e=r.merge(e,n)),i=t.mapper,r.isFunction(i)&&(e=i(e))),e}))},e.exports=i},function(e,t,n){var r=n(128).fn,i=n(204);r.onChatroomMembersInfo=r.onChatroomMembers=function(e){e.error||(e.obj.members=i.reverseMembers(e.content.members))},r.onGetChatroomMemberCountByTag=function(e){e.error||(e.obj=e.content)},r.onMarkChatroomMember=function(e){e.error||(e.obj.member=i.reverse(e.content.chatroomMember))},r.onSyncRobot=function(e){!e.error&&this.options.onrobots?this.options.onrobots(null,e.content):this.ontions.onrobots(e.error,{})}},function(e,t,n){e.exports=n(61).enc.Utf8},function(e,t,n){var r;e.exports=(r=n(61),n(203),r.pad.Pkcs7)},function(e,t,n){var r,i;e.exports=(r=n(61),n(203),r.mode.ECB=((i=r.lib.BlockCipherMode.extend()).Encryptor=i.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),i.Decryptor=i.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),i),r.mode.ECB)},function(e,t,n){var r,i,a,o;e.exports=(i=(r=n(61)).lib.Base,a=r.enc,o=a.Utf8,void(r.algo.HMAC=i.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,c=a.words,u=0;u<n;u++)s[u]^=1549556828,c[u]^=909522486;i.sigBytes=a.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(n))}})))},function(e,t,n){var r,i,a,o,s,c,u,l;e.exports=(a=(i=r=n(61)).lib,o=a.WordArray,s=a.Hasher,c=i.algo,u=[],l=c.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],c=0;c<80;c++){if(c<16)u[c]=0|e[t+c];else{var l=u[c-3]^u[c-8]^u[c-14]^u[c-16];u[c]=l<<1|l>>>31}var m=(r<<5|r>>>27)+s+u[c];m+=c<20?1518500249+(i&a|~i&o):c<40?1859775393+(i^a^o):c<60?(i&a|i&o|a&o)-1894007588:(i^a^o)-899497514,s=o,o=a,a=i<<30|i>>>2,i=r,r=m}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+a|0,n[3]=n[3]+o|0,n[4]=n[4]+s|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),i.SHA1=s._createHelper(l),i.HmacSHA1=s._createHmacHelper(l),r.SHA1)},function(e,t,n){var r;e.exports=(r=n(61),function(e){var t=r,n=t.lib,i=n.WordArray,a=n.Hasher,o=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=o.MD5=a.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,i=e[r];e[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var a=this._hash.words,o=e[t+0],c=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],h=e[t+5],y=e[t+6],b=e[t+7],v=e[t+8],S=e[t+9],T=e[t+10],M=e[t+11],C=e[t+12],k=e[t+13],A=e[t+14],I=e[t+15],P=a[0],x=a[1],O=a[2],_=a[3];x=d(x=d(x=d(x=d(x=m(x=m(x=m(x=m(x=l(x=l(x=l(x=l(x=u(x=u(x=u(x=u(x,O=u(O,_=u(_,P=u(P,x,O,_,o,7,s[0]),x,O,c,12,s[1]),P,x,p,17,s[2]),_,P,f,22,s[3]),O=u(O,_=u(_,P=u(P,x,O,_,g,7,s[4]),x,O,h,12,s[5]),P,x,y,17,s[6]),_,P,b,22,s[7]),O=u(O,_=u(_,P=u(P,x,O,_,v,7,s[8]),x,O,S,12,s[9]),P,x,T,17,s[10]),_,P,M,22,s[11]),O=u(O,_=u(_,P=u(P,x,O,_,C,7,s[12]),x,O,k,12,s[13]),P,x,A,17,s[14]),_,P,I,22,s[15]),O=l(O,_=l(_,P=l(P,x,O,_,c,5,s[16]),x,O,y,9,s[17]),P,x,M,14,s[18]),_,P,o,20,s[19]),O=l(O,_=l(_,P=l(P,x,O,_,h,5,s[20]),x,O,T,9,s[21]),P,x,I,14,s[22]),_,P,g,20,s[23]),O=l(O,_=l(_,P=l(P,x,O,_,S,5,s[24]),x,O,A,9,s[25]),P,x,f,14,s[26]),_,P,v,20,s[27]),O=l(O,_=l(_,P=l(P,x,O,_,k,5,s[28]),x,O,p,9,s[29]),P,x,b,14,s[30]),_,P,C,20,s[31]),O=m(O,_=m(_,P=m(P,x,O,_,h,4,s[32]),x,O,v,11,s[33]),P,x,M,16,s[34]),_,P,A,23,s[35]),O=m(O,_=m(_,P=m(P,x,O,_,c,4,s[36]),x,O,g,11,s[37]),P,x,b,16,s[38]),_,P,T,23,s[39]),O=m(O,_=m(_,P=m(P,x,O,_,k,4,s[40]),x,O,o,11,s[41]),P,x,f,16,s[42]),_,P,y,23,s[43]),O=m(O,_=m(_,P=m(P,x,O,_,S,4,s[44]),x,O,C,11,s[45]),P,x,I,16,s[46]),_,P,p,23,s[47]),O=d(O,_=d(_,P=d(P,x,O,_,o,6,s[48]),x,O,b,10,s[49]),P,x,A,15,s[50]),_,P,h,21,s[51]),O=d(O,_=d(_,P=d(P,x,O,_,C,6,s[52]),x,O,f,10,s[53]),P,x,T,15,s[54]),_,P,c,21,s[55]),O=d(O,_=d(_,P=d(P,x,O,_,v,6,s[56]),x,O,I,10,s[57]),P,x,y,15,s[58]),_,P,k,21,s[59]),O=d(O,_=d(_,P=d(P,x,O,_,g,6,s[60]),x,O,M,10,s[61]),P,x,p,15,s[62]),_,P,S,21,s[63]),a[0]=a[0]+P|0,a[1]=a[1]+x|0,a[2]=a[2]+O|0,a[3]=a[3]+_|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var a=e.floor(r/4294967296),o=r;n[15+(i+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,u=0;u<4;u++){var l=c[u];c[u]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+i+o;return(s<<a|s>>>32-a)+t}function l(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+i+o;return(s<<a|s>>>32-a)+t}function m(e,t,n,r,i,a,o){var s=e+(t^n^r)+i+o;return(s<<a|s>>>32-a)+t}function d(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+i+o;return(s<<a|s>>>32-a)+t}t.MD5=a._createHelper(c),t.HmacMD5=a._createHmacHelper(c)}(Math),r.MD5)},function(e,t){if(void 0===__WEBPACK_EXTERNAL_MODULE__434__){var n=new Error('Cannot find module "crypto"');throw n.code="MODULE_NOT_FOUND",n}e.exports=__WEBPACK_EXTERNAL_MODULE__434__},function(e,t,n){var r;e.exports=(r=n(61),n(303),n(433),n(302),n(203),function(){var e=r,t=e.lib.BlockCipher,n=e.algo,i=[],a=[],o=[],s=[],c=[],u=[],l=[],m=[],d=[],p=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var f=r^r<<1^r<<2^r<<3^r<<4;f=f>>>8^255&f^99,i[n]=f,a[f]=n;var g=e[n],h=e[g],y=e[h],b=257*e[f]^16843008*f;o[n]=b<<24|b>>>8,s[n]=b<<16|b>>>16,c[n]=b<<8|b>>>24,u[n]=b,b=16843009*y^65537*h^257*g^16843008*n,l[f]=b<<24|b>>>8,m[f]=b<<16|b>>>16,d[f]=b<<8|b>>>24,p[f]=b,n?(n=g^e[e[e[y^g]]],r^=e[e[r]]):n=r=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],g=n.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),a=this._keySchedule=[],o=0;o<r;o++)o<n?a[o]=t[o]:(u=a[o-1],o%n?n>6&&o%n==4&&(u=i[u>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u]):(u=i[(u=u<<8|u>>>24)>>>24]<<24|i[u>>>16&255]<<16|i[u>>>8&255]<<8|i[255&u],u^=f[o/n|0]<<24),a[o]=a[o-n]^u);for(var s=this._invKeySchedule=[],c=0;c<r;c++){if(o=r-c,c%4)var u=a[o];else u=a[o-4];s[c]=c<4||o<=4?u:l[i[u>>>24]]^m[i[u>>>16&255]]^d[i[u>>>8&255]]^p[i[255&u]]}}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,c,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,m,d,p,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,a,o,s){for(var c=this._nRounds,u=e[t]^n[0],l=e[t+1]^n[1],m=e[t+2]^n[2],d=e[t+3]^n[3],p=4,f=1;f<c;f++){var g=r[u>>>24]^i[l>>>16&255]^a[m>>>8&255]^o[255&d]^n[p++],h=r[l>>>24]^i[m>>>16&255]^a[d>>>8&255]^o[255&u]^n[p++],y=r[m>>>24]^i[d>>>16&255]^a[u>>>8&255]^o[255&l]^n[p++],b=r[d>>>24]^i[u>>>16&255]^a[l>>>8&255]^o[255&m]^n[p++];u=g,l=h,m=y,d=b}g=(s[u>>>24]<<24|s[l>>>16&255]<<16|s[m>>>8&255]<<8|s[255&d])^n[p++],h=(s[l>>>24]<<24|s[m>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[p++],y=(s[m>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&l])^n[p++],b=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[l>>>8&255]<<8|s[255&m])^n[p++],e[t]=g,e[t+1]=h,e[t+2]=y,e[t+3]=b},keySize:8});e.AES=t._createHelper(g)}(),r.AES)},function(e,t,n){var r=n(128).fn,i=n(0),a=n(40),o=n(435),s=n(303),c=n(430),u=n(429),l=n(428);r.completeMsg=function(e){e.chatroomId=this.chatroom&&this.chatroom.id,e.from=this.options.account,e.fromClientType="Web",e.time||(e.time=+new Date)},r.onMsg=function(e){var t=this.message.reverse(e.content.msg);this.checkMsgUnique(t)?(this.msgBuffer.push(t),this.msgFlushTimer||this.startMsgFlushTimer()):this.logger.warn("onMsg::msg::repeat",t.idClient)},r.startMsgFlushTimer=function(){var e=this,t=e.options;e.msgFlushTimer=setTimeout((function(){var n=e.msgBuffer.splice(0,t.msgBufferSize);e.options.onmsgs(n),e.msgBuffer.length?e.startMsgFlushTimer():delete e.msgFlushTimer}),t.msgBufferInterval)},r.checkMsgUnique=i.genCheckUniqueFunc("idClient"),r.onSendMsg=function(e){var t=e.obj.msg;e.error?t.status="fail":(t=e.content.msg).status="success",Object.assign(t,e.obj.msg),t=this.message.reverse(t),this.checkMsgUnique(t),e.obj=t},r.onHistoryMsgs=function(e){e.error||(e.obj||(e.obj={}),e.obj.msgs=this.message.reverseMsgs(e.content.msgs))},r.onCdnMsgInfo=function(e){if(e){e.cdnUrls&&(e.cdnUrls=e.cdnUrls.split("|")),e.interval&&(e.interval=1e3*parseInt(e.interval)),e.timeout&&(e.timeout=+e.timeout),e.enable&&(e.enable=+e.enable),e.timestamp&&(e.timestamp=+e.timestamp,this.correctCdnTime(e.timestamp));var t=!this.cdnInfo.enable&&e.enable;Object.assign(this.cdnInfo,e),t&&this.queryCdnMsgs()}},r.correctCdnTime=function(e){e&&"number"==typeof e&&(this.cdnInfo||(this.cdnInfo={}),this.cdnInfo.timestamp=e,this.cdnInfo.localTime=+new Date,this.cdnInfo.lastNow=null,this.logger.info("correctCdnTime: timestamp, localTime",e,this.cdnInfo.localTime,new Date(e),new Date(this.cdnInfo.localTime)))},r.queryCdnMsgs=function(e){var t=this;if(this.cdnInfo&&this.cdnInfo.enable&&this.isConnected()){this.queryCdnTimer=setTimeout((function(){return t.queryCdnMsgs()}),this.cdnInfo.interval);var n=+new Date;if(n=n-this.cdnInfo.localTime+this.cdnInfo.timestamp,n-=n%this.cdnInfo.interval,this.cdnInfo.lastNow!==n&&this.cdnInfo.cdnUrls&&this.cdnInfo.cdnUrls.length){this.cdnInfo.cdnUrls.push(this.cdnInfo.cdnUrls.shift());var r=this,i=this.cdnInfo.decryptKey,m=this.cdnInfo.timeout||Math.ceil(this.cdnInfo.interval/2),d=this.cdnInfo.cdnUrls.slice(0);e=e||0,function t(){if(e>=3)r.finalFail++;else if(d.length){var p=d.shift().replace("#time",n),f=p.split("/")[2],g=+new Date;a(p,{timeout:m,onload:function(e){if(r.cdnInfo.lastNow>n)r.logger.warn("queryCdnMsgs::doQuery cdnInfo.lastNow > now, will throw data ",r.cdnInfo.lastNow,n,e);else{r.cdnInfo.lastNow=n,r.afterQueryCdn(f,+new Date-g,!0);try{e=JSON.parse(e)}catch(e){r.logger.warn("queryCdnMsgs::doQuery::onload parse res error: ",e)}if(e&&e.data){e.ptm&&(r.cdnInfo.timeout=e.ptm),e.pis&&(r.cdnInfo.interval=1e3*e.pis);var t,a,m=!0===e.e?(t=e.data,a=i,o.decrypt(t,s.parse(a),{mode:c,padding:u}).toString(l)):e.data;r.onCdnMsgsSmoothly(m,n,1e3*e.c)}}},onerror:function(n){if(e++,r.afterQueryCdn(f,+new Date-g,!1),404===n.status){var i;try{var a=JSON.parse(n.result);404===a.code&&a.timestamp&&(i=a.timestamp)}catch(e){r.logger.warn("queryCdnMsgs::doQuery::parse 404 result error",e,n)}!i&&n.date&&(i=+new Date(n.date)),i&&(r.correctCdnTime(i),clearTimeout(r.queryCdnTimer),r.queryCdnMsgs(e))}else t()}})}}()}}},r.onCdnMsgsSmoothly=function(e,t,n){try{e=JSON.parse(e)}catch(e){this.logger.warn("onCdnMsgsSmoothly::JSON.parse error",e)}if(this.logger.info("receive cdn msgs "+e.length+" and request time is "+new Date(t)),Array.isArray(e)&&e.length){var r=this,i=this.options.msgBufferInterval,a=Math.ceil(e.length*i/n);o(),clearInterval(r.cdnSmoothTimer),r.cdnSmoothTimer=setInterval((function(){return o()}),i)}function o(){r.isConnected()&&(e.splice(0,a).forEach((function(e){var t=r.parser.syncUnserialize(e,"msg");r.onMsg({content:{msg:t}})})),e.length||clearInterval(r.cdnSmoothTimer))}},r.resetCdnData=function(){this.cdnData={},this.finalFail=0,this.cdnDataTime=+new Date},r.initCdnData=function(){this.resetCdnData(),i.isFunction(this.options.onCdnRequestData)?(this.options.cdnRequestDataInterval=this.options.cdnRequestDataInterval||3e4,this.afterQueryCdn=function(e,t,n){var r=this;this.cdnData[e]||(this.cdnData[e]={success:0,fail:0,sr:0,fr:0,smr:0,fmr:0}),n?(this.cdnData[e].success++,this.cdnData[e].sr+=t,t>this.cdnData[e].smr&&(this.cdnData[e].smr=t)):(this.cdnData[e].fail++,this.cdnData[e].fr+=t,t>this.cdnData[e].fmr&&(this.cdnData[e].fmr=t)),+new Date-this.cdnDataTime<this.options.cdnRequestDataInterval||(Object.keys(this.cdnData).forEach((function(e){r.cdnData[e].sr=r.cdnData[e].sr/r.cdnData[e].success||0,r.cdnData[e].fr=r.cdnData[e].fr/r.cdnData[e].fail||0})),this.options.onCdnRequestData(Object.assign({},this.cdnData),this.finalFail),this.resetCdnData())}):this.afterQueryCdn=function(){}}},function(e,t,n){var r=n(128).fn,i=n(41),a=n(0);r.assembleLogin=function(){var e=this.options;this.sdkSession=this.genSessionKey();var t={appKey:e.appKey,account:e.account,deviceId:i.deviceId,chatroomId:e.chatroomId,session:this.sdkSession,appLogin:this.appLogin||0};if(t=a.merge(t,a.filterObj(e,"chatroomNick chatroomAvatar chatroomCustom chatroomEnterCustom isAnonymous notifyTargetTags")),e.tags&&e.tags.length>0)try{t.tags=JSON.stringify(e.tags)}catch(t){this.logger.error("assembleLogin::format tags error",e.tags,t)}return{type:1,login:t,imLogin:this.assembleIMLogin()}},r.afterLogin=function(e){var t=e.chatroom;this.sendCmd("getNosCdnHost",{}),this.chatroom=t,this.notifyLogin()},r.kickedReasons=["","chatroomClosed","managerKick","samePlatformKick","silentlyKick","blacked"],r.kickedMessages=["","\u804a\u5929\u5ba4\u5173\u95ed\u4e86","\u88ab\u623f\u4e3b\u6216\u8005\u7ba1\u7406\u5458\u8e22\u51fa","\u4e0d\u5141\u8bb8\u540c\u4e00\u4e2a\u5e10\u53f7\u5728\u591a\u4e2a\u5730\u65b9\u540c\u65f6\u767b\u5f55","\u6084\u6084\u88ab\u8e22","\u88ab\u62c9\u9ed1\u4e86"]},function(e,t,n){n(128).fn.refreshSocketUrl=function(){this.socketUrlsBackup=this.socketUrlsBackup||[],this.socketUrls=this.socketUrlsBackup.slice(0),this.logger.info("link::refreshSocketUrl"),this.connectToUrl(this.getNextSocketUrl())}},function(e,t,n){n(174);var r=n(139);n(205)(r),e.exports=r},function(e,t,n){var r=n(27).fn,i=n(0);r.httpRequestProxy=function(e){i.verifyOptions(e,"path","misc::httpRequestProxy");var t=Object.assign({},e);delete t.done,this.processCallback(e),this.sendCmd("httpProxy",{proxyTag:t},e.callback)}},function(e,t,n){var r=n(0),i=r.notundef;function a(e){r.verifyOptions(e,"type","event::MsgEventSubscribe"),r.verifyParamType("type",e.type,"number","event::MsgEventSubscribe"),r.findObjIndexInArray([1,2,3],e.type)<0&&r.verifyParamMin("type",e.type,1e5,"event::MsgEventSubscribe"),this.type=e.type,i(e.subscribeTime)?(r.verifyParamType("subscribeTime",e.subscribeTime,"number","event::MsgEventSubscribe"),r.verifyParamMin("subscribeTime",e.subscribeTime,60,"event::MsgEventSubscribe"),r.verifyParamMax("subscribeTime",e.subscribeTime,2592e3,"event::MsgEventSubscribe"),this.subscribeTime=e.subscribeTime):this.subscribeTime=2592e3,i(e.sync)?(r.verifyParamType("sync",e.sync,"boolean","event::MsgEventSubscribe"),this.sync=e.sync):this.sync=!0}a.prototype.assembleEvent=function(e){return{type:this.type,subscribeTime:this.subscribeTime,sync:!0===this.sync?1:0}},e.exports=a},function(e,t,n){var r=n(0),i=r.notundef,a=n(29);function o(e){if(r.verifyOptions(e,"type value","event::MsgEvent"),r.verifyParamType("type",e.type,"number","event::MsgEvent"),r.verifyParamType("value",e.value,"number","event::MsgEvent"),this.type=e.type,this.value=e.value,this.idClient=r.guid(),i(e.custom)&&(this.custom=""+e.custom),this.validTime=e.validTime||604800,r.verifyParamType("validTime",this.validTime,"number","event::MsgEvent"),r.verifyParamMin("validTime",this.validTime,60,"event::MsgEvent"),r.verifyParamMax("validTime",this.validTime,604800,"event::MsgEvent"),i(e.broadcastType)){if(r.verifyParamType("broadcastType",e.broadcastType,"number","event::MsgEvent"),[1,2].indexOf(e.broadcastType)<0)throw new a('\u53c2\u6570\u9519\u8bef"broadcastType":\u53ea\u80fd\u4e3a1\u62162');this.broadcastType=e.broadcastType}else this.broadcastType=2;i(e.sync)?(r.verifyParamType("sync",e.sync,"boolean","event::MsgEvent"),this.sync=e.sync):this.sync=!1}o.prototype.assembleEvent=function(){return{type:this.type,value:this.value,idClient:this.idClient,custom:this.custom||"",validTime:this.validTime,broadcastType:this.broadcastType,sync:!0===this.sync?1:0}},e.exports=o},function(e,t,n){var r,i=(r=n(10))&&r.__esModule?r:{default:r},a=n(27).fn,o=n(0),s=n(442),c=n(441);function u(e){return"object"===(void 0===e?"undefined":(0,i.default)(e))&&(e.msgEventSubscribes?e=e.msgEventSubscribes:e.msgEventSubscribe?e=e.msgEventSubscribe:e.accounts?e=e.accounts:e.msgEvent&&(e=e.msgEvent).time&&(e.time=+e.time),1===e.sync?e.sync=!0:0===e.sync&&(e.sync=!1)),e}a.batchSendEventsCmds=function(e,t,n){var r=this,i=o.dropArrayDuplicates(t.accounts);i=o.reshape2d(i,100);var a=[];i.forEach((function(n){a.push(new Promise((function(i,a){var s=o.simpleClone(t);s.accounts=n,r.sendCmdWithResp(e,s,(function(e,t){e?a(e):i(u(t))}))})))})),Promise.all(a).then((function(e){var t=null;if(e.length>0)if(e[0].msgEventSubscribe){var r=e[0].msgEventSubscribe;r=u(r);var i=[];e.forEach((function(e){i=i.concat(e.accounts)})),t={accounts:i,msgEventSubscribe:r}}else t=[],e.forEach((function(e){t=t.concat(e)}));n(null,t)}),(function(e){n(e,null)}))},a.publishEvent=function(e){var t=new s(e);t=t.assembleEvent(),this.processCallback(e),this.sendCmdWithResp("publishEvent",{msgEvent:t},(function(t,n){t||(n=u(n)),e.callback(t,n)}))},a.subscribeEvent=function(e){o.verifyOptions(e,"accounts","event::subscribeEvent");var t=new c(e);o.verifyParamType("accounts",e.accounts,"array","event::subscribeEvent"),this.processCallback(e),t=t.assembleEvent(),this.batchSendEventsCmds("subscribeEvent",{msgEventSubscribe:t,accounts:e.accounts},(function(t,n){!t&&n&&(n={failedAccounts:n}),e.callback(t,n)}))},a.unSubscribeEventsByAccounts=function(e){o.verifyOptions(e,"accounts","event::unSubscribeEventsByAccounts"),o.verifyParamType("accounts",e.accounts,"array","event::unSubscribeEventsByAccounts");var t=new c(e);t=t.assembleEvent(),this.processCallback(e),this.batchSendEventsCmds("unSubscribeEventsByAccounts",{msgEventSubscribe:t,accounts:e.accounts},(function(t,n){!t&&n&&(n={failedAccounts:n}),e.callback(t,n)}))},a.unSubscribeEventsByType=function(e){var t=new c(e);t=t.assembleEvent(),this.processCallback(e),this.sendCmdWithResp("unSubscribeEventsByType",{msgEventSubscribe:t},(function(t,n){e.callback(t)}))},a.querySubscribeEventsByAccounts=function(e){o.verifyOptions(e,"accounts","event::querySubscribeEventsByAccounts"),o.verifyParamType("accounts",e.accounts,"array","event::querySubscribeEventsByAccounts");var t=new c(e);t=t.assembleEvent(),this.processCallback(e),this.batchSendEventsCmds("querySubscribeEventsByAccounts",{msgEventSubscribe:t,accounts:e.accounts},(function(t,n){!t&&n&&(n={msgEventSubscribes:n}),e.callback(t,n)}))},a.querySubscribeEventsByType=function(e){var t=new c(e);t=t.assembleEvent(),this.processCallback(e),this.sendCmdWithResp("querySubscribeEventsByType",{msgEventSubscribe:t},(function(t,n){t||(n={msgEventSubscribes:u(n)}),e.callback(t,n)}))}},function(e,t,n){var r=n(27).fn,i=n(207),a=n(0),o=a.undef;r.getPushNotificationMultiportConfig=function(){return this.protocol.getPushNotificationMultiportConfig()},r.updatePushNotificationMultiportConfig=function(e){a.verifyOptions(e),o(e.shouldPushNotificationWhenPCOnline)&&(e.shouldPushNotificationWhenPCOnline=!0),e.donnop=new i(e),this.processCallback(e),this.sendCmd("updateDonnop",e)}},function(e,t,n){var r=n(27).fn;r.clearDB=function(e){var t=this.db;this.processCallback(e);var n=e.done;t.enable?t.clear().then(n,n):n()},r.removeDB=function(e){var t=this.db;this.processCallback(e);var n=e.done;t.enable?t.destroy().then(n,n):n()},r.closeDB=function(e){var t=this.db;this.processCallback(e);var n=e.done;t.enable?t.close().then(n,n):n()}},function(e,t,n){var r=n(27).fn,i=n(0);r.audioToText=function(e){i.verifyOptions(e,"url","audio::audioToText"),e.audioToText=i.filterObj(e,"url"),this.processCallback(e),this.sendCmd("audioToText",e)}},function(e,t,n){},function(e,t,n){},function(e,t,n){var r=n(27).fn,i=n(0),a=n(5);r.getChatroomAddress=function(e){i.verifyOptions(e,"chatroomId","chatroom::getChatroomAddress"),e.isWeixinApp=a.isWeixinApp,e.type=a.ipVersion,this.processCallback(e),this.sendCmd("getChatroomAddress",e)}},function(e,t,n){var r=n(27).fn,i=n(0),a=i.undef,o=i.notundef,s=n(100);r.markSysMsgRead=function(e){var t,n=this.db,r=Promise.resolve(),a=this.protocol;i.verifyOptions(e,"sysMsgs","sysmsg::markSysMsgRead");var o=e.sysMsgs;function s(){e.done(t,e)}i.isArray(o)||(o=[o]),n.enable?r=n.markSysMsgRead(o).then((function(e){o=e,a.onUpdateSysMsg(e)})):(o=o.filter((function(e){return!e.read}))).length&&(a.options.autoMarkRead||a.markSysMsgRead(o,!0),o.forEach((function(e){e.read=!0})),a.onUpdateSysMsg(o)),r.then((function(){return a.reduceSysMsgUnread(o)})).then(s,(function(e){t=e,s()}))},r.sendCustomSysMsg=function(e){i.verifyOptions(e,"scene to content","sysmsg::sendCustomSysMsg"),i.verifyParamValid("scene",e.scene,this.message.validScenes,"sysmsg::sendCustomSysMsg"),this.processCallback(e);var t="sendCustomSysMsg";return"p2p"===e.scene?e.type="customP2p":"superTeam"===e.scene?(e.type="customSuperTeam",t="sendSuperTeamCustomSysMsg"):e.type="customTeam",e.sysMsg=new s(e),e.filter&&(t="sendFilterCustomSysMsg"),this.sendCmd(t,{sysMsg:e.sysMsg,single:!0},e.callback),this.formatReturnSysMsg(e.sysMsg)},r.formatReturnSysMsg=function(e){return e=i.copy(e),this.protocol.completeSysMsg(e),e.status="sending",s.reverse(e)},r.getLocalSysMsgs=function(e){var t,n=this.db,r=[];function c(){e.sysMsgs=r,e.done(t,e)}i.verifyOptions(e),e.category&&i.verifyParamValid("category",e.category,s.validCategories,"sysmsg::getLocalSysMsgs"),e.type&&i.verifyParamValid("type",e.type,s.validTypes,"sysmsg::getLocalSysMsgs"),a(e.limit)&&(e.limit=100),i.verifyParamType("limit",e.limit,"number","sysmsg::getLocalSysMsgs"),i.verifyParamMax("limit",e.limit,100,"sysmsg::getLocalSysMsgs"),o(e.reverse)?i.verifyParamType("reverse",e.reverse,"boolean","sysmsg::getLocalSysMsgs"):e.reverse=!1,this.processCallback(e),n.enable?n.getSysMsgs(e).then((function(e){r=e,c()}),(function(e){t=e,c()})):c()},r.updateLocalSysMsg=function(e){var t,n=this.db,r=null;if(i.verifyOptions(e,"idServer","sysmsg::updateLocalSysMsg"),this.processCallback(e),n.enable){var a=i.filterObj(e,"idServer state localCustom");n.updateSysMsg(a).then((function(e){r=e,o()}),(function(e){t=e,o()}))}else o();function o(){e.sysMsg=r,e.done(t,e)}},r.deleteLocalSysMsg=function(e){var t,n=this.db;function r(){e.done(t,e)}i.verifyOptions(e,"idServer","sysmsg::deleteLocalSysMsg"),this.processCallback(e),n.enable?n.deleteSysMsg(e.idServer).then((function(){r()}),(function(e){t=e,r()})):r()},r.deleteAllLocalSysMsgs=function(e){var t,n=this,r=n.db;function i(){n.protocol.onUpdateSysMsgUnread({}),e.done(t,e)}n.processCallback(e),r.enable&&r.deleteAllSysMsgs().then((function(){i()}),(function(e){t=e,i()}))}},function(e,t,n){var r=n(27).fn,i=n(0),a=n(314),o=n(313),s=i.notundef;function c(e,t,n,r){n=n||"",i.verifyParamType(n+"from",e.from,"string",t),i.verifyParamType(n+"to",e.to,"string",t),i.verifyParamType(n+"idServer",e.idServer,"string",t),i.verifyParamType(n+"time",e.time,"number",t),i.verifyParamValid(n+"scene",e.scene,this.message.validScenes,t),r||i.verifyParamType(n+"idClient",e.idClient,"string",t)}r.getThreadMsgs=function(e){i.verifyCallback(e,"done","msg::getThreadMsgs"),i.verifyOptions(e,"scene threadMsgFromAccount threadMsgToAccount threadMsgIdServer threadMsgTime","msg::getThreadMsgs"),i.verifyParamType("threadMsgFromAccount",e.threadMsgFromAccount,"string","msg::getThreadMsgs"),i.verifyParamType("threadMsgToAccount",e.threadMsgToAccount,"string","msg::getThreadMsgs"),i.verifyParamType("threadMsgIdServer",e.threadMsgIdServer,"string","msg::getThreadMsgs"),i.verifyParamType("threadMsgTime",e.threadMsgTime,"number","msg::getThreadMsgs"),i.verifyParamValid("scene",e.scene,this.message.validScenes,"msg::getThreadMsgs"),this.processCallback(e);var t={scene:this.message.sceneMap[e.scene],from:e.threadMsgFromAccount,to:e.threadMsgToAccount,time:e.threadMsgTime,idServer:e.threadMsgIdServer},n={limit:e.limit<100?e.limit:100,beginTime:"number"==typeof e.beginTime?e.beginTime:0,reverse:!0===e.reverse?1:0};e.endTime&&e.endTime<=n.beginTime&&i.onParamError("endTime\u5e94\u8be5\u5927\u4e8ebeginTime","msg::getThreadMsgs"),e.lastMsgId&&(n.lastMsgId=e.lastMsgId),this.sendCmd("getThreadMsgs",{msg:t,threadMsgReq:n,NOTSTORE:"msg threadMsgReq"},e.callback)},r.getMsgsByIdServer=function(e){var t=this,n=this,r="msg::getMsgsByIdServer";i.verifyCallback(e,"done",r),(!Array.isArray(e.reqMsgs)||0===e.reqMsgs.length||e.reqMsgs.length>100)&&i.onParamError("reqMsgs\u5e94\u8be5\u662f\u6570\u7ec4\u4e14\u6570\u636e\u957f\u5ea6\u5e94\u5927\u4e8e0\u5c0f\u4e8e\u7b49\u4e8e100",r),e.reqMsgs=e.reqMsgs.slice(0),e.reqMsgs.forEach((function(e,i){c.call(n,e,r,"reqMsgs["+i+"].",!0),e.scene=t.message.sceneMap[e.scene]})),this.processCallback(e),this.sendCmd("getMsgsByIdServer",{reqMsgs:e.reqMsgs},e.callback)},r.addQuickComment=function(e){i.verifyOptions(e,"msg body","msg::addQuickComment"),c.call(this,e.msg,"msg::addQuickComment");var t=new a(e,"msg::addQuickComment");t.from=this.account;var n={scene:this.message.sceneMap[e.msg.scene],from:e.msg.from,to:e.msg.to,time:e.msg.time,idServer:e.msg.idServer,idClient:e.msg.idClient};this.processCallback(e),this.sendCmd("addQuickComment",{msg:n,comment:t},e.callback)},r.deleteQuickComment=function(e){i.verifyOptions(e,"msg body","msg::deleteQuickComment"),c.call(this,e.msg,"msg::deleteQuickComment");var t=new a(e,"msg::addQuickComment");t.from=this.account;var n={scene:this.message.sceneMap[e.msg.scene],from:e.msg.from,to:e.msg.to,time:e.msg.time,idServer:e.msg.idServer,idClient:e.msg.idClient};this.processCallback(e),this.sendCmd("deleteQuickComment",{msg:n,comment:t},e.callback)},r.getQuickComments=function(e){var t=this,n="msg::getQuickComments",r=this,a={},o={};i.verifyOptions(e,"msgs","msg::getQuickComments"),(!Array.isArray(e.msgs)||0===e.msgs.length||e.msgs.length>20)&&i.onParamError("msgs\u5e94\u8be5\u662f\u6570\u7ec4\u4e14\u6570\u636e\u957f\u5ea6\u5e94\u5927\u4e8e0\u5c0f\u4e8e\u7b49\u4e8e20",n);var s=[];try{s=JSON.parse(JSON.stringify(e.msgs))}catch(e){i.onParamError("msgs \u4e0d\u662f\u5408\u6cd5\u7684\u5bf9\u8c61",n)}s.forEach((function(e,i){c.call(r,e,n,"msgs["+i+"].",!0),e.scene=t.message.sceneMap[e.scene],a[e.idClient]=null,o[e.idClient]=i})),this.processCallback(e),this.getLocalMsgsByIdClients({idClients:Object.keys(a),done:function(t,n){var i=r.protocol.timetags.sync;!t&&n.msgs&&n.msgs.length&&i&&(n.msgs.forEach((function(e){a[e.idClient]=e})),s=s.filter((function(e){var t=a[e.idClient];return!t||(t.commentTimetag&&(e.timestamp=t.commentTimetag),!(t.commentTimetag>i))}))),r.sendCmd("getQuickComments",{commentReq:s,idMap:a,indexMap:o},e.callback)}})},r.addCollect=function(e){i.verifyOptions(e,"type data","msg::addCollect");var t=new o(e,"msg::addCollect");this.processCallback(e),this.sendCmd("addCollect",{collect:t},e.callback)},r.deleteCollects=function(e){i.verifyOptions(e,"collectList","msg::deleteCollects"),(!Array.isArray(e.collectList)||0===e.collectList.length||e.collectList.length>100)&&i.onParamError("collectList\u5e94\u8be5\u662f\u6570\u7ec4\u4e14\u6570\u636e\u957f\u5ea6\u5e94\u5927\u4e8e0\u5c0f\u4e8e\u7b49\u4e8e100","msg::deleteCollects"),e.collectList.forEach((function(e,t){i.verifyParamType("collectList["+t+"].id",e.id,"string","msg::deleteCollects"),i.verifyParamType("collectList["+t+"].createTime",e.createTime,"number","msg::deleteCollects")})),this.processCallback(e),this.sendCmd("deleteCollects",{collectList:e.collectList},e.callback)},r.updateCollect=function(e){i.verifyOptions(e,"collect","msg::updateCollect"),i.verifyParamType("collect.id",e.collect.id,"string","msg::updateCollect"),i.verifyParamType("collect.createTime",e.collect.createTime,"number","msg::updateCollect"),this.processCallback(e),this.sendCmd("updateCollect",{collect:e.collect},e.callback)},r.getCollects=function(e){i.verifyCallback(e,"done","msg::getCollects");var t={};["type","beginTime","endTime","limit"].forEach((function(n){s(e[n])&&(i.verifyParamType(n,e[n],"number","msg::getCollects"),t[n]=e[n])})),e.limit>100&&i.onParamError("limit\u4e0d\u80fd\u5927\u4e8e100","msg::getCollects"),e.beginTime>e.endTime&&i.onParamError("beginTime\u4e0d\u80fd\u5927\u4e8eendTime","msg::getCollects"),s(e.lastId)&&(i.verifyParamType("lastId",e.lastId,"string","msg::getCollects"),t.lastId=e.lastId),s(e.reverse)&&(t.reverse=!0===e.reverse),this.processCallback(e),this.sendCmd("getCollects",{collectQuery:t,NOTSTORE:"collectQuery"},e.callback)},r.addStickTopSession=function(e){i.verifyOptions(e,"id","msg::addStickTopSession");var t=e.id.split("-");i.verifyParamValid("id\u7684\u524d\u534a\u90e8\u5206",t[0],this.message.validScenes,"msg::addStickTopSession"),i.verifyParamType("id\u7684\u540e\u534a\u90e8\u5206",t[1],"string","msg::addStickTopSession"),"superTeam"===t[0]&&(t[0]="super_team");var n={id:t=t.join("|")};e.topCustom&&(i.verifyParamType("topCustom",e.topCustom,"string","msg::addStickTopSession"),n.topCustom=e.topCustom),this.processCallback(e),this.sendCmd("addStickTopSession",{stickTopSession:n},e.callback)},r.deleteStickTopSession=function(e){i.verifyOptions(e,"id","msg::deleteStickTopSession");var t=e.id.split("-");i.verifyParamValid("id\u7684\u524d\u534a\u90e8\u5206",t[0],this.message.validScenes,"msg::deleteStickTopSession"),i.verifyParamType("id\u7684\u540e\u534a\u90e8\u5206",t[1],"string","msg::deleteStickTopSession"),"superTeam"===t[0]&&(t[0]="super_team"),t=t.join("|"),this.processCallback(e),this.sendCmd("deleteStickTopSession",{stickTopSession:{id:t}},e.callback)},r.updateStickTopSession=function(e){i.verifyOptions(e,"id","msg::updateStickTopSession");var t=e.id.split("-");i.verifyParamValid("id\u7684\u524d\u534a\u90e8\u5206",t[0],this.message.validScenes,"msg::updateStickTopSession"),i.verifyParamType("id\u7684\u540e\u534a\u90e8\u5206",t[1],"string","msg::updateStickTopSession"),"superTeam"===t[0]&&(t[0]="super_team");var n={id:t=t.join("|")};e.topCustom&&(i.verifyParamType("topCustom",e.topCustom,"string","msg::updateStickTopSession"),n.topCustom=e.topCustom),this.processCallback(e),this.sendCmd("updateStickTopSession",{stickTopSession:n},e.callback)},r.getStickTopSessions=function(e){i.verifyOptions(e,"done","msg::getStickTopSessions"),this.processCallback(e);var t=this.protocol.sessionSet,n=[],r=void 0;for(var a in t)(r=this.protocol.findSession(a))&&r.isTop&&n.push(t[a]);e.callback(null,n)},r.addMsgPin=function(e){i.verifyOptions(e,"msg","msg::addMsgPin"),c.call(this,e.msg,"msg::addMsgPin");var t={pinFrom:this.account};s(e.pinCustom)&&(i.verifyParamType("pinCustom",e.pinCustom,"string","msg::addMsgPin"),t.pinCustom=e.pinCustom);var n={scene:this.message.sceneMap[e.msg.scene],from:e.msg.from,to:e.msg.to,time:e.msg.time,idServer:e.msg.idServer,idClient:e.msg.idClient};this.processCallback(e),this.sendCmd("addMsgPin",{msg:n,pinTag:t},e.callback)},r.updateMsgPin=function(e){i.verifyOptions(e,"msg","msg::updateMsgPin"),c.call(this,e.msg,"msg::updateMsgPin");var t={pinFrom:this.account};s(e.pinCustom)&&(i.verifyParamType("pinCustom",e.pinCustom,"string","msg::updateMsgPin"),t.pinCustom=e.pinCustom);var n={scene:this.message.sceneMap[e.msg.scene],from:e.msg.from,to:e.msg.to,time:e.msg.time,idServer:e.msg.idServer,idClient:e.msg.idClient};this.processCallback(e),this.sendCmd("updateMsgPin",{msg:n,pinTag:t},e.callback)},r.deleteMsgPin=function(e){i.verifyOptions(e,"msg","msg::deleteMsgPin"),c.call(this,e.msg,"msg::deleteMsgPin");var t={pinFrom:this.account},n={scene:this.message.sceneMap[e.msg.scene],from:e.msg.from,to:e.msg.to,time:e.msg.time,idServer:e.msg.idServer,idClient:e.msg.idClient};this.processCallback(e),this.sendCmd("deleteMsgPin",{msg:n,pinTag:t},e.callback)},r.getMsgPins=function(e){var t=this;i.verifyOptions(e,"id","msg::getMsgPins");var n=this.db,r=e.id.split("-");i.verifyParamValid("id\u7684\u524d\u534a\u90e8\u5206",r[0],this.message.validScenes,"msg::getMsgPins"),i.verifyParamType("id\u7684\u540e\u534a\u90e8\u5206",r[1],"string","msg::getMsgPins"),"superTeam"===r[0]&&(r[0]="super_team");var a={sessionId:r=r.join("|"),timetag:0};if(this.processCallback(e),n.enable){var o=this.protocol.timetags.sync;n.getTimetag("pin-"+e.id).then((function(r){r>o?n.getMsgPins(e.id).then((function(t){return e.callback(null,{pins:t||[]})})).catch((function(t){return e.callback(t)})):(a.timetag=r,s.call(t))}))}else s.call(this);function s(){this.sendCmd("getMsgPins",{msgPinReq:a,id:e.id,NOTSTORE:"msgPinReq"},e.callback)}}},function(e,t,n){var r,i=(r=n(316))&&r.__esModule?r:{default:r},a=n(27).fn,o=n(0),s=o.undef,c=o.notundef,u=n(41),l=n(130),m=n(100),d=n(29);a.sendG2Msg=function(e){return this.processCallback(e),e.msg=new this.message.G2Message(e),this.sendMsg(e)},a.beforeSendMsg=function(e){var t,n=this.protocol,r=e.msg;switch(r.to===this.account&&(r.fromDeviceId=u.deviceId),r.userUpdateTime=n.myInfo&&n.myInfo.updateTime,r.getScene()){case"p2p":t="sendMsg";break;case"team":t="sendTeamMsg";break;case"superTeam":t="sendSuperTeamMsg"}e.filter&&(t="sendFilterMsg",r.filter=!0),e.cmd=t},a.afterSendMsg=function(e){var t=e.rtnMsg;if(!t||!t.ignore){var n=this.protocol.findSession(t.sessionId);e.isLocal&&n&&n.lastMsg&&t.time<n.lastMsg.time||this.protocol.onUpdateSession(l.genSessionByMsg(t))}},a.beforeForwardMsg=function(e){o.verifyOptions(e,"msg scene to","msg::beforeForwardMsg"),e.msg.scene=e.scene,e.msg.to=e.to},a.markMsgRead=function(e){var t=this.protocol;!e||this.db.enable||t.options.autoMarkRead?this.logger.warn("api::markMsgRead: \u4e0d\u9700\u8981\u6807\u8bb0\u6d88\u606f\u4e3a\u5df2\u6536\u5230 (\u6ca1\u6709\u6d88\u606f, \u6216\u8005\u542f\u7528\u4e86\u6570\u636e\u5e93, \u6216\u8005\u542f\u7528\u4e86\u81ea\u52a8\u6807\u8bb0\u5df2\u6536\u5230)"):t.markMsgRead(e,!0)},a.sendMsgReceipt=function(e){if(o.verifyOptions(e),this.processCallback(e),e.msg){o.verifyOptions(e,"msg","msg::sendMsgReceipt");var t=e.msg;o.verifyOptions(t,"target idClient time",!0,"msg.","msg::sendMsgReceipt"),this.protocol.shouldSendMsgReceipt(t)?this.sendCmd("sendMsgReceipt",{msgReceipt:{to:t.target,idClient:t.idClient,time:t.time}},e.callback):e.done()}else e.done()},a.isMsgRemoteRead=function(e){return this.protocol.isMsgRemoteRead(e)},a.deleteMsg=function(e){o.verifyOptions(e,"msg","msg::deleteMsg");var t=e.msg;if(console.log(this.account,this),"team"!==t.scene&&t.from!==this.account||"success"!==t.status||t.isLocal)return e.done(d.newParamError("\u53ea\u80fd\u5220\u9664\u81ea\u5df1\u53d1\u7684, \u5e76\u4e14\u53d1\u9001\u6210\u529f\u7684\u6d88\u606f\uff0c\u4e14\u4e0d\u80fd\u662f\u672c\u5730\u6d88\u606f",{callFunc:"msg::deleteMsg"}),e);o.verifyOptions(t,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsg"),o.verifyParamValid("msg.scene",t.scene,this.message.validScenes,"msg::deleteMsg"),this.processPs(e),this.processCallback(e);var n={deletedIdClient:t.idClient,deletedIdServer:t.idServer,time:t.time,from:t.from,to:t.to,opeAccount:t.from},r="superTeam"===t.scene?"deleteSuperTeamMsg":"deleteMsg";n.type="deleteMsg"+t.scene[0].toUpperCase()+t.scene.slice(1),["ps","apnsText","pushPayload","env","opeAccount","attach"].forEach((function(t){e[t]&&(n[t]=e[t])})),n=new m(n),this.sendCmd(r,{sysMsg:n,msg:t},e.callback)},a.deleteMsgSelf=function(e){o.verifyOptions(e,"msg","msg::deleteMsgSelf");var t=e.msg;if("superTeam"===t.scene)return e.done(d.newParamError("\u5355\u5411\u5220\u9664\u6682\u4e0d\u652f\u6301\u8d85\u5927\u7fa4\u573a\u666f",{callFunc:"msg::deleteMsgSelf"}),e);o.verifyOptions(t,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelf"),o.verifyParamValid("msg.scene",t.scene,this.message.validScenes,"msg::deleteMsgSelf"),this.processCallback(e);var n={scene:"p2p"===t.scene?1:2,from:t.from,to:t.to,time:t.time,idClient:t.idClient,idServer:t.idServer,custom:e.custom};this.sendCmd("deleteMsgSelf",{deleteMsgSelfTag:n},e.callback)},a.deleteMsgSelfBatch=function(e){var t=this;if(o.verifyOptions(e,"msgs","msg::deleteMsgSelfBatch"),(!Array.isArray(e.msgs)||0===e.msgs.length||e.msgs.length>100)&&o.onParamError("msgs\u5e94\u8be5\u662f\u6570\u7ec4\u4e14\u6570\u636e\u957f\u5ea6\u5e94\u5927\u4e8e0\u5c0f\u4e8e\u7b49\u4e8e100","msg::deleteMsgSelfBatch"),e.msgs.some((function(e){return"superTeam"===e.scene})))return e.done(d.newParamError("\u6d88\u606f\u5217\u8868\u4e2d\u5b58\u5728\u8d85\u5927\u7fa4\u6d88\u606f\uff0c\u5355\u5411\u5220\u9664\u6682\u4e0d\u652f\u6301\u8d85\u5927\u7fa4\u573a\u666f",{callFunc:"msg::deleteMsgSelfBatch"}),e);e.msgs.forEach((function(e){o.verifyOptions(e,["scene","to","from","time","idClient","idServer"],!0,"msg.","msg::deleteMsgSelfBatch"),o.verifyParamValid("msg.scene",e.scene,t.message.validScenes,"msg::deleteMsgSelfBatch")})),this.processCallback(e);var n=e.msgs.map((function(t){return{scene:"p2p"===t.scene?1:2,from:t.from,to:t.to,time:t.time,idClient:t.idClient,idServer:t.idServer,sessionId:t.sessionId||t.scene+"-"+t.to,custom:e.custom}}));this.sendCmd("deleteMsgSelfBatch",{deleteMsgSelfTags:n},e.callback)};var p={text:0,image:1,audio:2,video:3,geo:4,notification:5,file:6,tip:10,robot:11,custom:100};a.getHistoryMsgs=function(e){o.verifyOptions(e,"scene to","msg::getHistoryMsgs"),o.verifyParamValid("scene",e.scene,this.message.validScenes,"msg::getHistoryMsgs"),void 0===e.beginTime&&(e.beginTime=0);var t,n=this.protocol.findSession(e.scene+"-"+e.to),r=n&&n.lastEmptyTime;switch(r>e.beginTime&&(e.beginTime=r),o.verifyParamType("beginTime",e.beginTime,"number","msg::getHistoryMsgs"),void 0===e.endTime&&(e.endTime=0),o.verifyParamType("endTime",e.endTime,"number","msg::getHistoryMsgs"),e.lastMsgId=e.lastMsgId&&+e.lastMsgId?e.lastMsgId:"0",void 0===e.limit&&(e.limit=100),o.verifyParamType("limit",e.limit,"number","msg::getHistoryMsgs"),o.verifyParamMax("limit",e.limit,100,"msg::getHistoryMsgs"),c(e.reverse)?o.verifyParamType("reverse",e.reverse,"boolean","msg::getHistoryMsgs"):e.reverse=!1,c(e.asc)?o.verifyParamType("asc",e.asc,"boolean","msg::getHistoryMsgs"):e.asc=!1,s(e.msgTypes)?e.msgTypes=[]:Array.isArray(e.msgTypes)?(e.msgTypes=e.msgTypes.map((function(e){return p[e]})),e.msgTypes=e.msgTypes.filter((function(e){return"number"==typeof e}))):"number"==typeof p[e.msgTypes]?e.msgTypes=[p[e.msgTypes]]:e.msgTypes=[],this.processCallback(e),e.asc&&(e.cbaop=function(e,t){e||(t.msgs=t.msgs.reverse())}),e.scene){case"p2p":t="getHistoryMsgs";break;case"team":t="getTeamHistoryMsgs";break;case"superTeam":t="getSuperTeamHistoryMsgs"}var i={scene:e.scene,to:e.to,beginTime:e.beginTime,endTime:e.endTime,lastMsgId:e.lastMsgId,limit:e.limit,reverse:e.reverse,msgTypes:e.msgTypes};this.sendCmd(t,i,e.callback)},a.searchHistoryMsgs=function(e){o.verifyOptions(e,"scene to keyword","msg::searchHistoryMsgs"),o.verifyParamValid("scene",e.scene,this.message.validScenes,"msg::searchHistoryMsgs"),void 0===e.beginTime&&(e.beginTime=0);var t,n=this.protocol.findSession(e.scene+"-"+e.to),r=n&&n.lastEmptyTime;switch(r>e.beginTime&&(e.beginTime=r),o.verifyParamType("beginTime",e.beginTime,"number","msg::searchHistoryMsgs"),void 0===e.endTime&&(e.endTime=0),o.verifyParamType("endTime",e.endTime,"number","msg::searchHistoryMsgs"),void 0===e.limit&&(e.limit=100),o.verifyParamType("limit",e.limit,"number","msg::searchHistoryMsgs"),o.verifyParamMax("limit",e.limit,100,"msg::searchHistoryMsgs"),c(e.reverse)?o.verifyParamType("reverse",e.reverse,"boolean","msg::searchHistoryMsgs"):e.reverse=!1,c(e.asc)?o.verifyParamType("asc",e.asc,"boolean","msg::searchHistoryMsgs"):e.asc=!1,this.processCallback(e),e.asc&&(e.cbaop=function(e,t){e||(t.msgs=t.msgs.reverse())}),e.scene){case"p2p":t="searchHistoryMsgs";break;case"team":t="searchTeamHistoryMsgs"}var i=o.filterObj(e,"scene to beginTime endTime keyword limit reverse");this.sendCmd(t,i,e.callback)},a.getLocalMsgs=function(e){var t=this,n=t.db,r=[];o.verifyOptions(e);var i=!1;c(e.start)&&(i=!0,o.verifyParamType("start",e.start,"number","msg::getLocalMsgs"));var a=!1;if(c(e.end)&&(a=!0,o.verifyParamType("end",e.end,"number","msg::getLocalMsgs")),i&&a&&e.end<=e.start&&o.onParamError("\u53c2\u6570 end \u5fc5\u987b\u665a\u4e8e start"),c(e.subTypes)&&o.verifyParamType("subTypes",e.subTypes,"array","msg::getLocalMsgs"),s(e.limit)&&(e.limit=100),o.verifyParamType("limit",e.limit,"number","msg::getLocalMsgs"),o.verifyParamMin("limit",e.limit,1,"msg::getLocalMsgs"),t.processCallback(e),n.enable){var u=(new Date).getTime();n.getMsgs(e).then((function(n){r=n,t.logger.info("api::getLocalMsgs: query db cost "+((new Date).getTime()-u)+" ms and the conditions is "+JSON.stringify(e)),l()}),(function(e){(e=e||{}).message=e.message||"msg::getLocalMsgs:db error",l()}))}else l();function l(){var t=o.simpleClone(e);t.msgs=r,delete t.callback,delete t.done,e.done(null,t)}},a.getLocalMsgByIdClient=function(e){var t=this.db,n=null,r=null;function i(){e.msg=r,e.done(n,e)}o.verifyOptions(e,"idClient","msg::getLocalMsgByIdClient"),this.processCallback(e),t.enable?t.getMsgByIdClient(e.idClient).then((function(e){e&&(r=e),i()}),(function(e){n=e,i()})):i()},a.getLocalMsgsByIdClients=function(e){var t,n=this.db,r=[];function i(){e.msgs=r,e.done(t,e)}o.verifyOptions(e,"idClients","msg::getLocalMsgByIdClient"),o.verifyParamType("idClients",e.idClients,"array","msg::getLocalMsgByIdClient"),this.processCallback(e),n.enable?n.getMsgsByIdClients(e.idClients).then((function(e){r=e.filter((function(e){return!!e})),i()}),(function(e){t=e,i()})):i()},a.updateLocalMsg=function(e){var t,n=this.db,r=null;if(o.verifyOptions(e,"idClient","msg::updateLocalMsg"),this.processCallback(e),n.enable){var i=o.filterObj(e,"idClient localCustom");n.updateMsg(i).then((function(e){r=e,a()}),(function(e){t=e,a()}))}else a();function a(){e.msg=r,e.done(t,e)}},a.deleteLocalMsg=function(e){var t;o.verifyOptions(e,"msg","msg::deleteLocalMsg");var n=e.msg;function r(){e.done(t,e)}o.verifyOptions(n,"idClient sessionId",!0,"msg.","msg::deleteLocalMsg"),this.processCallback(e),this.protocol.deleteLocalMsg(n).then(r,(function(e){t=e,r()}))},a.deleteLocalMsgsBySession=function(e){var t,n=this,r=n.db;o.verifyOptions(e,"scene to","msg::deleteLocalMsgsBySession"),o.verifyParamValid("scene",e.scene,n.message.validScenes,"msg::deleteLocalMsgsBySession"),e.sessionId=e.scene+"-"+e.to,e.delLastMsg=!0===e.delLastMsg,e.isTag=!0===e.isTag;var i=(new Date).getTime();function a(){e.done(t,e)}n.processCallback(e);var s={id:e.sessionId};e.delLastMsg&&(s.lastMsg=null),e.isTag&&(s.lastEmptyTime=i),r.enable?r.deleteMsgsBySessionId(e).then((function(){e.delLastMsg||e.isTag?r.updateSession(s).then((function(t){n.protocol.onUpdateSession(t),e.session=t,a()})):a()})).catch((function(e){t=e,a()})):(a(),(e.delLastMsg||e.isTag)&&n.protocol.onUpdateSession(s))},a.deleteLocalMsgs=function(e){var t,n=this,r=n.db,i=!1!==e.updateSession;function a(){e.done(t,e)}o.verifyOptions(e,"sessionId","msg::deleteLocalMsgsBySession"),c(e.start)&&o.verifyParamType("start",e.start,"number","msg::deleteLocalMsgs"),c(e.end)&&o.verifyParamType("end",e.end,"number","msg::deleteLocalMsgs"),c(e.end)&&c(e.start)&&e.end<=e.start&&o.onParamError("\u53c2\u6570 end \u5fc5\u987b\u5927\u4e8e start"),n.processCallback(e),r.enable?r.deleteMsgsBySessionId(e).then((function(){a(),i&&n.protocol.checkAndUpdateLocalSessionByMsg(e.sessionId)}),(function(e){t=e,a()})):a()},a.deleteAllLocalMsgs=function(e){var t,n=this.db;function r(){e.done(t,e)}this.processCallback(e),n.enable&&n.deleteAllMsgs().then((function(){r()}),(function(e){t=e,r()}))},a.saveMsgsToLocal=function(e){this.db.enable||e.done(null,[]),o.verifyOptions(e,"msgs done","msg::saveMsgsToLocal"),o.verifyParamType("msgs",e.msgs,"Array","msg::saveMsgsToLocal"),this.db.putMsg(e.msgs).then((function(t,n){n?e.done(n):e.done(null,t)}))},a.clearServerHistoryMsgs=function(e){o.verifyOptions(e,"account","msg::clearServerHistoryMsgs");var t=!1!==e.delRoam;this.processCallback(e),this.sendCmd("clearServerHistoryMsgs",{clearMsgsParams:{account:e.account,delRoam:t?1:0}},e.callback)},a.clearServerHistoryMsgsWithSync=function(e){o.verifyOptions(e,"scene to","msg::clearServerHistoryMsgsWithSync");var t={type:"team"===e.scene?2:1,isDeleteRoam:1,isSyncSelf:!0===e.isSyncSelf?1:0};t[2===t.type?"toTid":"otherAccid"]=e.to,void 0!==e.ext&&(t.ext=e.ext),this.processCallback(e),this.sendCmd("clearServerHistoryMsgsWithSync",{clearMsgsParamsWithSync:t},e.callback)},a.msgFtsInServer=function(e){this.processCallback(e),e.callback,e.done;var t=(0,i.default)(e,["callback","done"]);o.validate({keyword:{type:"string"},fromTime:{type:"number",required:!1},toTime:{type:"number",required:!1},sessionLimit:{type:"number",min:0,required:!1},msgLimit:{type:"number",min:0,required:!1},order:{type:"enum",values:["ASC","DESC"],required:!1},p2pList:{type:"array",required:!1},teamList:{type:"array",required:!1},senderList:{type:"array",required:!1},msgTypeList:{type:"array",required:!1},msgSubTypeList:{type:"array",required:!1}},t,"msg::msgFtsInServer"),c(t.toTime)&&c(t.fromTime)&&t.toTime<t.fromTime&&o.onParamError("Options error: toTime should be greater than fromTime");var n={ASC:1,DESC:2};t.order&&n[t.order]&&(t.order=n[t.order]),t.msgTypeList&&(t.msgTypeList=t.msgTypeList.map((function(e){return p[e]}))),["p2pList","teamList","senderList","msgTypeList","msgSubTypeList"].forEach((function(e){Array.isArray(t[e])&&(t[e]=t[e].join(","))})),this.sendCmd("msgFtsInServer",{msgFullSearchRequestTag:t},e.callback)}},function(e,t,n){var r=n(27).fn,i=n(0),a=i.undef,o=i.notundef,s=n(183);function c(e,t){var n=this,r=[],i=[],a=this.db,o=this;return a.enable?(e.forEach((function(e){var t=n.protocol.findSession(e);t?s(t):i.push(a.getSession(e).then((function(e){return s(e)})))})),Promise.all(i).then((function(){return r}))):(e.forEach((function(e){return s(n.protocol.findSession(e))})),Promise.resolve(r));function s(e){e?e.lastMsg?e.scene&&e.to?e.ack>=e.lastMsg.time?o.logger.warn(t+" not need ack "+e.id):r.push(e):o.logger.warn(t+" session.scene|to undefined "+e.id):o.logger.warn(t+" session.lastMsg undefined "+e.id):o.logger.warn(t+" session undefined "+e.id)}}r.setCurrSession=function(e){this.resetSessionUnread(e),this.protocol.setCurrSession(e)},r.resetAllSessionUnread=function(){for(var e in this.protocol.sessionSet)this.protocol.sessionSet[e].unread>0&&this.resetSessionUnread(e)},r.resetSessionsUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this;n.logger.info("resetSessionsUnread::",e),c.call(this,e,"api::resetSessionsUnread").then((function(e){if(n.protocol.resetSessionsUnread(e),n.options.syncSessionUnread&&0!==e.length){var r=e.map((function(e){return{scene:"p2p"===e.scene?0:1,to:e.to,timetag:e.lastMsg.time}}));n.sendCmd("markSessionAckBatch",{sessionAckTags:r},(function(e){t(e||null)}))}else t()}))},r.resetSuperTeamSessionsUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this;n.logger.info("resetSuperTeamSessionsUnread::",e),c.call(this,e,"api::resetSuperTeamSessionsUnread").then((function(e){if(n.protocol.resetSessionsUnread(e),n.options.syncSessionUnread&&0!==e.length){var r=e.map((function(e){return{to:e.to,timetag:e.lastMsg.time}}));n.sendCmd("markSuperTeamSessionsAck",{sessionAckTags:r},(function(e){t(e||null)}))}else t()}))},r.resetSessionUnread=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=this,r=!1!==n.options.resetUnreadMode,i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n?t(n,e):t(null)};n.logger.info("resetSessionUnread::use reset mode",r);var a=n.protocol.findSession(e);(!a&&this.db.enable?n.db.getSession(e):Promise.resolve(a)).then((function(t){return t?n.options.syncSessionUnread?(r&&n.protocol.resetSessionUnread(t),void function(t){if(!t.lastMsg)return n.logger.warn("api::resetSessionUnread: session.lastMsg undefined "+e),i();if(!t.scene||!t.to)return n.logger.warn("api::resetSessionUnread: session.scene|to undefined "+e),i();var a=t.lastMsg.time;if(t&&t.ack&&t.ack>=a)return n.logger.warn("api::resetSessionUnread: session ack not needs "+e),i();var o={done:function(e){e?(n.logger.error({message:e||"mark ack failed",callFunc:"resetSessionUnread"}),i(e||"mark ack failed")):(r||n.protocol.resetSessionUnread(t),i())}};if(n.processCallback(o),"superTeam"===t.scene)n.sendCmd("markSuperTeamSessionAck",{to:t.to,timetag:a},o.callback);else{var s={scene:"p2p"===t.scene?0:1,to:t.to,timetag:a};n.sendCmd("markSessionAck",s,o.callback)}}(t)):(n.protocol.resetSessionUnread(t),i()):(n.logger.warn("api::resetSessionUnread: session undefined "+e),i())}))},r.resetCurrSession=function(){this.protocol.setCurrSession("")},r.insertLocalSession=function(e){var t,n;function r(){e.session=n,e.done(t,e)}i.verifyOptions(e,"scene to","scene::insertLocalSession"),i.verifyParamValid("scene",e.scene,this.message.validScenes,"scene::insertLocalSession"),this.protocol.insertLocalSession(e).then((function(e){n=e,r()}),(function(e){t=e,r()}))},r.getLocalSessions=function(e){var t,n=this,r=n.db,s=[];function c(){e.sessions=s,delete e.callback,e.done(t,e)}i.verifyOptions(e),a(e.limit)&&(e.limit=100),i.verifyParamType("limit",e.limit,"number","scene::getLocalSessions"),i.verifyParamMax("limit",e.limit,100,"scene::getLocalSessions"),o(e.reverse)?i.verifyParamType("reverse",e.reverse,"boolean","scene::getLocalSessions"):e.reverse=!1,n.processCallback(e),r.enable?r.getSessions(e).then((function(e){s=e,n.protocol.mergeSessions(s),c()}),(function(e){t=e,c()})):c()},r.getLocalSession=function(e){var t,n=this.db,r=null;if(i.verifyOptions(e,"sessionId","scene::getLocalSession"),i.verifyParamType("sessionId",e.sessionId,"string","scene::getLocalSession"),n.enable)return this.processCallback(e),void n.getSession(e.sessionId).then((function(e){e&&(r=e),a()}),(function(e){t=e,a()}));function a(){e.done(t,r)}r=this.protocol.findSession(e.sessionId),a()},r.getLocalSessionsByMsgType=function(e){var t=this.db,n=e.exclude,r=[],a=s.validTypes.slice(0);if(o(n)){if("string"==typeof n)n=[n];else if(!Array.isArray(n))return void i.onParamInvalidType("exclude",["string","string array"],"","exclude::getLocalSessionsByMsgType");n=n.filter((function(e){return a.indexOf(e)>-1})),a=a.filter((function(e){return-1===n.indexOf(e)}))}this.processCallback(e),t.enable?t.getSessions().then((function(i){n&&0!==n.length?a&&0!==a.length?(i.forEach((function(e,o){var s,c,u;e.lastMsg&&n.indexOf(e.lastMsg.type)>-1&&(s=o,c=e.id,u=t.getMsgs({sessionId:c,limit:1,types:a}).then((function(e){return e&&e[0]?i[s].lastMsg=e[0]:i[s].lastMsg=null,Promise.resolve()})),r.push(u))})),Promise.all(r).then((function(t){e.done(null,{exclude:n,sessions:i})}))):e.done(null,{exclude:n,sessions:i.map((function(e){e.lastMsg=null}))}):e.done(null,{exclude:n,sessions:i})})):e.done(null,{exclude:n,sessions:[]})},r.updateLocalSession=function(e){var t,n=this,r=n.db;i.verifyOptions(e,"id","scene::updateLocalSession"),n.processCallback(e);var a=i.filterObj(e,"id localCustom");function o(){n.protocol.onUpdateSession(a),e.session=a,e.done(t,e)}r.enable?r.updateSession(a).then((function(e){a=e,o()}),(function(e){t=e,o()})):o()},r.deleteLocalSession=function(e){var t,n=this,r=n.db;if(i.verifyOptions(e,"id","session::deleteLocalSession"),n.processCallback(e),r.enable?(e.isLogic?r.deleteSessionLogic(e.id):r.deleteSession(e.id)).then((function(){n.protocol.deleteLocalSession(e.id,e.isLogic),o()}),(function(e){t=e,o()})):o(),e.isDeleteRoaming){var a="string"==typeof e.id?[e.id]:e.id;a=a.map((function(e){return e.replace("-","|")})),this.sendCmd("deleteSessions",{sessions:a},(function(){}))}function o(){e.done(t,e)}},r.deleteSession=function(e){i.verifyOptions(e,"scene to","session::deleteSession"),this.processCallback(e),e.sessions=[{scene:e.scene,to:e.to}],this.deleteSessions(e)},r.deleteSessions=function(e){i.verifyOptions(e,"sessions","session::deleteSessions"),i.verifyParamType("sessions",e.sessions,"array","session::deleteSessions"),e.sessions.forEach((function(e,t){i.verifyOptions(e,"scene to",!0,"sessions["+t+"].","session::deleteSessions")})),this.processCallback(e),this.sendCmd("deleteSessions",{sessions:e.sessions.map((function(e){return e.scene+"|"+e.to}))},e.callback)},r.getServerSessions=function(e){o(e.minTimestamp)&&i.verifyParamType("minTimestamp",e.minTimestamp,"number","session::deleteSessions"),o(e.maxTimestamp)&&i.verifyParamType("maxTimestamp",e.maxTimestamp,"number","session::deleteSessions"),o(e.needLastMsg)&&(e.needLastMsg=!1===e.needLastMsg?0:1),o(e.limit)&&(i.verifyParamType("limit",e.limit,"number","session::deleteSessions"),i.verifyParamMax("limit",e.limit,100,"scene::getLocalSessions")),this.processCallback(e),this.sendCmd("getServerSessions",{sessionReqTag:e},e.callback)},r.getServerSession=function(e){i.verifyOptions(e,"scene to","scene::getServerSession"),i.verifyParamValid("scene",e.scene,this.message.validScenes,"scene::getServerSession"),i.verifyParamType("to",e.to,"string","to::getServerSession");var t=e.scene+"|"+e.to;"superTeam"===e.scene&&(t="super_team|"+e.to),this.processCallback(e),this.sendCmd("getServerSession",{session:{id:t}},e.callback)},r.updateServerSession=function(e){i.verifyOptions(e,"scene to","scene::updateServerSession"),i.verifyParamValid("scene",e.scene,this.message.validScenes,"scene::updateServerSession"),i.verifyParamType("to",e.to,"string","to::updateServerSession"),o(e.extra)&&i.verifyParamType("extra",e.extra,"string","extra::updateServerSession");var t=e.scene+"|"+e.to;"superTeam"===e.scene&&(t="super_team|"+e.to),this.processCallback(e),this.sendCmd("updateServerSession",{session:{id:t,ext:e.extra||""}},e.callback)},r.deleteServerSessions=function(e){var t=this;i.verifyOptions(e,"sessions","scene::deleteServerSessions"),i.verifyParamType("sessions",e.sessions,"array","sessions::deleteServerSessions");var n=[];e.sessions.forEach((function(e){i.verifyParamValid("scene",e.scene,t.message.validScenes,"scene::deleteServerSessions"),i.verifyParamType("to",e.to,"string","to::deleteServerSessions");var r=e.scene+"|"+e.to;"superTeam"===e.scene&&(r="super_team|"+e.to),n.push({id:r})})),this.processCallback(e),this.sendCmd("deleteServerSessions",{sessions:n},e.callback)},r.updateSessionsWithMoreRoaming=function(e){if(i.verifyOptions(e,"msg","session::updateSessionsWithMoreRoaming"),i.verifyCallback(e,"done","session::updateSessionsWithMoreRoaming"),!this.db.enable)return e.done(null,"db is disable");var t={time:e.msg.time,idServer:e.msg.idServer,to:e.msg.to,from:e.msg.from};i.verifyParamType("msg.time",e.msg.time,"number","time::updateSessionsWithMoreRoaming"),i.verifyParamType("msg.idServer",e.msg.idServer,"string","idServer::updateSessionsWithMoreRoaming"),i.verifyParamType("msg.from",e.msg.from,"string","from::updateSessionsWithMoreRoaming"),i.verifyParamType("msg.to",e.msg.to,"string","to::updateSessionsWithMoreRoaming"),i.verifyParamValid("scene",e.msg.scene,this.message.validScenes,"scene::updateSessionsWithMoreRoaming");var n=t.to===this.account?t.from:t.to;t.id=e.msg.scene+"-"+n,console.log(t),this.db.updateSessionsWithMoreRoaming(t).then((function(t){e.done(null,t)})).catch((function(t){e.done(t)}))},r.deleteSessionsWithMoreRoaming=function(e){if(i.verifyOptions(e,"id","session::deleteSessionsWithMoreRoaming"),i.verifyCallback(e,"done","session::deleteSessionsWithMoreRoaming"),!this.db.enable)return e.done(null,"db is disable");this.db.deleteSessionsWithMoreRoaming(e.id).then((function(t){e.done(null,t)})).catch((function(t){e.done(t)}))},r.getSessionsWithMoreRoaming=function(e){if(i.verifyCallback(e,"done","session::getSessionsWithMoreRoaming"),!this.db.enable)return e.done(null,"db is disable");this.db.getSessionsWithMoreRoaming(e.id).then((function(t){e.done(null,t)})).catch((function(t){e.done(t)}))}},function(e,t,n){var r,i=(r=n(129))&&r.__esModule?r:{default:r},a=n(27).fn,o=n(0),s=o.undef,c=n(209),u=n(166);function l(e){var t=this.db;if(!t.enable)return Promise.resolve({valid:!1});var n=t.getSuperTeam(e),r=t.getSuperTeamMembersTimetag(e);return Promise.all([n,r]).then((function(e){var t=(0,i.default)(e,2),n=t[0],r=t[1],a=n&&n.memberUpdateTime,o={timetag:r=r||0};return a&&r>=a&&(o.valid=!0),Promise.resolve(o)})).catch((function(){return Promise.resolve({timetag:0})}))}a.addSuperTeamMembers=function(e){o.verifyOptions(e,"teamId accounts","superTeam::addSuperTeamMembers"),o.verifyParamType("accounts",e.accounts,"array","superTeam::addSuperTeamMembers");var t=o.deduplicate(e.accounts);this.processPs(e),this.processCallback(e);var n={teamId:e.teamId,accounts:t,ps:e.ps};this.sendCmd("addSuperTeamMembers",n,e.callback)},a.removeSuperTeamMembers=function(e){o.verifyOptions(e,"teamId accounts","team::removeSuperTeamMembers"),o.verifyParamType("accounts",e.accounts,"array","team::removeSuperTeamMembers");var t=o.deduplicate(e.accounts);this.processCallback(e);var n={teamId:e.teamId,accounts:t};this.sendCmd("removeSuperTeamMembers",n,e.callback)},a.leaveSuperTeam=function(e){o.verifyOptions(e,"teamId","superTeam::leaveSuperTeam"),this.processCallback(e);var t={teamId:e.teamId};this.sendCmd("leaveSuperTeam",t,e.callback)},a.getSuperTeam=function(e){var t,n=this,r=n.db;function i(){n.sendCmd("getSuperTeam",{teamId:e.teamId},e.callback)}o.verifyOptions(e,"teamId","team::getSuperTeam"),n.processCallback(e),e.cbaop=function(e,r){e||n.logger.info("api::getSuperTeam: cbaop "+t)},t=e.teamId,r.enable&&!e.sync?r.getSuperTeam(t).then((function(r){r&&r.validToCurrentUser?(n.logger.log("api::getSuperTeam: db.getSuperTeam "+t),e.done(null,r)):i()})).catch((function(e){i()})):i()},a.getSuperTeams=function(e){var t=this,n=t.db,r=0;function i(){t.sendCmd("getSuperTeams",{timetag:r,NOTSTORE:"timetag"},e.callback)}o.verifyOptions(e),t.processCallback(e),n.enable?n.getSuperTeamsTimetag().then((function(e){r=e,i()}),i):i()},a.updateSuperTeam=function(e){o.verifyOptions(e,"teamId","superTeam::updateSuperTeam"),e.action="update",this.processCallback(e),e.team=new c(e),this.sendCmd("updateSuperTeam",{team:e.team,single:!0},e.callback)},a.updateInfoInSuperTeam=function(e){o.verifyOptions(e,"teamId","superTeam::updateInfoInSuperTeam"),this.processCallback(e),this.sendCmd("updateInfoInSuperTeam",{superTeamMember:new u(e),single:!0},e.callback)},a.getSuperTeamMembersByJoinTime=function(e){var t=this,n=(t.db,e.joinTime),r=e.reverse,i=e.limit,a=e.teamId;r=!!r,s(n)&&(n=0),s(i)&&(i=100),o.verifyOptions(e,"teamId","superTeam::getSuperTeamMembersByJoinTime"),o.verifyParamType("joinTime",n,"number","api::superTeam::getSuperTeamMembersByJoinTime"),o.verifyParamType("limit",i,"number","api::superTeam::getSuperTeamMembersByJoinTime"),t.processCallback(e),t.sendCmd("getSuperTeamMembersByJoinTime",{teamId:a,limit:i,joinTime:n,reverse:r,timetag:0,NOTSTORE:"timetag"},e.callback)},a.getAllSuperTeamMembers=function(e){var t=this,n=this.db;function r(n){n=n||0,t.sendCmd("getSuperTeamMembers",{teamId:e.teamId,timetag:n,NOTSTORE:"timetag"},e.callback)}o.verifyOptions(e,"teamId","superTeam::getAllSuperTeamMembers"),t.processCallback(e),l.bind(this)(e.teamId).then((function(i){var a=i.valid,o=i.timetag;a?(t.logger.info("getAllSuperTeamMembers from local db"),n.getSuperTeamMembers(e.teamId).then((function(t){var n={teamId:e.teamId,members:t};e.done(null,n)}),(function(){return r()}))):r(o)}))},a.applySuperTeam=function(e){o.verifyOptions(e,"teamId","team::applySuperTeam"),o.verifyOptions(e,"teamId","team::applySuperTeam"),this.processPs(e),this.processCallback(e);var t={teamId:e.teamId,ps:e.ps};this.sendCmd("applySuperTeam",t,e.callback)},a.passSuperTeamApply=function(e){o.verifyOptions(e,"idServer teamId from","team::passSuperTeamApply"),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from};this.sendCmd("passSuperTeamApply",t,e.callback)},a.rejectSuperTeamApply=function(e){o.verifyOptions(e,"idServer teamId from","team::rejectSuperTeamApply"),this.processPs(e),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from,ps:e.ps};this.sendCmd("rejectSuperTeamApply",t,e.callback)},a.acceptSuperTeamInvite=function(e){o.verifyOptions(e,"idServer teamId from","team::acceptSuperTeamInvite"),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from};this.sendCmd("acceptSuperTeamInvite",t,e.callback)},a.rejectSuperTeamInvite=function(e){o.verifyOptions(e,"idServer teamId from","team::rejectSuperTeamInvite"),this.processPs(e),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from,ps:e.ps};this.sendCmd("rejectSuperTeamInvite",t,e.callback)},a.addSuperTeamManagers=function(e){o.verifyOptions(e,"teamId accounts","team::addSuperTeamManagers"),o.verifyParamType("accounts",e.accounts,"array","team::addSuperTeamManagers"),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0)};this.sendCmd("addSuperTeamManagers",t,e.callback)},a.removeSuperTeamManagers=function(e){o.verifyOptions(e,"teamId accounts","team::removeSuperTeamManagers"),o.verifyParamType("accounts",e.accounts,"array","team::removeSuperTeamManagers"),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0)};this.sendCmd("removeSuperTeamManagers",t,e.callback)},a.updateSuperTeamMembersMute=function(e){o.verifyOptions(e,"teamId accounts mute","team::updateSuperTeamMembersMute"),o.verifyParamType("accounts",e.accounts,"array","team::updateSuperTeamMembersMute"),o.verifyArrayMax("accounts",e.accounts,10),this.processCallback(e),e.mute=e.mute?1:0,this.sendCmd("updateSuperTeamMembersMute",e)},a.updateSuperTeamMute=function(e){o.verifyOptions(e,"teamId mute","team::updateSuperTeamMute"),e.mute=e.mute?1:0,this.processCallback(e),this.sendCmd("updateSuperTeamMute",e)},a.updateNickInSuperTeam=function(e){o.verifyOptions(e,"teamId account","team::updateNickInSuperTeam"),this.processCallback(e),this.sendCmd("updateNickInSuperTeam",{superTeamMember:new u(e),single:!0},e.callback)},a.transferSuperTeam=function(e){o.verifyOptions(e,"teamId account leave","team::transferSuperTeam"),o.verifyParamType("leave",e.leave,"boolean","team::transferSuperTeam"),this.processCallback(e);var t={teamId:e.teamId,account:e.account,leave:e.leave};this.sendCmd("transferSuperTeam",t,e.callback)},a.getSuperTeamMembersByAccounts=function(e){var t=this,n=this.db,r=e.teamId,i=e.accounts;if(o.verifyOptions(e,"teamId accounts","superTeam::getSuperTeamMembersByAccounts"),o.verifyParamType("accounts",i,"array","superTeam::getSuperTeamMembersByAccounts"),o.verifyArrayMax("accounts",i,20),i.length<=0)return o.onParamError("\u53c2\u6570accounts\u4e0d\u80fd\u4e3a\u7a7a\u6570\u7ec4","superTeam::getSuperTeamMembersByAccounts");function a(){var n=i.map((function(e){return r+"|"+e}));t.processCallback(e),t.sendCmd("getSuperTeamMembersByAccounts",{memberIds:n},(function(e,t){return console.log("====",e,t)}))}l.call(this,r).then((function(t){var o,s,c;return t.valid?(o=[],s=[],c=[],i.forEach((function(e){var t=n.getSuperTeamMemberById(r+"-"+e).then((function(e){s.push(e)})).catch((function(){c.push(e)}));o.push(t)})),void Promise.all(o).then((function(){e.done(null,{accounts:i,members:s,invaldAccounts:c})}))):a()})).catch((function(){return a()}))},a.getMutedSuperTeamMembers=function(e){var t=e.joinTime,n=e.reverse,r=e.limit,i=e.teamId;n=!!n,s(t)&&(t=0),s(r)&&(r=100),o.verifyOptions(e,"teamId","superTeam::getSuperTeamMembersByJoinTime"),o.verifyParamType("joinTime",t,"number","api::superTeam::getSuperTeamMembersByJoinTime"),o.verifyParamType("limit",r,"number","api::superTeam::getSuperTeamMembersByJoinTime"),this.processCallback(e),this.sendCmd("getMutedSuperTeamMembers",{teamId:i,limit:r,joinTime:t,reverse:n},e.callback)}},function(e,t,n){var r=n(27).fn,i=n(0),a=i.undef,o=n(132),s=n(101);r.createTeam=function(e){i.verifyOptions(e,"type name","team::createTeam"),a(e.accounts)?e.accounts=[]:i.verifyParamType("accounts",e.accounts,"array","team::createTeam"),e.action="create",this.processPs(e),this.processCallback(e),e.team=new o(e);var t={team:e.team,accounts:e.accounts.slice(0),ps:e.ps};this.sendCmd("createTeam",t,e.callback)},r.updateTeam=function(e){i.verifyOptions(e,"teamId","team::updateTeam"),e.action="update",this.processCallback(e),e.team=new o(e),this.sendCmd("updateTeam",{team:e.team,single:!0},e.callback)},r.addTeamMembers=function(e){i.verifyOptions(e,"teamId accounts","team::addTeamMembers"),i.verifyParamType("accounts",e.accounts,"array","team::addTeamMembers"),this.processPs(e),i.notexist(e.custom)&&(e.custom=""),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0),ps:e.ps,attach:e.custom};this.sendCmd("addTeamMembers",t,e.callback)},r.removeTeamMembers=function(e){i.verifyOptions(e,"teamId accounts","team::removeTeamMembers"),i.verifyParamType("accounts",e.accounts,"array","team::removeTeamMembers"),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0)};this.sendCmd("removeTeamMembers",t,e.callback)},r.acceptTeamInvite=function(e){i.verifyOptions(e,"idServer teamId from","team::acceptTeamInvite"),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from};this.sendCmd("acceptTeamInvite",t,e.callback)},r.rejectTeamInvite=function(e){i.verifyOptions(e,"idServer teamId from","team::rejectTeamInvite"),this.processPs(e),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from,ps:e.ps};this.sendCmd("rejectTeamInvite",t,e.callback)},r.applyTeam=function(e){i.verifyOptions(e,"teamId","team::applyTeam"),this.processPs(e),this.processCallback(e);var t={teamId:e.teamId,ps:e.ps};this.sendCmd("applyTeam",t,e.callback)},r.passTeamApply=function(e){i.verifyOptions(e,"idServer teamId from","team::passTeamApply"),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from};this.sendCmd("passTeamApply",t,e.callback)},r.rejectTeamApply=function(e){i.verifyOptions(e,"idServer teamId from","team::rejectTeamApply"),this.processPs(e),this.processCallback(e);var t={idServer:e.idServer,teamId:e.teamId,from:e.from,ps:e.ps};this.sendCmd("rejectTeamApply",t,e.callback)},r.addTeamManagers=function(e){i.verifyOptions(e,"teamId accounts","team::addTeamManagers"),i.verifyParamType("accounts",e.accounts,"array","team::addTeamManagers"),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0)};this.sendCmd("addTeamManagers",t,e.callback)},r.removeTeamManagers=function(e){i.verifyOptions(e,"teamId accounts","team::removeTeamManagers"),i.verifyParamType("accounts",e.accounts,"array","team::removeTeamManagers"),this.processCallback(e);var t={teamId:e.teamId,accounts:e.accounts.slice(0)};this.sendCmd("removeTeamManagers",t,e.callback)},r.updateInfoInTeam=function(e){i.verifyOptions(e,"teamId","team::updateInfoInTeam"),this.processCallback(e),this.sendCmd("updateInfoInTeam",{teamMember:new s(e),single:!0},e.callback)},r.updateNickInTeam=function(e){i.verifyOptions(e,"teamId account","team::updateNickInTeam"),this.processCallback(e),this.sendCmd("updateNickInTeam",{teamMember:new s(e),single:!0},e.callback)},r.updateMuteStateInTeam=function(e){i.verifyOptions(e,"teamId account mute","team::updateMuteStateInTeam"),this.processCallback(e),e.mute=e.mute?1:0,this.sendCmd("updateMuteStateInTeam",e)},r.getMutedTeamMembers=function(e){i.verifyOptions(e,"teamId","team::getMutedTeamMembers"),this.processCallback(e),this.sendCmd("getMutedTeamMembers",e)},r.leaveTeam=function(e){i.verifyOptions(e,"teamId","team::leaveTeam"),this.processCallback(e);var t={teamId:e.teamId};this.sendCmd("leaveTeam",t,e.callback)},r.transferTeam=function(e){i.verifyOptions(e,"teamId account leave","team::transferTeam"),i.verifyParamType("leave",e.leave,"boolean","team::transferTeam"),this.processCallback(e);var t={teamId:e.teamId,account:e.account,leave:e.leave};this.sendCmd("transferTeam",t,e.callback)},r.dismissTeam=function(e){i.verifyOptions(e,"teamId","team::dismissTeam"),this.processCallback(e);var t={teamId:e.teamId};this.sendCmd("dismissTeam",t,e.callback)},r.getTeam=function(e){var t,n=this,r=n.db;function a(){n.sendCmd("getTeam",{teamId:e.teamId},e.callback)}i.verifyOptions(e,"teamId","team::getTeam"),n.processCallback(e),e.cbaop=function(e,r){e||n.logger.info("api::getTeam: cbaop "+t)},t=e.teamId,r.enable&&!e.sync?r.getTeam(t).then((function(r){r&&r.validToCurrentUser?(n.logger.log("api::getTeam: db.getTeam "+t),e.done(null,r)):a()}),a):a()},r.getTeams=function(e){var t=this,n=t.db,r=0;function a(){t.sendCmd("getTeams",{timetag:r,NOTSTORE:"timetag"},e.callback)}i.verifyOptions(e),t.processCallback(e),n.enable?n.getTeamsTimetag().then((function(e){r=e,a()}),a):a()},r.getTeamsById=function(e){i.verifyOptions(e,"teamIds","teams::getTeamsById"),this.processCallback(e),this.sendCmd("getTeamsById",{teamIds:e.teamIds},e.callback)},r.getTeamMembers=function(e){i.verifyOptions(e,"teamId","team::getTeamMembers"),this.processCallback(e),this.sendCmd("getTeamMembers",{teamId:e.teamId,timetag:0,NOTSTORE:"timetag"},e.callback)},r.getTeamMemberByTeamIdAndAccount=function(e){i.verifyParamType("teamId",e.teamId,"numeric or numeric string","team::getTeamMemberByTeamIdAndAccount"),i.verifyOptions(e,"account","team::getTeamMemberByTeamIdAndAccount"),this.processCallback(e),this.sendCmd("getTeamMembers",{teamId:e.teamId,timetag:0,NOTSTORE:"timetag"},(function(t,n,r){var i={};if(n&&n.members&&n.members.length)for(var a=0;a<n.members.length;a++)if(n.members[a].account===e.account){i[e.account]=n.members[a];break}e.callback(t,i,r)}))},r.getTeamMemberInvitorAccid=function(e){i.verifyParamType("teamId",e.teamId,"numeric or numeric string","team::getTeamMemberInvitorAccid"),a(e.accounts)||(i.verifyParamType("accounts",e.accounts,"array","team::getTeamMemberInvitorAccid"),e.accounts.length>200&&i.onParamError("accounts \u53c2\u6570\u6570\u7ec4\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7200","team::getTeamMemberInvitorAccid"));var t={teamId:e.teamId};e.accounts.length&&(t.accounts=e.accounts.slice(0)),this.processCallback(e),this.sendCmd("getTeamMemberInvitorAccid",t,(function(t,n,r){e.callback(t,r&&r.accountsMap||{})}))},r.notifyForNewTeamMsg=function(e){i.verifyOptions(e,"teamIds","team::notifyForNewTeamMsg"),this.protocol.notifyForNewTeamMsg(e.teamIds).then((function(t){e.done(t.error||null,t.map,t.miss)}),(function(t){e.done(t)}))},r.getMyTeamMembers=function(e){i.verifyOptions(e,"teamIds","team::getMyTeamMembers");var t=this.processCallbackPromise(e);return this.sendCmd("getMyTeamMembers",e),t},r.getLocalTeams=function(e){var t,n=this.db,r=[];function a(){e.teams=r,e.done(t,e)}i.verifyOptions(e,"teamIds","team::getLocalTeams"),i.verifyParamType("teamIds",e.teamIds,"array","team::getLocalTeams"),this.processCallback(e),n.enable?n.getTeamsByTeamIds(e.teamIds).then((function(e){r=e.filter((function(e){return!!e})),a()}),(function(e){t=e,a()})):a()},r.getLocalTeamMembers=function(e){var t,n=this.db,r=[];function a(){e.members=r,e.done(t,e)}i.verifyOptions(e,"teamId accounts","team::getLocalTeamMembers"),i.verifyParamType("accounts",e.accounts,"array","team::getLocalTeamMembers"),this.processCallback(e),n.enable?n.getInvalidTeamMembers(e.teamId,e.accounts).then((function(e){r=e.filter((function(e){return!!e})),a()}),(function(e){t=e,a()})):a()},r.deleteLocalTeam=function(e){var t,n=this.db;function r(){e.done(t,e)}i.verifyOptions(e,"teamId","team::deleteLocalTeam"),this.processCallback(e),n.enable?n.deleteTeam(e.teamId).then((function(){r()}),(function(e){t=e,r()})):r()},r.muteTeamAll=function(e){i.verifyOptions(e,"teamId mute","team::muteTeamAll"),e.mute=e.mute?1:0,this.processCallback(e),this.sendCmd("muteTeamAll",e)},r.sendTeamMsgReceipt=function(e){i.verifyOptions(e,"teamMsgReceipts","team::sendTeamMsgReceipt"),e.teamMsgReceipts.length>50?this.logger.error("team::sendTeamMsgReceipt\uff1ateamMsgReceipts length over 50"):(this.processCallback(e),this.sendCmd("sendTeamMsgReceipt",e))},r.getTeamMsgReads=function(e){i.verifyOptions(e,"teamMsgReceipts","team::getTeamMsgReads"),this.processCallback(e),this.sendCmd("getTeamMsgReads",e)},r.getTeamMsgReadAccounts=function(e){var t=this,n=this;i.verifyOptions(e,"teamMsgReceipt","team::getTeamMsgReadAccounts");var r=void 0;e.callback=function(t,n,i){t&&r?(n=n||{teamMsgReceipt:e.teamMsgReceipt},e.done(t,n,{teamMsgReceipt:e.teamMsgReceipt,unreadAccounts:r.unreadAccounts,readAccounts:r.readAccounts})):e.done(t,n,i)},this.db.enable&&e.teamMsgReceipt.idClient?this.db.getMsgReadDetail(e.teamMsgReceipt.idClient).then((function(t){if(r=t,!t)return Promise.reject("no record");if(t.unreadAccounts&&t.unreadAccounts.length>0)return Promise.reject("unreadAccounts.length > 0");var i={teamMsgReceipt:e.teamMsgReceipt,unreadAccounts:t.unreadAccounts,readAccounts:t.readAccounts};n.logger.info("getTeamMsgReadAccounts from db"),e.done(null,{teamMsgReceipt:e.teamMsgReceipt},i)})).catch((function(r){t.logger.warn("db.getMsgReadDetail invalid",r),n.sendCmd("getTeamMsgReadAccounts",e)})):n.sendCmd("getTeamMsgReadAccounts",e)}},function(e,t,n){n(27).fn.getRobots=function(e){(e=e||{}).type="getRobots",this.processCallback(e),this.sendCmd("sync",{sync:{robots:0}},e.callback)}},function(e,t,n){var r=n(27).fn,i=n(0),a=i.notundef,o=n(315);r.friendRequest=function(e){i.verifyOptions(e,"type account","friend::friendRequest"),i.verifyParamValid("type",e.type,o.validTypes(),"friend::friendRequest"),this.processPs(e),this.processCallback(e);var t={account:e.account,type:o.getByteFromType(e.type),ps:e.ps};a(e.idServer)&&(t.idServer=e.idServer),this.sendCmd("friendRequest",t,e.callback)},r.addFriend=function(e){e.type="addFriend",this.friendRequest(e)},r.applyFriend=function(e){e.type="applyFriend",this.friendRequest(e)},r.passFriendApply=function(e){i.verifyOptions(e,"idServer","friend::passFriendApply"),e.type="passFriendApply",this.friendRequest(e)},r.rejectFriendApply=function(e){i.verifyOptions(e,"idServer","friend::rejectFriendApply"),e.type="rejectFriendApply",this.friendRequest(e)},r.deleteFriend=function(e){i.verifyOptions(e,"account","friend::deleteFriend");var t=!0===e.delAlias;this.processCallback(e),this.sendCmd("deleteFriend",{account:e.account,delFriendParams:{delAlias:t?1:0}},e.callback)},r.updateFriend=function(e){this.processCallback(e);var t=new o(e);this.sendCmd("updateFriend",{friend:t,single:!0},e.callback)},r.getFriends=function(e){var t=this,n=t.db,r=0;function a(){t.sendCmd("getFriends",{timetag:r,NOTSTORE:"timetag"},e.callback)}i.verifyOptions(e),t.processCallback(e),n.enable?n.getFriendsTimetag().then((function(e){r=e,a()}),a):a()}},function(e,t,n){var r=n(27).fn,i=n(0),a=i.objs2accounts,o=n(160);r.updateMyInfo=function(e){i.verifyOptions(e),this.processCallback(e),e.user=new o(e),delete e.user.account,this.sendCmd("updateMyInfo",{user:e.user,single:!0},e.callback)},r.getMyInfo=function(e){return(e=e||{}).account=this.account,this.getUser(e)},r.getUser=function(e){var t,n=this,r=n.db;function a(){n.sendCmd("getUsers",{accounts:[t],single:!0},e.callback)}i.verifyOptions(e,"account","user::getUser"),n.processCallback(e),e.cbaop=function(e,r){if(!e)return r=r[0]||null,n.logger.info("api::getUser: cbaop "+t),r},t=e.account,e.sync?a():r.enable?r.getUser(t).then((function(t){t?e.done(null,t):a()}),a):a()},r.getUsers=function(e){var t,n=this,r=n.db,o=[];function s(){n.sendCmd("getUsers",{accounts:t,single:!0},e.callback)}i.verifyOptions(e,"accounts","user::getUsers"),i.verifyParamType("accounts",e.accounts,"array","user::getUsers"),n.processCallback(e),e.cbaop=function(e,r){if(!e)return r=r.concat(o),n.logger.info("api::getUsers: cbaop "+t),r},t=i.deduplicate(e.accounts),i.verifyArrayMax("accounts",e.accounts,150,"user::getUsers"),e.sync?s():r.enable?r.getUsers(t).then((function(n){if(n&&n.length===t.length)e.done(null,n);else{o=n;var r=a(n),i=[];t.forEach((function(e){-1===r.indexOf(e)&&i.push(e)})),t=i,s()}}),s):s()}},function(e,t,n){var r=n(27).fn,i=n(0);r.markInBlacklist=function(e){i.verifyOptions(e,"account isAdd","relation::markInBlacklist"),i.verifyParamType("isAdd",e.isAdd,"boolean","relation::markInBlacklist"),this.processCallback(e),this.sendCmd("markInBlacklist",{account:e.account,isAdd:e.isAdd},e.callback)},r.addToBlacklist=function(e){return e.isAdd=!0,this.markInBlacklist(e)},r.removeFromBlacklist=function(e){return e.isAdd=!1,this.markInBlacklist(e)},r.markInMutelist=function(e){i.verifyOptions(e,"account","relation::markInMutelist"),i.verifyParamType("isAdd",e.isAdd,"boolean","relation::markInMutelist"),this.processCallback(e),this.sendCmd("markInMutelist",{account:e.account,isAdd:e.isAdd},e.callback)},r.addToMutelist=function(e){return e.isAdd=!0,this.markInMutelist(e)},r.removeFromMutelist=function(e){return e.isAdd=!1,this.markInMutelist(e)},r.getRelations=function(e){var t=this,n=t.db,r=0;function a(){t.sendCmd("getRelations",{timetag:r,NOTSTORE:"timetag"},e.callback)}e=i.verifyOptions(e),t.processCallback(e),n.enable?n.getRelationsTimetag().then((function(e){r=e,a()}),a):a()}},function(e,t,n){var r=n(27).fn,i=n(0);r.kick=function(e){i.verifyOptions(e,"deviceIds","link::kick"),this.processCallback(e),this.sendCmd("kick",{deviceIds:e.deviceIds.slice(0)},e.callback)}},function(e,t,n){var r=s(n(10)),i=s(n(37)),a=s(n(83)),o=s(n(82));function s(e){return e&&e.__esModule?e:{default:e}}var c=n(27).fn,u=n(0),l=u.isArray,m=n(101);c.mergeObjArray=function(e,t,n){return e||(e=[]),t?(l(t)||(t=[t]),t.length?(n=n||{},u.mergeObjArray(e,t,n)):e):e},c.cutObjArray=function(e,t,n){return e&&t?(l(t)||(t=[t]),t.length?(n=n||{},u.cutObjArray(e,t,n)):e):e},c.mergeLoginPorts=function(e,t){return this.mergeObjArray(e,t,{keyPath:"deviceId"})},c.cutLoginPorts=function(e,t){return this.cutObjArray(e,t,{keyPath:"deviceId",sortPath:"type"})},c.mergeRelations=function(e,t){return this.mergeObjArray(e,t,{keyPath:"account"})},c.cutRelations=function(e,t){return this.cutObjArray(e,t,{keyPath:"account"})},c.findRelation=function(e,t){return u.findObjInArray(e,{keyPath:"account",value:t})},c.mergeFriends=function(e,t){return this.mergeObjArray(e,t,{keyPath:"account"})},c.cutFriends=function(e,t){return this.cutObjArray(e,t,{keyPath:"account"})},c.cutFriendsByAccounts=function(e,t){l(t)||(t=[t]);var n=t.map((function(e){return{account:e}}));return this.cutFriends(e,n)},c.findFriend=function(e,t){return u.findObjInArray(e,{keyPath:"account",value:t})},c.mergeUsers=function(e,t){return this.mergeObjArray(e,t,{keyPath:"account"})},c.findUser=function(e,t){return u.findObjInArray(e,{keyPath:"account",value:t})},c.mergeTeams=function(e,t){return this.mergeObjArray(e,t,{keyPath:"teamId"})},c.cutTeams=function(e,t){return this.cutObjArray(e,t,{keyPath:"teamId"})},c.findTeam=function(e,t){return u.findObjInArray(e,{keyPath:"teamId",value:t})},c.assembleTeamOwner=m.assembleOwner,c.assembleTeamMembers=m.assembleMembers,c.genTeamMemberId=m.genId,c.mergeTeamMembers=function(e,t){return this.mergeObjArray(e,t)},c.cutTeamMembers=function(e,t){return this.cutObjArray(e,t)},c.cutTeamMembersByAccounts=function(e,t,n){l(n)||(n=[n]);var r=m.assembleMembers({teamId:t},n);return this.cutTeamMembers(e,r)},c.findTeamMember=function(e,t){return u.findObjInArray(e,{keyPath:"id",value:t})},c.mergeSessions=function(e,t){return this.mergeObjArray(e,t,{sortPath:"updateTime",desc:!0})},c.cutSessions=function(e,t){return this.cutObjArray(e,t)},c.cutSessionsByIds=function(e,t){l(t)||(t=[t]);var n=t.map((function(e){return{id:e}}));return this.cutSessions(e,n)},c.findSession=function(e,t){return u.findObjInArray(e,{keyPath:"id",value:t})},c.mergeMsgs=function(e,t){return this.mergeObjArray(e,t,{keyPath:"idClient",sortPath:"time"})},c.cutMsgs=function(e,t){return this.cutObjArray(e,t,{keyPath:"idClient"})},c.cutMsgsByIdClients=function(e,t){l(t)||(t=[t]);var n=t.map((function(e){return{idClient:e}}));return this.cutMsgs(e,n)},c.findMsg=function(e,t){return u.findObjInArray(e,{keyPath:"idClient",value:t})},c.mergeSysMsgs=function(e,t){return this.mergeObjArray(e,t,{keyPath:"idServer",desc:!0})},c.cutSysMsgs=function(e,t){return this.cutObjArray(e,t,{keyPath:"idServer"})},c.cutSysMsgsByIdServers=function(e,t){l(t)||(t=[t]);var n=t.map((function(e){return{idServer:e}}));return this.cutSysMsgs(e,n)},c.findSysMsg=function(e,t){return u.findObjInArray(e,{keyPath:"idServer",value:t})},c.searchLocal=function(e){var t,n,s,c=(t=(0,o.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?[p.getSessions(),m(),p.getTeams(),p.getSuperTeams()]:[p.getSessions()],e.abrupt("return",Promise.all(r).then((function(e){var r=e[0]||[],i={p2p:e[1]||[],team:e[2]||[],superTeam:e[3]||[]},a={};return n&&(Object.keys(i).forEach((function(e){i[e].forEach((function(t){var n=t.teamId||t.account;a[e+"-"+n]=t}))})),r.forEach((function(e){e.target=a[e.id]}))),S(t,r)})));case 2:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)}),l=(n=(0,o.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:return n=e.sent,e.abrupt("return",S(t,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)}),m=(s=(0,o.default)(a.default.mark((function e(){var t,n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return",v);case 2:return e.next=4,d.db.getFriends();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=[];case 7:return t=e.t0,n=d.protocol.userSet||{},v=t.map((function(e){return(0,i.default)({},e,n[e.account])})),e.abrupt("return",v);case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)});if(u.verifyOptions(e,"keyword","searchLocal"),this.db.enable){var d=this,p=this.db,f=e.keyword+"",g=["account","nick","alias"],h=["id","scene","lastMsg.type","lastMsg.text","localCustom","target.account","target.nick","target.alias","target.name"],y="",b=e.keyPath,v=void 0;switch(b?(y=(b=(b+"").split(".")).shift(),b=b.join(".")):y="all",y){case"user":b&&(g=g.filter((function(e){return e===b||0===e.indexOf(b+".")}))),l(g).then((function(t){e.done(null,{sessions:[],users:t})}));break;case"session":b&&(h=h.filter((function(e){return e===b||0===e.indexOf(b+".")}))),c(h,!b||b.indexOf("target")>-1).then((function(t){e.done(null,{sessions:t,users:[]})}));break;case"all":m().then((function(){Promise.all([c(h,!0),l(g)]).then((function(t){e.done(null,{sessions:t[0],users:t[1]})}))}));break;default:e.done(null,{sessions:[],users:[],msg:'keyPath must start with "user" or "session"'})}}else e.done(null,{sessions:[],users:[],msg:"no db"});function S(e,t){var n=[];return t.forEach((function(t){for(var r=0;r<e.length;r++){var i=T(t,e[r].split("."));if(i&&i.indexOf(f)>-1){n.push(Object.assign({},t));break}}})),n}function T(e,t){if("object"===(void 0===e?"undefined":(0,r.default)(e))&&e)return 1===t.length?e[t[0]]:T(e[t.shift()],t)}}},function(e,t,n){var r=n(70),i=n(0);function a(e){i.verifyOptions(e,"attach","msg::G2Message"),e.type="g2",r.call(this,e),this.attach=JSON.stringify(e.attach)}a.prototype=Object.create(r.prototype),a.reverse=function(e){var t=r.reverse(e);return e.attach&&(t.attach=JSON.parse(e.attach)),t},e.exports=a},function(e,t,n){var r=n(70),i=n(0),a={welcome:"00",text:"01",link:"03"},o={"01":"text","02":"image","03":"answer",11:"template"};function s(e){i.verifyOptions(e,"content","msg::RobotMessage"),i.undef(e.robotAccid)&&(e.robotAccid=e.to);var t=e.content;switch(t.type){case"welcome":i.undef(e.body)&&(this.body="\u6b22\u8fce\u6d88\u606f");break;case"text":i.verifyOptions(t,"content","msg::RobotMessage"),i.undef(e.body)&&(this.body=t.content);break;case"link":i.verifyOptions(t,"target","msg::RobotMessage")}t.type&&(t.type=a[t.type]),t={param:t,robotAccid:e.robotAccid},this.attach=JSON.stringify(t),e.type="robot",r.call(this,e)}s.prototype=Object.create(r.prototype),s.reverse=function(e){var t=r.reverse(e);if("robot"===t.type){var n=JSON.parse(e.attach);if(n.param&&(n.param.type=o[n.param.type]||"unknown"),n.robotMsg){var a=(n=i.merge(n,n.robotMsg)).message;"bot"===n.flag?n.message=a.map((function(e){return e.type=o[e.type]||"unknown",e})):n.flag,delete n.robotMsg}t.content=n}return t},e.exports=s},function(e,t,n){var r=n(70),i=n(0);function a(e){i.verifyOptions(e,"tip","msg::TipMessage"),e.type="tip",r.call(this,e),this.body=e.tip}a.prototype=Object.create(r.prototype),a.reverse=function(e){var t=r.reverse(e);return t.text="",t.tip=e.body,e.attach&&(t.attach=e.attach),t},e.exports=a},function(e,t,n){var r=n(70),i=n(0);function a(e){i.verifyOptions(e,"content","msg::CustomMessage"),e.type="custom",r.call(this,e),this.attach=e.content}a.prototype=Object.create(r.prototype),a.reverse=function(e){var t=r.reverse(e);return t.content=e.attach,t},e.exports=a},function(e,t,n){var r=n(0).notundef,i=n(70),a=n(96).IM,o=n(132),s=n(160),c={0:"addTeamMembers",1:"removeTeamMembers",2:"leaveTeam",3:"updateTeam",4:"dismissTeam",5:"passTeamApply",6:"transferTeam",7:"addTeamManagers",8:"removeTeamManagers",9:"acceptTeamInvite",10:"updateTeamMute",101:"netcallMiss",102:"netcallBill",103:"netcallReject",401:"addSuperTeamMembers",402:"removeSuperTeamMembers",403:"leaveSuperTeam",404:"updateSuperTeam",405:"dismissSuperTeam",406:"transferSuperTeam",407:"addSuperTeamManagers",408:"removeSuperTeamManagers",409:"updateSuperTeamMembersMute",410:"passSuperTeamApply",411:"acceptSuperTeamInvite"};function u(){}u.prototype=Object.create(i.prototype),u.reverse=function(e){var t=i.reverse(e);if(e.attach=e.attach?""+e.attach:"",e.attach){var n=JSON.parse(e.attach);if(t.attach={type:c[n.id]||n.id},r(n.data)){var u=n.data;r(u.tinfo)&&(t.attach.team=o.reverse(a.syncUnserialize(u.tinfo,"team"),!0)),r(u.ids)&&(t.attach.accounts=u.ids),r(u.id)&&(t.attach.account=u.id),r(u.uinfos)&&(t.attach.users=u.uinfos.map((function(e){return s.reverse(a.syncUnserialize(e,"user"))}))),r(u.mute)&&(t.attach.mute=1==+u.mute),r(u.attach)&&(t.attach.custom=u.attach),r(u.channel)&&(t.attach.channelId=u.channel),r(u.calltype)&&(t.attach.netcallType=u.calltype),r(u.duration)&&(t.attach.duration=u.duration),r(u.time)&&(t.attach.time=u.time),r(u.from)&&(t.attach.from=u.from),r(u.ext)&&(t.attach.ext=u.ext),t.attach.accounts&&t.attach.accounts.length<=2&&t.from===t.to&&t.attach.accounts.some((function(e){if(e!==t.to)return t.to=e,!0}))}}else t.attach={};return t},e.exports=u},function(e,t,n){var r=n(70),i=n(0);function a(e){e.type="geo",i.verifyOptions(e,"geo","msg::GeoMessage"),i.verifyOptions(e.geo,"lng lat title",!0,"geo.","msg::GeoMessage"),i.verifyParamType("geo.lng",e.geo.lng,"number","msg::GeoMessage"),i.verifyParamType("geo.lat",e.geo.lat,"number","msg::GeoMessage"),i.verifyParamType("geo.title",e.geo.title,"string","msg::GeoMessage"),r.call(this,e),this.attach=JSON.stringify(e.geo)}a.prototype=Object.create(r.prototype),a.reverse=function(e){var t=r.reverse(e);return e.attach=e.attach?""+e.attach:"",t.geo=e.attach?JSON.parse(e.attach):{},t},e.exports=a},function(e,t,n){var r=n(140),i=n(0);function a(){}a.prototype=Object.create(r.prototype),a.verifyFile=function(e,t){i.verifyOptions(e,"dur w h",!0,"file.",t)},e.exports=a},function(e,t,n){var r=n(140),i=n(0);function a(){}a.prototype=Object.create(r.prototype),a.verifyFile=function(e,t){i.verifyOptions(e,"dur",!0,"file.",t)},e.exports=a},function(e,t,n){var r=n(0),i=n(140);function a(){}a.prototype=Object.create(i.prototype),a.verifyFile=function(e,t){r.verifyOptions(e,"w h",!0,"file.",t)},e.exports=a},function(e,t,n){var r=n(70),i=n(0);function a(e){i.verifyOptions(e,"text","msg::TextMessage"),e.type="text",r.call(this,e)}a.prototype=Object.create(r.prototype),a.reverse=function(e){return r.reverse(e)},e.exports=a},function(e,t,n){var r=n(0),i=function(e){this.account=e.account},a=i.prototype,o=a.Message=n(70),s=a.TextMessage=n(471),c=a.FileMessage=n(140),u=a.GeoMessage=n(467),l=a.NotificationMessage=n(466),m=a.CustomMessage=n(465),d=a.TipMessage=n(464),p=a.RobotMessage=n(463),f=a.G2Message=n(462);a.validScenes=o.validScenes,a.validTypes=o.validTypes,a.sceneMap=o.sceneMap,a.sceneReverseMap=o.sceneReverseMap,a.reverse=function(e){var t;switch(o.getType(e)){case"text":t=s.reverse(e);break;case"image":case"audio":case"video":case"file":t=c.reverse(e);break;case"geo":t=u.reverse(e);break;case"notification":t=l.reverse(e);break;case"custom":t=m.reverse(e);break;case"tip":t=d.reverse(e);break;case"g2":t=f.reverse(e);break;case"robot":t=p.reverse(e);break;default:t=o.reverse(e)}return o.setExtra(t,this.account),t},a.reverseMsgs=function(e,t){var n,i,a=this;return e.map((function(e){return e=a.reverse(e),t&&((n=t.modifyObj)&&(e=r.merge(e,n)),i=t.mapper,r.isFunction(i)&&(e=i(e))),e}))},e.exports=i},function(e,t,n){var r=n(25).fn,i=n(0);r.processProxyService=function(e){var t=e.error;switch(t&&(t.callFunc="events::processProxyService",this.onCustomError("proxyService","EVENT_PROXY_SERVICE_ERROR",t)),e.cmd){case"onProxyMsg":if(i.isFunction(this.options.onProxyMsg)){var n=e.content.proxyMsg||{};n.time&&(n.time=+n.time),this.options.onProxyMsg(n)}break;case"httpProxy":e.obj=e.content&&e.content.proxyTag}}},function(e,t,n){var r,i=(r=n(41))&&r.__esModule?r:{default:r},a=n(25).fn,o=n(0),s=i.default.clientTypeMap;function c(e){e=e||{};var t=o.copy(e);return t.clientType&&(t.clientType=s[t.clientType]||""),t.serverCustom&&(t.custom=JSON.parse(t.serverCustom),"string"==typeof t.custom[0]&&(t.custom=t.custom[0]),delete t.serverCustom),t}a.processEventService=function(e){var t=e.content,n=e.error,r=this.options||{};switch(n&&(n.callFunc="events::processsEventService",this.onCustomError("\u4e8b\u4ef6\u670d\u52a1\u89e3\u5305\u5931\u8d25","EVENT_SERVICE_ERROR",n)),e.cmd){case"pushEvent":if(o.isFunction(r.onpushevents)){var i={msgEvents:[c(t.msgEvent)]};r.onpushevents(i)}break;case"pushEvents":if(o.isFunction(r.onpushevents)){var a=t.msgEvents;a={msgEvents:a.map((function(e){return c(e)}))},r.onpushevents(a)}}}},function(e,t,n){n(25).fn.processFilter=function(e){switch(e.cmd){case"sendFilterMsg":this.onSendMsg(e,!0);break;case"filterMsg":this.onMsg(e,!0);break;case"filterSysMsg":this.onSysMsg(e,!0);break;case"sendFilterCustomSysMsg":this.onSendSysMsg(e,!0)}}},function(e,t,n){var r=n(25).fn;r.processChatroom=function(e){switch(e.cmd){case"getChatroomAddress":this.onChatroomAddress(e)}},r.onChatroomAddress=function(e){e.error||(e.obj.address=e.content.address)}},function(e,t,n){var r=n(25).fn,i=n(0);r.syncSessionAck=function(e){var t=this;if(this.logger.info("syncSessionAck::",e.content),t.syncing&&t.syncResult){t.saveAck.p2pTeam=e.content.timetag;var n={};[[e.content.p2p,"p2p"],[e.content.team.m_map,"team"]].forEach((function(e){var r=e[0],i=e[1];Object.keys(r).forEach((function(e){n[i+"-"+e]=r[e];var a={id:i+"-"+e,ack:r[e]};t.cacheSyncedSession(a)}))})),t.syncResult.ackMap?t.syncResult.ackMap=Object.assign(t.syncResult.ackMap,n):t.syncResult.ackMap=n}else t.logger.warn("syncSessionAck: not in syncing or no syncResult",t.syncing,!!t.syncResult)},r.syncSuperTeamSessionAck=function(e){var t=this;if(t.syncResult){t.saveAck.superTeam=e.content.timetag;var n={},r=e.content.superTeam.m_map;Object.keys(r).forEach((function(e){n["superTeam-"+e]=r[e];var i={id:"superTeam-"+e,ack:r[e]};t.cacheSyncedSession(i)})),t.syncResult.ackMap?t.syncResult.ackMap=Object.assign(t.syncResult.ackMap,n):t.syncResult.ackMap=n}},r.onMarkSessionAck=function(e){e.error||this.storeSessionAck(e.obj)},r.syncMarkSessionAck=function(e){this.storeSessionAck(e.content,!0)},r.storeSessionAck=function(e,t){if(this.options.syncSessionUnread&&e){var n;switch(e.scene){case 0:n="p2p";break;case 1:n="team";break;case void 0:default:n="superTeam"}var r=n+"-"+e.to,a=e.timetag;if(a<=((this.findSession(r)||{}).ack||0))this.logger.warn("session::storeSessionAck: ack <= ackInMemory",a);else{var o={id:r,ack:a};this.mergeSession(o),this.logger.info("session::storeSessionAck:",i.secureOutput("session",o)),this.markUnreadBySessionAck({sessionId:r,ack:o.ack},t)}}},r.markUnreadBySessionAck=function(e,t){var n=e.sessionId,r=e.ack,i=this,a=i.db;if(a.enable)i.pushMsgTask((function(){return a.getMsgCountAfterAck({shouldCountNotifyUnread:i.options.shouldCountNotifyUnread,sessionId:n,ack:r}).then((function(e){var o={id:n,unread:e,ack:r};return i.logger.info("session::markUnreadBySessionAck: db.getMsgCountAfterAck done",o),i.syncing?i.cacheSyncedSession(o):t&&i.onUpdateSession(o),a.updateSession(o)})).catch((function(e){i.logger.error("markUnreadBySessionAck::error",e)}))}));else{var o=i.findSession(n);if(o){var s=o.unreadMsgs;if(s&&s.length){for(var c=0,u=[],l=s.length-1;l>=0;l--){var m=s[l];if(!(m.time>r))break;c++,u.push(m)}o.unreadMsgs=u,o.unread=c,i.logger.info("session::markUnreadBySessionAck: unread "+c),i.syncing?i.cacheSyncedSession(o):t&&i.onUpdateSession(o)}}}}},function(e,t,n){var r=a(n(129)),i=a(n(37));function a(e){return e&&e.__esModule?e:{default:e}}var o=n(25).fn,s=n(0),c=n(130),u=n(29),l=n(100);o.processSession=function(e){if(!e.error)switch(e.cmd){case"getServerSessions":this.onGetServerSessions(e);break;case"getServerSession":this.onGetServerSession(e);break;case"updateServerSession":this.onUpdateServerSession(e)}},o.onGetServerSessions=function(e){var t=this,n=e.content&&e.content.sessionReqTag,r=e.content&&e.content.sessionList,i=[];r.forEach((function(e){if(e.id=e.id.split("|").join("-"),0===e.id.indexOf("super_team")&&(e.id="superTeam"+e.id.slice(10)),e.updateTime=+e.updateTime,e.lastMsg){var n="1"===e.lastMsgType?"sysMsg":"msg";i.push(t.parser.unserialize(JSON.parse(e.lastMsg),n).then((function(r){e.lastMsg="msg"===n?t.message.reverse(r):l.reverse(r)})))}})),e.promise=Promise.all(i).then((function(){e.obj={sessionList:r,hasMore:"1"===n.hasMore},n.minTimestamp&&(e.obj.minTimestamp=+n.minTimestamp)}))},o.onGetServerSession=function(e){var t=this,n=e.content&&e.content.session;if(n)if(n.id=n.id.split("|").join("-"),0===n.id.indexOf("super_team")&&(n.id="superTeam"+n.id.slice(10)),n.updateTime=+n.updateTime,n.lastMsg){var r=e.content.session&&"1"===e.content.session.lastMsgType?"sysMsg":"msg";e.promise=t.parser.unserialize(JSON.parse(n.lastMsg),r).then((function(i){n.lastMsg="msg"===r?t.message.reverse(i):l.reverse(i),e.obj=n}))}else e.obj=n},o.onUpdateServerSession=function(e){e.obj={}},o.onSyncUpdateServerSession=function(e){var t=this,n=this,r=e.content&&e.content.session;r&&(r.id=r.id.split("|").join("-"),0===r.id.indexOf("super_team")&&(r.id="superTeam"+r.id.slice(10)),r.updateTime=+r.updateTime,r.lastMsg?n.parser.unserialize(JSON.parse(r.lastMsg),"msg").then((function(e){r.lastMsg=n.message.reverse(e),t.options.onSyncUpdateServerSession(s.simpleClone(r))})):this.options.onSyncUpdateServerSession(s.simpleClone(r)))},o.mergeSession=function(e){e=s.copyWithNull(e);var t=this.sessionSet,n=e.id,r=t[n]||{},i=!1;return c.isComplete(e)?delete r.isDeleted:r.isDeleted&&(i=!0),t[n]=s.merge(r,e),e=i?e:t[n],s.undef(e.unread)&&(e.unread=0),e},o.mergeSessions=function(e){var t=this;return(e=e||[]).map((function(e){return t.mergeSession(e)}))},o.deleteLocalSession=function(e,t){var n=this;s.isArray(e)||(e=[e]),t?e.forEach((function(e){n.sessionSet[e]&&(n.sessionSet[e].isDeleted=!0)})):e.forEach((function(e){return delete n.sessionSet[e]}))},o.onDeleteSessions=function(e){e.obj=e.obj.sessions.map((function(e){return c.parse(e)}))},o.onUpdateSession=function(e){if(e){if(e=this.mergeSession(e),e=s.simpleClone(e),c.trim(e),c.isComplete(e))return this.logger.info("session::onUpdateSession: "+e.id,e.id,s.secureOutput("session",e)),this.options.onupdatesessions?this.options.onupdatesessions([e]):this.options.onupdatesession(e),e;this.logger.warn("session::onUpdateSession::session is not complete",s.secureOutput("session",e))}},o.onUpdateSessions=function(e){var t=this;if(e){e=t.mergeSessions(e),(e=s.simpleClone(e)).forEach((function(e){c.trim(e)}));var n=e.filter((function(e){return c.isComplete(e)})),r=e.filter((function(e){return!c.isComplete(e)}));if(r&&r.length>0&&t.logger.warn("session::onUpdateSessions::sessions is not complete",r.map((function(e){return e.id})),s.secureOutput("session",r)),0!==n.length)return t.logger.info("session::onUpdateSessions:",s.secureOutput("session",n)),t.options.onupdatesessions?t.options.onupdatesessions(n):n.forEach((function(e){t.options.onupdatesession(e)})),n;t.logger.warn("session::onUpdateSessions::completeSessions is empty")}},o.setCurrSession=function(e){e=""+e,this.currSessionId=e,this.logger.info("session::setCurrSession:",e)},o.findSession=function(e){var t=this.sessionSet[e];return t&&t.isDeleted?void 0:t},o.resetSessionUnread=function(e){var t=e.id;this.db.enable&&this.db.updateSession({id:t,unread:0}),!this.options.autoMarkRead&&this.sessionUnreadMsgs&&this.sessionUnreadMsgs[t]&&(this.markMsgRead(this.sessionUnreadMsgs[t],!0),this.sessionUnreadMsgs[t]=[]),this.findSession(t)?this.onUpdateSession({id:t,unread:0}):this.onUpdateSession((0,i.default)({},e,{unread:0}))},o.resetSessionsUnread=function(e){var t=this,n=this.db;n.enable&&e.map((function(e){n.updateSession({id:e.id,unread:0})}));var r=!this.options.autoMarkRead&&this.sessionUnreadMsgs;e=e.map((function(e){return r&&t.sessionUnreadMsgs[e.id]&&(t.markMsgRead(t.sessionUnreadMsgs[e.id],!0),t.sessionUnreadMsgs[e.id]=[]),t.findSession(e.id)?{id:e.id,unread:0}:(0,i.default)({},e,{unread:0})})),this.onUpdateSessions(e)},o.insertLocalSession=function(e){var t=this,n=t.db,r=e.scene+"-"+e.to,i=t.findSession(r);return i&&c.isComplete(i)?Promise.reject(u.sessionExist({callFunc:"session::insertLocalSession",session:i})):(n.enable?n.getMsgs({sessionId:r,limit:1}):Promise.resolve()).then((function(a){if(s.isArray(a)&&1===a.length){var o=a[0];(i=c.genSessionByMsg(o)).updateTime=o.time}else i={id:r,scene:e.scene,to:e.to,updateTime:+e.updateTime||+new Date,lastMsg:null};return t.onUpdateSession(i),n.enable?n.putSession(i):Promise.resolve(i)}))},o.updateLocalSession=function(e,t){var n=this;return new Promise((function(r,i){var a=n.db;if(n.findSession(e.id)){var o=Promise.resolve(),c=s.filterObj(e,"id lastMsg localCustom unread");a.enable&&(o=a.updateSession(c)),o.then((function(e){return n.onUpdateSession(e,t)})).then(r,(function(e){i({callFunc:"session::updateLocalSession",event:e})}))}else i(u.sessionNotExist({sessionId:e.id,callFunc:"session::updateLocalSession"}))}))},o.checkAndUpdateLocalSessionByMsg=function(e){var t,n=this.db,i=this,a=this.options.syncSessionUnread&&e!==this.currSessionId,o=n.getMsgs({sessionId:e,limit:1}),c=n.getSession(e).then((function(r){if(r)return t=Object.assign({},r),r.ack=r.ack||0,a?n.getMsgs({sessionId:e,start:r.ack}):Promise.resolve();i.logger.error("can't find session that sessionId = "+e)}));return Promise.all([o,c]).then((function(a){var o,c,u=(0,r.default)(a,2),l=u[0],m=u[1],d={id:e};if(o=t.lastMsg?t.lastMsg.idClient:null,l&&l[0]?c=(l=l[0]).idClient:(c=null,l=null),o!==c&&(d.lastMsg=l),void 0!==m){var p=0;(m=m||[]).forEach((function(e){e.isUnreadable&&"in"===e.flow&&("notification"!==e.type||i.options.shouldCountNotifyUnread(e))&&p++})),p!==t.unread&&(d.unread=p)}return Object.keys(d).length>1?(i.logger.info("session::checkAndUpdateLocalSessionByMsg::needUpdate newSession:",s.secureOutput("session",d)),n.updateSession(d).then((function(e){return i.onUpdateSession(d)}))):Promise.resolve(200)}))},o.syncSessionsWithMoreRoaming=function(e){var t=this,n=e&&e.content&&e.content.sessions;if(n&&n.length){var r={0:"p2p",1:"team",5:"superTeam"};if(n.forEach((function(e){var n=e.to===t.options.account?e.from:e.to;e.scene=r[e.scene],e.id=e.scene+"-"+n,e.time=+e.time})),this.db.enable){var i=this.db.putSessionsWithMoreRoaming(n);i.cmd="syncSessionsWithMoreRoaming",this.syncPromiseArray.push(i)}this.syncing&&this.syncResult?this.syncResult.sessionsWithMoreRoaming=n:this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")}},o.syncStickTopSessions=function(e){var t=this,n=this.db,r=[],i=[],a=Promise.resolve(),o=e.content.sessions||[];this.syncing&&this.syncResult?(o.forEach((function(e){var t=e.id.split("|");"super_team"===t[0]&&(t[0]="superTeam"),e.id=t.join("-"),e.scene=t[0],e.to=t[1],e.isTop=!0,r.push(t.join("-")),delete e.createTime,delete e.updateTime,n.enable&&i.push(n.putSession(e))})),n.enable&&(a=n.updateTimetag("stickTopSessions",e.content.timetag)),a.then((function(){return n.enable?n.getStickTopSessions():[]})).then((function(a){if(e.content.modify){var o=[];a.forEach((function(e){r.indexOf(e.id)>-1||(o.push(e.id),e.isTop=!1,e.topCustom="",i.push(n.putSession(e)))}))}else t.syncResult.stickTopSessions=a;return Promise.all(i)})),this.syncResult.stickTopSessions=o,a.cmd="syncStickTopSessions",this.syncPromiseArray.push(a)):this.logger.warn("syncSessionsWithMoreRoaming::not in syncing or no syncResult")}},function(e,t,n){var r=n(25).fn,i=n(0),a=n(100);r.splitSysMsgs=function(e,t){for(var n,r=e.length-1;r>=0;r--)n=e[r],a.isCustom(n)&&(e.splice(r,1),t.push(n))},r.onOfflineSysMsgs=function(e,t){var n=this,r=e.content.sysMsgs.map((function(e){return e=a.reverse(e),t&&(e.filter=!0),e}));r=r.reverse(),n.markSysMsgRead(r);var i=[];n.splitSysMsgs(r,i);var o=t?"offlineFilterSysMsgs":"offlineSysMsgs",s=t?"offlineFilterCustomSysMsgs":"offlineCustomSysMsgs";if(r.length){var c=n.putSysMsg(r,"offlineSysMsgs").then((function(e){(r=e).length&&(n.logger.info("sysmsg::onOfflineSysMsgs: ",o,r.length,r&&r.map((function(e){return e.idServer}))),n.syncResult[o]=n.syncResult[o]||[],n.syncResult[o]=n.syncResult[o].concat(r))})).catch((function(e){return n.logger.error("sysMsg::onOfflineSysMsgs: ",e),Promise.reject(e)}));c.cmd="sysMsgs",n.syncPromiseArray.push(c)}i.length&&(n.logger.info("sysmsg::onOfflineSysMsgs: ",s,i.map((function(e){return e.idServer}))),n.syncResult[s]=n.syncResult[s]||[],n.syncResult[s]=n.syncResult[s].concat(i))},r.onSendSysMsg=function(e,t){var n=e.obj||{};n?(this.completeSysMsg(n),e.error?n.status="fail":n.status="success",n=a.reverse(n),t&&(e.obj.filter=!0),e.obj=n):this.logger.warn("onSendSysMsg::no obj")},r.completeSysMsg=function(e){return e.from=this.account,e},r.onSysMsg=function(e,t){var n=a.reverse(e.content.sysMsg);this.markSysMsgRead(n),t&&(n.filter=!0),a.isCustom(n)?(this.logger.info("sysmsg::onSysMsg: on customSysMsg"),this.options.oncustomsysmsg(n)):this.syncing?this.unhandledSysMsgs.push(n):this.handleSysMsg(n)},r.handleSysMsg=function(e){var t=this,n=e.type,r=e.from,a=e.serverex;t.sysMsgPromise=t.sysMsgPromise.then((function(){return t.putSysMsg(e,"onSysMsg")})).then((function(t){e=t[0]})).then((function(){if(e){var i,o=Promise.resolve();switch(n){case"addFriend":i={type:"addFriend",account:r},a&&(i.serverex=a),o=t.onFriendRequest(i);break;case"passFriendApply":i={type:"passFriendApply",account:r},o=t.onFriendRequest(i);break;case"deleteFriend":o=t.onDeleteFriend({account:r})}return i&&i.friend&&(e.friend=i.friend),o}})).then((function(){e&&(t.logger.info("sysmsg::handleSysMsg: ",n,i.pickAsString(e,["idServer","deletedIdClient","deletedIdServer"])),setTimeout((function(){t.options.onsysmsg(e)}),0))}))},r.putSysMsg=function(e,t){if(i.isArray(e)||(e=[e]),e[0].filter)return Promise.resolve(e);var n=this,r=n.db,a=r.enable,o=Promise.resolve(),s=[];return(o=(o=o.then((function(){return a?r.putSysMsg(e):e})).then((function(t){var r=[];e.forEach((function(e){n.checkSysMsgUnique(e)&&r.push(e)})),e=r,s=a?t:e}))).then((function(){return n.getSysMsgUnread().then((function(r){return s.length||((s=e).backward=!0),n.updateSysMsgUnread(s,r,1).then((function(e){"offlineSysMsgs"===t&&(n.syncResult.sysMsgUnread=e),"onSysMsg"===t&&n.onUpdateSysMsgUnread(e)}))}))}))).then((function(){return e}))},r.checkSysMsgUnique=i.genCheckUniqueFunc("idServer"),r.getSysMsgUnread=function(){var e=this,t=e.db;return new Promise((function(n){t.enable?t.getSysMsgUnread().then((function(e){n(e)}),(function(){n(e.sysMsgUnread)})):n(e.sysMsgUnread)}))},r.updateSysMsgUnread=function(e,t,n){if(i.isArray(e)||(e=[e]),!e.length)return Promise.resolve(t);t=t||{};var r,o=this.db;return e.forEach((function(e){(n>0&&!e.read||n<0&&e.read)&&(r=e.type,t[r]=(t[r]||0)+n)})),t=a.completeUnread(t),this.sysMsgUnread=t,o.enable&&!e.backward?o.updateSysMsgUnread(t):Promise.resolve(t)},r.reduceSysMsgUnread=function(e){var t=this;return t.getSysMsgUnread().then((function(n){return t.updateSysMsgUnread(e,n,-1)})).then((function(e){t.onUpdateSysMsgUnread(e)}))},r.onUpdateSysMsgUnread=function(e){var t=this;setTimeout((function(){t.logger.info("sysmsg::onUpdateSysMsgUnread:",e),t.options.onupdatesysmsgunread(e)}),0)},r.updateSysMsg=function(e){var t=this,n=t.db;(n.enable?n.updateSysMsg(e):Promise.resolve(e)).then((function(e){t.onUpdateSysMsg(e)}))},r.onUpdateSysMsg=function(e){var t=this;setTimeout((function(){i.isArray(e)||(e=[e]),e.forEach((function(e){t.logger.info("sysmsg::onUpdateSysMsg:",e.idServer),t.options.onupdatesysmsg(e)}))}),0)},r.processUnsettledSysMsgs=function(){var e=this;e.unhandledSysMsgs.forEach((function(t){e.handleSysMsg(t)})),e.resetUnsettledSysMsgs()}},function(e,t,n){var r,i=s(n(83)),a=s(n(82)),o=(r=(0,a.default)(i.default.mark((function e(t,n){var r,a,o,s,c,u,l,m,d,p,f,g,h=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(r=this).db,o=[],t.forEach((function(e){h.revokeMsgUniqueCheck(e.idClient),o.push(e.idClient)})),r.options.rollbackDelMsgUnread){e.next=14;break}return e.next=7,a.deleteMsg(o);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=[];case 10:return s=e.t0,s="[object Array]"===Object.prototype.toString.call(s)?s:[s],r.logger.info("msg::_deleteMsgSelfBatchInDb, rollback false, affect: "+s.length+" rows"),e.abrupt("return");case 14:return c=!1,u=r.options.cbUpdateSession||r.updateLocalSession.bind(r),l=r.findSession(n)||{id:n},m=l.lastMsg||{},o.includes(m.idClient)&&(c=!0),r.logger.info("msg::_deleteMsgSelfBatchInDb session change before:",n,c,l.unread),e.next=22,a.deleteMsg(o);case 22:if(e.t1=e.sent,e.t1){e.next=25;break}e.t1=[];case 25:if(d=e.t1,d="[object Array]"===Object.prototype.toString.call(d)?d:[d],r.logger.info("msg::_deleteMsgSelfBatchInDb affect:",d.length," rows"),!c){e.next=34;break}return e.next=31,a.getMsgs({sessionId:n,limit:1});case 31:p=e.sent,m=p&&p[0]?p[0]:m,l.lastMsg=m;case 34:if(f=!1,l&&l.unread&&(g=l&&l.ack||0,d.forEach((function(e){g<e.time&&"in"===e.flow&&(l.unread=l.unread-1,f=!0)}))),!c&&!f){e.next=39;break}return r.logger.info("msg::_deleteMsgSelfBatchInDb session change after:",n,l.unread),e.abrupt("return",u(l));case 39:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)});function s(e){return e&&e.__esModule?e:{default:e}}var c,u=n(25).fn,l=n(100),m=n(130),d=n(0);function p(e,t){t=t||(new Date).getTime();var n=this.db,r=this.findSession(e),i=!1!==this.options.rollbackClearMsgsUnread,a=[];return n.enable&&a.push(n.deleteMsgsBySessionId({sessionId:e,end:t})),i&&r&&(r=this.mergeSession({id:r.id,unread:0,lastMsg:null}),r=this.onUpdateSession(r)),n.enable&&i&&r&&a.push(n.updateSession(r)),Promise.all(a)}u.onDeleteMsg=function(e){var t=this.db;if(delete e.obj.sysMsg,!e.error){var n=e.obj.msg;e.promise=this.deleteLocalMsg(n).then((function(){if(t.enable){var e="superTeam"===n.scene?"deleteSuperTeamMsg":"deleteMsg";t.getTimetag(e).then((function(n){n=n||0,Date.now()+1>=n&&t.updateTimetag(e,Date.now()+1)}))}}))}},u.onMsgDeleted=function(e,t){if(!e.error){var n=this,r=n.db,i=l.reverse(e.content.sysMsg);i=n.processDeleteMsgSysMsg(i),t||n.markSysMsgRead(i),n.deleteLocalMsg(i.msg).then((function(){if(r.enable){var e=t?"deleteSuperTeamMsg":"deleteMsg";r.updateTimetag(e,i.time+1)}n.handleSysMsg(i)}))}},u.processDeleteMsgSysMsg=function(e){return e.msg={},["scene","from","to"].forEach((function(t){e.msg[t]=e[t]})),e.msg.idClient=e.deletedIdClient,e.msg.idServer=e.deletedIdServer,e.msg.time=e.deletedMsgTime,e.msg.fromNick=e.deletedMsgFromNick,e.opeAccount=e.opeAccount||e.from,e.msg.opeAccount=e.opeAccount,this.message.Message.setExtra(e.msg,this.account),e},u.onDeleteMsgOfflineRoaming=function(e){if(!e.error){var t=this,n=1==+e.content.type?"offline":"roaming",r=l.reverseSysMsgs(e.content.sysMsgs,{mapper:function(e){return t.processDeleteMsgSysMsg(e)}}),i=r&&r[0]&&"superTeam"===r[0].scene;t.logger.info("msg::onDeleteMsgOfflineRoaming: on delete "+n+" "+(i?"superTeam":"")+" idServer deletedIdClient deletedIdClient=",r.map((function(e){return e.idServer+"-"+e.deletedIdServer+"-"+e.deletedIdClient}))),"offline"===n&&t.markSysMsgRead(r);var a=e.content.timetag;i?(t.timetags.deleteSuperTeamMsg=a,t.syncResult.deleteSuperTeamMsgTimetag=a):(t.timetags.deleteMsg=a,t.syncResult.deleteMsgTimetag=a);var o=t.putSysMsg(r,"offlineSysMsgs").catch((function(e){return t.logger.error("msgDelete::onDeleteMsgOfflineRoaming: ",e),Promise.reject(e)}));o.cmd="deleteMsgSysMsgs "+n,t.syncPromiseArray.push(o),t.syncResult.deleteMsgSysMsgs=t.syncResult.deleteMsgSysMsgs||[],t.syncResult.deleteMsgSysMsgs.push({type:n,sysMsgs:r})}},u.deleteMsgOfflineRoaming=function(e,t){if(!e)return Promise.resolve();var n=this;n.logger.info("msg::deleteMsgOfflineRoaming: ",e.map((function(e){return e.type+" "+e.sysMsgs.map((function(e){return e.idServer+"-"+e.deletedIdServer+"-"+e.deletedIdClient}))})),d.secureOutput("session",t));var r=n.db,i=[];return e.forEach((function(e){e.sysMsgs.forEach((function(e){var a=n.deleteLocalMsg(e.msg,{cbUpdateSession:function(e){e=n.mergeSession(e),e=d.simpleClone(e),m.trim(e);var i=d.findObjIndexInArray(t,{value:e.id});if(-1!==i&&(t[i]=d.merge({},t[i],e)),r.enable)return r.updateSession(e)}});i.push(a)}))})),Promise.all(i).then((function(){r.enable&&(n.syncResult.deleteMsgTimetag&&r.updateTimetag("deleteMsg",n.syncResult.deleteMsgTimetag),n.syncResult.deleteSuperTeamMsgTimetag&&r.updateTimetag("deleteSuperTeamMsg",n.syncResult.deleteSuperTeamMsgTimetag))}))},u.deleteMsgSelf=function(e){if(!e.error){var t=this.db,n=e.obj&&e.obj.deleteMsgSelfTag;if(n){var r=e.content&&e.content.timetag;n.scene=n.scene+""=="1"?"p2p":"team";var i=[this.deleteLocalMsg(n)];r<=this.timetags.deleteMsgSelf||(this.timetags.deleteMsgSelf=r,t.enable&&i.push(t.updateDeleteMsgSelf(r))),e.promise=Promise.all(i)}}},u.deleteMsgSelfBatch=(c=(0,a.default)(i.default.mark((function e(t){var n,r,a,s,c,u;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}return e.abrupt("return");case 2:if(n=this,r=this.db,(a=t.obj&&t.obj.deleteMsgSelfTags)&&a.length>0){e.next=7;break}return e.abrupt("return");case 7:if(s=a.reduce((function(e,t){var n=t.sessionId;return e[n]=e[n]||[],e[n].push(t),e}),{}),r.enable){e.next=11;break}return Object.keys(s).forEach((function(e){var t=s[e],r=n.findSession(e);if(n.options.rollbackDelMsgUnread&&r){var i=r.ack||0,a=t.filter((function(e){return i<e.time&&"in"===e.flow}));a.length>0&&r.unread&&(r.unread=r.unread?r.unread-a.length:0,n.onUpdateSession(r))}})),e.abrupt("return",Promise.resolve());case 11:c=Object.keys(s).map((function(e){var t=s[e];return o.call(n,t,e)})),(u=t.content&&t.content.timetag)<=n.timetags.deleteMsgSelf||(n.timetags.deleteMsgSelf=u,c.push(r.updateDeleteMsgSelf(u))),t.promise=Promise.all(c);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)}),u.onDeleteMsgSelf=function(e){var t=this,n=this.db,r=e.content.deleteMsgSelfTag;r.scene=r.scene+""=="1"?"p2p":"team",t.options.onDeleteMsgSelf([r]),t.deleteLocalMsg(r).then((function(){var e=r.deletedTime;return e<=t.timetags.deleteMsgSelf||!n.enable?Promise.resolve():(t.timetags.deleteMsgSelf=e,n.updateDeleteMsgSelf(e))})).catch((function(e){t.logger.error("onDeleteMsgSelf error",e)}))},u.onDeleteMsgSelfBatch=function(e){if(!e.error){var t={1:"p2p",2:"team"},n=d.get(e,"content.deleteMsgSelfTags")||[];n.forEach((function(e){e.sessionId=t[e.scene]+"-"+e.from,e.deletedTime=parseInt(e.deletedTime),e.time=parseInt(e.time)}));var r=d.get(e,"content.deleteMsgSelfTags[0].deletedTime");r=parseInt(r)||0,this.deleteMsgSelfBatch({obj:{deleteMsgSelfTags:n},content:{timetag:r}})}},u.clearServerHistoryMsgs=function(e){if(!e.error){var t=this.db,n=e.obj&&e.obj.clearMsgsParamsWithSync;if(n){var r="p2p"===(n.type&&"2"===n.type.toString()?"team":"p2p")?"p2p-"+n.otherAccid:"team-"+n.toTid,i=e.content&&parseInt(e.content.timetag);i&&i>this.timetags.sessionHistoryMsgsDelete&&(this.timetags.sessionHistoryMsgsDelete=i,t.enable&&t.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),p.call(this,r,i)}}},u.onClearServerHistoryMsgs=function(e){if(!e.error){var t=this.db,n=e.content&&e.content.sessionHistoryMsgsDeleteTag;if(n){var r="p2p"===(n.type&&"2"===n.type.toString()?"team":"p2p")?"p2p-"+n.otherAccid:"team-"+n.toTid,i=parseInt(n.time);this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs([{sessionId:r,time:i}]),i<=this.timetags.sessionHistoryMsgsDelete||(this.timetags.sessionHistoryMsgsDelete=i,t.enable&&t.updateTimetag("sessionHistoryMsgsDelete",this.timetags.sessionHistoryMsgsDelete)),p.call(this,r,i)}}},u.syncSessionHistoryMsgsDelete=function(e){if(!e.error){var t=this.db,n=e.content&&e.content.sessionHistoryMsgsDeleteTags;if(n&&n.length>0){var r=n.map((function(e){return{sessionId:"p2p"===(e.type&&"2"===e.type.toString()?"team":"p2p")?"p2p-"+e.otherAccid:"team-"+e.toTid,time:parseInt(e.time)}}));this.options.onClearServerHistoryMsgs&&this.options.onClearServerHistoryMsgs(r),this.syncResult.clearServerHistoryMsgs=r;var i=0;r.forEach((function(e){e.time>i&&(i=e.time)})),t.enable&&t.updateTimetag("sessionHistoryMsgsDelete",i)}}},u.syncDeleteMsgSelf=function(e){var t=this,n=this.db,r=e.content.deletedMsgs;if(r&&0!==r.length){var i=[];r.forEach((function(e){e.scene="1"===e.scene?"p2p":"team",e.deletedTime=+e.deletedTime,e.time=+e.time,i.push(t.deleteLocalMsg(e))})),t.options.onDeleteMsgSelf(r),Promise.all(i).then((function(){var e=r.slice(-1)[0].deletedTime;if(!(t.timetags.deleteMsgSelf>=e))return t.timetags.deleteMsgSelf=e,n.enable?n.updateDeleteMsgSelf(e):void 0})).catch((function(e){t.logger.error("syncDeleteMsgSelf error",e)}))}},u.deleteLocalMsg=function(e,t){var n=this,r=n.db,i=(t=t||{}).cbUpdateSession||n.updateLocalSession.bind(n);if(this.revokeMsgUniqueCheck(e&&e.idClient),r.enable&&e){var a=!1,o=null,s=null,c=e.sessionId||e.scene+"-"+this.message.Message.getMsgTarget(e,this.account);return r.getMsgs({sessionId:c,limit:1}).then((function(t){t&&t[0]&&t[0].idClient===e.idClient&&(a=!0)})).then((function(){return r.getMsgByIdClient(e.idClient)})).then((function(t){return s=t,r.deleteMsg(e.idClient)})).then((function(){if(a)return r.getMsgs({sessionId:c,limit:1})})).then((function(e){a&&e&&e[0]&&(o=e[0])})).then((function(){if(n.options.rollbackDelMsgUnread)return r.getSession(c)})).then((function(e){var t=e||{id:c};a&&(t.lastMsg=o);var r=e&&e.ack||0,u=!1;return e&&s&&r<s.time&&"in"===s.flow&&e.unread&&(n.logger.info("msgDelete::deleteLocalMsg:db.getSessions: unread",e.id,e.unread),t.unread=e.unread-1,u=!0),a||u?i(t):Promise.resolve()}))}var u=n.findSession(e.sessionId);if(n.options.rollbackDelMsgUnread&&e&&e.sessionId&&u){var l=u.ack||0;u&&l<e.time&&"in"===e.flow&&u.unread&&(n.logger.info("msgDelete::deleteLocalMsg::no db: ",u.id),u.unread=u.unread-1,n.onUpdateSession(u))}return Promise.resolve()}},function(e,t,n){var r=n(25).fn,i=n(0);r.onOfflineMsgReceipts=function(e){var t,n=this,r=n.db,i=e.content.msgReceipts,a=[],o=Promise.resolve();this.logger.info("onOfflineMsgReceipts",i),i.forEach((function(e){t={id:"p2p-"+e.from,msgReceiptTime:+e.time},n.cacheSyncedSession(t)})),n.syncResult.msgReceipts=a,r.enable&&(o=r.updateMsgReceiptsTimetag(e.content.timetag)),o.cmd=a,n.syncPromiseArray.push(o)},r.shouldUpdateSessionFromMsgReceipt=function(e,t){return!e||!e.msgReceiptServerTime||t.time>e.msgReceiptServerTime},r.genSessionFromMsgReceipt=function(e,t){var n=t.time,r={id:t.sessionId,msgReceiptTime:n,msgReceiptServerTime:n};return e&&e.id===t.sessionId&&(r=i.merge({},e,r)),e&&e.updateTime||(r.updateTime=n),r},r.onMsgReceipt=function(e){var t=this,n=t.db,r=e.content.msgReceipt;r.time=+r.time;var i=r.idClient,a=Promise.resolve();n.enable&&i&&(a=n.getMsgByIdClient(i)),this.logger.info("onMsgReceipt::",r),a.then((function(e){var n;if(e){if(!e.idServer)return void(t.msgReceiptTasks[i]=r);n=e.time}else n=r.time;r.msgReceiptTime=n,t.updateSessionMsgReceiptTime(r)}))},r.resolveMsgReceiptTask=function(e){var t=this.msgReceiptTasks[e.idClient];t&&(t.msgReceiptTime=e.time,this.updateSessionMsgReceiptTime(t))},r.updateSessionMsgReceiptTime=function(e){var t=this.db,n={id:"p2p-"+e.from,msgReceiptTime:e.msgReceiptTime,msgReceiptServerTime:e.time};(this.findSession(n.id)||{}).msgReceiptTime>=n.msgReceiptTime?this.logger.warn("receive old msgReceiptTime",e):(t.enable&&t.putSession(n),this.onUpdateSession(n))},r.onSendMsgReceipt=function(e){if(!e.error){var t=e.obj.msgReceipt,n=+t.time,r=+e.content.msgReceipt.time,i=this.findSession("p2p-"+t.to);this.logger.info("sendMsgReceipt on:: param time "+n+", res time "+r),i.msgReceiptSendTime=Math.min(n,r)}},r.shouldSendMsgReceipt=function(e){if(e&&"p2p"===e.scene&&"success"===e.status){var t=this.findSession(e.sessionId);if(t){var n=t.msgReceiptSendTime;return!n||n<e.time}}return!1},r.isMsgRemoteRead=function(e){if(e&&"p2p"===e.scene&&"out"===e.flow&&"success"===e.status){var t=this.findSession(e.sessionId);if(t&&t.msgReceiptTime)return e.time<=t.msgReceiptTime}return!1}},function(e,t,n){var r,i=(r=n(37))&&r.__esModule?r:{default:r},a=n(25).fn,o=(n(0),n(314)),s=n(313);function c(e,t,n){var r=this,i=this.timetags&&this.timetags.sync;this.db.enable&&i&&t&&this.db.getMsgByIdClient(e).then((function(e){if(e&&!(e.commentTimetag&&e.commentTimetag<=i&&e.time<=i)){if(e.commentTimetag=t.time,e.comments=e.comments||[],n)e.comments=e.comments.filter((function(e){return e.body!==t.body||e.from!==t.from}));else{for(var a=void 0,o=0;o<e.comments.length;o++)if(e.comments[o].from===t.from&&e.comments[o].body===t.body){e.comments[o]=t,a=!0;break}a||e.comments.push(t)}var s={idClient:e.idClient,comments:e.comments,commentTimetag:e.commentTimetag};r.db.updateMsg(s)}}))}function u(e){e.scene=this.message.sceneReverseMap[+e.scene]||e.scene,e.time=+e.time}a.processMsgExtend=function(e){switch(e.cmd){case"getThreadMsgs":this.onGetThreadMsgs(e);break;case"getMsgsByIdServer":this.onGetMsgsByIdServer(e);break;case"addQuickComment":this.changeQuickComment(e);break;case"deleteQuickComment":this.changeQuickComment(e,!0);break;case"onQuickComment":case"syncAddQuickComment":this.onQuickComment(e);break;case"onDeleteQuickComment":case"syncDeleteQuickComment":this.onQuickComment(e,!0);break;case"getQuickComments":this.getQuickComments(e);break;case"addCollect":case"updateCollect":this.addCollect(e);break;case"deleteCollects":this.deleteCollects(e);break;case"getCollects":this.getCollects(e);break;case"addStickTopSession":case"syncAddStickTopSession":this.onChangeStickTopSession(e,"add");break;case"updateStickTopSession":case"syncUpdateStickTopSession":this.onChangeStickTopSession(e,"update");break;case"deleteStickTopSession":case"syncDeleteStickTopSession":this.onChangeStickTopSession(e,"delete");break;case"addMsgPin":case"onAddMsgPin":case"syncAddMsgPin":this.pinMsgChange(e,"add");break;case"updateMsgPin":case"onUpdateMsgPin":case"syncUpdateMsgPin":this.pinMsgChange(e,"update");break;case"deleteMsgPin":case"onDeleteMsgPin":case"syncDeleteMsgPin":this.pinMsgChange(e,"delete");break;case"getMsgPins":this.getMsgPins(e)}},a.onGetThreadMsgs=function(e){if(!e.error){e.obj.msgs=this.message.reverseMsgs(e.content.msgs),e.obj.threadMsg=this.message.reverse(e.content.threadMsg);var t=e.content.threadMsgsMeta||{};e.obj.total=t.total,e.obj.timetag=t.lastMsgTime}},a.onGetMsgsByIdServer=function(e){e.error||(e.obj.msgs=this.message.reverseMsgs(e.content.msgs))},a.changeQuickComment=function(e,t){e.error||(e.obj.comment.time=e.content.timetag,e.obj.comment=o.reverse(e.obj.comment),u.call(this,e.obj.msg),c.call(this,e.obj.msg.idClient,e.obj.comment,t))},a.onQuickComment=function(e,t){if(e.content){var n=e.content,r=n.comment,i=n.msg;r&&i&&(u.call(this,i),r=o.reverse(r),t?this.options.onDeleteQuickComment(e.content.msg,r):this.options.onQuickComment(e.content.msg,r),c.call(this,i.idClient,r,t))}},a.getQuickComments=function(e){var t=this;if(!e.error){var n=e.obj.idMap,r=e.obj.indexMap;(e.content&&e.content.commentRes||[]).forEach((function(e){var r=[],i=t.parser.unserializeMap.comment;if(1==+e.modify)try{r=JSON.parse(e.detail)}catch(e){t.logger.warn("getQuickComments parse detail error",e)}if(r.forEach((function(e,t){var n={};Object.keys(e).forEach((function(t){n[i[t]]=e[t]})),n=o.reverse(n),r[t]=n})),e.timestamp=+e.timestamp,n[e.idClient]){var a={idClient:e.idClient,commentTimetag:e.timestamp};n[e.idClient].commentTimetag=e.timestamp,1==+e.modify&&(n[e.idClient].comments=r,a.comments=r),t.db.enable&&t.db.updateMsg(a)}else n[e.idClient]={idServer:e.idServer,idClient:e.idClient,comments:r,commentTimetag:e.timestamp}})),e.obj=[],Object.keys(r).forEach((function(t){e.obj[r[t]]=n[t]}))}},a.addCollect=function(e){e.error||(e.obj.collect=s.reverse(e.content.collect))},a.deleteCollects=function(e){e.error||(e.obj.deleteNum=e.content.deleteNum)},a.getCollects=function(e){if(!e.error){var t=[];(e.content.collectList||[]).forEach((function(e){t.push(s.reverse(e))})),e.obj.collectList=t,e.obj.total=e.content.total}},a.onChangeStickTopSession=function(e,t){var n=this;if(!e.error){var r=e.content.stickTopSession||e.obj.stickTopSession||{},i=e.content.timetag||+r.updateTime,a=r.id.split("|");"super_team"===a[0]&&(a[0]="superTeam"),r={id:a.join("-"),scene:a[0],to:a[1],topCustom:r.topCustom||""},"delete"===t?r.isTop=!1:"add"===t&&(r.isTop=!0),r=this.onUpdateSession(r),e.obj&&(e.obj.stickTopSession=r),this.db.enable&&(this.db.updateSession(r).then((function(e){e||n.db.putSession(r)})),this.db.updateTimetag("stickTopSessions",i))}},a.pinMsgChange=function(e,t){var n=this;if(!e.error){e.content=e.content||{};var r=this,a=this.db,o=e.obj&&e.obj.msg,s=e.content.msg||o||{},c=e.content.pinTag||e.obj.pinTag,l=e.content.timetag||+c.updateTime,m=Promise.resolve();u.call(this,s),a.enable&&(m=a.getMsgByIdClient(s.idClient)),c.createTime&&(c.createTime=+c.createTime),c.updateTime&&(c.updateTime=+c.updateTime),m.then((function(u){return s=u||s,u?s=u:s.sessionId=s.scene+"-"+n.message.Message.getMsgTarget(s,n.account),o?(e.obj.msg=s,e.obj.pinTag=c):n.options.onPinMsgChange({msg:s,pinTag:c},t),a.enable&&a["delete"===t?"deleteMsgPin":"putMsgPin"]((0,i.default)({},s,{pinFrom:c.pinFrom,pinCustom:c.pinCustom})).then((function(){var e="pin-"+s.sessionId,t=r.timetags.sync;return a.getTimetag(e).then((function(n){return n>t?a.updateTimetag(e,l):Promise.resolve()}))})).catch((function(e){r.logger.error("msgExtend::pinMsgChange:error",e)})),Promise.resolve})).then((function(){})),e.promise=m}},a.getMsgPins=function(e){var t=this;if(!e.error){var n=this.db,r=e.content||{};if(r.pins=r.pins||[],r.modify){var i=[];n.enable&&(n.updateTimetag("pin-"+e.obj.id,r.timetag),r.pins.forEach((function(t){t.sessionId=e.obj.id,i.push(n.getMsgByIdClient(t.idClient))}))),e.promise=Promise.all(i).then((function(i){r.pins.forEach((function(n,r){i[r]?Object.assign(n,i[r]):(n.sessionId=e.obj.id,u.call(t,n))})),e.obj.pins=r.pins,n.enable&&n.deleteMsgPins(e.obj.id).then((function(){return n.putMsgPins(r.pins)})).catch((function(e){t.logger.error("msgExtend::getMsgPins:change db error",e)}))}))}else n.enable?(n.updateTimetag("pin-"+e.obj.id,r.timetag),e.promise=n.getMsgPins(e.obj.id).then((function(t){e.obj.pins=t||[]}))):e.obj.pins=[]}}},function(e,t,n){var r=n(25).fn,i=n(0),a=i.undef,o=n(41),s=n(101),c=n(166),u=n(130),l=n(206),m=n(135),d=n(5),p=n(16);r.processMsg=function(e){switch(e.cmd){case"sendMsg":this.onSendMsg(e);break;case"msg":this.onMsg(e);break;case"sysMsg":this.onSysMsg(e);break;case"broadcastMsg":this.onBroadcastMsg(e);break;case"sendCustomSysMsg":this.onSendSysMsg(e);break;case"getHistoryMsgs":case"searchHistoryMsgs":this.onHistoryMsgs(e);break;case"msgFtsInServer":this.onmsgFtsInServer(e);break;case"syncSendMsg":this.onMsg(e);break;case"deleteSessions":this.onDeleteSessions(e);break;case"sendMsgReceipt":this.onSendMsgReceipt(e);break;case"msgReceipt":this.onMsgReceipt(e);break;case"onDeleteMsg":this.onDeleteMsg(e);break;case"onMsgDeleted":this.onMsgDeleted(e);break;case"onDeleteMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming(e);break;case"onMarkSessionAck":this.onMarkSessionAck(e);break;case"syncMarkSessionAck":this.syncMarkSessionAck(e);break;case"syncUpdateServerSession":this.onSyncUpdateServerSession(e);break;case"deleteMsgSelf":this.deleteMsgSelf(e);break;case"deleteMsgSelfBatch":this.deleteMsgSelfBatch(e);break;case"onDeleteMsgSelf":this.onDeleteMsgSelf(e);break;case"onDeleteMsgSelfBatch":this.onDeleteMsgSelfBatch(e);break;case"clearServerHistoryMsgs":this.clearServerHistoryMsgs(e);break;case"onClearServerHistoryMsgs":this.onClearServerHistoryMsgs(e)}},r.checkIgnore=function(e){var t=this;e.forEach((function(e){e.ignore||(t.options.shouldIgnoreMsg(e)&&(e.ignore=!0),"notification"===e.type&&t.options.shouldIgnoreNotification(e)&&(e.ignore=!0))}))},r.filterIgnore=function(e){return e.filter((function(e){return!e.ignore}))},r.genSessionByMsgs=function(e){return this.checkIgnore(e),u.genSessionByMsgs(this.message.Message,e)},r.onRoamingMsgs=function(e){var t=this,n=t.message,r=n.Message,i=r.getMaxTimetag,a=n.reverseMsgs(e.content.msgs),o=i(a);a=r.sortMsgs(a);var s=(a=r.deduplication(a))[0],c=s.sessionId,u=t.genSessionByMsgs(a);t.cacheSyncedSession(u);var l=t.putMsg(a,"roamingMsgs").then((function(e){a=e,(a=t.filterIgnore(a)).length&&(t.logger.info("msg::onRoamingMsgs: putRoamingMsgs",c,a.length),t.syncResult.roamingMsgs=t.syncResult.roamingMsgs||[],t.syncResult.roamingMsgs.push({sessionId:c,scene:s.scene,to:s.target,msgs:a,timetag:o}),t.syncing||t.onSyncDone())})).catch((function(e){return t.logger.error("msg::onRoamingMsgs: ",e),Promise.reject(e)}));l.cmd="roamingMsgs-"+c,t.syncPromiseArray.push(l)},r.onOfflineMsgs=function(e,t){var n=this,r=n.message,i=r.Message,a=null;t&&(a={filter:!0});var o,s,c=r.reverseMsgs(e.content.msgs,{modifyObj:a}),u=[],l="",m=t?"offlineFilterMsgs":"offlineMsgs";function d(e){if(u.length){var t=i.getMaxTimetag(u),r=u[0].scene,a=u[0].target;n.markMsgRead(u),u=i.sortMsgs(u),u=i.deduplication(u);var o=n.genSessionByMsgs(u);n.cacheSyncedSession(o),(s=n.putMsg(u,"offlineMsgs").then((function(i){u=i,(u=n.filterIgnore(u)).length&&(n.logger.info("msg::onOfflineMsgs\uff1a toreLastSession",m,e,u.length),n.syncResult[m]=n.syncResult[m]||[],n.syncResult[m].push({sessionId:e,scene:r,to:a,msgs:u,timetag:t}))})).catch((function(e){return n.logger.error("msg::onOfflineMsgs: ",e),Promise.reject(e)}))).cmd="offlineMsgs-"+e,n.syncPromiseArray.push(s)}}c.forEach((function(e){(o=e.sessionId)!==l?(d(l),(u=[]).push(e),l=o):u.push(e)})),d(l)},r.completeMsg=function(e){return e.from=this.account,e.fromNick=this.myInfo&&this.myInfo.nick,e.fromClientType="Web",e.fromDeviceId=o.deviceId,e.time||(e.time=+new Date),e},r.onMsgs=function(e){var t=this,n=t.message.reverseMsgs(e.content.msgs,{mapper:function(e){t.handleMsg(e)}});t.pushMsgDelay(n)},r.onMsg=function(e,t){var n=this.message.reverse(e.content.msg);t&&(n.filter=!0),"syncSendMsg"!==e.cmd||n.from!==n.to?(this.pushMsgDelay([n]),this.syncing?(this.logger.info("msg::onMsg:is in syncing ..."),this.unhandledMsgs.push({type:"onMsg",msg:n})):this.handleMsg(n)):this.logger.warn("onMsg::syncSendMsg to self, so ignore",n.idClient,n.idServer)},r.onBroadcastMsgs=function(e){var t=e.content.broadcastMsgs;t=t.sort((function(e,t){return e.broadcastId-t.broadcastId})),this.putBroadcastMsgs(t)},r.onBroadcastMsg=function(e){var t=e.content.broadcastMsg;t.time=t.timestamp,this.syncing?this.unhandledMsgs.push({type:"onBroadcastMsg",msg:t}):t&&this.putBroadcastMsg(t)},r.pushMsgTask=function(e){this.msgPromise=this.msgPromise.then((function(){return e()}))},r.pushMsgDelay=function(e){if(e&&e.length>0){var t=this;if(t.msgStatEnable&&!d.isWeixinApp&&void 0!==t.relativeSeverTime){var n=e.map((function(e){return{appkey:t.options.appKey,accid:e.to,fromAccid:e.from,msgId:e.idServer,serverTime:e.time,receiveTime:Date.now()-t.relativeSeverTime,sessionId:t.sdkSession,platform:"web",sdk_ver:d.info.version,manufactor:p.name+" "+p.version}}));t.msgDelayArr=t.msgDelayArr.concat(n),t.msgDelayArr.length>5&&t.doReportMsgDelay()}}},r.doReportMsgDelay=function(){var e=JSON.stringify(this.msgDelayArr);this.msgDelayArr&&this.msgDelayArr.length>0&&(m.sendBeacon("https://statistic.live.126.net/statics/report/im/sdk/msgreceived",e),this.msgDelayArr=[]),this.msgDelayTimer&&clearTimeout(this.msgDelayTimer),this.socket&&(this.msgDelayTimer=setTimeout(this.doReportMsgDelay.bind(this),1e4))},r.handleMsg=function(e){var t=this,n=t.db,r=e.time;t.markMsgRead(e),t.msgPromise=t.msgPromise.then((function(){return t.putMsg(e,"onMsg")})).then((function(i){return t.logger.info("msg::handleMsg:putMsg: done "+e.idServer+" "+e.idClient),n.enable?"superTeam"===e.scene?n.updateSuperTeamRoamingMsgTimetag(r):n.updateRoamingMsgTimetag(r):(t.timetags["superTeam"===e.scene?"superTeamRoamingMsgs":"roamingMsgs"]=r,Promise.resolve())})).then((function(){if(e)return t.checkUserUpdate(e)})).then((function(){if(e){var n=e.type;switch(t.logger.info("msg::handleMsg:checkUserUpdate: "+e.scene+" "+n+" msg"+("notification"===n?" "+e.attach.type:"")),n){case"notification":return t.onTeamNotificationMsg(e)}}})).then((function(){e&&!e.ignore&&(t.logger.info("msg::handleMsg:onmsg: ",e.idClient,e.idServer),setTimeout((function(){t.options.onmsg(i.copy(e))}),0))})).catch((function(e){e.callFunc="msg::handleMsg",t.onCustomError("\u6d88\u606f\u5904\u7406\u9519\u8bef",e)}))},r.putMsg=function(e,t){if(i.isArray(e)||(e=[e]),e[0].filter)return Promise.resolve(e);var n,r=this,o=r.db,s=o.enable,c=Promise.resolve(),u=r.message.Message.getLastMsg(e),l=u.flow,m=r.genSessionByMsgs(e);f(m);var d=!1,p=[];function f(e){"roamingMsgs"!==t&&"offlineMsgs"!==t||r.cacheSyncedSession(e)}return c=(c=(c=c.then((function(){return s||r.options.autoMarkRead||"roamingMsgs"===t||!m||(r.sessionUnreadMsgs=r.sessionUnreadMsgs||{},r.sessionUnreadMsgs[m.id]=r.sessionUnreadMsgs[m.id]||[],r.sessionUnreadMsgs[m.id]=r.sessionUnreadMsgs[m.id].concat(e.filter((function(e){return r.options.shouldCountNotifyUnread(e)})))),"offlineMsgs"===t||"roamingMsgs"===t?Promise.reject(e):s?o.putMsg(e):e})).then((function(t){var n=[];return e.forEach((function(e){r.checkMsgUnique(e)&&n.push(e)})),e=n,p=s?t:e,Promise.resolve(e)}))).then((function(e){return e.length&&s&&m?new Promise((function(t,n){o.getSessions({sessionId:m.id}).then((function(n){if(n&&n.lastMsg){var r=n.lastMsg;m.lastMsg&&m.lastMsg.time<r.time&&(m.lastMsg=r)}p&&p.length?m?o.putSession(m).then((function(e){t(e)})):t(n):(d=!0,p=e,t(n))}))})):Promise.resolve(m)}))).then((function(e){if(m&&p.length){n=u.sessionId!==r.currSessionId;var c="roamingMsgs"===t,g=r.options.syncSessionUnread,h=m.id,y=r.findSession(h)||{},b=y.ack||0;if("offlineMsgs"===t||c&&g||"onMsg"===t&&"in"===l&&n){s&&e?(m=e,b=b||m.ack||0):(e=y)&&(m.unread=e.unread||0),f(m),m.unread=m.unread||0;var v=0;p.forEach((function(e){var t=r.options.shouldCountNotifyUnread(e),n=("notification"!==e.type||"notification"===e.type&&t)&&(a(e.isUnreadable)||e.isUnreadable);if(n&&g&&(n=e.time>b&&"out"!==e.flow),n&&(v++,g&&!s)){var i=y.unreadMsgs||[];i.push(e),m.unreadMsgs=i}})),m.unread+=v;var S=i.secureOutput("session",m);if(S.unreadMsgs&&(S.unreadMsgs=S.unreadMsgs.map((function(e){return e&&e.idServer}))),r.logger.info("msg::putMsg:updateSession: ",S),f(m),s&&!d)return o.updateSession({id:m.id,unread:m.unread})}}})),"onMsg"===t&&(c=c.then((function(){e.length&&m&&(r.onUpdateSession(m),r.options.syncSessionUnread&&!n&&r.api.resetSessionUnread(r.currSessionId))}))),c.then((function(){return Promise.resolve(e)})).catch((function(e){return e&&e.length?Promise.resolve(e):Promise.reject(e)}))},r.putBroadcastMsgs=function(e){var t=this,n=t.db,r=e.length;if(r>0){if(t.doMarkBroadcastMsgsRead(e),n.enable){var a=e[r-1].broadcastId;return n.updateBroadcastMsgTimetag(a),n.putBroadcastMsg(e).then((function(){return setTimeout((function(){t.doMarkMsgsRead(),t.options.onbroadcastmsgs(i.copy(e))}),0),Promise.resolve(e)}))}setTimeout((function(){t.options.onbroadcastmsgs(i.copy(e))}),0)}return e},r.putBroadcastMsg=function(e){var t=this,n=t.db;return t.doMarkBroadcastMsgsRead([e]),n.enable?(e.broadcastId&&n.updateBroadcastMsgTimetag(e.broadcastId),n.putBroadcastMsg(e).all((function(){return setTimeout((function(){t.options.onbroadcastmsg(i.copy(e))}),0),Promise.resolve(e)}))):(setTimeout((function(){t.options.onbroadcastmsg(i.copy(e))}),0),e)},r.doMarkBroadcastMsgsRead=function(e){e=e.map((function(e){return e.broadcastId})),this.sendCmd("batchMarkRead",{sid:7,cid:17,ids:e})},r.cacheSyncedSession=function(e){if(e&&this.syncResult){e=i.merge({},e),this.syncResult.sessions=this.syncResult.sessions||{};var t=e.id,n=this.syncResult.sessions[t];n&&n.ack<e.ack&&delete e.ack,n&&n.msgReceiptTime<e.msgReceiptTime&&delete e.msgReceiptTime,this.syncResult.sessions[t]=i.merge(n,e),this.mergeSession(this.syncResult.sessions[t])}},r.checkMsgUnique=i.genCheckUniqueFunc("idClient"),r.revokeMsgUniqueCheck=function(e){this.uniqueSet&&this.uniqueSet.idClient&&(this.uniqueSet.idClient[e]=!1)},r.storeSendMsg=function(e){if(!this.syncing){var t=this.putMsg(e,"sendMsg");return this.msgPromise=this.msgPromise.then((function(){return t})),t}this.unhandledMsgs.push({type:"sendMsg",msg:e})},r.updateSendMsgError=function(e){if(!this.syncing){var t=this.updateMsg(e);return this.msgPromise=this.msgPromise.then((function(){return t})),t}this.unupdatedMsgs.push(e)},r.onSendMsg=function(e,t){var n=this,r=e.content&&e.content.msg,i=e.obj&&e.obj.msg||r;if(this.logger.warn("sendMsg::end: "+(r&&r.idServer)+" "+i.idClient),e.obj)o();else{var a=n.db;a&&a.enable&&a.getMsgByIdClient(i.idClient).then((function(e){e&&(i=e,o())})).catch((function(e){return o()}))}function o(){n.completeMsg(i);var a=e.error&&7101===e.error.code;e.error&&!a||(i.idServer=r.idServer,i.time=+r.time,r.callbackExt&&(i.callbackExt=r.callbackExt)),a&&(i.isInBlackList=!0),e.error?i.status="fail":i.status="success",i=n.message.reverse(i),t&&(i.filter=!0),e.obj=i,n.syncing?n.unupdatedMsgs.push(i):n.msgPromise=Promise.all([n.msgPromise,e.obj.promise]).then((function(e){return e.length||(i.resend=!0),n.updateMsg(i).then((function(){return n.options.syncSessionUnread&&n.currSessionId===i.sessionId&&n.api.resetSessionUnread(n.currSessionId),n.resolveMsgReceiptTask(i),i}))})).catch((function(e){n.logger.error("onSendMsg::dealMsg error",e)}))}},r.updateLocalMsg=function(e){var t=this.updateMsg(e);return this.msgPromise=this.msgPromise.then((function(){return t})),t},r.updateMsg=function(e){if(e.filter||this.options.shouldIgnoreMsg(e))return Promise.resolve(e);var t=this,n=t.db,r="success"===e.status,i=u.genSessionByMsg(e),a=!!e.isLocal;return t.onUpdateSession(i),n.enable?n.updateMsg(e).then((function(t){var o=n.updateSession(i),s=Promise.resolve();return r&&t&&!a&&(s="superTeam"===e.scene?n.updateSuperTeamRoamingMsgTimetag(t.time):n.updateRoamingMsgTimetag(t.time)),Promise.all([o,s])})).catch((function(e){t.logger.error("updateMsg error",e)})):(r&&!a&&(t.timetags.roamingMsgs=e.time),Promise.resolve(e))},r.updateRoamingMsgTimetag=function(e){var t=this.db;return t.enable?t.updateRoamingMsgTimetag(e):(this.timetags.roamingMsgs=e,Promise.resolve(e))},r.checkUserUpdate=function(e){var t=this,n=e.from;return t.logger.info("handleMsg::checkUserUpdate: ",n,t.account),n===t.account?Promise.resolve():new Promise((function(r){var a=t.userSet[n];if(a){var o=+a.updateTime,s=+e.userUpdateTime;!isNaN(o)&&!isNaN(s)&&i.isNumber(o)&&i.isNumber(s)&&o<s?c():r()}else c();function c(){t.api.getUser({account:n,sync:!0,done:function(e,n){e||setTimeout((function(){t.logger.log("user::checkUserUpdate: onupdateuser",n&&n.account),t.options.onupdateuser(n)}),0),r()}})}}))},r.processUnsettledMsgs=function(){var e=this;e.unhandledMsgs.forEach((function(t){var n=t.msg;switch(t.type){case"onMsg":e.handleMsg(n);break;case"sendMsg":e.msgPromise=e.msgPromise.then((function(){return e.putMsg(n)}));break;case"onBroadcastMsg":e.msgPromise=e.msgPromise.then((function(){return e.putBroadcastMsg(n)}))}})),e.unupdatedMsgs.forEach((function(t){e.msgPromise=e.msgPromise.then((function(){return e.updateMsg(t)}))})),e.resetUnsettledMsgs()},r.onTeamNotificationMsg=function(e){this.db;var t=e.attach,n=t.type,r=e.from,i=e.to,a=e.time,o=t.team,s=t.account,c=t.accounts;switch(n){case"updateTeam":return o.updateTime=a,this.onUpdateTeam(o);case"addTeamMembers":return this.onAddTeamMembers(e,o,c);case"removeTeamMembers":return this.onRemoveTeamMembers(o,i,c);case"acceptTeamInvite":return this.onAddTeamMembers(e,o,[r]);case"passTeamApply":return this.onAddTeamMembers(e,o,[s]);case"addTeamManagers":return this.updateTeamManagers(e,i,c,!0,a);case"removeTeamManagers":return this.updateTeamManagers(e,i,c,!1,a);case"leaveTeam":return this.onRemoveTeamMembers(o,i,[r]);case"dismissTeam":return this.onDismissTeam(i,a);case"transferTeam":return this.transferTeam(e,o,r,s);case"updateTeamMute":return this.onUpdateTeamMembersMute(e,o,[s],t.mute);case"updateSuperTeam":return o.updateTime=a,this.onUpdateSuperTeam(o);case"addSuperTeamMembers":return this.onAddSuperTeamMembers(e,o,c);case"passSuperTeamApply":return this.onAddSuperTeamMembers(e,o,[s]);case"removeSuperTeamMembers":return this.onRemoveSuperTeamMembers(o,i,c);case"leaveSuperTeam":return this.onRemoveSuperTeamMembers(o,i,[r]);case"dismissSuperTeam":return this.onDismissSuperTeam(i,a);case"transferSuperTeam":return this.transferSuperTeam(e,o,r,s);case"addSuperTeamManagers":return this.updateSuperTeamManagers(e,i,c,!0,a);case"removeSuperTeamManagers":return this.updateSuperTeamManagers(e,i,c,!1,a);case"updateSuperTeamMembersMute":return this.onUpdateSuperTeamMembersMute(e,o,c,t.mute)}},r.onAddSuperTeamMembers=function(e,t,n){var r=this.db,a=c.assembleMembers(t,n);e.attach.members=a;var o={team:t,accounts:n,members:a};if(this.logger.info("team::onAddSuperTeamMembers: "+o.team.teamId+", ",o.accounts),this.options.onAddSuperTeamMembers(i.simpleClone(o)),r.enable){var s=r.putSuperTeamMembers(a),u=r.putSuperTeam(t);return Promise.all([s,u])}},r.onRemoveSuperTeamMembers=function(e,t,n){var r=this.db,a={team:e,accounts:n};if(this.logger.info("team::onRemoveSuperTeamMembers: "+a.team.teamId+", ",a.accounts),this.options.onRemoveSuperTeamMembers(i.simpleClone(a)),r.enable){if(-1===n.indexOf(this.account)){var o=r.removeSuperTeamMembersByAccounts(t,n),s=Promise.resolve();return e&&(s=r.putSuperTeam(e)),Promise.all([o,s])}return r.leaveSuperTeam(t)}},r.onDismissSuperTeam=function(e,t){var n=this.db,r={teamId:e};if(this.logger.info("team::onDismissSuperTeam:",e),this.options.onDismissSuperTeam(r),n.enable)return n.dismissSuperTeam(e,t)},r.onAddTeamMembers=function(e,t,n){var r=this,a=r.db,o=t.teamId,c=s.assembleMembers(t,n);e.attach.members=c;var u={team:t,accounts:n,members:c};if(r.logger.info("team::onAddTeamMembers: ",o,n),r.options.onAddTeamMembers(i.simpleClone(u)),a.enable){var l,m=a.putTeam(t);return-1===n.indexOf(r.account)?l=a.putTeamMembers(c):(r.logger.log("team::onAddTeamMembers: user join team",o),m=new Promise((function(e){r.api.getTeamMembers({teamId:o,sync:!0,done:function(){e()}})}))),Promise.all([l,m])}},r.onRemoveTeamMembers=function(e,t,n){var r=this.db,a={team:e,accounts:n};if(this.logger.info("team::onRemoveTeamMembers: "+e.teamId,n),this.options.onRemoveTeamMembers(i.simpleClone(a)),r.enable){if(-1===n.indexOf(this.account)){var o=r.removeTeamMembersByAccounts(t,n),s=Promise.resolve();return e&&(s=r.putTeam(e)),Promise.all([o,s])}return r.leaveTeam(t)}},r.updateTeamManagers=function(e,t,n,r,a){var o=this.db,c=e.attach.members=n.map((function(e){return{id:s.genId(t,e),type:r?"manager":"normal",updateTime:a}})),u={teamId:""+t,memberUpdateTime:a};e.attach.team=u;var l={team:u,accounts:n,isManager:r,members:c};if(this.logger.info("team::updateTeamManagers:",t,n,r),this.options.onUpdateTeamManagers(i.simpleClone(l)),o.enable){var m=o.updateTeam(u),d=o.updateTeamManagers(t,n,r,a);return Promise.all([m,d])}},r.updateSuperTeamManagers=function(e,t,n,r,a){var o=this.db,c=e.attach.members=n.map((function(e){return{id:s.genId(t,e),teamId:t,account:e,type:r?"manager":"normal",updateTime:a}})),u={teamId:""+t,memberUpdateTime:a};e.attach.team=u;var l={team:u,accounts:n,isManager:r,members:c};if(this.logger.info("team::updateSuperTeamManagers:",t,n,r),this.options.onUpdateSuperTeamManagers(i.simpleClone(l)),o.enable){var m=o.updateSuperTeam(u),d=o.updateSuperTeamMembers(c);return Promise.all([m,d])}},r.onDismissTeam=function(e,t){var n=this.db,r={teamId:e};if(this.logger.info("team::onDismissTeam:",e),this.options.onDismissTeam(r),n.enable)return n.dismissTeam(e,t)},r.transferTeam=function(e,t,n,r){var a=this.db,o=t.teamId,c=t.memberUpdateTime,u={id:s.genId(o,n),type:"normal",updateTime:c},l={id:s.genId(o,r),type:"owner",updateTime:c};e.attach.members=[u,l];var m={team:t,from:u,to:l};if(this.logger.info("team::transferTeam: from to",o,n,r),this.options.onTransferTeam(i.simpleClone(m)),a.enable)return a.transferTeam(t,n,r)},r.transferSuperTeam=function(e,t,n,r){var a=this.db,o=t.teamId,s=t.memberUpdateTime,c={teamId:o,type:"normal",account:n,updateTime:s},u={teamId:o,type:"owner",account:r,updateTime:s};e.attach.members=[c,u];var l={team:t,from:c,to:u};if(this.logger.info("team::transferSuperTeam: from to ",o,n,r),this.options.onTransferSuperTeam(i.simpleClone(l)),a.enable)return a.transferSuperTeam(t,c,u)},r.onUpdateTeamMembersMute=function(e,t,n,r){var a=this.db,o=n.map((function(e){return{id:s.genId(t.teamId,e),account:e,teamId:t.teamId,mute:r,updateTime:t.memberUpdateTime}}));e.attach.members=o;var c={team:t,accounts:n,members:o,mute:r};if(this.logger.info("team::onUpdateTeamMembersMute:",t.teamId,n,r),this.options.onUpdateTeamMembersMute(i.simpleClone(c)),a.enable){var u=a.updateTeamMembers(o),l=a.putTeam(t);return Promise.all([u,l])}},r.onUpdateSuperTeamMembersMute=function(e,t,n,r){var a=this.db,o=n.map((function(e){return{id:c.genId(t.teamId,e),account:e,teamId:t.teamId,mute:r,updateTime:t.memberUpdateTime}}));e.attach.members=o;var s={team:t,accounts:n,members:o,mute:r};if(this.logger.info("team::onUpdateSuperTeamMembersMute:",t.teamId,n,r),this.options.onUpdateSuperTeamMembersMute(i.simpleClone(s)),a.enable){var u=a.updateSuperTeamMembers(o),l=a.putSuperTeam(t);return Promise.all([u,l])}},r.onHistoryMsgs=function(e){e.error||(e.obj.msgs=this.message.reverseMsgs(e.content.msgs))},r.onmsgFtsInServer=function(e){e.error||(e.obj.msgs=this.message.reverseMsgs(e.content.msgs))},r.isFilterMsgs=function(e){return!!e[0].filter},r.splitMsgs=function(e,t,n,r){e.forEach((function(e){if(e.filter)r.push(e);else switch(e.scene){case"p2p":t.push(e);break;case"team":n.push(e)}}))},r.markMsgRead=function(e,t){if(i.isArray(e)||(e=[e]),this.db.enable||this.options.autoMarkRead||t){var n=[],r=[],a=[];this.logger.log("markMsgRead::batchMarkRead",e.map((function(e){return e.idServer}))),this.splitMsgs(e,n,r,a),this.markP2pMsgsRead(n),this.markTeamMsgsRead(r),this.markFilterMsgsRead(a)}},r.markP2pMsgsRead=function(e){if(e.length){var t=l.idMap.msg.id,n=l.idMap.msg.msg;this.doMarkMsgsRead(t,n,e)}},r.markTeamMsgsRead=function(e){if(e.length){var t=l.idMap.team.id,n=l.idMap.team.teamMsg;this.doMarkMsgsRead(t,n,e)}},r.markFilterMsgsRead=function(e){if(e.length){var t=l.idMap.filter.id,n=l.idMap.filter.filterMsg;this.doMarkMsgsRead(t,n,e)}},r.markSysMsgRead=function(e,t){var n,r;i.isArray(e)||(e=[e]),(this.db.enable||this.options.autoMarkRead||t)&&(this.isFilterMsgs(e)?(n=l.idMap.filter.id,r=l.idMap.filter.filterSysMsg):"superTeam"===e[0].scene?(n=l.idMap.superTeam.id,r=l.idMap.superTeam.superTeamCustomSysMsg):(n=l.idMap.msg.id,r=l.idMap.msg.sysMsg),this.doMarkMsgsRead(n,r,e))},r.doMarkMsgsRead=function(e,t,n){n&&n.length&&(/^(netcallBill|netcallMiss|netcallReject)$/.test(n[0].attach&&n[0].attach.type)&&(e=9,t=11),this.sendCmd("batchMarkRead",{sid:e,cid:t,ids:n.map((function(e){return e.idServer}))}))}},function(e,t,n){var r=n(25).fn,i=n(0),a=n(207);r.processNotify=function(e){switch(e.cmd){case"syncOfflineNetcallMsgs":case"syncOfflineMsgs":this.onOfflineMsgs(e);break;case"batchMarkRead":break;case"syncOfflineSysMsgs":case"syncOfflineSuperTeamSysMsgs":this.onOfflineSysMsgs(e);break;case"syncRoamingMsgs":case"syncSuperTeamRoamingMsgs":this.onRoamingMsgs(e);break;case"syncOfflineFilterMsgs":this.onOfflineMsgs(e,!0);break;case"syncOfflineFilterSysMsgs":this.onOfflineSysMsgs(e,!0);break;case"syncMsgReceipts":this.onOfflineMsgReceipts(e);break;case"syncDonnop":this.onDonnop(e,!0);break;case"syncSessionAck":this.syncSessionAck(e);break;case"syncSuperTeamSessionAck":this.syncSuperTeamSessionAck(e);break;case"syncRobots":this.onRobots(e);break;case"syncBroadcastMsgs":this.onBroadcastMsgs(e);break;case"syncDeleteSuperTeamMsgOfflineRoaming":this.onDeleteMsgOfflineRoaming(e);break;case"syncDeleteMsgSelf":this.syncDeleteMsgSelf(e);break;case"syncSessionsWithMoreRoaming":this.syncSessionsWithMoreRoaming(e);break;case"syncStickTopSessions":this.syncStickTopSessions(e);break;case"syncSessionHistoryMsgsDelete":this.syncSessionHistoryMsgsDelete(e)}},r.onDonnop=function(e,t){if(!e.error){var n=this,r=n.db,i=a.reverse(e.content.donnop);n.mergeDonnop(i);var o=n.dbDonnop();if(t){var s=e.content.timetag;n.timetags.donnop=s,r.enable&&(o=o.then((function(){return n.db.updateDonnopTimetag(s)})).catch((function(e){return n.logger.error("notify::onDonnop: ",e),Promise.reject(e)}))),o.cmd="donnop",n.syncPromiseArray.push(o)}else n.onPushNotificationMultiportConfigUpdate()}},r.onUpdateDonnop=function(e){if(!e.error){var t=e.obj;t&&(this.mergeDonnop(i.filterObj(t,["shouldPushNotificationWhenPCOnline"])),this.dbDonnop(),this.onPushNotificationMultiportConfigUpdate())}},r.getPushNotificationMultiportConfig=function(){return i.merge({},this.pushNotificationMultiportConfig)},r.mergeDonnop=function(e){this.pushNotificationMultiportConfig=i.merge({},this.pushNotificationMultiportConfig,e)},r.dbDonnop=function(){return this.db.enable?this.db.setDonnop(this.pushNotificationMultiportConfig):Promise.resolve()},r.onPushNotificationMultiportConfigUpdate=function(){var e=this;setTimeout((function(){var t=e.getPushNotificationMultiportConfig();e.logger.info("link::onPushNotificationMultiportConfigUpdate:",t),e.options.onPushNotificationMultiportConfigUpdate(t)}))}},function(e,t,n){var r=n(25).fn,i=n(0),a=(i.objs2accounts,i.teams2ids),o=n(209),s=n(166);r.processSuperTeam=function(e){var t,n,r,i=e.error;switch(void 0===e.obj&&(e.obj={}),e.cmd){case"sendSuperTeamMsg":this.onSendMsg(e);break;case"superTeamMsg":this.onMsg(e);break;case"sendSuperTeamCustomSysMsg":this.onSendSysMsg(e);break;case"superTeamCustomSysMsg":this.onSysMsg(e);break;case"syncSuperTeams":this.onSuperTeams(e);break;case"syncCreateSuperTeam":t=o.reverse(e.content.team),r=s.assembleOwner(t),this.logger.info("team::processTeam: sync createTeam",t&&t.teamId,r&&r.account),this.options.onSyncCreateSuperTeam(t,r),this.onCreateSuperTeam(t,r);break;case"getSuperTeamHistoryMsgs":case"searchSuperTeamHistoryMsgs":this.onHistoryMsgs(e);break;case"syncSendSuperTeamMsg":this.onMsg(e);break;case"addSuperTeamMembers":case"removeSuperTeamMembers":case"leaveSuperTeam":case"addSuperTeamManagers":case"removeSuperTeamManagers":case"transferSuperTeam":break;case"updateInfoInSuperTeam":i||((n=e.obj).account=this.account,n.id=s.genId(n.teamId,n.account),n=s.reverse(n),e.obj=n,this.onUpdateSuperTeamMember(n));break;case"updateNickInTeam":e.obj=s.reverse(e.obj);break;case"syncUpdateSuperTeamMember":n=s.reverse(e.content.teamMember),this.onUpdateSuperTeamMember(n);break;case"updateSuperTeam":e.obj=o.reverse(e.obj,!0);break;case"getSuperTeam":e.error||(e.obj=o.reverse(e.content.team));break;case"getSuperTeams":this.onSuperTeams(e);break;case"syncSuperTeamMembers":this.onSyncSuperTeamMembers(e);break;case"getSuperTeamMembers":e.error||this.onGetAllSuperTeamMembers(e);break;case"getSuperTeamMembersByJoinTime":case"getSuperTeamMembersByAccounts":case"getMutedSuperTeamMembers":e.error||this.onSuperTeamMembers(e);break;case"onDeleteSuperTeamMsg":this.onDeleteMsg(e);break;case"onSuperTeamMsgDelete":case"syncDeleteSuperTeamMsg":this.onMsgDeleted(e,!0);break;case"onMarkSuperTeamSessionAck":this.onMarkSessionAck(e);break;case"syncMarkSuperTeamSessionAck":this.syncMarkSessionAck(e)}},r.onSuperTeams=function(e){e.content=e.content||{};var t,n=this,r=n.db,i=n.packetFromSync(e),s=e.content.teams||[],c=!0,u=[],l=[];if(e.error)switch(e.error.code){case 803:e.error=null,c=!1}var m=new Promise((function(a,m){var p,f;e.error?i&&m(e.error):(c&&s.forEach((function(e){(e=o.reverse(e)).validToCurrentUser?u.push(e):l.push(e)})),s.length?(c=!0,t=e.content.timetag):c=!1,r.enable?(p=a,f=m,e.promise=new Promise((function(e,a){function o(){i?(d(),e(),p()):r.getSuperTeams().then((function(t){u=t,d(),e(),p()})).then(void 0,(function(e){e.message="db.getSuperTeams error",e.callFunc="superTeam::afterMergeData",a(e),f(e)}))}c?r.mergeSuperTeams(u,l,t).then((function(){o()})).then(void 0,(function(e){var t={callFunc:"superTeam::onSuperTeams:mergeData",message:"db.mergeSuperTeams error",event:e};a(t),f(t)})):(n.logger.warn("superTeam::onSuperTeams:mergeData: no teams need merge"),o())})).then(void 0,(function(e){throw e.message="merge teams data error",e.callFunc="superTeam::mergeData",f(e),e}))):(d(),a()))})).catch((function(e){return n.logger.error("superTeam::onSuperTeams: ",e),Promise.reject(e)}));function d(){n.timetags.superTeams=t,u.invalid=l,i?(n.syncResult.superTeams=u,n.syncResult.invalidSuperTeams=l):(n.logger.info("superTeam::onSuperTeams: not in syncing, get teams",a(u)),e.obj=u)}i&&(m.cmd="superteams",n.syncPromiseArray.push(m))},r.onCreateSuperTeam=function(e,t){var n=this.db;n.enable&&(n.putSuperTeam(e),n.putSuperTeamMembers(t))},r.onGetAllSuperTeamMembers=function(e){var t=this,n=this.db,r=e.raw.ser,i=this.superTeamMembersData[r]||{},a=i.teamId||e.obj&&e.obj.teamId;if(n.enable){var o=e.content&&e.content.timetag,s=200===e.raw.code?Promise.all(i.pArr):Promise.resolve();e.promise=s.then((function(){return n.getSuperTeamMembers(a).then((function(t){o&&n.updateSuperTeamMemberTimetag(a,o),e.obj={members:t,invalid:[],teamId:a}}))})).catch((function(e){return t.logger.error(e)}))}else e.obj={members:i.members,invalid:i.invalid,teamId:a};this.superTeamMembersData[r]=void 0},r.onSyncSuperTeamMembers=function(e){var t,n=this.db,r=[],i=[],a=e.content.members||[],o=e.raw.ser;if(e.obj&&(t=e.obj.teamId),t||(t=e.content.teamId),a.forEach((function(e){(e=s.reverse(e)).valid?i.push(e):r.push(e)})),n.enable){this.superTeamMembersData[o]=this.superTeamMembersData[o]||{teamId:t,pArr:[]};var c=Promise.resolve();e.content&&e.content.isAll&&(c=n.deleteSuperTeamMembers(t));var u=c.then((function(){return n.mergeSuperTeamMembers(t,i,r)})).then((function(){return Promise.resolve()}));this.superTeamMembersData[o].pArr.push(u)}else this.superTeamMembersData[o]=this.superTeamMembersData[o]||{teamId:t,members:[],invalid:[]},i.length&&(this.superTeamMembersData[o].members=this.api.mergeTeamMembers(this.superTeamMembersData[o].members,i)),r.length&&(this.superTeamMembersData[o].invalid=this.api.mergeTeamMembers(this.superTeamMembersData[o].invalid,r));e.raw=void 0},r.onSuperTeamMembers=function(e,t){var n,r=this.db,i=[],a=[];(e.content.members||[]).forEach((function(e){(e=s.reverse(e)).valid?a.push(e):i.push(e)})),e.obj&&(n=e.obj.teamId),n||(n=e.content.teamId||a[0]&&a[0].teamId),r.enable&&!t&&r.mergeSuperTeamMembers(n,a,i),e.obj={members:a,invalid:i,teamId:n}},r.onUpdateSuperTeamMember=function(e){e.updateTime||(e.updateTime=+new Date),this.logger.info("superTeam::onUpdateSuperTeamMember: ",e&&e.account),this.options.onUpdateSuperTeamMember(i.simpleClone(e));var t={teamId:e.teamId,memberUpdateTime:e.updateTime};this.onUpdateSuperTeam(t);var n=this.db;n.enable&&n.updateSuperTeamMember(e)},r.onUpdateSuperTeam=function(e){this.logger.info("superteam::onUpdateSuperTeam:",e&&e.teamId),this.options.onUpdateSuperTeam(i.simpleClone(e));var t=this.db;t.enable&&t.updateSuperTeam(e)}},function(e,t,n){var r=n(25).fn,i=n(0),a=i.objs2accounts,o=i.teams2ids,s=n(132),c=n(101);r.processTeam=function(e){var t=e.error,n=void 0,r=void 0,i=void 0;switch(void 0===e.obj&&(e.obj={}),e.cmd){case"createTeam":n=e.obj.team,t||(n=e.content.team),n=s.reverse(n),e.obj.team=n,i=c.assembleOwner(n),e.obj.owner=i,t||(this.logger.info("team::processTeam: create team ",n&&n.teamId,i&&i.account),this.onCreateTeam(n,i));break;case"syncCreateTeam":n=s.reverse(e.content.team),i=c.assembleOwner(n),this.logger.info("team::processTeam: sync createTeam",n&&n.teamId,i&&i.account),this.options.onsynccreateteam(n,i),this.onCreateTeam(n,i);break;case"sendSuperTeamMsg":case"sendTeamMsg":this.onSendMsg(e);break;case"teamMsg":this.onMsg(e);break;case"teamMsgs":this.onMsgs(e);break;case"addTeamMembers":case"removeTeamMembers":case"leaveTeam":case"dismissTeam":case"addTeamManagers":case"removeTeamManagers":case"transferTeam":break;case"updateInfoInTeam":t||((r=e.obj).account=this.account,r.id=c.genId(r.teamId,r.account),r=c.reverse(r),e.obj=r,this.mergeMyTeamMembers(r),this.onUpdateTeamMember(r));break;case"updateNickInTeam":e.obj=c.reverse(e.obj);break;case"updateTeam":e.obj=s.reverse(e.obj,!0);break;case"applyTeam":e.error||(e.obj=s.reverse(e.content.team));break;case"passTeamApply":this.updateTeamSysMsgState(e,"passed");break;case"rejectTeamApply":this.updateTeamSysMsgState(e,"rejected");break;case"acceptTeamInvite":this.updateTeamSysMsgState(e,"passed"),e.error||(e.obj=s.reverse(e.content.team));break;case"rejectTeamInvite":this.updateTeamSysMsgState(e,"rejected");break;case"getTeam":e.error||(e.obj=s.reverse(e.content.team));break;case"getTeams":this.onTeams(e);break;case"getTeamMembers":this.onTeamMembers(e);break;case"syncTeams":this.onTeams(e);break;case"syncTeamMembers":this.onTeamMembers(e);break;case"getTeamHistoryMsgs":case"searchTeamHistoryMsgs":this.onHistoryMsgs(e);break;case"syncSendTeamMsg":this.onMsg(e);break;case"notifyTeamMsgReads":this.onTeamMsgReceipt(e);break;case"syncUpdateTeamMember":r=c.reverse(e.content.teamMember),this.onUpdateTeamMember(r),r.account===this.account&&this.mergeMyTeamMembers(r);break;case"updateMuteStateInTeam":break;case"getMyTeamMembers":e.error||(e.obj=c.reverseMembers(e.content.teamMembers));break;case"getMutedTeamMembers":e.error||(e.obj={teamId:e.obj.teamId,members:c.reverseMembers(e.content.teamMembers)});break;case"syncMyTeamMembers":this.onSyncMyTeamMembers(e);break;case"sendTeamMsgReceipt":this.sendTeamMsgReceipt(e);break;case"getTeamMsgReads":this.getTeamMsgReads(e);break;case"getTeamMsgReadAccounts":this.getTeamMsgReadAccounts(e);break;case"getTeamsById":this.getTeamsById(e)}},r.getTeamMsgReads=function(e){var t=this;if(e.error)this.logger.error("team::sendTeamMsgReceipt: ",e.error);else{var n=i._get(e,"content.teamMsgReceipts")||[];if(this.db.enable){var r=[];n.forEach((function(e){e.idClient&&r.push({idClient:e.idClient,unread:+e.unread,read:+e.read})})),r.length>0&&setTimeout((function(){return t.db.updateMsgBatch(r)}),0)}}},r.getTeamMsgReadAccounts=function(e){if(e.error)this.logger.error("team::getTeamMsgReadAccounts: ",e.error);else{var t=i._get(e,"content.readAccounts")||[],n=i._get(e,"content.unreadAccounts")||[],r=i._get(e,"content.teamMsgReceipt.idClient")||[];this.db.putMsgReadDetail({idClient:r,readAccounts:t,unreadAccounts:n})}},r.sendTeamMsgReceipt=function(e){var t=this;if(e.error)this.logger.error("team::sendTeamMsgReceipt: ",e.error);else{var n=i._get(e,"obj.teamMsgReceipts")||[],r=i._get(e,"content.teamMsgReceipts")||[];if(this.db.enable){var a=[];n.forEach((function(e){r.some((function(t){return e.idServer===t.idServer}))||a.push({idClient:e.idClient,hasRead:!0})})),a.length>0&&(this.logger.log("sendTeamMsgReceipt::updateMsgBatch"),setTimeout((function(){return t.db.updateMsgBatch(a)}),0))}}},r.onCreateTeam=function(e,t){var n=this.db;n.enable&&(n.putTeam(e),n.putTeamMembers(t)),this.options.onCreateTeam(e,t)},r.onTeams=function(e){e.content=e.content||{};var t,n=this,r=n.db,i=n.packetFromSync(e),a=e.content.teams||[],c=!0,u=[],l=[];if(e.error)switch(e.error.code){case 803:e.error=null,c=!1}var m=new Promise((function(o,m){var p,f;e.error?i&&m(e.error):(c&&a.forEach((function(e){(e=s.reverse(e)).validToCurrentUser?u.push(e):l.push(e)})),a.length?(c=!0,t=e.content.timetag):c=!1,r.enable?(p=o,f=m,e.promise=new Promise((function(e,a){function o(){i?(d(),e(),p()):r.getTeams().then((function(t){u=t,d(),e(),p()})).catch((function(e){e.message="db.getTeams error",e.callFunc="team::afterMergeData",a(e),f(e)}))}c?r.mergeTeams(u,l,t).then((function(){o()})).catch((function(e){var t={callFunc:"team::onTeams:mergeData",message:"db.mergeTeams error",event:e};a(t),f(t)})):(n.logger.warn("team::onTeams:mergeData: no teams need merge"),o())})).then(void 0,(function(e){throw e.message="merge teams data error",e.callFunc="team::mergeData",f(e),e}))):(d(),o()))})).catch((function(e){return n.logger.error("team::onTeams: ",e),Promise.reject(e)}));function d(){n.timetags.teams=t,u.invalid=l,i?(n.syncResult.teams=u,n.syncResult.invalidTeams=l,n.syncing||n.onSyncDone()):(n.logger.info("team::onTeams: not in syncing, get teams",o(u)),e.obj=u)}i&&(m.cmd="teams",n.syncPromiseArray.push(m))},r.getTeamsById=function(e){if(e.error){if(816!==e.error.code)return;this.logger.error("team::getTeamsById: ",e.error),e.error=null}e.content.teams=e.content.teams.map((function(e){return s.reverse(e)})),e.obj=e.content},r.onTeamMembers=function(e){e.content=e.content||{};var t,n,r=this,i=(r.db,r.packetFromSync(e)),o=e.content.members||[],s=!0,u=[],l=[];if(e.obj&&(n=e.obj.teamId),n||(n=e.content.teamId),n=""+n,e.error)switch(e.error.code){case 406:e.error=null,s=!1}var m=new Promise((function(m,d){e.error?i&&(r.logger.error("team::onTeamMember: team error:",n,e.error),d({callFunc:"team::onTeamMembers",event:e.error,message:"teamId-"+n+" \u83b7\u53d6\u7fa4\u6210\u5458\u9519\u8bef"})):(s&&o.forEach((function(e){(e=c.reverse(e)).valid?u.push(e):l.push(e)})),o.length?(s=!0,t=e.content.timetag):s=!1,u.invalid=l,i?(r.syncTeamMembersResult[n]=u,r.syncTeamMembersResult[n+"-invalid"]=l,r.timetags["team-"+n]=t):(r.logger.info("team::onTeamMembers: not syncing, get members",n,a(u)),e.obj={teamId:n,members:u}),m())}));i&&(m.cmd=n,r.syncTeamMembersPromiseArray.push(m))},r.onUpdateTeamMember=function(e){e.updateTime||(e.updateTime=+new Date),this.logger.info("team::onUpdateTeamMember: ",e&&e.account),this.options.onupdateteammember(i.simpleClone(e));var t={teamId:e.teamId,memberUpdateTime:e.updateTime};this.onUpdateTeam(t);var n=this.db;n.enable&&n.updateTeamMember(e)},r.onUpdateTeam=function(e){this.logger.info("team::onUpdateTeam:",e&&e.teamId),this.options.onUpdateTeam(i.simpleClone(e));var t=this.db;t.enable&&t.updateTeam(e)},r.onSyncMyTeamMembers=function(e){var t=this,n=t.db,r=c.reverseMembers(e.content.teamMembers);if(n.enable){var i=n.putTeamMembers(r).then((function(){return n.updateMyTeamMembersTimetag(e.content.timetag)})).catch((function(e){return t.logger.error("team::syncMyTeamMember: ",e),Promise.reject(e)}));i.cmd="myTeamMembers",t.syncTeamMembersPromiseArray.push(i)}t.mergeMyTeamMembers(r)},r.mergeMyTeamMembers=function(e){i.isArray(e)||(e=[e]);var t=this.myTeamMembersMap=this.myTeamMembersMap||{};e.forEach((function(e){var n=e.teamId;t[n]=i.merge(t[n],e)}))},r.notifyForNewTeamMsg=function(e){i.isArray(e)||(e=[e]);var t=this,n=this.myTeamMembersMap||{},r={},a=[];e.forEach((function(e){i.exist(n[e])?r[e]=n[e].muteNotiType:a.push(e)}));var o=Promise.resolve({map:r});return a.length&&(o=t.api.getMyTeamMembers({teamIds:a,promise:!0}).then((function(n){t.mergeMyTeamMembers(n),n.forEach((function(e){r[e.teamId]=e.muteNotiType}));var i=e.filter((function(e){return!r[e]}));return Promise.resolve({map:r,miss:i})})).catch((function(e){return Object.keys(r).length>0?Promise.resolve({map:r,miss:a,error:e}):Promise.reject(e)}))),o},r.updateTeamSysMsgState=function(e,t){var n,r=e.error;r&&(t="error",r=i.filterObj(r,"code message")),n={idServer:e.obj.idServer,state:t},r&&(n.error=r),this.updateSysMsg(n)},r.onTeamMsgReceipt=function(e){var t=e.content,n=e.error;n&&this.logger.error("team::onTeamMsgReceipt:",n),t&&t.teamMsgReceipts&&this.options.onTeamMsgReceipt(t)}},function(e,t,n){var r=n(25).fn,i=n(0);r.onRobots=function(e){var t=e.content;if(i.isFunction(this.options.onrobots)&&Array.isArray(t.robots)){var n=t.robots.filter((function(e){return!!e.botid}));n.length>0&&this.options.onrobots(n||[])}}},function(e,t,n){var r,i=(r=n(316))&&r.__esModule?r:{default:r},a=n(25).fn,o=n(0),s=o.objs2accounts,c=n(315),u=n(160);a.processFriend=function(e){var t=e.obj,n=e.content,r=e.error;switch(e.cmd){case"friendRequest":this.updateFriendSysMsg(e),r||this.onFriendRequest(t);break;case"syncFriendRequest":this.onFriendRequest(n,!0);break;case"deleteFriend":r||this.onDeleteFriend(t);break;case"syncDeleteFriend":this.onDeleteFriend(n,!0);break;case"updateFriend":r||this.onUpdateFriend(t);break;case"syncUpdateFriend":this.onUpdateFriend(n.friend,!0);break;case"getFriends":case"syncFriends":this.onFriends(e);break;case"syncFriendUsers":this.onFriendUsers(e)}},a.onFriends=function(e){var t,n=this,r=n.db,i=e.error,a=n.packetFromSync(e),o=e.content.friends,u=!0,l=[],m=[],d=new Promise((function(d,f){var g,h;i?a&&f(i):(u&&o.forEach((function(e){(e=c.reverse(e)).valid?l.push(e):m.push(e)})),n.logger.info("friend::onFriends: parse friends",s(l),"delete",s(m)),o.length?(u=!0,t=e.content.timetag):u=!1,r.enable?(g=d,h=f,e.promise=new Promise((function(e,i){function o(){a?(p(),e(),g()):r.getFriends().then((function(t){l=t,p(),e(),g()})).then(void 0,(function(e){e._msg="get friends error",i(e),h(e)}))}u?r.mergeFriends(l,m,t).then((function(){o()})).then(void 0,(function(e){e._msg="merge friends error",i(e),h(e)})):(n.logger.info("friend::onFriends: no merge friends"),o())})).then(void 0,(function(e){throw e._msg="merge friends data error",h(e),e}))):(p(),d()))})).catch((function(e){return n.logger.error("friend::onFriends: ",e),Promise.reject(e)}));function p(){n.timetags.friends=t,l.invalid=m,a?(n.syncResult.friends=l,n.syncResult.invalidFriends=m):(n.logger.info("friend::onFriends: get friends bingo",l&&l.map((function(e){return e.account}))),e.obj=l)}a&&(d.cmd="friends",n.syncPromiseArray.push(d))},a.onFriendRequest=function(e,t){var n=Promise.resolve(),r=this.db,a=e.type,o=(0,i.default)(e,["type"]);if("addFriend"===(a=e.type=c.getTypeFromByte(a)||a)||"passFriendApply"===a){var s=e.friend=c.assembleFriend(o);r.enable&&(n=r.putFriend(s))}return t&&this.onSyncFriendAction(e),n},a.onSyncFriendAction=function(e){this.logger.info("friend::onSyncFriendActionon: "+e.type+", ",e.account),this.options.onsyncfriendaction(e)},a.onDeleteFriend=function(e,t){var n=Promise.resolve(),r=this.db;return r.enable&&(n=r.deleteFriend(e.account)),t&&(e.type="deleteFriend",this.onSyncFriendAction(e)),n},a.onUpdateFriend=function(e,t){var n=this.db,r=c.reverse(e);n.enable&&n.updateFriend(r),t&&this.onSyncFriendAction({type:"updateFriend",friend:r})},a.onFriendUsers=function(e){var t=this.db,n=e.content,r=n.users.map((function(e){return u.reverse(e)}));this.logger.info("friend::onFriendUsers: parse users",s(r));var i=n.timetag,a=Promise.resolve();t.enable&&(a=t.mergeFriendUsers(r,i)),this.timetags.friendUsers=i,a.cmd="friendUsers",this.syncPromiseArray.push(a),this.syncResult.users=r,this.syncing||this.onSyncDone()},a.updateFriendSysMsg=function(e){var t,n,r=e.obj,i=e.error;if(e.obj.idServer){if(i)t="error",i=o.filterObj(i,"code message");else{var a=r.type;switch(a=c.getTypeFromByte(a)||a){case"passFriendApply":t="passed";break;case"rejectFriendApply":t="rejected"}}n={idServer:r.idServer,state:t},i&&(n.error=i),this.updateSysMsg(n)}}},function(e,t,n){var r=n(0);function i(){}i.parse=function(e){var t=r.copy(e);return t.isBlacked="1"===t.isBlacked,t.isMuted="1"===t.isMuted,t.createTime=+t.createTime,t.updateTime=+t.updateTime,t},e.exports=i},function(e,t,n){var r=n(25).fn,i=n(0),a=i.objs2accounts,o=n(489),s=n(160);r.processUser=function(e){var t,n=this,r=n.db,i=e.obj,a=e.error,o=e.content;switch(e.cmd){case"markInBlacklist":a||n.markInBlacklist(i);break;case"syncMarkInBlacklist":n.markInBlacklist(o,!0);break;case"markInMutelist":a||n.markInMutelist(i);break;case"syncMarkInMutelist":n.markInMutelist(o,!0);break;case"getRelations":a||n.onRelations(e);break;case"syncMyInfo":n.onMyInfo(e,!0);break;case"updateMyInfo":a||(i.updateTime=o.timetag,n.onUpdateMyInfo(e,i));break;case"syncUpdateMyInfo":n.onUpdateMyInfo(e,o.user,!0);break;case"getUsers":a||(t=o.users.map((function(e){return e=s.reverse(e),n.mergeUser(e),e})),e.obj=t,r.enable&&r.putUsers(t));break;case"updateDonnop":n.onUpdateDonnop(e);break;case"syncUpdateDonnop":n.onDonnop(e,!1)}},r.onMyInfo=function(e){var t=this,n=t.db,r=e.error,i=e.content,a=!0,o=void 0,c=new Promise((function(e,c){var l,m;r?(r&&(r.callFunc="user::onMyInfo"),e(r),t.syncData()):(o=s.reverse(i.user),n.enable?(l=e,m=c,n.mergeMyInfo(o,a).then((function(){u(),l()})).then(void 0,(function(e){e.message="db.mergeMyInfo error",e.callFunc="user::onMyInfo",m(e)}))):(u(),e()))})).catch((function(e){return t.logger.error("user::onMyInfo: ",e),Promise.reject(e)}));function u(){t.timetags.myInfo=o.updateTime,t.syncResult.myInfo=o}c.cmd="myInfo",t.syncPromiseArray.push(c)},r.onUpdateMyInfo=function(e,t,n){var r=this.db,a=s.reverse(t),o=i.merge(this.myInfo,a);this.myInfo=o,n?(this.logger.info("user::onUpdateMyInfo:",o&&o.account),this.options.onupdatemyinfo(o)):e.obj=o,r.enable&&(a.account=this.account,r.updateUser(a))},r.onRelations=function(e){var t=this,n=t.db,r=e.error,i=t.packetFromSync(e),s=e.content.specialRelations,c=!0,u=void 0,l=[],m=[],d=[],p=[],f=new Promise((function(f,h){var y,b;r?i&&(f(r),t.syncData()):(s.forEach((function(e){var t={account:(e=o.parse(e)).account,createTime:e.createTime,updateTime:e.updateTime};e.isBlacked?l.push(t):m.push(t),e.isMuted?d.push(t):p.push(t)})),t.logger.info("user::onRelations: parse blacklist",a(l),l,"delete",a(m),m),t.logger.info("user::onRelations: parse mutelist",a(d),d,"delete",a(p),p),s.length?(c=!0,u=e.content.timetag):c=!1,n.enable?(y=f,b=h,e.promise=new Promise((function(e,r){function a(){i?(g(),e(),y()):n.getRelations().then((function(t){l=t[0],d=t[1],g(),e(),y()})).then(void 0,(function(e){e.message="db.getRelations error",e.callFunc="user::onRelations",r(e),b(e)}))}c?n.mergeRelations(l,m,d,p,u).then((function(){a()})).then(void 0,(function(e){e.message="db.mergeRelations error",e.callFunc="user::onRelations",r(e),b(e)})):(t.logger.warn("user::onRelations: no relations need merge"),a())})).then(void 0,(function(e){throw e.message="merge relations data error",e.callFunc="user::onRelations",b(e),e}))):(g(),f()))})).catch((function(e){return t.logger.error("user::onRelations: ",e),Promise.reject(e)}));function g(){t.timetags.relations=u,l.invalid=m,d.invalid=p,i?(t.syncResult.blacklist=l,t.syncResult.mutelist=d,t.syncResult.invalidBlacklist=m,t.syncResult.invalidMutelist=p):(t.logger.info("user::onRelations: get relations",l,d),e.obj.blacklist=l,e.obj.mutelist=d)}i&&(f.cmd="relations",t.syncPromiseArray.push(f))},r.markInBlacklist=function(e,t){var n=this.db;e.record={account:e.account,updateTime:+new Date},n.enable&&n.markInBlacklist(e),t&&(this.logger.info("user::markInBlacklist:",e),this.options.onsyncmarkinblacklist(e))},r.markInMutelist=function(e,t){var n=this.db;e.record={account:e.account,updateTime:+new Date},n.enable&&n.markInMutelist(e),t&&(this.logger.info("user::markInMutelist:",e),this.options.onsyncmarkinmutelist(e))},r.mergeUser=function(e){this.userSet[e.account]=e}},function(e,t,n){var r,i=(r=n(165))&&r.__esModule?r:{default:r},a=n(25).fn,o=n(0),s=n(29),c=o.undef,u=o.objs2ids,l=o.objs2accounts,m=o.teams2ids,d=n(130),p=o.getGlobal();a.beforeSync=function(){var e=this.db;return e.enable?e.clearSendingMsgs():Promise.resolve()},a.syncData=function(){var e=this,t=e.db,n=e.options,r=t.enable;function i(t){e.syncPromiseArray=[],e.syncResult={},e.syncTeamMembersPromiseArray=[],e.syncSuperTeamMembersPromiseArray=[],e.syncTeamMembersResult={},e.checkNosReqNum=0,e.getNosOriginUrlReqNum=0,o.verifyBooleanWithDefault(n,"syncRelations syncFriends syncFriendUsers syncTeams syncSuperTeams syncRoamingMsgs syncSuperTeamRoamingMsgs syncMsgReceipts syncExtraTeamInfo",!0,"","sync::syncData"),o.verifyBooleanWithDefault(n,"syncFilter syncTeamMembers syncSuperTeamMembers",!1,"","sync::syncData");var i={};t=t||{},p._nimForceSyncIM&&(e.logger.warn("sync::syncData: nimForceSyncIM"),delete t.teams,p._nimForceSyncIM=!1),i.myInfo=t.myInfo||0,i.deleteMsgSelf=t.deleteMsgSelf||0,i.offlineMsgs=0,n.syncRelations&&(i.relations=t.relations||0),n.syncFriends&&(i.friends=t.friends||0),n.syncFriendUsers&&(i.friendUsers=t.friendUsers||0),n.syncRobots&&(i.robots=t.robots||0),n.syncTeams&&(i.teams=t.teams||0),n.syncSuperTeams&&(i.superTeams=t.superTeams||0),n.syncStickTopSessions&&(i.stickTopSessions=t.stickTopSessions||0),n.syncSessionUnread&&(i.sessionAck=r&&t.sessionAck||0,i.superTeamSessionAck=r&&t.superTeamSessionAck||0),n.syncRoamingMsgs&&(i.roamingMsgs=r&&t.roamingMsgs||0),n.syncSuperTeamRoamingMsgs&&(i.superTeamRoamingMsgs=r&&t.superTeamRoamingMsgs||0),n.syncMsgReceipts&&(i.msgReceipts=t.msgReceipts||0),n.syncExtraTeamInfo&&(i.myTeamMembers=t.myTeamMembers||0),n.syncBroadcastMsgs&&(i.broadcastMsgs=t.broadcastMsg||0),i.donnop=t.donnop||0,i.deleteMsg=t.deleteMsg||0,i.deleteSuperTeamMsg=t.deleteSuperTeamMsg||0,i.sessionHistoryMsgsDelete=t.sessionHistoryMsgsDelete||0,i.netcallMsgs=0,n.syncFilter&&(i.filterMsgs=0);var a=e.onSyncData.bind(e);a.isImSyncDataCb=!0,e.logger.info("syncData:: start sync",i),e.sendCmd("sync",{sync:i,isImSyncDataObj:!0},a)}e.syncing=!0,r?e.beforeSync().then((function(){return e.db.getTimetags()})).then((function(e){i(e)}),(function(){i()})):i(e.timetags)},a.onSyncData=function(e,t){e&&this.syncRetryTimes>3&&(this.syncRetryTimes=0,e.callFunc="sync::onSyncData",this.onCustomError("SYNC_DATA_ERROR",e))},a.processSync=function(e){switch(this.syncRetryTimes=this.syncRetryTimes||0,this.syncRetryTimes++,e.cmd){case"syncDone":e.error?this.syncRetryTimes>3||this.syncData():(this.timetags.sync=e.content.timetag,this.onSyncDone());break;case"syncTeamMembersDone":this.onSyncTeamMembersDone()}},a.onSyncDone=function(e){var t,n,r,a,p,f,g,h,y,b,v,S,T,M,C,k,A,I,P,x,O,_,w,E,j,R,N,L=this,D=L.db,B=D.enable,F=L.options,U=L.syncPromiseArray,G=L.syncResult;function H(){if(U){L.logger.info("sync::onSyncDone: after sync",o.promises2cmds(U)),U=[],n=G.blacklist||[],r=G.invalidBlacklist||[],a=G.mutelist||[],p=G.invalidMutelist||[],f=G.friends,g=G.invalidFriends||[],h=G.myInfo,y=G.users,v=G.superTeams,T=G.invalidSuperTeams,b=G.teams,S=G.invalidTeams||[],M=G.sessions||{},C=G.ackMap,G.msgReceipts,k=G.roamingMsgs,A=G.offlineMsgs,I=G.offlineFilterMsgs,x=G.offlineSysMsgs,O=G.offlineCustomSysMsgs,_=G.offlineFilterSysMsgs,w=G.offlineFilterCustomSysMsgs,G.broadcastMsgs,E=G.sysMsgUnread,j=G.sessionsWithMoreRoaming,N=G.clearServerHistoryMsgs||[];var e=Promise.resolve();!function(){if(B){var t=[function(){var e=[];return k&&k.forEach((function(t){e=[].concat((0,i.default)(e),(0,i.default)(t.msgs))})),A&&A.forEach((function(t){e=[].concat((0,i.default)(e),(0,i.default)(t.msgs))})),e.length?D.putMsg(e).then((function(){return e})):Promise.resolve(e)}()];M&&Object.keys(M).forEach((function(e){t.push(D.putSession(M[e]))})),e=Promise.all(t).then((function(){var e=[].concat((0,i.default)(Object.keys(C||{})),(0,i.default)(Object.keys(M||{})));e=e.filter((function(e,t,n){return n.indexOf(e)===t}));var t=[];return e.forEach((function(e){var n=M[e],r=void 0;(n.lastMsg||n.ack)&&(r=(r=n.ack?Promise.resolve(n):D.getSession(n.id)).then((function(t){var n=t.ack||0;return D.getMsgCountAfterAck({shouldCountNotifyUnread:L.options.shouldCountNotifyUnread,sessionId:e,ack:n}).then((function(n){return t.unread=n||0,M[e]=L.mergeSession(t),D.updateSession(t)}))})),t.push(r))})),Promise.all(t)})).then((function(){var e=[];return L.saveAck.p2pTeam&&e.push(D.updateSessionAck(L.saveAck.p2pTeam).catch((function(e){return L.logger.error("sessionAck::syncSessionAck::updatetimetag db",e),Promise.reject(e)}))),L.saveAck.superTeam&&e.push(D.updateSuperTeamSessionAck(L.saveAck.superTeam).catch((function(e){return L.logger.error("sessionAck::syncSuperTeamSessionAck::updatetimetag db",e),Promise.reject(e)}))),Promise.all(e)}))}else if(M){var n,r;[k,A].forEach((function(e){e&&e.forEach((function(e){(n=M[e.sessionId]).unread=n.unread||0,n.unreadMsgs=n.unreadMsgs||[],r=n.ack||0,e.msgs.forEach((function(e){r>=e.time||("notification"===e.type?L.options.shouldCountNotifyUnread(e)&&n.unread++:"in"===e.flow&&!1!==e.isUnreadable&&(n.unread++,n.unreadMsgs.push(e)))})),L.mergeSession(n)}))}))}}(),e.then((function(){if(B&&!L.hasSynced)L.hasSynced=!0,F.syncRelations&&(t=D.getRelations().then((function(e){n=e[0],a=e[1],n.invalid=r,a.invalid=p})).catch((function(e){return e._msg="on relations error",L.logger.error("sync::syncRelation: ",e),Promise.reject(e)})),U.push(t)),F.syncFriends&&(t=D.getFriends().then((function(e){(f=e).invalid=g})).catch((function(e){return e._msg="on friends error",L.logger.error("sync::syncFriends: ",e),Promise.reject(e)})),U.push(t)),c(h)&&(t=D.getUser(L.account).then((function(e){h=e})).catch((function(e){return e._msg="on myInfo error",L.logger.error("sync::syncMyInfo: ",e),Promise.reject(e)})),U.push(t)),F.syncFriendUsers&&(t=D.getFriends().then((function(e){return e.map((function(e){return e.account}))})).then((function(e){return D.getUsers(e)})).then((function(e){y=e})).catch((function(e){return e._msg="on users error",L.logger.error("sync::syncFriendUser: ",e),Promise.reject(e)})),U.push(t)),F.syncTeams&&(t=D.getTeams().then((function(e){(b=e).invalid=S})).catch((function(e){return e._msg="on teams error",L.logger.error("sync::syncTeams: ",e),Promise.reject(e)})),U.push(t)),F.syncSuperTeams&&(t=D.getSuperTeams().then((function(e){(v=e).invalid=T})).catch((function(e){return e._msg="on superteams error",L.logger.error("sync::syncSuperTeams: ",e),Promise.reject(e)})),U.push(t)),t=D.getTeamMembersByAccount(L.account).then((function(e){L.mergeMyTeamMembers(e)})).catch((function(e){return L.logger.error("sync::getTeamMembersByAccount: ",e),Promise.reject(e)})),U.push(t),t=D.getDonnop().then((function(e){L.mergeDonnop(e)})).catch((function(e){return L.logger.error("sync::donnop: ",e),Promise.reject(e)})),U.push(t),t=D.getSessions({limit:500,includeDeleted:!0}).then((function(e){M=e})).catch((function(e){return L.logger.error("sync::getSession: ",e),Promise.reject(e)})),U.push(t),t=D.getSysMsgUnread().then((function(e){E=e})).catch((function(e){return e._msg="on sysMsgUnread error",L.logger.error("sync::getSysMsgUnread: ",e),Promise.reject(e)})),U.push(t),U.push(D.getSessionsWithMoreRoaming().then((function(e){j=e})));else{var e=[],i=void 0;Object.keys(M).forEach((function(t){(i=M[t]).lastMsg&&e.push(i)})),M=e.sort((function(e,t){return t.updateTime-e.updateTime}))}Promise.all(U).then(W).then(z,(function(e){e.callFunc="sync::onSyncDone",e.message="taskAfterSync syncDBDataPromise \u51fa\u9519",L.onCustomError("SYNC_SESSION_ACK_ERROR",e)}))}))}else L.logger.warn("sync::onSyncDone: after sync --no promiseArray")}function W(){L.logger.info("sync::onSyncDone: taskAfterSync"),function(){if(G.deleteMsgSysMsgs){var e={};k&&k.forEach((function(t){e[t.sessionId]=t}));var t={};A&&A.forEach((function(e){t[e.sessionId]=e}));var n=L.api;G.deleteMsgSysMsgs.forEach((function(r){r.sysMsgs.forEach((function(r){var i=r.msg,a=i.sessionId;[e,t].forEach((function(e){e[a]&&(e[a].msgs=n.cutMsgs(e[a].msgs,i))}))}))})),D.enable||[k,A].forEach((function(e){e&&e.forEach((function(e){if(e.msgs.length){var t=L.genSessionByMsgs(e.msgs);L.cacheSyncedSession(t),M=n.mergeSessions(M,t)}else M=n.cutSessions(M,{id:e.sessionId})}))}))}}(),(R=L.syncResult.stickTopSessions||[]).forEach((function(e,t){R[t]=L.mergeSession(e)}));var e=[L.deleteMsgOfflineRoaming(G.deleteMsgSysMsgs,M)];return N&&N.forEach((function(t){e.push(function(e,t){var n;L.logger.info("sync::taskAfterSync:sessionHistoryMsgsDelete "+e),t=t||(new Date).getTime();var r=M.filter((function(t){return t.id===e}));n=L.findSession(e)||r[0];var i=!1!==F.rollbackClearMsgsUnread,a=[];return D.enable&&a.push(D.deleteMsgsBySessionId({sessionId:e,end:t})),i&&n&&(n.lastMsg=null,n.unread=0,n=L.mergeSession(n),D.enable&&a.push(D.updateSession(n))),Promise.all(a)}(t.sessionId,t.time))})),Promise.all(e)}function z(){setTimeout(q,0)}function q(){var e,t,r=[],i=[];n&&n.length&&(L.logger.info("sync::notifyDataAsync: on blacklist",l(n)),F.onblacklist(n)),a&&a.length&&(L.logger.info("sync::notifyDataAsync: on mutelist",l(a)),F.onmutelist(a)),f&&(L.logger.info("sync::notifyDataAsync: on friends",l(f)),F.onfriends(f)),h&&(L.logger.info("sync::notifyDataAsync: on myInfo"),L.myInfo=h,F.onmyinfo(o.copy(h))),y&&(y.forEach((function(e){L.mergeUser(e)})),L.logger.info("sync::notifyDataAsync: on users",l(y)),F.onusers(y)),b&&(L.logger.info("sync::notifyDataAsync: on teams",m(b)),F.onteams(b)),v&&(L.logger.info("sync::notifyDataAsync: onSuperTeams",m(v)),F.onSuperTeams(v)),M&&M.length&&(M=M.filter((function(e){return L.mergeSession(e),!e.isDeleted&&(d.trim(e),!0)})),L.logger.info("sync::notifyDataAsync: on sessions",u(M),o.secureOutput("session",M)),F.onsessions(M)),R&&R.length&&(R.forEach((function(e){L.mergeSession(e),d.trim(e)})),L.logger.info("sync::notifyDataAsync: onStickTopSessions",u(R),o.secureOutput("session",R)),F.onStickTopSessions(R)),k&&k.forEach((function(e){"superTeam"===e.scene?i.push(e.timetag):r.push(e.timetag),(t=e.msgs).length&&(L.logger.info("sync::notifyDataAsync: on roaming msgs",e.sessionId,t.length),F.onroamingmsgs(e))})),A&&A.forEach((function(e){"superTeam"===e.scene?i.push(e.timetag):r.push(e.timetag),(t=e.msgs).length&&(L.logger.info("sync::notifyDataAsync: on offline msgs",e.sessionId,t.length,t.map((function(e){return e.idServer}))),F.onofflinemsgs(e))})),I&&I.forEach((function(e){r.push(e.timetag),(t=e.msgs).length&&(L.logger.info("sync::notifyDataAsync: on offline filter msgs",e.sessionId,t.length),F.onofflinefiltermsgs(t))})),j&&(L.logger.info("sync::notifyDataAsync: on sessionsWithMoreRoaming",u(j),j),F.onSessionsWithMoreRoaming(j));var s=[],c=[];G.deleteMsgSysMsgs&&G.deleteMsgSysMsgs.forEach((function(e){"roaming"===e.type?s=s.concat(e.sysMsgs):c=c.concat(e.sysMsgs)})),s.length&&(P=(P=P||[]).concat(s)),c.length&&(x=(x=x||[]).concat(c)),P&&(L.logger.info("sync::notifyDataAsync: on roaming sys msgs",P.length),F.onroamingsysmsgs(P)),x&&(L.logger.info("sync::notifyDataAsync: on offline sys msgs",x.length),F.onofflinesysmsgs(x)),_&&(L.logger.info("sync::notifyDataAsync: on offline filter sys msgs",_.length),F.onofflinefiltersysmsgs(_)),O&&(L.logger.info("sync::notifyDataAsync: on offline custom sys msgs",O.length),F.onofflinecustomsysmsgs(O)),w&&(L.logger.info("sync::notifyDataAsync: on offline filter custom sys msgs",w.length),F.onofflinefiltercustomsysmsgs(w)),E&&(E=o.merge({},L.sysMsgUnread,E),L.sysMsgUnread=o.merge({},E),L.logger.info("sync::notifyDataAsync: on sysMsgUnread",E),F.onsysmsgunread(E));var p=L.getPushNotificationMultiportConfig();L.logger.info("sync::notifyDataAsync: on pushNotificationMultiportConfig",p),F.onPushNotificationMultiportConfig(p);var g=i.length&&Math.max.apply(Math,i);if(e=r.length&&Math.max.apply(Math,r),D.enable){var S=[];g&&S.push(L.db.updateSuperTeamRoamingMsgTimetag(g)),e&&S.push(L.db.updateRoamingMsgTimetag(e)),Promise.all(S).then(V).catch(V)}else L.timetags.superTeamRoamingMsgs=g,L.timetags.roamingMsgs=e,V();L.syncPromiseArray=[],L.syncResult={}}function V(){if(L.processUnsettledMsgs(),L.processUnsettledSysMsgs(),L.syncing&&F.onsyncdone(),L.syncing=!1,F.syncTeamMembers&&b&&b.length)throw new s("sync team members api deprecated!")}U&&U.length?Promise.all(U).then(H).catch((function(e){H(),L.logger.error(e),e.callFunc="sync::onSyncDone",e.message="afterSync syncNormalPromise \u51fa\u9519",L.onCustomError("SYNC_promiseArray_ERROR",e)})):H()},a.syncTeamMembers=function(e){var t,n,r=this;t=r.timetags,n={},t=t||{},e.forEach((function(e){n[e.teamId]=0}),r),r.sendCmd("syncTeamMembers",{sync:n},r.onSyncTeamMembers.bind(r))},a.onSyncTeamMembers=function(e,t){e.callFunc="sync::onSyncTeamMembers",e.message="\u540c\u6b65\u7fa4\u6210\u5458\u9519\u8bef",this.onCustomError("SYNC_TEAM_MEMBERS_ERROR",e)},a.onSyncTeamMembersDone=function(){var e,t=this,n=t.db,r=t.options,i=t.syncTeamMembersResult,a=t.syncTeamMembersPromiseArray;function s(){t.logger.log("sync::onSyncTeamMembersDone: afterSync",o.promises2cmds(a)),a=[],n.enable&&!t.hasSyncedTeamMembers?(t.hasSyncedTeamMembers=!0,function(){if(!r.syncTeams||!r.syncTeamMembers)return m();n.getTeams().then((function(n){n.forEach((function(n){var r=n.teamId;e=new Promise((function(e,n){t.api.getTeamMembers({teamId:r,done:function(t,a){t&&n({callFunc:"sync::getTeamMembers: teamId-"+r,message:"sync team members error"}),i[r]=a.members||[],e()}})})),a.push(e)})),a.length?Promise.all(a).then(c,(function(e){e.callFunc="sync::onSyncTeamMembersDone",e.message="pullFullData promiseArray notifyData \u9519\u8bef",t.onCustomError("SYNC_TEAM_MEMBERS_ERROR",e)})):c()}),(function(e){e.callFunc="sync::onSyncTeamMembersDone",e.message="pullFullData getTeams \u9519\u8bef",t.onCustomError("SYNC_TEAM_MEMBERS_ERROR",e)}))}()):c()}function c(){setTimeout(u,0)}function u(){var e,n;Object.keys(i).forEach((function(a){-1===a.indexOf("invalid")&&(e=i[a],n=i[a+"-invalid"]||[],e.invalid=n,function(e,n){t.logger.info("sync::onSyncTeamMembersDone: onTeamMembers",e,l(n),n),r.onteammembers({teamId:e,members:n})}(a,e))})),m()}function m(){t.logger.info("sync::onSyncTeamMembersDone: bingo"),r.onsyncteammembersdone(),t.syncTeamMembersResult=null,t.syncTeamMembersPromiseArray=null}a.length?Promise.all(a).then(s,(function(e){e.callFunc="sync::onSyncTeamMembersDone",e.message="\u540c\u6b65\u7fa4\u6210\u5458 syncTeamMembersPromiseArray \u9519\u8bef",t.onCustomError("SYNC_TEAM_MEMBERS_ERROR",e)})).catch((function(e){t.logger.log("sync::onSyncTeamMembersDone: syncTeamMembersPromiseArray promise ",e),s()})):s()}},function(e,t,n){var r=n(25).fn,i=n(131);r.assembleLogin=function(){var e=this.assembleIMLogin();return this.addPushInfo instanceof Function?this.addPushInfo(e):Promise.resolve({login:e})},r.afterLogin=function(){var e=this,t=this;t.sendCmd("getNosCdnHost",{});var n=(new Date).getTime();t.sendCmd("getServerTime",{},(function(e,r){if(e)t.logger.error("Calculate Delay time, getServerTime error",e);else if(r){var i=(new Date).getTime(),a=(i-n)/2,o=r.getTime?r.getTime():r;t.relativeSeverTime=parseInt(i-o-a)}else t.logger.warn("Calculate Delay time, getServerTime not correct")})),this.initPush instanceof Function&&this.initPush();var r=this.db;if(r.enable){var i=this.account;this.options.appendAppKeyForDBName&&(i+="-"+this.options.appKey),this.db.init(i).then((function(){e.notifyLogin(),e.syncData()}),(function(t){e.logger.warn("link::afterLogin: no db",t),r.reset(!1),e.notifyLogin(),e.syncData()}))}else this.logger.info("link::afterLogin: no db"),this.notifyLogin(),this.syncData()},r.processAuth=function(e){switch(e.cmd){case"login":e.error||(e.content=e.content||{},this.loginAndroidPush&&this.loginAndroidPush(e.content.aosPushInfo||{}),e.obj=e.content.loginRes,this.connectionId=e.content.loginRes.connectionId,this.onLoginPortsChange(e,2));break;case"kicked":return void this.onKicked(e);case"multiPortLogin":this.onLoginPortsChange(e,e.content.state);break;case"kick":e.error||(e.obj.deviceIds=e.content.deviceIds)}},r.onLoginPortsChange=function(e,t){var n=this,r=e.content.loginPorts;if(r&&r.length){var a=!0;switch(t){case 2:a=!0;break;case 3:a=!1}r.forEach((function(e){e.type=i.reverseType(e.type),e.time=+e.time,e.online=a})),(r=r.filter((function(e){return e.connectionId!==n.connectionId}))).length&&(n.logger.info("link::onLoginPortsChange:",r),n.options.onloginportschange(r))}},r.kickedReasons=["","samePlatformKick","serverKick","otherPlatformKick","silentlyKick"],r.kickedMessages=["","\u4e0d\u5141\u8bb8\u540c\u4e00\u4e2a\u5e10\u53f7\u5728\u591a\u4e2a\u5730\u65b9\u540c\u65f6\u767b\u5f55","\u88ab\u670d\u52a1\u5668\u8e22\u4e86","\u88ab\u5176\u5b83\u7aef\u8e22\u4e86","\u6084\u6084\u88ab\u8e22"]},function(e,t,n){var r=n(25).fn,i=n(5),a=n(0),o=n(40);function s(e,t){var n=this;n.socketUrls=[],n.msgStatEnable=!!e.common["msg.stat.enable"],n.msgStatEnable&&(n.msgDelayTimer=setTimeout(n.doReportMsgDelay.bind(n),1e4)),e.common.link.forEach((function(e){n.socketUrls.push(i.formatSocketUrl({url:e,secure:n.options.secure}))})),e.common["link.default"].forEach((function(e){e=i.formatSocketUrl({url:e,secure:n.options.secure}),-1===n.socketUrls.indexOf(e)&&n.socketUrls.push(e)}));try{i.uploadUrl=e.nosup[0]}catch(e){}if(i.chunkUploadUrl=i.chunkUploadUrl||e["nos-chunk"]||"",n.logger.info("link::refreshSocketUrl: "+t.slice(0,-32)+" ajax load , got socket urls ",n.socketUrls),n.connectToUrl(n.getNextSocketUrl()),i.hasLocalStorage){e.common["lbs.backup"]&&n.options.lbsBackup&&localStorage.setItem("nim_lbs_backup",JSON.stringify(e.common["lbs.backup"]));var r=a.get(e,"common.report.apierror.on");e.common.report&&localStorage.setItem("nim_lbs_fail_report_on",!1===r?"0":"1");var o=a.get(e,"common.report.apierror.threshold.time");o&&localStorage.setItem("nim_lbs_fail_report_time",o)}}r.probeIp=function(){var e=this,t=i.ipProbeAddr,n=0,r=-1;function a(t){2===++n&&(n=-1,e.doRefreshSocketUrl(r))}o(t.ipv4,{timeout:2e3,onerror:a,onload:function(e){r++,a()}}),o(t.ipv6,{timeout:2e3,onerror:a,onload:function(e){r+=2,a()}}),setTimeout((function(){n||-1===r||(n=-1,e.doRefreshSocketUrl(r))}),100)},r.refreshSocketUrl=function(){i.isWeixinApp?this.doRefreshSocketUrl(2):2===this.options.ipVersion?this.probeIp():this.doRefreshSocketUrl(this.options.ipVersion)},r.doRefreshSocketUrl=function(e){var t=this,n=t.options.lbsUrl;1!==e&&2!==e&&(e=0),i.ipVersion=e;var r=(new Date).getTime();this.doRequestLbs(n).then((function(e){s.call(t,e,n)})).catch((function(e){if(t.logger.error("link::refreshSocketUrl: "+n+" ajax lbs error",e),m.call(t,n,e,r),t.options.lbsBackup){var a=t.options.lbsBackupUrlsCustomer||[],o=[];i.hasLocalStorage&&(o=(o=localStorage.getItem("nim_lbs_backup"))?JSON.parse(o):[]);var c=o.concat(a);(function(e){var t=this;if(e&&e.length>0){t.logger.info("doRequestBackupLbsUrls: use backup lbs url",e);var n=0,r=0,i=!1,a=setInterval((function(){if(n>=e.length)return a&&clearInterval(a),void t.logger.warn("doRequestBackupLbsUrls backup lbs all tried");var o=e[n++],c=(new Date).getTime();t.doRequestLbs(o).then((function(e){a&&clearInterval(a),!1===i&&s.call(t,e,o),i=!0})).catch((function(n){r++,t.logger.error("doRequestBackupLbsUrls: "+o+" ajax lbs error",n),m.call(t,o,n,c),r>=e.length&&(a&&clearInterval(a),t.logger.warn("doRequestBackupLbsUrls: backup lbs all failed"),d.call(t))}))}),2e3)}else d.call(t)}).call(t,c)}else d.call(t)}))},r.doRequestLbs=function(e){var t=this.options,n=i.info;return e=e+a.genUrlSep(e)+"id="+t.account+"&sv="+n.sdkVersion+"&pv="+n.protocolVersion+"&networkType="+i.ipVersion+"&k="+t.appKey,this.logger.info("doRequestLbs "+e.slice(0,-32)),new Promise((function(t,n){i.isWeixinApp?wx.request({url:e,success:function(e){var r=e&&e.statusCode,i=e&&e.data;200===r?t(i):n(i)},fail:function(e){n(e)}}):o(e,{proxyUrl:a.url2origin(e)+"/lbs/res/cors/nej_proxy_frame.html",timeout:i.xhrTimeout,onload:function(e){t(JSON.parse(e))},onerror:function(e){n(e)}})}))};var c=[],u=null;if(i.hasLocalStorage){var l=localStorage.getItem("nim_lbs_fail_report_time");l=l?parseInt(l):6e4,u=a.throttle((function(){if(c.length>0){var e=JSON.stringify(c);o("https://statistic.live.126.net/statics/report/im/api/error",{method:"POST",timeout:2e3,headers:{"Content-Type":"application/json"},data:e,onload:function(){},onerror:function(){var t=JSON.parse(e).concat(c);c=t.reduce((function(e,t){return e.some((function(e){return e.request_url===t.url&&e.error_code===t.code}))||e.push(t),e}),[])}}),c=[]}}),l,{leading:!1})}function m(e,t,n){var r=(new Date).getTime(),a=t.status||10001;this.api.reportLogs({event:"nimlb",code:3001}),c.some((function(t){return t.request_url===e&&t.error_code===a}))||c.push({request_url:e,appkey:this.options.appKey,accid:this.options.account,timestamp:r,error_code:a,platform:"web",send_time:r-n}),i.hasLocalStorage&&"0"!==localStorage.getItem("nim_lbs_fail_report_on")&&u&&u()}function d(){var e=i.getDefaultLinkUrl(this.options.secure);e?(this.logger.warn("link::refreshSocketUrl: use default link url",e),this.connectToUrl(e)):this.onDisconnect(1,"link::refreshSocketUrl")}},function(e,t,n){var r=n(56).fn,i=n(0),a=i.notundef;r.putSession=function(e){var t=this,n=e.unread;return void 0===(e=i.merge({},e)).updateTime&&e.lastMsg&&e.lastMsg.time&&(e.updateTime=e.lastMsg.time),(e.lastMsg||!e.ack&&!e.msgReceiptTime)&&(e.isDeleted=!1),delete e.unread,this.modifyOrPut({table:"session",obj:e,key:"id",modifyObjWhenPut:{unread:0}}).catch((function(r){return t.notifyError&&t.notifyError(r),e.unread=n,Promise.resolve(e)}))},r.getSessions=function(e){var t=!(e=e||{}).reverse,n=e.limit||100,r=e.lastSessionId,i=e.sessionId,o=!1,s=this,c=function(){return!0},u=function(){return!0};return a(i)?this.getSession(i,e.isDeleted):(a(r)&&(c=function(e){return e.id===r&&(o=!0),o}),e.includeDeleted||(u=function(e){return!e.isDeleted}),this.getAll("session",{index:"updateTime",desc:t,limit:n,filter:function(e){return c(e)&&u(e)}}).catch((function(e){s.notifyError&&s.notifyError(e)})))},r.getSession=function(e,t){var n=this;return this.get("session",e).then((function(e){return Promise.resolve(!t&&e&&e.isDeleted?void 0:e)})).catch((function(e){n.notifyError&&n.notifyError(e)}))},r.updateSession=function(e){var t=this,n=e.id,r=i.filterObj(e,"ack unread lastMsg localCustom msgReceiptTime msgReceiptServerTime isTop topCustom isDeleted");return e.lastMsg&&(r.lastMsg=e.lastMsg),this.getOne("session",null,n,{modifyObj:r}).then((function(e){if(e){var a="db::updateSession: "+n+" "+i.pickAsString(r,["ack","unread","msgReceiptTime","msgReceiptServerTime","isTop","isDeleted"]);a+=r.lastMsg?" lastMsg.idClient:"+i.get(r,"lastMsg.idClient"):"",t.logger.info(a)}else t.logger.warn("db::updateSession: no record "+n);return e})).catch((function(e){t.notifyError&&t.notifyError(e)}))},r.getStickTopSessions=function(){var e=this;return this.getAll("session",{filter:function(e){return e&&e.isTop}}).catch((function(t){e.notifyError&&e.notifyError(t)}))},r.deleteSession=function(e){return this.remove("session",e)},r.deleteSessionLogic=function(e){var t=this;if(!Array.isArray(e))return this.getOne("session",null,e,{modifyObj:{isDeleted:!0}});var n=[];return e.forEach((function(e){n.push(t.getOne("session",null,e,{modifyObj:{isDeleted:!0}}))})),Promise.all(n)},r.putSessionsWithMoreRoaming=function(e){return this.put("sessionsWithMoreRoaming",e)},r.updateSessionsWithMoreRoaming=function(e){var t=e.id;return delete e.id,this.getOne("sessionsWithMoreRoaming",null,t,{modifyObj:e})},r.deleteSessionsWithMoreRoaming=function(e){return this.remove("sessionsWithMoreRoaming",e)},r.getSessionsWithMoreRoaming=function(e){return e?this.get("sessionsWithMoreRoaming",e):this.getAll("sessionsWithMoreRoaming")}},function(e,t,n){var r=n(56).fn,i=n(0);i.notundef,r.putBroadcastMsg=function(e){var t=this;return new Promise((function(n){i.isArray(e)||(e=[e]);var r=[],a=e.length;function o(){0===--a&&n(r)}e.forEach((function(e){e=i.copy(e),t.put("broadcastMsg",e).then((function(e){r.push(e[0]),o()}),o)}))}))},r.getBroadcastMsgs=function(e){return e=e||{},this.getAll("broadcastMsg",e)}},function(e,t,n){var r=n(56).fn,i=n(0),a=i.notundef;r.putSysMsg=function(e){var t=this;return new Promise((function(n){if(i.isArray(e)||(e=[e]),!e[0].filter){var r=[],a=e.length;e.forEach((function(e){e=i.copy(e),t.put("sysMsg",e).then((function(e){r.push(e[0]),o()}),o)}))}function o(){0===--a&&n(r)}}))},r.getSysMsgs=function(e){var t=!(e=e||{}).reverse,n=e.limit||100,r=null,i=null;e.category&&(r="category",i=e.category),e.type&&(r="type",i=e.type);var o,s=e.lastIdServer,c=!1,u=e.read;return(a(s)||a(u))&&(o=function(e){return a(s)?(s=""+s,c?t():(e.idServer===s&&(c=!0),!1)):t();function t(){return!a(u)||e.read===u}}),e={filter:o,desc:t,limit:n},r?this.getOnly("sysMsg",r,i,e):this.getAll("sysMsg",e)},r.getSysMsgByIdServer=function(e){return this.getOne("sysMsg","idServer",e)},r.updateSysMsg=function(e){var t=this;if(!e.filter){var n=""+e.idServer,r=i.filterObj(e,"read state error localCustom");return this.getOne("sysMsg","idServer",n,{modifyObj:r}).then((function(e){return e?t.logger.log("db::updateSysMsg: "+n,i.pickAsString(r,["read","state","error"])):t.logger.warn("db::updateSession: "+n),e}))}},r.markSysMsgRead=function(e){var t=this;return new Promise((function(n,r){i.isArray(e)||(e=[e]);var a,o,s=[],c=[];e.forEach((function(e){a=t.getSysMsgByIdServer(e.idServer).then((function(e){e&&!e.read&&(o=t.updateSysMsg({idServer:e.idServer,read:!0}),c.push(o))}),r),s.push(a)})),Promise.all(s).then((function(){Promise.all(c).then((function(e){n(e)}),r)}),r)}))},r.deleteSysMsg=function(e){var t,n=this,r=[];return i.isArray(e)||(e=[e]),e.forEach((function(e){e=""+e,t=n.getOne("sysMsg","idServer",e,{remove:!0}),r.push(t)})),1===r.length?r[0]:Promise.all(r)},r.deleteAllSysMsgs=function(){var e=this.clearTable("sysMsg"),t=this.clearTable("sysMsgUnread");return Promise.all([e,t])},r.getSysMsgUnread=function(){return this.getAll("sysMsgUnread").then((function(e){var t={};return e.forEach((function(e){t[e.type]=e.num})),t}))},r.updateSysMsgUnread=function(e){var t=this;e=i.copy(e);var n=[];return Object.keys(e).forEach((function(t){n.push({type:t,num:e[t]})})),this.put("sysMsgUnread",n).then((function(){return t.logger.info("db::updateSysMsgUnread: ",e),e}))}},function(e,t,n){var r=n(56).fn,i=n(0),a=n(5);r.putMsg=function(e){var t=this;return i.isArray(e)||(e=[e]),!e.length||e[0].filter?Promise.resolve():(e=e.filter((function(e){return!e.ignore})),t.put("msg1",e).catch((function(n){return t.notifyError&&t.notifyError(n),Promise.resolve(e,n)})))},r.putMsgReadDetail=function(e){var t=this;if(e.idClient)return this.put("msgReadDetail",e).catch((function(e){t.logger.error("putMsgReadDetail error",e)}))},r.getMsgReadDetail=function(e){return this.getOne("msgReadDetail",null,e)},r.updateMsg=function(e){var t=this;if(!e.filter){var n=e.idClient,r=i.filterObj(e,"resend status idServer time localCustom commentTimetag comments hasSendAck");return t.getOne("msg1",null,n,{modifyObj:r}).then((function(e){return e?t.logger.info("db::updateMsg: "+n+"\uff0cidServer: "+r.idServer+"\uff0cstatus: "+r.status+"\uff0ctime: "+r.time):t.logger.warn("db::updateMsg: no record "+n),e})).catch((function(n){return t.notifyError&&t.notifyError(n),Promise.resolve(e)}))}},r.updateMsgBatch=function(e){var t=this;if(a.isRN)this.logger.warn("react native can not support updateMsgBatch");else{this.checkDB();var n=this.server.getIndexedDB().transaction(["msg1"],"readwrite").objectStore("msg1");e.forEach((function(e){if(e.idClient){var r=n.get(e.idClient);r.onerror=function(e){t.logger.error("updateMsgBatch::store.get:error",e)},r.onsuccess=function(i){var a=r.result||e;n.put(Object.assign({},a,e)).onerror=function(e){t.logger.error("updateMsgBatch::store.put:error",e)}}}}))}},r.getMsgs=function(e){return a.isBrowser?this.getMsgsIndexedDB(e):a.isRN?this.getMsgsRN(e):Promise.resolve()},r.getMsgsRN=function(e){var t={};return"number"==typeof e.start&&(t.lowerBound=["time",e.start]),"number"==typeof e.end&&e.end!==1/0&&(t.upperBound=["time",e.end]),t.desc=!1,t.index="time","boolean"==typeof e.desc&&(t.desc=e.desc),"number"==typeof e.limit&&(t.limit=e.limit),t.searchIndex=[],e.sessionId&&t.searchIndex.push(["sessionId",e.sessionId]),"string"==typeof e.type&&t.searchIndex.push(["type",e.type]),this.getAll("msg1",t)},r.getMsgsIndexedDB=function(e){this.checkDB();var t="time",n=!1,r=!1,a=(e=e||{}).sessionId||[],o=e.sessionIds||[];i.isString(a)?a=[a]:Array.isArray(a)||(a=[]),i.isString(o)?o=[o]:Array.isArray(o)||(o=[]);var s=a.concat(o);1===s.length?(n=!0,t="sessionTime",a=s[0]):s.length>1&&(n=!0,r=!0,o=s);var c=e.start||0,u=e.end||1/0,l=c,m=u;n&&!r&&(l=[a,c],m=[a,u]);var d=!1!==e.desc,p=e.limit||100,f=!1,g=!1,h=e.type||[],y=e.types||[];i.isString(h)?h=[h]:Array.isArray(h)||(h=[]),i.isString(y)?y=[y]:Array.isArray(y)||(y=[]);var b=h.concat(y);1===b.length?(f=!0,h=b[0]):b.length>1&&(f=!0,g=!0,y=b);var v=e.subTypes&&e.subTypes.length,S=e.keyword||"",T=e.filterFunc,M=void 0;return(r||f||S||v||i.isFunction(T))&&(M=function(t){if(r&&-1===o.indexOf(t.sessionId))return!1;if(f)if(g){if(-1===y.indexOf(t.type))return!1}else if(h!==t.type)return!1;return(!v||-1!==e.subTypes.indexOf(t.subType))&&(!S||-1!==(t.text||t.tip||"").indexOf(S))&&(!T||T(t))}),this.server.query("msg1",t).bound(l,m,!0,!0).desc(d).limit(p).filter(M).execute()},r.getMsgCountAfterAck=function(e){return a.isBrowser?this.getMsgCountAfterAckIndexedDB(e):a.isRN?this.getMsgCountAfterAckRN(e):Promise.resolve()},r.getMsgCountAfterAckRN=function(e){var t=e=e||{},n=t.sessionId,r=t.ack;return this.checkDB(),this.getAll("msg1",{searchIndex:["sessionId",n],lowerBound:["time",r]}).then((function(t){var n=t.filter((function(t){return"out"!==t.flow&&!1!==t.isUnreadable&&("notification"!==t.type||e.shouldCountNotifyUnread(t))}));return Promise.resolve(n.length)}))},r.getMsgCountAfterAckIndexedDB=function(e){var t=(e=e||{}).sessionId;return this.checkDB(),this.server.query("msg1","sessionTime").bound([t,e.ack],[t,1/0],!0,!0).execute().then((function(t){var n=t.filter((function(t){return"out"!==t.flow&&!1!==t.isUnreadable&&("notification"!==t.type||e.shouldCountNotifyUnread(t))}));return Promise.resolve(n.length)}))},r.amendMsg=function(e){return e?(i.notexist(e.text)&&(e.text=""),e):null},r.getMsgByIdClient=function(e){var t=this;return t.getOne("msg1",null,e).then((function(e){return t.amendMsg(e)}))},r.getMsgsByIdClients=function(e){var t,n=this,r=[];return e.forEach((function(e){t=n.getMsgByIdClient(e),r.push(t)})),Promise.all(r)},r.clearSendingMsgs=function(){var e=this;return e.getOnly("msg1","status","sending",{modifyObj:{status:"fail"}}).then((function(t){e.logger.info("db::clearSendingMsgs: msgs send failed",t&&t.map((function(e){return e.idClient})).join(","))}))},r.deleteMsg=function(e){var t,n=this,r=[];return i.isArray(e)||(e=[e]),e.forEach((function(e){t=n.getOne("msg1",null,e,{remove:!0}).then((function(e){return n.logger.info("db::deleteMsg:",e&&e.idClient),e})),r.push(t)})),1===r.length?r[0]:Promise.all(r)},r.deleteMsgsBySessionId=function(e){var t=this,n=null,r=e.start,i=e.end;return void 0!==r&&void 0!==i?n=function(e){return e>r&&e<i}:void 0!==r?n=function(e){return e>r}:void 0!==i&&(n=function(e){return e<i}),n?t.getOnly("msg1","sessionId",e.sessionId).then((function(e){var r=[];return(e=e||[]).map((function(e){n(e.time)&&r.push(e.idClient)})),t.logger.info("db::deleteMsgsBySessionId: session results",r),t.deleteMsg(r)})):t.getOnly("msg1","sessionId",e.sessionId,{remove:!0})},r.deleteMsgsByTime=function(e){return this.remove("msg1",null,"time",e.start,e.end,!0,!0)},r.deleteAllMsgs=function(){var e=this.clearTable("msg1"),t=this.clearTable("session");return Promise.all([e,t])},r.getMsgPins=function(e){return this.getOnly("msgPin","sessionId",e)},r.deleteMsgPins=function(e){return this.getOnly("msgPin","sessionId",e,{remove:!0})},r.putMsgPin=function(e){var t=this;return this.modifyOrPut({table:"msgPin",obj:e,key:"idClient"}).catch((function(e){t.notifyError&&t.notifyError(e)}))},r.putMsgPins=function(e){return this.put("msgPin",e)},r.deleteMsgPin=function(e){var t=this;return this.getOne("msgPin",null,e.idClient,{remove:!0}).then((function(e){return t.logger.info("db::deleteMsgPin:",e.idClient),e}))}},function(e,t,n){var r=n(56).fn,i=n(0);r.mergeMyInfo=function(e,t){var n=this;return n.put("user",e).then((function(){return t?n.updateMyInfoTimetag(e.updateTime):e}))},r.mergeFriendUsers=function(e,t){var n=this;return n.putUsers(e).then((function(){n.updateFriendUserTimetag(t)}))},r.putUsers=function(e){return this.put("user",e)},r.putUser=function(e){return this.put("user",e)},r.updateUser=function(e){var t=this,n=(e=i.copy(e)).account;return this.getOne("user",null,n,{modifyObj:e}).then((function(e){return e?t.logger.log("db::updateUser: "+n):t.logger.warn("db::updateUser: no record "+n),e}))},r.putUsersIfIsFriend=function(e){var t,n=this,r=[],i=[];return e.forEach((function(e){t=n.getFriend(e.account).then((function(r){return r&&(t=n.putUser(e),i.push(t)),r})),r.push(t)})),Promise.all(r).then((function(){return Promise.all(i).then((function(e){return e}))}))},r.deleteUser=function(e){return this.remove("user",e)},r.getUser=function(e){return this.getOne("user",null,e)},r.getUsers=function(e){return this.getAll("user",{filter:function(t){return-1!==e.indexOf(t.account)}})},r.getAllUsers=function(){return this.getAll("user")}},function(e,t,n){var r=n(56).fn,i=n(0),a=n(29),o=n(209),s=n(166);function c(e){return e.valid&&e.validToCurrentUser}function u(e){return e&&i.fillUndef(e,{mute:!1,custom:""}),e}r.mergeSuperTeams=function(e,t,n){var r=this,i=r.put("superTeam",e),a=r.leaveTeams(t,n);return Promise.all([i,a]).then((function(){return r.logger.log("db::mergeSuperTeams:"),r.updateSuperTeamTimetag(n),[e,t,n]}))},r.putSuperTeam=function(e){if(e)return i.isArray(e)||(e=[e]),e.forEach((function(e){e.validToCurrentUser=!0})),this.put("superTeam",e)},r.updateSuperTeam=function(e){var t=this,n=(e=i.copy(e)).teamId;return t.getOne("superTeam",null,n,{modifyObj:e}).then((function(r){return r?(t.logger.info("db::updateSuperTeam: "+n),r):(t.logger.warn("db::updateSuperTeam: no record "+n),t.putSuperTeam(e))}))},r.leaveSuperTeam=function(e){var t=this;return t.updateSuperTeam({teamId:e,validToCurrentUser:!1}).then((function(){return t.removeAllSuperTeamMembers(e)}))},r.dismissSuperTeam=function(e,t){var n=this,r={teamId:e,valid:!1,validToCurrentUser:!1,updateTime:t};return n.updateSuperTeam(r).then((function(){return n.removeAllSuperTeamMembers(e)}))},r.leaveSuperTeams=function(e,t){var n,r=this,i=[];return e.forEach((function(e){n=r.leaveSuperTeam(e.teamId,t),i.push(n)})),Promise.all(i)},r.getSuperTeamsByTeamIds=function(e){var t,n=this,r=[];return e.forEach((function(e){t=n.getSuperTeam(e),r.push(t)})),Promise.all(r)},r.getSuperTeam=function(e){e=""+e;var t=this;return t.getOne("superTeam",null,e).then((function(e){return e?(t.updateSuperTeamProperties([e]),e):null}))},r.getSuperTeams=function(){var e=this;return e.getAll("superTeam",{filter:c}).then((function(t){return e.updateSuperTeamProperties(t),t}))},r.updateSuperTeamProperties=function(e){e.forEach((function(e){e&&o.fillProperties(e)}))},r.mergeSuperTeamMembers=function(e,t,n,r){var i=this,a=i.putSuperTeamMembers(t),o=i.updateSuperTeamMembers(n);return Promise.all([a,o]).then((function(){return i.logger.log("db::mergeSuperTeamMembers: "+e),null!=r?i.updateSuperTeamMemberTimetag(e,r):Promise.resolve()}))},r.putSuperTeamMembers=function(e){return this.put("superTeamMember",e)},r.getSuperTeamMemberById=function(e){return this.get("superTeamMember",e)},r.getSuperTeamMembers=function(e,t){var n=this;e=""+e;var r={filter:function(e){return e.valid},mapper:u};if(t){if("number"!=typeof t.joinTime)return void n.logger.error("db::getSuperTeamMembers::params.joinTime should be number, not ",t.joinTime);t.limit&&(r.limit=t.limit),t.reverse?r.filter=function(e){return e.valid&&e.joinTime<=t.joinTime}:r.filter=function(e){return e.valid&&e.joinTime>=t.joinTime}}return n.getOnly("superTeamMember","teamId",e,r).then((function(e){return n.updateSuperTeamMemberProperties(e).then((function(){return e}))}))},r.updateSuperTeamMemberProperties=function(e){var t,n=this,r=[];return e.forEach((function(e){s.fillProperties(e)&&(t=n.updateSuperTeamMember(e),r.push(t))})),Promise.all(r)},r.getInvalidSuperTeamMembers=function(e,t){var n=this;e=""+e;var r,i=[];return t.forEach((function(t){r=n.getOne("superTeamMember","id",s.genId(e,t)).then((function(e){return u(e)})),i.push(r)})),Promise.all(i)},r.updateSuperTeamMember=function(e){var t=this,n=e.teamId,r=e.account,a=s.genId(n,r),o=i.filterObj(e,"nickInTeam muteTeam mute custom updateTime type valid");return this.getOne("superTeamMember","id",a,{modifyObj:o,mapper:u}).then((function(e){return e?t.logger.log("db::updateSuperTeamMember: "+n+" "+r,i.pickAsString(o,["muteTeam","mute","updateTime","type","valid"])):t.logger.warn("db::updateSuperTeam: no record "+n+" "+r),e}))},r.updateSuperTeamMembers=function(e){var t=this;if(!e.length)return Promise.resolve();var n,r=[];return e.forEach((function(e){n=t.updateSuperTeamMember(e),r.push(n)})),Promise.all(r)},r.removeSuperTeamMembersByAccounts=function(e,t){var n=t.map((function(t){return{teamId:e,account:t,valid:!1}}));return this.updateSuperTeamMembers(n)},r.removeAllSuperTeamMembers=function(e){var t=this;return t.getOnly("superTeamMember","teamId",e,{modifyObj:{valid:!1}}).then((function(){return t.logger.warn("db::removeAllSuperTeamMembers: "+e),t.deleteSuperTeamMemberTimetag(e)}))},r.deleteSuperTeamMembers=function(e){var t=this;return t.getOnly("superTeamMember","teamId",e,{remove:!0}).then((function(){t.logger.warn("db::deleteSuperTeamMembers: "+e),t.deleteSuperTeamMemberTimetag(e)}))},r.deleteSuperTeam=function(e){var t,n=this,r=[];return i.isArray(e)||(e=[e]),e.forEach((function(e){e=""+e,t=n.get("superTeam",e).then((function(t){if(t&&c(t))throw a.stillInTeamError({callFunc:"team::deleteTeam",team:t});var r=n.remove("superTeam",e),i=n.deleteSuperTeamMembers(e);return Promise.all([r,i])})),r.push(t)})),1===r.length?r[0]:Promise.all(r)},r.transferSuperTeam=function(e,t,n){var r=this;return r.updateSuperTeamMembers([t,n]).then((function(){return r.putSuperTeam(e).then((function(){return r.logger.info("db::transferSuperTeam: "+e.teamId+" "+t.account+" -> "+n.account),[e,t,n]}))}))}},function(e,t,n){var r=n(56).fn,i=n(0),a=n(29),o=n(132),s=n(101);function c(e){return e.valid&&e.validToCurrentUser}function u(e){return e&&e.valid}function l(e){return e&&i.fillUndef(e,{mute:!1,custom:""}),e}r.mergeTeams=function(e,t,n){var r=this,i=r.put("team",e),a=r.leaveTeams(t,n);return Promise.all([i,a]).then((function(){return r.logger.log("db::mergeTeams:"),r.updateTeamTimetag(n),[e,t,n]}))},r.putTeam=function(e){if(e)return i.isArray(e)||(e=[e]),e.forEach((function(e){e.validToCurrentUser=!0})),this.put("team",e)},r.updateTeam=function(e){var t=this,n=(e=i.copy(e)).teamId;return t.getOne("team",null,n,{modifyObj:e}).then((function(r){if(r)t.logger.log("db::updateTeam: "+n);else if(t.logger.warn("db::updateTeam: no record "+n),e.validToCurrentUser)return t.putTeam(e);return r}))},r.transferTeam=function(e,t,n){var r=this,i=e.teamId,a=e.memberUpdateTime,o={teamId:i,account:t,type:"normal",updateTime:a},s={teamId:i,account:n,type:"owner",updateTime:a};return r.updateTeamMembers([o,s]).then((function(){return r.putTeam(e).then((function(){return r.logger.info("db::transferTeam: "+e.teamId+" "+t+" -> "+n),[e,t,n]}))}))},r.leaveTeam=function(e){var t=this;return t.updateTeam({teamId:e,validToCurrentUser:!1}).then((function(){return t.removeAllTeamMembers(e)}))},r.dismissTeam=function(e,t){var n=this,r={teamId:e,valid:!1,validToCurrentUser:!1,updateTime:t};return n.updateTeam(r).then((function(){return n.removeAllTeamMembers(e)}))},r.leaveTeams=function(e,t){var n,r=this,i=[];return e.forEach((function(e){n=r.leaveTeam(e.teamId,t),i.push(n)})),Promise.all(i)},r.getTeamsByTeamIds=function(e){var t,n=this,r=[];return e.forEach((function(e){t=n.getTeam(e),r.push(t)})),Promise.all(r)},r.getTeam=function(e){e=""+e;var t=this;return t.getOne("team",null,e).then((function(e){return e?(t.updateTeamProperties([e]),e):null}))},r.getTeams=function(){var e=this;return e.getAll("team",{filter:c}).then((function(t){return e.updateTeamProperties(t),t}))},r.updateTeamProperties=function(e){e.forEach((function(e){e&&o.fillProperties(e)}))},r.mergeTeamMembers=function(e,t,n,r){var i=this,a=i.putTeamMembers(t),o=i.updateTeamMembers(n);return Promise.all([a,o]).then((function(){return i.logger.log("db::mergeTeamMembers: "+e),i.updateTeamMemberTimetag(e,r)}))},r.putTeamMembers=function(e){return this.put("teamMember",e)},r.getTeamMembersByAccount=function(e){return this.getOnly("teamMember","account",e,{filter:u,mapper:l}).then()},r.getTeamMembers=function(e){var t=this;return e=""+e,t.getOnly("teamMember","teamId",e,{filter:function(e){return e.valid},mapper:l}).then((function(e){return t.updateTeamMemberProperties(e).then((function(){return e}))}))},r.updateTeamMemberProperties=function(e){var t,n=this,r=[];return e.forEach((function(e){s.fillProperties(e)&&(t=n.updateTeamMember(e),r.push(t))})),Promise.all(r)},r.getInvalidTeamMembers=function(e,t){var n=this;e=""+e;var r,i=[];return t.forEach((function(t){r=n.getOne("teamMember",null,s.genId(e,t)).then((function(e){return l(e)})),i.push(r)})),Promise.all(i)},r.updateTeamMember=function(e){var t=this,n=e.teamId,r=e.account,a=s.genId(n,r),o=i.filterObj(e,"nickInTeam muteTeam mute custom updateTime type valid");return this.getOne("teamMember",null,a,{modifyObj:o,mapper:l}).then((function(e){return e?t.logger.log("db::updateTeamMember: "+n+" "+r,i.pickAsString(o,["muteTeam","mute","updateTime","type","valid"])):t.logger.warn("db::updateTeam: no record "+n+" "+r),e}))},r.updateTeamMembers=function(e){var t=this;if(!e.length)return Promise.resolve();var n,r=[];return e.forEach((function(e){n=t.updateTeamMember(e),r.push(n)})),Promise.all(r)},r.updateTeamManagers=function(e,t,n,r){var i=t.map((function(t){return{teamId:e,account:t,type:n?"manager":"normal",updateTime:r}}));return this.updateTeamMembers(i)},r.removeTeamMembersByAccounts=function(e,t){var n=t.map((function(t){return{teamId:e,account:t,valid:!1}}));return this.updateTeamMembers(n)},r.removeAllTeamMembers=function(e){var t=this;return t.getOnly("teamMember","teamId",e,{modifyObj:{valid:!1}}).then((function(){return t.logger.warn("db::removeAllTeamMembers: "+e),t.deleteTeamMemberTimetag(e)}))},r.deleteTeamMembers=function(e){var t=this;return t.getOnly("teamMember","teamId",e,{remove:!0}).then((function(){t.logger.warn("db::deleteTeamMembers: "+e),t.deleteTeamMemberTimetag(e)}))},r.deleteTeam=function(e){var t,n=this,r=[];return i.isArray(e)||(e=[e]),e.forEach((function(e){e=""+e,t=n.get("team",e).then((function(t){if(t&&c(t))throw a.stillInTeamError({callFunc:"team::deleteTeam",team:t});var r=n.remove("team",e),i=n.deleteTeamMembers(e);return Promise.all([r,i])})),r.push(t)})),1===r.length?r[0]:Promise.all(r)}},function(e,t,n){var r=n(56).fn,i=n(0);r.mergeFriends=function(e,t,n){var r=this;return r.updateAndDelete("friend",e,t).then((function(){return r.logger.log("db::mergeFriends: updateAndDelete done",e&&e.map((function(e){return e.account})).join(",")),n&&r.updateFriendTimetag(n),[e,t,n]}))},r.putFriend=function(e){return this.put("friend",e)},r.updateFriend=function(e){var t=this,n=(e=i.copy(e)).account;return this.getOne("friend",null,n,{modifyObj:e}).then((function(e){return e?t.logger.log("db::updateFriend: "+n):t.logger.warn("db::updateFriend: no record "+n),e}))},r.deleteFriend=function(e){var t=this.remove("friend",e),n=this.deleteUser(e);return Promise.all([t,n])},r.getFriends=function(){return this.getAll("friend",{filter:function(e){return e.valid}})},r.getFriend=function(e){return this.getOne("friend",null,e)}},function(e,t,n){var r=n(56).fn,i=n(0);r.mergeRelations=function(e,t,n,r,i){var a=this,o=a.updateAndDelete("blacklist",e,t),s=a.updateAndDelete("mutelist",n,r);return Promise.all([o,s]).then((function(){return a.logger.info("db::mergeRelations: timetag "+i),a.updateRelationTimetag(i),[e,t,n,r,i]}))},r.getRelations=function(){var e=this.getAll("blacklist"),t=this.getAll("mutelist");return Promise.all([e,t])},r.markInBlacklist=function(e){if((e=i.copy(e)).isAdd){var t=e.record;return this.put("blacklist",t)}var n=e.account;return this.remove("blacklist",n)},r.markInMutelist=function(e){if((e=i.copy(e)).isAdd){var t=e.record;return this.put("mutelist",t)}var n=e.account;return this.remove("mutelist",n)}},function(e,t,n){var r=n(56).fn;r.getTimetags=function(e){var t={};return this.getAll("timetag",{filter:e,mapper:function(e){return-1!==e.name.indexOf("team-")?t[e.name]=0:t[e.name]=e.value,e}}).then((function(){return t}))},r.getTeamMemberTimetags=function(){return this.getTimetags((function(e){return-1!==e.name.indexOf("team-")}))},r.getTimetag=function(e){return this.getOne("timetag",null,e).then((function(e){return(e=e||{value:0}).value}))},r.getTeamMemberTimetag=function(e){return 0},r.updateTimetag=function(e,t){var n=this,r={name:e,value:t};return this.put("timetag",r).catch((function(e){n.notifyError&&n.notifyError(e)}))},r.updateMyInfoTimetag=function(e){return this.updateTimetag("myInfo",e)},r.updateRelationTimetag=function(e){return this.updateTimetag("relations",e)},r.getRelationsTimetag=function(){return this.getTimetag("relations")},r.updateFriendTimetag=function(e){return this.updateTimetag("friends",e)},r.getFriendsTimetag=function(){return this.getTimetag("friends")},r.updateFriendUserTimetag=function(e){return this.updateTimetag("friendUsers",e)},r.updateTeamTimetag=function(e){return this.updateTimetag("teams",e)},r.getTeamsTimetag=function(){return this.getTimetag("teams")},r.updateSuperTeamTimetag=function(e){return this.updateTimetag("superTeams",e)},r.getSuperTeamsTimetag=function(){return this.getTimetag("superTeams")},r.updateTeamMemberTimetag=function(e,t){return this.updateTimetag("team-"+e,t)},r.getTeamMembersTimetag=function(e){return this.getTimetag("team-"+e)},r.updateSuperTeamMemberTimetag=function(e,t){return this.updateTimetag("superTeam-"+e,t)},r.getSuperTeamMembersTimetag=function(e){return this.getTimetag("superTeam-"+e)},r.updateMyTeamMembersTimetag=function(e){return this.updateTimetag("myTeamMembers",e)},r.getBroadcastMsgTimetag=function(e){return this.getTimetag("broadcastMsg")},r.updateBroadcastMsgTimetag=function(e){return this.updateTimetag("broadcastMsg",parseInt(e))},r.updateRoamingMsgTimetag=function(e){return this.updateTimetag("roamingMsgs",e)},r.updateSuperTeamRoamingMsgTimetag=function(e){return this.updateTimetag("superTeamRoamingMsgs",e)},r.updateMsgReceiptsTimetag=function(e){return this.updateTimetag("msgReceipts",e)},r.updateDonnopTimetag=function(e){return this.updateTimetag("donnop",e)},r.updateSessionAck=function(e){return this.updateTimetag("sessionAck",e)},r.updateDeleteMsgSelf=function(e){return this.updateTimetag("deleteMsgSelf",e)},r.updateSuperTeamSessionAck=function(e){return this.updateTimetag("superTeamSessionAck",e)},r.deleteTimetag=function(e){return this.remove("timetag",e)},r.deleteTeamMemberTimetag=function(e){return this.deleteTimetag("team-"+e)},r.deleteSuperTeamMemberTimetag=function(e){return this.deleteTimetag("superTeam-"+e)}},function(e,t,n){var r=n(56).fn;r.setKey=function(e,t){return this.put("kv",{key:e,value:t})},r.getKey=function(e){return this.get("kv",e).then((function(e){return e&&e.value}))},r.setDonnop=function(e){return this.setKey("donnop",e)},r.getDonnop=function(){return this.getKey("donnop")}},function(e,t,n){var r={version:12},i={kv:{key:{keyPath:"key"}},timetag:{key:{keyPath:"name"}},sessionsWithMoreRoaming:{key:{keyPath:"id"}},msgReadDetail:{key:{keyPath:"idClient"}},blacklist:{key:{keyPath:"account"}},mutelist:{key:{keyPath:"account"}},friend:{key:{keyPath:"account"}},user:{key:{keyPath:"account"}},team:{key:{keyPath:"teamId"}},teamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1}}},superTeam:{key:{keyPath:"teamId"}},superTeamMember:{key:{keyPath:"id"},indexes:{teamId:{unique:!1},account:{unique:!1},id:{unique:!1}}},msg:{key:{autoIncrement:!0},indexes:{idClient:{unique:!0},sessionId:{unique:!1},time:{unique:!1},type:{unique:!1},sessionType:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msg1:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1},time:{unique:!1},status:{unique:!1},sessionTime:{key:["sessionId","time"],unique:!1}}},msgPin:{key:{keyPath:"idClient"},indexes:{sessionId:{unique:!1}}},broadcastMsg:{key:{keyPath:"broadcastId"},indexes:{time:{unique:!1}}},sysMsg:{key:{autoIncrement:!0},indexes:{idServer:{unique:!0},category:{unique:!1},type:{unique:!1}}},sysMsgUnread:{key:{keyPath:"type"}},session:{key:{keyPath:"id"},indexes:{updateTime:{unique:!1}}}};r.keyPath=function(e){return i[e].key.keyPath},r.schema=function(){return window._nimForceSyncIM=!0,i},e.exports=r},function(e,t,n){var r=n(16),i=n(77),a=n(211),o=n(505),s=n(0),c=n(210),u=n(29),l=u.newSupportDBError,m=u.noDBError,d=!1;function p(e){d=e,c.set("db",e,a)}function f(e){this.concurrency=0,this.pendingTasks=[],this.queue=Promise.resolve(),this.logger=e.logger,this.notifyError=e.notifyError}p(!!s.getGlobal().indexedDB),"IE"===r.name&&p(!1),"Microsoft Edge"===r.name&&p(!1),"Safari"===r.name&&p(!1);var g=f.prototype;g.reset=s.emptyFunc,d&&(g.reset=function(e){this.enable=!1!==e}),g.addTask=function(e){var t=this;return new Promise((function(n,r){function i(e){t.concurrency--;var n=t.pendingTasks.shift();n&&t.addTask(n),e()}if(t.concurrency<100)return t.concurrency++,e().then((function(t){i((function(){n(t),e.resolve&&e.resolve(t)}))}),(function(t){i((function(){var n={event:(t=t||{}).event||t,callFunc:t.callFunc||"db::addTask"};r(n),e.reject&&e.reject(n)}))}));e.resolve||(e.resolve=n,e.reject=r),t.pendingTasks.push(e)}))},g.init=function(e){var t=this;return t.addTask((function(){return t.enable?t.server?Promise.resolve():(t.name="nim-"+e,a.open({server:t.name,version:o.version,schema:o.schema}).then((function(e){t.logger.info("db::init: "+t.name),t.server=e}),(function(e){throw p(!1),t.server=null,t.name=null,e}))):Promise.reject(l({callFunc:"db::init"}))}))},g.destroy=function(){var e=this;return e.addTask((function(){return e.enable?e.server?a.remove(e.name).then((function(){e.logger.info("db::destroy: "+e.name),e.server=null,e.name=null})):Promise.resolve():Promise.reject(l({callFunc:"db::destroy"}))}))},g.clear=function(){var e=this;return e.addTask((function(){return e.enable?e.server?e.server.clear("timetag").then((function(){var t=[].slice.call(e.server.getIndexedDB().objectStoreNames),n=[];if(t.forEach((function(t){n.push(e.server.clear(t))})),n.length)return Promise.all(n).then((function(){e.logger.info("db::clear: "+e.name)})).catch((function(t){return e.logger.error("db::clear: ",t),Promise.reject(t)}))})):Promise.resolve():Promise.reject(l({callFunc:"db::clear"}))}))},g.close=function(){this.server&&(this.server.close(),this.server=null,this.name=null)},g.remove=function(e,t,n,r,i,a,o){var s=this;return s.addTask((function(){return s.checkDB(),s.server.remove(e,t,n,r,i,a,o).then((function(){s.logger.info("db::delete: "+e+" "+(t||n))})).catch((function(e){s.logger.error("db::remove::server.remove error",e)}))}))},g.put=function(e,t){var n=this;return n.addTask((function(){return n.checkDB(),s.isArray(t)||(t=[t]),n.server.update(e,t).then((function(t){var r=[e],a=o.keyPath(e),s=[];return a&&(t.forEach((function(e){s.push(i(e,a))})),r.push(1===s.length?s[0]:s)),r.unshift("db::put:"),"timetag"===e&&r.push(t[0]),n.logger.log.apply(n.logger.log,r),t}))}))},g.get=function(e,t){var n=this;return n.addTask((function(){return n.checkDB(),n.server.get(e,t)}))},g.modifyOrPut=function(e){var t=this,n=e.table,r=s.copy(e.obj),i=e.key,a=e.modifyObjWhenPut,o=s.copy(r);return delete o[i],t.getOne(n,null,r[i],{modifyObj:o}).then((function(e){return e?(o.idClient?o={idClient:o.idClient,server:o.server,pinFrom:o.pinFrom}:(o.lastMsg=o.lastMsg&&o.lastMsg.idServer+"_"+o.lastMsg.idClient,o.localCustom=o.localCustom&&"***",o.topCustom=o.topCustom&&"***"),t.logger.log("db::modifyOrPut: update table "+n,o),e):(r=s.merge(r,a),t.put(n,r).then((function(e){return e[0]})))}))},g.updateAndDelete=function(e,t,n){var r=this;return r.addTask((function(){return r.checkDB(),r.server.updateAndDelete(e,t,n)}))},g.getAll=function(e,t){var n=this;return n.addTask((function(){return n.checkDB(),(t=t||{}).keys=!0===t.keys,t.desc=!0===t.desc,t.distinct=!0===t.distinct,n.server.query(e,t.index).filter(t.filter).keys(t.keys).desc(t.desc).limit(t.limit).distinct(t.distinct).map(t.mapper).modify(t.modifyObj).execute()}))},g.getOnly=function(e,t,n,r){var i=this;return i.addTask((function(){return i.checkDB(),(r=r||{}).keys=!0===r.keys,r.desc=!0===r.desc,r.distinct=!0===r.distinct,r.remove=!0===r.remove,i.server.query(e,t).only(n).filter(r.filter).keys(r.keys).desc(r.desc).limit(r.limit).distinct(r.distinct).map(r.mapper).modify(r.modifyObj).remove(r.remove).execute()}))},g.getOne=function(){return this.getOnly.apply(this,arguments).then((function(e){return e[0]}))},g.clearTable=function(e){var t=this;return t.addTask((function(){return t.checkDB(),t.server.clear(e)}))},g.checkDB=function(){if(!this.enable)throw l({callFunc:"db::checkDB"});if(!this.server)throw m({callFunc:"db::checkDB"})},e.exports=f},function(e,t,n){n(174);var r=n(27);n(205)(r),e.exports=r},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){n(174);var r={NIM:n(507),Chatroom:n(439)};n(205)(r),e.exports=r}])},module.exports=t(function(){try{return __webpack_require__("D+ts")}catch(e){}}())},N8z3:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("BQ33"),i=n.n(r),a="a_f_l_d",o=function(e,t,n,r){var o,s,c=null!==(o=window.localStorage.getItem(a))&&void 0!==o?o:"{}",u=null!==(s=JSON.parse(c))&&void 0!==s?s:{},l=i()().format("YYYY/MM/DD"),m=null===t||void 0===t?void 0:t.filter((function(t){var i,a=null!==(i=(JSON.parse(t.extraInfo)||{}).frequencyLimit)&&void 0!==i?i:0;if(0===a)return!0;var o=e+"_"+t.name+"_"+n;return u[o]?u[o].date!==l?(u[o]={count:1,date:l},!0):u[o].count>0&&u[o].count<=a?(u[o].count++,!0):(r&&r(t.name),!1):(u[o]={count:1,date:l},!0)}));return window.localStorage.setItem(a,JSON.stringify(u)),m}},O6ss:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n("6SOw"),i=n("fGl3");function a(e){if(!Array.isArray(e))throw new TypeError("Cannot parse a non-array type.");if(0===e.length)return null;if(null===e[0])throw new Error("Root of Tree cannot be `null`.");var t=new r.a,n=new i.a(e[0]);t.enqueue(n);var a,o,s,c=0;function u(e){return null===e||void 0===e}for(;!t.isEmpty();)a=t.dequeue(),o=e[c+1],s=e[c+2],a.left=u(o)?null:new i.a(o),a.right=u(s)?null:new i.a(s),a.left&&t.enqueue(a.left),a.right&&t.enqueue(a.right),c+=2;return n}function o(e){if(null===e)return[];var t,n=new r.a,i=[];for(n.enqueue(e);void 0!==n.head();)null===(t=n.dequeue())?i.push(null):(i.push(t.val),n.enqueue(t.left,t.right));for(;null===i[i.length-1];)i.pop();return i}},POSc:function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return h}));var r,i,a,o,s,c=n("34li"),u=n("43mT"),l=Object(u.a)({imCardChatClick:function(){return{gio:{data:{}}}},imProfileChatClick:function(){return{gio:{data:{}}}},imNotificationBellClick:function(){return{gio:{data:{}}}},imNavNotificationTabExposure:function(){return{gio:{data:{}}}},imNavActivityTabExposure:function(){return{gio:{data:{}}}},imNavChatTabExposure:function(){return{gio:{data:{}}}},imPageNotificationTabExposure:function(){return{gio:{data:{}}}},imPageActivityTabExposure:function(){return{gio:{data:{}}}},imPageChatTabExposure:function(){return{gio:{data:{}}}}}),m=15,d=20,p="markAllRead";(s=o||(o={}))[s.noty=c.Hb.NotificationI]="noty",s[s.activity=c.Hb.NotificationIi]="activity",s[s.chat=c.Hb.NotificationIii]="chat";var f=((r={})[c.Hb.NotificationI]="noty",r[c.Hb.NotificationIi]="activity",r[c.Hb.NotificationIii]="chat",r),g=((i={})[c.Hb.NotificationIii]=l.imNavChatTabExposure,i[c.Hb.NotificationIi]=l.imNavActivityTabExposure,i[c.Hb.NotificationI]=l.imNavNotificationTabExposure,i),h=((a={})[c.Hb.NotificationIii]=l.imPageChatTabExposure,a[c.Hb.NotificationIi]=l.imPageActivityTabExposure,a[c.Hb.NotificationI]=l.imPageNotificationTabExposure,a)},POpa:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){try{return e?JSON.parse(e):t}catch(e){return t}}},QPBD:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,i,a=n("D57K"),o=n("f7k3"),s=n("S0cN"),c=n.n(s);function u(e,t){return function(n){var r,i;void 0===n&&(n="0px");var a=c()(e+"-"+t);return Object(o.b)(((r={})[a]=n,r["@supports ("+a+": max("+n+"))"]={"&":(i={},i[a]="max("+n+", env(safe-area-inset-"+t+"))",i)},r))}}!function(e){e.Padding="padding"}(r||(r={})),function(e){e.Top="top",e.Right="right",e.Bottom="bottom",e.Left="left"}(i||(i={}));var l={padding:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return void 0===t&&(t="0px"),o.b.apply(void 0,Object(a.__spread)(e.map((function(e){return e(t)}))))}}(u(r.Padding,i.Top),u(r.Padding,i.Bottom),u(r.Padding,i.Left),u(r.Padding,i.Right)),paddingTop:u(r.Padding,i.Top),paddingBottom:u(r.Padding,i.Bottom),paddingLeft:u(r.Padding,i.Left),paddingRight:u(r.Padding,i.Right)}},RlKl:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ERkP");function i(e,t){var n=Object(r.useCallback)(e,t),i=Object(r.useRef)(e);return i.current=n,i}},Sifx:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){if(t&&!(e<=0)&&(1===e&&(window.location.href=t),2===e&&window.open(t),3===e)){var n=document.createElement("div");n.setAttribute("style","\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 2;\n        background: rgba(0,0,0,0.37);\n        display: flex;\n        justify-content: center;\n        align-items: center;\n    ");var r=document.createElement("div");r.innerText="\xd7",r.setAttribute("style","\n        font-size: 30px;\n        color: #fff;\n        top: 50%;\n        margin-left: 407px;\n        position: absolute;\n        cursor: pointer;\n        left: 50%;\n        margin-top: -330px;\n    "),r.addEventListener("click",(function(){n.remove()}));var i=document.createElement("iframe");i.src=t,i.scrolling="no",i.setAttribute("style","\n        overflow: hidden;\n        width: 800px;\n        height: 600px;\n        border: 0;\n    "),n.appendChild(r),n.appendChild(i),document.body.appendChild(n)}}},UsLb:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return G}));var r,i=n("D57K"),a=n("5Nzd"),o=n("u3dr"),s=n("2wT7"),c=n("9EWH"),u=n("cr/0"),l=n("d9YI"),m=n("pN2L"),d=n("3riI"),p=n("cQOC"),f=n("HnWI"),g=n("AouM"),h=n("IMYO"),y=n("4HYP"),b=n("W/Ou"),v=n("RtDN"),S=n("rzNM"),T=n("Jg5f"),M=n("U3QC"),C=n("QB3Q"),k=n("z5yO"),A=n("mhnT"),I=n("2t7I"),P=n("lqvn"),x=n("B07F"),O=n("tDg9"),_={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"notyActivityInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inboxType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotyInboxType"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"startId"}},type:{kind:"NamedType",name:{kind:"Name",value:"ID"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notyActivityInfo"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inboxType"},value:{kind:"Variable",name:{kind:"Name",value:"inboxType"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}},{kind:"Argument",name:{kind:"Name",value:"startId"},value:{kind:"Variable",name:{kind:"Name",value:"startId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasMore"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"nextId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"activities"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"time"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"verb"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"link"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isRead"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entityType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"link"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"object"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entityType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entityId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"link"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entityType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"meta"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"link"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"aggregationInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{source:{body:"query notyActivityInfo($inboxType: NotyInboxType!, $limit: Int, $startId: ID) {\n  notyActivityInfo(inboxType: $inboxType, limit: $limit, startId: $startId) {\n    hasMore\n    nextId\n    activities {\n      id\n      time\n      verb\n      content\n      link\n      isRead\n      subject {\n        entityType\n        meta {\n          name\n          link\n        }\n      }\n      object {\n        entityType\n        entityId\n        meta {\n          name\n          link\n        }\n      }\n      target {\n        entityType\n        meta {\n          name\n          link\n        }\n      }\n      aggregationInfo {\n        count\n      }\n    }\n  }\n}"}},operationName:"notyActivityInfo",defName:"notyActivityInfo"},w={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"notyEntitySubscriptionStatus"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"entities"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotyEntityInput"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notyEntitySubscriptionStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"entities"},value:{kind:"Variable",name:{kind:"Name",value:"entities"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"entityId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"entityType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscribed"},arguments:[],directives:[]}]}}]}}],loc:{source:{body:"query notyEntitySubscriptionStatus($entities: [NotyEntityInput!]!){\n  notyEntitySubscriptionStatus(entities:$entities) {\n    entityId\n    entityType\n    subscribed\n  }\n}"}},operationName:"notyEntitySubscriptionStatus",defName:"notyEntitySubscriptionStatus"},E={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"notyUnsubscribeEntity"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"entityId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"entityType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotyEntityType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notyUnsubscribeEntity"},arguments:[{kind:"Argument",name:{kind:"Name",value:"entityId"},value:{kind:"Variable",name:{kind:"Name",value:"entityId"}}},{kind:"Argument",name:{kind:"Name",value:"entityType"},value:{kind:"Variable",name:{kind:"Name",value:"entityType"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]}]}}]}}],loc:{source:{body:"mutation notyUnsubscribeEntity($entityId: ID!, $entityType: NotyEntityType!){\n  notyUnsubscribeEntity(entityId: $entityId, entityType: $entityType) {\n    ok\n  }\n}"}},operationName:"notyUnsubscribeEntity",defName:"notyUnsubscribeEntity"},j={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"notyMarkSomeAsRead"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inboxType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotyInboxType"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"readActivities"}},type:{kind:"NonNullType",type:{kind:"ListType",type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotyReadActivityInput"}}}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notyMarkSomeAsRead"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inboxType"},value:{kind:"Variable",name:{kind:"Name",value:"inboxType"}}},{kind:"Argument",name:{kind:"Name",value:"readActivities"},value:{kind:"Variable",name:{kind:"Name",value:"readActivities"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]}]}}]}}],loc:{source:{body:"mutation notyMarkSomeAsRead($inboxType: NotyInboxType!, $readActivities: [NotyReadActivityInput!]!){\n  notyMarkSomeAsRead(inboxType: $inboxType, readActivities: $readActivities) {\n    ok\n  }\n}"}},operationName:"notyMarkSomeAsRead",defName:"notyMarkSomeAsRead"},R={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"notyMarkAllAsRead"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"inboxType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"NotyInboxType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"notyMarkAllAsRead"},arguments:[{kind:"Argument",name:{kind:"Name",value:"inboxType"},value:{kind:"Variable",name:{kind:"Name",value:"inboxType"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"ok"},arguments:[],directives:[]}]}}]}}],loc:{source:{body:"mutation notyMarkAllAsRead ($inboxType: NotyInboxType!) {\n  notyMarkAllAsRead(inboxType: $inboxType) {\n    ok\n  }\n}"}},operationName:"notyMarkAllAsRead",defName:"notyMarkAllAsRead"},N=n("np1P"),L=n("HT7L"),D=n("POSc"),B=n("Ab25");n("1F0A"),function(e){e.Navbar="navbar",e.Page="page"}(r||(r={}));var F={filter:N.c.NotificationI,totalUnreadNumber:0,activityInfo:null,isLoading:!1,subscriptionInfo:{}},U="/graphql/noty",G=function(e){function t(t,n,r){var i=e.call(this)||this;return i.client=t,i.globalDataFetcher=n,i.unread=r,i.defaultState=F,i.markAllReadChannel=new BroadcastChannel(D.a),i.broadcast$=Object(u.a)((function(e){i.markAllReadChannel.addEventListener("message",e)}),(function(e){i.markAllReadChannel.removeEventListener("message",e)})),i}var n,r,s,G,H,W,z,q,V,K,J,Q,Y,X,Z,$,ee,te,ne,re,ie,ae,oe,se,ce,ue,le;return Object(i.__extends)(t,e),t.prototype.updateFilter=function(e,t){e.filter=t,e.activityInfo=null},t.prototype.clearActivityInfo=function(e){e.activityInfo=null},t.prototype.updateNotifications=function(e,t){var n=e.activityInfo;n&&t.forEach((function(e){e.readActivities.forEach((function(e){n.activities.forEach((function(t){t.id===e.id&&(t.isRead=!0)}))}))}))},t.prototype.updateNotificationsAllRead=function(e){var t=e.activityInfo;t&&t.activities.forEach((function(e){e.isRead=!0}))},t.prototype.setActivityInfo=function(e,t){if(e.activityInfo&&t){var n=t.activities,r=t.hasMore,i=t.nextId;e.activityInfo={hasMore:r,nextId:i,activities:e.activityInfo.activities.concat(n)}}else e.activityInfo=t||null},t.prototype.updateActivitySubscriptionInfo=function(e,t){t&&t.forEach((function(t){e.subscriptionInfo[t.entityId+t.entityType]=t.subscribed}))},t.prototype.updateActivitySubscriptionInfoAfterUnsubscribe=function(e,t){e.subscriptionInfo[t.entityId+t.entityType]=!1},t.prototype.setLoading=function(e,t){e.isLoading=t},t.prototype.fetchNotifications=function(e){var t=this;return e.pipe(Object(g.a)((function(e){return t.client.query({query:_,variables:e,fetchPolicy:"network-only",fallbackErrorMessageForUnknownError:"\u83b7\u53d6\u901a\u77e5\u5931\u8d25",context:{uri:U}}).pipe(Object(h.a)((function(){return l.a})),Object(y.b)((function(e){var n,r,i=e.data,a=null!==(r=null===(n=null===i||void 0===i?void 0:i.notyActivityInfo)||void 0===n?void 0:n.activities.filter((function(e){return!!e.object})).map((function(e){var t,n;return{entityId:null===(t=e.object)||void 0===t?void 0:t.entityId,entityType:null===(n=e.object)||void 0===n?void 0:n.entityType}})))&&void 0!==r?r:[];return a.length?Object(m.a)(t.getActions().setActivityInfo(null===i||void 0===i?void 0:i.notyActivityInfo),t.getActions().fetchNotyEntitySubscriptionStatus({entities:a})):Object(m.a)(t.getActions().setActivityInfo(null===i||void 0===i?void 0:i.notyActivityInfo))})),Object(b.a)(t.getActions().setLoading(!0)),Object(v.a)(t.getActions().setLoading(!1)))})))},t.prototype.fetchNotyEntitySubscriptionStatus=function(e){var t=this;return e.pipe(Object(S.a)((function(e){return t.client.query({query:w,variables:e,fetchPolicy:"network-only",fallbackErrorMessageForUnknownError:"\u83b7\u53d6\u901a\u77e5\u8ba2\u9605\u72b6\u6001\u5931\u8d25",context:{uri:U}}).pipe(Object(h.a)((function(){return l.a})),Object(T.a)((function(e){var n=e.data;return t.getActions().updateActivitySubscriptionInfo(n.notyEntitySubscriptionStatus)})))})))},t.prototype.unsubscribe=function(e){var t=this;return e.pipe(Object(S.a)((function(e){return t.client.mutate({mutation:E,variables:e,fallbackErrorMessageForUnknownError:"\u53d6\u6d88\u5931\u8d25",context:{uri:U}}).pipe(Object(h.a)((function(){return l.a})),Object(T.a)((function(){return t.getActions().updateActivitySubscriptionInfoAfterUnsubscribe(e)})))})))},t.prototype.broadcastMarkAllRead=function(e){var t=this;return e.pipe(Object(M.a)((function(e){t.markAllReadChannel.postMessage(e)})),Object(y.b)((function(){return l.a})))},t.prototype.listenToBroadcast=function(e){var t=this;return Object(d.b)([e,this.broadcast$]).pipe(Object(T.a)((function(e){var n=Object(i.__read)(e,2),r=(n[0],n[1]);return t.unread.getActions().updateUnreadNumberByType({inboxType:r.data,count:0,action:"set"})})))},t.prototype.markAsRead=function(e){var t=this;return e.pipe(Object(C.a)(1e3),Object(k.a)((function(e){return e.length>0})),Object(T.a)((function(e){var t=e.filter((function(e){return e.inboxType===N.c.NotificationI})).map((function(e){return e.activity})),n=e.filter((function(e){return e.inboxType===N.c.NotificationIi})).map((function(e){return e.activity}));return[{inboxType:N.c.NotificationI,readActivities:t},{inboxType:N.c.NotificationIi,readActivities:n}].filter((function(e){return e.readActivities.length>0}))})),Object(y.b)((function(e){return Object(p.a)(e.map((function(e){return t.client.mutate({mutation:j,variables:e,context:{uri:U}})}))).pipe(Object(h.a)((function(){return l.a})),Object(y.b)((function(){return Object(m.a)(t.unread.getActions().fetchUnreadCount(),t.getActions().updateNotifications(e))})))})),Object(A.a)(this.cancelMark$),Object(I.a)())},t.prototype.markAllRead=function(e){var t=this;return e.pipe(Object(S.a)((function(e){return t.client.mutate({mutation:R,variables:{inboxType:e},context:{uri:U},fallbackErrorMessageForUnknownError:"\u6807\u8bb0\u6240\u6709\u901a\u77e5\u5df2\u8bfb\u5931\u8d25"}).pipe(Object(y.b)((function(){return Object(m.a)(t.unread.getActions().updateUnreadNumberByType({count:0,action:"set",inboxType:e}),t.getActions().updateNotificationsAllRead(),t.getActions().broadcastMarkAllRead(e))})),Object(b.a)(t.getActions().cancelMark$()))})))},t.prototype.listenToNotificationInWs=function(e){var t=this;return Object(d.b)([e,this.globalDataFetcher.globalData$]).pipe(Object(T.a)((function(e){var t,n,r,a=Object(i.__read)(e,2)[1];return[null===(t=a.feature)||void 0===t?void 0:t.enableWs,null===(n=a.userStatus)||void 0===n?void 0:n.userSlug,null===(r=a.userStatus)||void 0===r?void 0:r.socketToken]})),Object(P.a)(),Object(g.a)((function(e){var t=Object(i.__read)(e,3),n=t[0],r=t[1],a=t[2];return n&&r&&a?Object(L.a)(a,r):l.a})),Object(g.a)((function(e){return e})),Object(T.a)((function(){return t.unread.getActions().updateUnreadNumberByType({inboxType:N.c.NotificationIi,count:1,action:"inc"})})))},Object(i.__decorate)([Object(o.a)(),Object(i.__metadata)("design:type","function"===typeof(n="undefined"!==typeof f.a&&f.a)?n:Object)],t.prototype,"stopPolling$",void 0),Object(i.__decorate)([Object(o.a)(),Object(i.__metadata)("design:type","function"===typeof(r="undefined"!==typeof f.a&&f.a)?r:Object)],t.prototype,"cancelMark$",void 0),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",[Object,"function"===typeof(s="undefined"!==typeof N.c&&N.c)?s:Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"updateFilter",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",[Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"clearActivityInfo",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",[Object,Array]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"updateNotifications",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",[Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"updateNotificationsAllRead",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(G="undefined"!==typeof c.Draft&&c.Draft)?G:Object,"function"===typeof(H="undefined"!==typeof ActivityInfo&&ActivityInfo)?H:Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setActivityInfo",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(W="undefined"!==typeof c.Draft&&c.Draft)?W:Object,Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"updateActivitySubscriptionInfo",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(z="undefined"!==typeof c.Draft&&c.Draft)?z:Object,Object]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"updateActivitySubscriptionInfoAfterUnsubscribe",null),Object(i.__decorate)([Object(o.c)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(q="undefined"!==typeof c.Draft&&c.Draft)?q:Object,Boolean]),Object(i.__metadata)("design:returntype",void 0)],t.prototype,"setLoading",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(V="undefined"!==typeof f.a&&f.a)?V:Object]),Object(i.__metadata)("design:returntype","function"===typeof(K="undefined"!==typeof f.a&&f.a)?K:Object)],t.prototype,"fetchNotifications",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(J="undefined"!==typeof f.a&&f.a)?J:Object]),Object(i.__metadata)("design:returntype","function"===typeof(Q="undefined"!==typeof f.a&&f.a)?Q:Object)],t.prototype,"fetchNotyEntitySubscriptionStatus",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(Y="undefined"!==typeof f.a&&f.a)?Y:Object]),Object(i.__metadata)("design:returntype","function"===typeof(X="undefined"!==typeof f.a&&f.a)?X:Object)],t.prototype,"unsubscribe",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(Z="undefined"!==typeof f.a&&f.a)?Z:Object]),Object(i.__metadata)("design:returntype","function"===typeof($="undefined"!==typeof f.a&&f.a)?$:Object)],t.prototype,"broadcastMarkAllRead",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(ee="undefined"!==typeof f.a&&f.a)?ee:Object]),Object(i.__metadata)("design:returntype","function"===typeof(te="undefined"!==typeof f.a&&f.a)?te:Object)],t.prototype,"listenToBroadcast",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(ne="undefined"!==typeof f.a&&f.a)?ne:Object]),Object(i.__metadata)("design:returntype","function"===typeof(re="undefined"!==typeof f.a&&f.a)?re:Object)],t.prototype,"markAsRead",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(ie="undefined"!==typeof f.a&&f.a)?ie:Object]),Object(i.__metadata)("design:returntype","function"===typeof(ae="undefined"!==typeof f.a&&f.a)?ae:Object)],t.prototype,"markAllRead",null),Object(i.__decorate)([Object(o.b)(),Object(i.__metadata)("design:type",Function),Object(i.__metadata)("design:paramtypes",["function"===typeof(oe="undefined"!==typeof f.a&&f.a)?oe:Object]),Object(i.__metadata)("design:returntype","function"===typeof(se="undefined"!==typeof f.a&&f.a)?se:Object)],t.prototype,"listenToNotificationInWs",null),t=Object(i.__decorate)([Object(a.a)(),Object(i.__metadata)("design:paramtypes",["function"===typeof(ce="undefined"!==typeof x.a&&x.a)?ce:Object,"function"===typeof(ue="undefined"!==typeof O.b&&O.b)?ue:Object,"function"===typeof(le="undefined"!==typeof B.a&&B.a)?le:Object])],t)}(s.a)},VKGE:function(e,t,n){"use strict";var r=n("O6ss");n.d(t,"b",(function(){return r.a})),n.d(t,"c",(function(){return r.b}));var i=n("fGl3");n.d(t,"a",(function(){return i.a}))},Vvx0:function(e,t,n){"use strict";n.r(t),n.d(t,"globalStyle",(function(){return me}));var r,i=n("jg1C"),a=n("f7k3"),o=n("ERkP"),s=n.n(o),c=n("6UEz"),u=n("IDXw"),l=n("X4a2"),m=n("KW5m"),d=n("9KnD"),p=n("D57K"),f=n("K/af"),g=n("lKcY"),h=n("pu3o"),y=n.n(h),b=n("zCf4"),v=n("JFCy"),S=n("8JP3"),T=n("Pigy"),M=n("l1SX"),C=n("/NrN"),k=n("brrL"),A=n("b+y+"),I=n("+dJ8"),P=n("34li"),x=n("TMWK"),O=Object(x.a)(C.a,{target:"e1gf6uf0"})({width:"300px",margin:"20px"},"label:LoadMoreButton;"),_=Object(o.memo)((function(e){return e.hasMore?e.loading?Object(i.jsx)(M.a,{},void 0):Object(i.jsx)(O,Object(p.__assign)({size:"md",onClick:e.loadMore},{children:"\u52a0\u8f7d\u66f4\u591a..."}),void 0):null})),w=n("2B9F"),E=n("POSc"),j=n("EKTE"),R=n("YD0z"),N=n("mlzq"),L=n("UsLb"),D=n("Ab25"),B=n("fe7r"),F=n("yUVf"),U=n("XKjd"),G=n("fgAA"),H=n("pqRN"),W=n("7a+J"),z=Object(x.a)("div",{target:"e1au0exy0"})({minWidth:u.f,maxWidth:u.e,margin:"0 auto",padding:"10px 20px"},"label:Container;"),q=Object(x.a)("div",{target:"e1au0exy1"})(W.a.level1,{borderRadius:"8px",background:G.b.Layer1()},"label:Card;"),V=Object(x.a)("div",{target:"e1au0exy2"})({display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid "+G.a.grey(2),paddingRight:"12px"},"label:Header;"),K=Object(x.a)("div",{target:"e1au0exy3"})({textAlign:"center"},"label:IncrementalContainer;"),J=Object(x.a)("div",{target:"e1au0exy4"})({padding:"40px 0"},"label:LoadingContainer;"),Q=Object(x.a)("div",{target:"e1au0exy5"})({display:"flex",alignItems:"center","> *:not(:last-child)":{marginRight:"20px"}},"label:RightButtons;"),Y=Object(x.a)("div",{target:"e1au0exy6"})((function(e){var t=e.isActive,n=e.hasUnread;return Object(p.__assign)(Object(p.__assign)({position:"relative",display:"flex",alignItems:"center",fontSize:"12px",color:t?G.b.BaseGrey7():G.b.BaseGrey5(),userSelect:"none",margin:"0 10px"},Object(H.c)(".2s")),{svg:{width:"20px",height:"20px"},":hover":{color:G.a.grey(7)},"::after":{content:'""',position:"absolute",display:n?"block":"none",width:"5px",height:"5px",borderRadius:"50%",background:G.a.red(4),top:0,right:"-6px"}})}),"label:TabTitle;"),X=Object(x.a)("span",{target:"e1au0exy7"})({backgroundColor:G.a.grey(9,.04),padding:"0 5px",marginLeft:"6px",borderRadius:"8px"},"label:Count;"),Z=Object(U.a)({">div":{padding:"12px 20px"}}),$=n("oYRR"),ee=n("eeJw"),te=n("GG6d"),ne=s.a.forwardRef((function(e,t){return Object(i.jsx)(te.a,Object(p.__assign)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},e,{children:Object(i.jsx)("path",{fillRule:"evenodd",d:"M21.927 6.124a.996.996 0 01.069.47c.003.052.004.104.004.156v10.5c0 1.521-1.264 2.75-2.8 2.75H4.8C3.264 20 2 18.771 2 17.25V6.75c0-.052.002-.104.004-.156a.996.996 0 01.07-.47C2.363 4.905 3.481 4 4.8 4h14.4c1.318 0 2.436.905 2.727 2.124zm-2.229.042A.824.824 0 0019.2 6H4.8a.824.824 0 00-.498.166L12 11.298l7.698-5.132zM20 8.369l-7.445 4.963a1 1 0 01-1.11 0L4 8.37v8.881c0 .404.356.75.8.75h14.4c.444 0 .8-.346.8-.75V8.369z",clipRule:"evenodd"},void 0)}),void 0)})),re=((r={})[P.Hb.NotificationI]={title:"\u901a\u77e5",icon:Object(i.jsx)($.a,{},void 0)},r[P.Hb.NotificationIi]={title:"\u52a8\u6001",icon:Object(i.jsx)(ee.a,{},void 0)},r[P.Hb.NotificationIii]={title:"\u79c1\u4fe1",icon:Object(i.jsx)(ne,{},void 0)},r),ie=function(e){var t=e.unreadCounts,n=e.type;return Object(i.jsxs)(i.Fragment,{children:[re[n].icon,Object(i.jsx)("span",{children:re[n].title},void 0),Object(i.jsx)(X,{children:t||null},void 0)]},void 0)},ae=n("lSUb"),oe=n("z0YO"),se=Object(ae.a)((function(e,t,n){return Object(i.jsx)(Y,Object(p.__assign)({isActive:t,hasUnread:n},{children:e}),void 0)})),ce=Object(o.memo)((function(e){var t=Object(o.useCallback)((function(t){e.currentTab!==t&&e.onTabChange(t)}),[e]);return Object(i.jsx)(oe.a,Object(p.__assign)({tabWidth:e.tabWidth,type:e.type,size:e.size,onChange:t,activeKey:e.currentTab,tabHeaderItemClassname:Z},{children:e.tabs.map((function(t){return Object(i.jsx)(oe.a.Tab,Object(p.__assign)({title:se(t.title,t.key===e.currentTab,t.unreadNumber&&t.unreadNumber>0)},{children:null}),t.key)}))}),void 0)})),ue=Object(o.memo)((function(e){var t,n=Object(p.__read)(Object(f.a)(L.a,{scope:g.a}),2),r=n[0],a=r.activityInfo,s=r.isLoading,c=r.filter,u=r.subscriptionInfo,l=n[1],m=l.fetchNotifications,d=l.updateFilter,x=l.markAsRead,O=l.markAllRead,U=l.unsubscribe,G=Object(b.j)().search,H=Object(h.parse)(G,{ignoreQueryPrefix:!0}).tab,W=Object(b.i)(),Y=Object(j.a)().data,X=Object(p.__read)(Object(f.a)(D.a),2),Z=X[0].unreadCounts,$=X[1].fetchUnreadCount,ee=(Object(I.b)().data||{}).unread,te=void 0===ee?0:ee,ne=Object(R.a)(!0).mutate,re=Object(o.useCallback)((function(){var e;try{null===(e=Object(N.a)())||void 0===e||e.resetAllSessionUnread()}catch(e){console.error(e)}ne(0)}),[ne]),ae=Object(o.useCallback)((function(e){d(e),W.replace({search:y.a.stringify({tab:E.e[e]})}),e!==P.Hb.NotificationIii&&$()}),[d,W,$]);Object(o.useEffect)((function(){E.d[H]&&E.d[H]!==c&&d(E.d[H])}),[c,H,d]),Object(o.useEffect)((function(){var e;null===(e=E.f[c])||void 0===e||e.call(E.f)}),[c]);var oe=null!==(t=null===a||void 0===a?void 0:a.activities)&&void 0!==t?t:[],se=(null===a||void 0===a?void 0:a.hasMore)||!1,ue=null===a||void 0===a?void 0:a.nextId,le=Object(o.useCallback)((function(){m({limit:E.b,inboxType:c,startId:ue})}),[m,c,ue]);Object(o.useEffect)((function(){c!==P.Hb.NotificationIii&&le()}),[c]),Object(o.useEffect)((function(){$()}),[$]);var me=Object(o.useCallback)((function(){c===P.Hb.NotificationIii?re():O(c)}),[c,O,re]),de=Object(o.useMemo)((function(){return[{key:P.Hb.NotificationI,title:Object(i.jsx)(ie,{type:P.Hb.NotificationI,unreadCounts:Z[P.Hb.NotificationI]},void 0)},{key:P.Hb.NotificationIi,title:Object(i.jsx)(ie,{type:P.Hb.NotificationIi,unreadCounts:Z[P.Hb.NotificationIi]},void 0)}]}),[Y,te,Z]),pe=Object(o.useMemo)((function(){return c===P.Hb.NotificationIii?0===te:0===Z[c]}),[c,te,Z]);return Object(i.jsx)(S.a,{children:Object(i.jsx)(z,{children:Object(i.jsxs)(q,{children:[Object(i.jsxs)(V,{children:[Object(i.jsx)(ce,{type:"line",size:v.a,currentTab:c,tabs:de,onTabChange:ae},void 0),Object(i.jsxs)(Q,{children:[Object(i.jsx)(C.a,Object(p.__assign)({kind:"transparent",prefixIcon:Object(i.jsx)(k.a,{},void 0),onClick:me,disabled:pe},{children:"\u5168\u90e8\u5df2\u8bfb"}),void 0),Object(i.jsx)(C.a,Object(p.__assign)({href:e.notificationsPath,kind:"transparent",prefixIcon:Object(i.jsx)(A.a,{},void 0),target:"_blank",rel:"noopener"},{children:"\u901a\u77e5\u8bbe\u7f6e"}),void 0)]},void 0)]},void 0),Object(i.jsx)(F.b,{children:c===P.Hb.NotificationIii?Object(i.jsx)(B.a,{},void 0):Object(i.jsxs)(i.Fragment,{children:[oe.map((function(e){return Object(i.jsx)(w.a,{activity:e,markAsRead:x,filter:c,unsubscribe:U,subscriptionInfo:u},e.id)})),!s&&!oe.length&&Object(i.jsx)(F.a,{children:Object(i.jsx)(T.a,{type:"img",description:c===P.Hb.NotificationI?"\u65e0\u901a\u77e5\u6570\u636e":"\u65e0\u52a8\u6001\u6570\u636e"},void 0)},void 0),s?Object(i.jsx)(J,{children:Object(i.jsx)(M.a,{},void 0)},void 0):Object(i.jsx)(K,{children:Object(i.jsx)(_,{hasMore:se,loadMore:le},void 0)},void 0)]},void 0)},void 0)]},void 0)},void 0)},void 0)})),le=Object(x.a)("div",{target:"e19vlcmf0"})({width:"100%",flex:1,background:G.b.LayerBg()},"label:Container;"),me=Object(a.b)({"#lc-header":{position:"relative",zIndex:c.a},"#lc-footer":{fontSize:"13px",lineHeight:"18px",margin:"0 !important",width:"100%",maxWidth:"none !important",minWidth:"none !important","> div":{width:"100%",maxWidth:u.e,margin:"0 auto"}}},"label:globalStyle;");t.default=Object(m.a)((function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(d.a,{title:"\u901a\u77e5\u4e2d\u5fc3"},void 0),Object(i.jsx)(a.a,{styles:me},void 0),Object(i.jsx)(le,{children:Object(i.jsx)(ue,{notificationsPath:l.a.profile.notifications},void 0)},void 0)]},void 0)}))},WGIV:function(e,t,n){"use strict";function r(e,t){void 0===t&&(t={forceTwoDecimalPlaces:!1});var n=String(e).padStart(3,"0"),r=n.length,i=n.substr(0,r-2)+"."+n.substr(r-2);return t.forceTwoDecimalPlaces?i:i.replace(/([1-9])0$/,"$1").replace(/\.00$/,"")}n.d(t,"a",(function(){return r}))},YD0z:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("2Lg3"),i=n.n(r),a=n("wR8M"),o=n("U5ty"),s=n("gd5h"),c=n("+dJ8"),u={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateUnreadCount"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"count"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"imUnreadChange"},arguments:[{kind:"Argument",name:{kind:"Name",value:"count"},value:{kind:"Variable",name:{kind:"Name",value:"count"}}}],directives:[]}]}}],loc:{source:{body:"mutation UpdateUnreadCount($count: Int!) {\n  imUnreadChange(count: $count)\n}"}},operationName:"UpdateUnreadCount",defName:"imUnreadChange"},l=-1;function m(e){var t=Object(a.b)();return Object(o.a)((function(t){return e||!i()(t)&&l!==t?(l=t,s.f.mutate({mutation:u,variables:{count:t}})):Promise.reject("Do not need update")}),{onError:function(){console.warn("im message logic error")},onSuccess:function(){t.invalidateQueries(c.a)}})}},aCEu:function(e,t,n){"use strict";var r=n("SrEh");n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b}))},brrL:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("jg1C"),a=n("ERkP"),o=n.n(a),s=n("GG6d"),c=o.a.forwardRef((function(e,t){return Object(i.jsx)(s.a,Object(r.__assign)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},e,{children:Object(i.jsx)("path",{fillRule:"evenodd",d:"M20 12.005v-.828a1 1 0 112 0v.829a10 10 0 11-5.93-9.14 1 1 0 01-.814 1.826A8 8 0 1020 12.005zM8.593 10.852a1 1 0 011.414 0L12 12.844l8.293-8.3a1 1 0 011.415 1.413l-9 9.009a1 1 0 01-1.415 0l-2.7-2.7a1 1 0 010-1.414z",clipRule:"evenodd"},void 0)}),void 0)}))},"by+X":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("iUUs"),i=n("R+ki"),a=n("Jg5f"),o=n("QagP"),s=n("z5yO");function c(e){var t=e.percent;return Object(r.a)(document.body,"scroll").pipe(Object(i.a)(50),Object(a.a)((function(){return{scrollTop:document.body.scrollTop,clientHeight:document.body.clientHeight,scrollHeight:document.body.scrollHeight}})),Object(o.a)(),Object(s.a)((function(e){return function(e){return e[0].scrollTop<e[1].scrollTop}(e)&&function(e,t){return(e.clientHeight+e.scrollTop)/e.scrollHeight>t/100}(e[1],t)})))}},fB5F:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="Question Picker Bug Detection Reward"},fGl3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){this.val=e,this.left=null,this.right=null}},fe7r:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var r=n("D57K"),i=n("jg1C"),a=n("ERkP"),o=n("l1SX"),s=n("Pigy"),c=n("34li"),u=n("BQ33"),l=n.n(u),m=n("sH56"),d=n("wR8M"),p=n("EdJC"),f=n("+dJ8"),g=n("mlzq"),h=n("EKTE"),y=n("YD0z"),b="Im_Sessions";function v(){var e=Object(r.__read)(Object(a.useState)(!0),2),t=e[0],n=e[1],i=Object(d.b)();!function(e){var t=Object(a.useRef)(),n=Object(d.b)(),i=Object(f.b)().data||{},o=i.accId,s=i.token,c=Object(h.a)().data,u=Object(y.a)().mutateAsync,l=Object(a.useCallback)((function(e){var i,a=n.getQueryData(S)||[],o=null===(i=null===t||void 0===t?void 0:t.current)||void 0===i?void 0:i.mergeUsers(Object(r.__spread)(a.values()),e),s=new Map;null===o||void 0===o||o.forEach((function(e){return s.set(e.account,e)})),n.setQueryData(S,s),n.invalidateQueries(S)}),[n,t]),m=Object(a.useCallback)((function(e){var t=null===e||void 0===e?void 0:e.reduce((function(e,t){return e+t.unread}),0);u(t)}),[u]),p=Object(a.useCallback)((function(e){if(t.current){var r=n.getQueryData(b),i=t.current.mergeSessions(r||[],e);n.setQueryData(b,i),m(i)}}),[n,m]),v=Object(a.useCallback)((function(e){var i;n.setQueryData(b,e),m(e);var a=e.map((function(e){return e.to}));null===(i=null===t||void 0===t?void 0:t.current)||void 0===i||i.getUsers({accounts:a,done:function(e,i){var a,o=n.getQueryData(S)||[],s=null===(a=null===t||void 0===t?void 0:t.current)||void 0===a?void 0:a.mergeUsers(Object(r.__spread)(o.values()),i),c=new Map;null===s||void 0===s||s.forEach((function(e){return c.set(e.account,e)})),n.setQueryData(S,c),n.invalidateQueries(S)}})}),[n,m]),M=Object(a.useCallback)((function(){var e=n.getQueryData(b);n.setQueryData(b,e||[])}),[n]);Object(a.useEffect)((function(){var i,a;o&&c||(null===(i=null===e||void 0===e?void 0:e.onerror)||void 0===i||i.call(e,!1),n.setQueryData(b,[])),!t.current&&s&&o&&c&&(t.current=Object(g.b)(Object(r.__assign)({debug:!1,appKey:T,token:s,account:o,db:!0,syncSessionUnread:!0,onupdatesession:p,onsessions:v,onupdateuser:l,onSessionsWithMoreRoaming:M},e))),t.current&&(null===(a=null===e||void 0===e?void 0:e.onconnect)||void 0===a||a.call(e))}),[o,c,M,v,p,l,e,t,s,n]),t.current}({onconnect:function(){return n(!1)},onerror:function(){return n(!1)}});var o=Object(p.a)([b],(function(){return i.getQueryData(b)}),{staleTime:1/0,select:function(e){return null===e||void 0===e?void 0:e.filter((function(e){return"p2p"===e.scene}))}}),s=o.data,c=Object(r.__rest)(o,["data"]),u=Object(a.useMemo)((function(){return null===s||void 0===s?void 0:s.reduce((function(e,t){return e+t.unread}),0)}),[s]);return Object(r.__assign)({data:s,count:u,loading:t},c)}var S="Friends",T="9426c742f4236cf326b6b7fe17670bb6";var M=n("TMWK"),C=n("fgAA"),k=n("pqRN"),A=n("/fpG"),I=n("uXcj"),P=Object(M.a)(A.a,{target:"eu7bqzx0"})({width:"32px",height:"32px",borderRadius:"50%",marginRight:"12px"},"label:Avatar;"),x=Object(M.a)("div",{target:"eu7bqzx1"})({flex:"1",overflow:"hidden"},"label:TextBlock;"),O=Object(M.a)("div",{target:"eu7bqzx2"})(Object(k.h)(4),{fontSize:"12px",lineHeight:"20px",textOverflow:"ellipsis",overflow:"hidden",color:C.b.LabelTertiary()},"label:LabelContent;"),_=Object(M.a)("span",{target:"eu7bqzx3"})({display:"flex",borderRadius:"12px",fontSize:"12px",lineHeight:"12px",padding:"4px 6px",fontWeight:500,color:C.b.fixed.White(),background:C.b.BlueStandard(),marginLeft:"8px"},"label:CountWrap;"),w=Object(M.a)("span",{target:"eu7bqzx4"})({fontSize:"12px",lineHeight:"20px",width:"90px",textAlign:"right",color:C.b.BaseGrey6()},"label:LabelCount;"),E=Object(M.a)("div",{target:"eu7bqzx5"})({fontSize:"14px",lineHeight:"20px",color:C.b.LabelPrimary(),marginBottom:"4px"},"label:LabelName;"),j=Object(M.a)("div",{target:"eu7bqzx6"})({display:"flex",alignItems:"center",flex:"1",justifyContent:"space-between",padding:"13px 0",borderBottom:"1px solid "+C.b.DividerSecondary(),overflow:"hidden"},"label:RightBlock;"),R=Object(M.a)(I.f,{target:"eu7bqzx7"})({display:"flex",alignItems:"center",padding:"0 20px",position:"relative",cursor:"pointer",width:"100%"},"label:MessageItemWrap;");function N(e){var t,n,o,s=e.item,c=(t=s.to,n=Object(d.b)(),o=Object(p.a)(S,(function(){return n.getQueryData(S)})).data,Object(a.useMemo)((function(){return null===o||void 0===o?void 0:o.get(t)}),[o,t])),u=Object(a.useCallback)((function(){window.location.href="/chat/?to="+s.to+"&id="+s.id}),[s]);return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(R,Object(r.__assign)({className:"item-container",onClick:u},{children:[Object(i.jsx)(P,{src:"user?.avatar",alt:s.lastMsg.fromNick},void 0),Object(i.jsxs)(j,Object(r.__assign)({className:"notification-info"},{children:[Object(i.jsxs)(x,{children:[Object(i.jsx)(E,{children:null===c||void 0===c?void 0:c.nick},void 0),Object(i.jsx)(O,{children:s.lastMsg.text},void 0)]},void 0),Object(i.jsx)(w,{children:l()(s.updateTime).fromNow()},void 0),s.unread?Object(i.jsx)(L,{children:Object(m.a)(s.unread)},void 0):null]}),void 0)]}),s.id)},void 0)}function L(e){var t=e.children,n=e.className;return Object(i.jsx)(_,Object(r.__assign)({className:n},{children:t}),void 0)}function D(e){var t=e.list;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",Object(r.__assign)({className:"w-full"},{children:null===t||void 0===t?void 0:t.map((function(e){return Object(i.jsx)(N,{item:e},e.id)}))}),void 0)},void 0)}var B=n("yUVf"),F=n("oHMv");function U(){var e=v(),t=e.data,n=e.loading;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",Object(r.__assign)({style:{height:"100%"}},{children:n||!t?Object(i.jsx)(o.a,{},void 0):(null===t||void 0===t?void 0:t.length)?Object(i.jsx)(D,{list:t},void 0):Object(i.jsx)(B.a,{children:Object(i.jsx)(s.a,{type:"img",description:F.a[c.Hb.NotificationIii]},void 0)},void 0)}),void 0)},void 0)}},gTsb:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n("5/dZ"),i=n("KhDj"),a=new r.c("PushProvider"),o={provide:a,useValue:i.d}},i7Wj:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return w}));var r=n("D57K"),i=n("5Nzd"),a=n("TqoN"),o=n("EDoe"),s=n("d5gM"),c=n("uZih"),u=n.n(c),l=n("H8sf"),m=n.n(l),d=n("8Fqk"),p=n("JpoA"),f=n("U3QC"),g=n("Jg5f"),h=n("IMYO"),y=n("Fk11"),b=n("w+fZ"),v=n("Ch6N"),S=n("l8fx"),T=n("tQYX"),M=n.n(T),C=n("2Lg3"),k=n.n(C);function A(e){var t={};return Object.entries(e).forEach((function(e){var n=Object(r.__read)(e,2),i=n[0],a=n[1];k()(a)||(!M()(a)||function(e){return e instanceof File}(a)?t[i]=a:t[i]=A(a))})),t}var I="/graphql/",P="/graphql/playback",x="/graphql/exam/",O=function(){function e(e,t){this.axios=e,this.logger=t,this.host="",this.endpoint=I,this.presetHeaders={},this.docMap=new Map}var t,n;return Object.defineProperty(e.prototype,"url",{get:function(){return this.host+this.endpoint},enumerable:!1,configurable:!0}),e.prototype.query=function(e){return this.request(e)},e.prototype.mutate=function(e){return this.request(Object(r.__assign)({query:e.mutation},u()(e,"mutation")))},e.prototype.request=function(e){var t,n=this,i=e.query,o=e.variables,s=e.context,c=void 0===s?{}:s,u=e.keepNilVariables,l=e.files,b=e.preventGraphqlErrorDisplay,S=e.fallbackErrorMessageForUnknownError,T=window.performance||Date,M=T.now(),C=this.getRequestBody(i,o,u,l);if(!C.query)throw new Error("Query content could not be empty");return m()(c,{headers:Object(r.__assign)(Object(r.__assign)({},this.presetHeaders),{"x-operation-name":i.operationName,"x-definition-name":i.defName,"accept-language":this.getI18nLng()}),responseType:"json",data:null!==(t=C.form)&&void 0!==t?t:C}),Object(d.a)((function(){return n.axios.post(n.url,c).pipe(Object(f.a)({next:function(){var e=T.now()-M;n.reportPerformance(C,e)}}),Object(g.a)((function(e){var t=e.data,n=e.errors;if(n&&n.length>0){var r=n.find((function(e){return e.message.includes("user_not_authenticated")}));throw r&&v.a.next(r),n}if(!t)throw new a.a("Empty response content");var i=Object.values(t).find((function(e){return e&&!!e.error}));if(i)throw new a.a(i.error);return t})),Object(h.a)((function(e){return n.reportError(C,Array.isArray(e)?e:[e]),b||Object(y.a)(e,S),Object(p.a)(e)})))}))},e.prototype.reportPerformance=function(e,t){this.logger.info("graphql performance",{time:t,body:u()(e,"form")})},e.prototype.reportError=function(e,t){this.logger.error("GraphQL Error",{body:u()(e,"form"),errors:t})},e.prototype.printDocument=function(e){if(this.docMap.has(e.operationName))return this.docMap.get(e.operationName);var t=Object(o.a)(e);return this.docMap.set(e.operationName,t),t},e.prototype.getRequestBody=function(e,t,n,r){void 0===t&&(t={}),void 0===n&&(n=!0),void 0===r&&(r=[]);var i={variables:n?t:A(t),query:this.printDocument(e)};return e.operationName&&(i.operationName=e.operationName),r.length&&function(e,t){var n=new FormData;e.operationName&&n.append("operationName",e.operationName),n.append("query",e.query),n.append("variables",JSON.stringify(e.variables)),t.forEach((function(e){n.append(e.name,e)})),e.form=n}(i,r),i},e.prototype.getI18nLng=function(){var e;return null!==(e=s.a.language)&&void 0!==e?e:"zh"},e=Object(r.__decorate)([Object(i.a)(),Object(r.__metadata)("design:paramtypes",["function"===typeof(t="undefined"!==typeof S.a&&S.a)?t:Object,"function"===typeof(n="undefined"!==typeof b.a&&b.a)?n:Object])],e)}(),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.endpoint=P,t}return Object(r.__extends)(t,e),t=Object(r.__decorate)([Object(i.a)()],t)}(O),w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.endpoint=x,t}return Object(r.__extends)(t,e),t=Object(r.__decorate)([Object(i.a)()],t)}(O)},jEZ0:function(e,t,n){"use strict";var r=n("aSGY");n.d(t,"b",(function(){return r.a}));var i=n("sH56");n.d(t,"a",(function(){return i.a}))},jytb:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var r="MOBILE",i="DESKTOP"},kPRW:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return j}));var r,i,a=n("D57K"),o=n("jg1C"),s=n("wI94"),c=n("RfRS"),u=n("pFSi"),l=n.n(u),m=n("ERkP"),d=n.n(m),p=n("7nmT"),f=n.n(p),g=n("HnWI"),h=n("fQLH"),y=n("cQOC"),b=n("iJR/"),v=n("d9YI"),S=n("w0un"),T=n("AouM"),M=n("z5yO"),C=n("HswR"),k=n("2t7I"),A=n("wyaJ"),I=n("G2Mx"),P=n("IMYO"),x=n("WWwk"),O=n("pMX1");function _(e){var t=e.mimeType,n=void 0===t?"image/png":t;return function(e){var t=e.image,n=e.width,r=e.height,i=document.createElement("canvas"),a=i.getContext("2d"),o=window.devicePixelRatio;return null===a||void 0===a||a.scale(o,o),i.width=Math.floor(n*o),i.height=Math.floor(r*o),null===a||void 0===a||a.drawImage(t,0,0,i.width,i.height),i}(Object(a.__rest)(e,["mimeType"])).toDataURL(n)}function w(e){var t=e.svg,n=e.width,r=e.height;return Object(a.__awaiter)(this,void 0,Promise,(function(){var e,i;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return e=function(e){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e).replace(/&nbsp;/g," "))}(t),[4,(o=e,new Promise((function(e){var t=new Image;t.onload=function(){return e(t)},t.onerror=function(){return e(null)},t.crossOrigin="anonymous",t.src=o})))];case 1:return[2,(i=a.sent())?_({image:i,width:n,height:r}):null]}var o}))}))}!function(e){e.NormalTypoRound="NormalTypoRound",e.FetteMittelschrift="FetteMittelschrift"}(i||(i={}));var E=((r={})[i.NormalTypoRound]={family:"TypoRound",weight:400,style:"normal",source:"https://static.leetcode.cn/cn-mono-assets/production/assets/Typo_Round_Regular.49b4868e.otf"},r[i.FetteMittelschrift]={family:"FetteMittelschrift",weight:400,style:"normal",source:"https://static.leetcode.cn/cn-mono-assets/production/assets/FetteMittelschrift_Regular.c931a189.ttf"},r);function j(e){void 0===e&&(e={});var t=Object(m.useRef)(null),n=Object(m.useMemo)((function(){return document.createElement("div")}),[]),r=Object(m.useRef)(e);return r.current!==e&&(r.current=e),Object(S.a)((function(e){return e.pipe(Object(T.a)((function(e){var i,s,c,u=null!==(i=r.current.width)&&void 0!==i?i:window.innerWidth,l=null!==(s=r.current.height)&&void 0!==s?s:window.innerHeight,m=null!==(c=r.current.fonts)&&void 0!==c?c:[];return new g.a((function(r){var i=new h.a,s=void 0;try{f.a.render(Object(o.jsx)(R,Object(a.__assign)({ref:t,width:u,height:l,onMount:function(){i.complete()}},{children:e}),void 0),n,(function(){s=i.subscribe({complete:function(){r.next(t.current)}})}))}catch(e){r.error(e)}return function(){null===s||void 0===s||s.unsubscribe(),f.a.unmountComponentAtNode(n)}})).pipe(Object(M.a)((function(e){return!!e})),Object(C.a)((function(e){return Object(y.a)([Object(b.a)(Promise.all(m.map((function(t){return function(e,t){var n=E[e],r=n.family,i=n.weight,a=n.style,o=n.source;return N(o).then((function(e){var n=document.createElement("style");n.innerText="@font-face { font-family: "+r+"; font-weight: "+i+"; font-style: "+a+"; src: url("+e+") }",t.appendChild(n)}))}(t,e)})))),Object(b.a)(Promise.all(Object(a.__spread)(e.querySelectorAll("img")).map((function(e){return function(e){return new Promise((function(t){e.crossOrigin="anonymous",e.complete&&t(e),e.onload=function(){t(e)},e.onerror=function(){t(void 0)}}))}(e).then((function(e){return function(e){return e?new Promise((function(t){e.onload=function(){t()},e.onerror=function(){t()},e.crossOrigin="anonymous",e.src=_({image:e,width:e.width,height:e.height})})):Promise.resolve()}(e)}))}))))]).pipe(Object(C.a)((function(){return w({svg:e,width:u,height:l})})),Object(k.a)(4),Object(A.a)(1))})),Object(I.a)(1),Object(P.a)((function(e){return v.a})))})))}),null)}var R=d.a.forwardRef((function(e,t){var n=e.children,r=e.width,i=e.height,u=e.onMount,l=Object(a.__read)(Object(m.useState)(null),2),d=l[0],p=l[1],f=Object(O.a)(t),g=Object(m.useRef)(u);return g.current!==u&&(g.current=u),Object(x.a)((function(){f.current&&p(Object(s.a)({key:"dom-to-image",container:f.current,speedy:!1}))}),[]),Object(x.a)((function(){d&&g.current()}),[d]),Object(o.jsx)("svg",Object(a.__assign)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+r+" "+i,width:r,height:i,ref:f},{children:Object(o.jsx)("foreignObject",Object(a.__assign)({width:r,height:i,externalResourcesRequired:!0},{children:d&&Object(o.jsx)(c.a,Object(a.__assign)({value:d},{children:n}),void 0)}),void 0)}),void 0)}));var N=l()((function(e){return new Promise((function(t){fetch(e).then((function(e){return e.blob()})).then((function(e){var n=new FileReader;n.onload=function(e){var n;"string"===typeof(null===(n=e.target)||void 0===n?void 0:n.result)?t(e.target.result):t()},n.readAsDataURL(e)})).catch((function(e){t()}))}))}))},kdr8:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("ERkP");function a(e,t){void 0===t&&(t="image");var n=Object(r.__read)(Object(i.useState)(null),2),a=n[0],o=n[1];return Object(i.useEffect)((function(){var n;"image"===t&&(n=e,new Promise((function(e){if(n){if(localStorage.getItem(n))return e(localStorage.getItem(n));var t=new Image;t.setAttribute("crossOrigin","Anonymous"),t.onload=function(){var r=document.createElement("canvas");r.width=t.width,r.height=t.height;var i=r.getContext("2d");null===i||void 0===i||i.drawImage(t,0,0);var a=r.toDataURL("image/png");localStorage.setItem(n,a),e(a)},t.src=n}}))).then(o)}),[e,o,t]),a}},lVNd:function(e,t,n){"use strict";var r=n("+ik5");n.d(t,"a",(function(){return r.a}))},mlzq:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var r=n("8d7B").NIM,i=void 0;function a(e){return i||!e?i:(i||e||console.error("NIM config connot be empty"),i||(i=r.getInstance(e)))}function o(e){return i||console.warn("NIM instance has not been initiated",e),i}},oHMv:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,i=n("34li"),a=((r={})[i.Hb.NotificationI]="\u65e0\u901a\u77e5\u6570\u636e",r[i.Hb.NotificationIi]="\u65e0\u52a8\u6001\u6570\u636e",r[i.Hb.NotificationIii]="\u6682\u65e0\u79c1\u4fe1",r)},oUHe:function(e,t,n){"use strict";n.d(t,"a",(function(){return x})),n.d(t,"b",(function(){return _}));var r=n("D57K"),i=n("BQ33"),a=n.n(i),o=n("5MVY"),s=n.n(o),c=n("dwj7"),u=n("AouM"),l=n("Jg5f"),m=n("a5QR"),d=n("5Nzd"),p=n("8Fqk"),f=n("HnWI"),g=n("Cc9O"),h=n("0cIN"),y=n("JpoA"),b=n("pN2L"),v=n("W/Ou"),S=n("4HYP"),T=n("IMYO"),M=n("eb+u"),C=n("U3QC"),k=n("fa4O"),A=n("l8fx");var I=function(e){return Object(p.a)((function(){return new f.a((function(t){var n=new AbortController;return function(e,t,n){var r,i=null!==(r=document.timeline.currentTime)&&void 0!==r?r:performance.now();function a(e){t.aborted||(n(e),o(e))}function o(t){var n=t-i,r=Math.round(n/e)*e,o=i+r+e-performance.now();setTimeout((function(){return requestAnimationFrame(a)}),o)}o(i)}(e,n.signal,(function(e){return t.next(e)})),function(){n.abort()}}))}))},P=function(){function e(e){var t=this,n=void 0===e?{}:e,i=n.tickTime,a=void 0===i?1e3:i,o=n.checkServerInterval,s=void 0===o?1e4:o;this._current=null,this._current$=Object(p.a)((function(){var e=d.b.getInstance(A.a),n=I(t._checkServerInterval).pipe(Object(v.a)(void 0)).pipe(Object(u.a)((function(){return Object(g.a)(Object(h.a)(t._tickTime/2).pipe(Object(S.b)((function(){return Object(y.a)(null)}))),e.get("/timestamp/")).pipe(Object(l.a)((function(e){return 1e3*e.timestamp})),Object(T.a)((function(){return null===t._current?Object(b.a)(Date.now()):Object(b.a)(t._current+t._tickTime)})),Object(S.b)((function(e){var n,r=null!==(n=document.timeline.currentTime)&&void 0!==n?n:performance.now();return I(t._tickTime).pipe(Object(l.a)((function(t){return e+t-r})),Object(v.a)(e))})))})));return I(t._tickTime).pipe(Object(l.a)((function(){return Date.now()}))).pipe(Object(M.a)(n),Object(l.a)((function(e){var n=Object(r.__read)(e,2),i=n[0],a=n[1];return t._isLocalDateValid(i,a)?i:a})),Object(v.a)(Date.now()),Object(C.a)((function(e){return t._current=e})))})),this._isLocalDateValid=function(e,n){return Math.abs(e-n)<=t._tickTime+15e3},this._tickTime=a,this._checkServerInterval=s}return Object.defineProperty(e.prototype,"current$",{get:function(){return this._current$},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sharedCurrent$",{get:function(){return this._current$.pipe(Object(k.a)())},enumerable:!1,configurable:!0}),e}();function x(e){if(e<=0)return{days:0,hours:0,minutes:0,seconds:0,remainingMs:0};var t=a.a.duration(e,"milliseconds");return{days:Math.floor(t.asDays()),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),remainingMs:e}}a.a.extend(s.a);var O=(new P).sharedCurrent$;function _(e){return Object(c.a)((function(e,t){return t.pipe(Object(u.a)((function(e){var t=Object(r.__read)(e,1)[0];return O.pipe(Object(l.a)((function(e){return t-e})),Object(m.a)((function(e){return e>0})),Object(l.a)((function(e){return[x(e),Math.floor(e/1e3)<=0]})))})))}),[x(e-Date.now()),!(e>Date.now())],[e])}},qIKI:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u}));var r,i=n("D57K"),a=n("HnWI");!function(e){e.Ok="ok",e.Err="error",e.Tle="timeout"}(r||(r={}));var o=function(e,t,n){return n?[e,t,n].join("/"):[e,t].join("/")},s=function(e){return e.split("/")},c=function(e,t,n){var r=Object(i.__read)(s(n),3),o=r[0],c=r[1],u=r[2],l=u?{token:u}:{};return e.then((function(e){null===e||void 0===e||e.port.postMessage({channel:o,event:c,params:l})})),{msg$:new a.a((function(e){t.subscribe((function(t){t.data.key===o+"/"+c+"/msg"&&e.next(t.data.payload)}))})),roomStatus$:new a.a((function(e){t.subscribe((function(t){t.data.key===o+"/"+c+"/status"&&e.next(t.data.payload.status)}))}))}},u=function(e,t){var n,o,c=Object(i.__read)(s(t),3),u=c[0],l=c[1],m=c[2],d=m?{token:m}:{},p=e.channel(u,d),f=p.join(),g=new a.a((function(e){f.receive(r.Ok,(function(){e.next(r.Ok)})).receive(r.Err,(function(){e.next(r.Err)})),p.onError((function(t){e.error(t)}))}));return{msg$:(n=p,o=l,new a.a((function(e){return n.on(o,(function(t){e.next(t)})),n.onError((function(t){return e.error(t)})),function(){return n.leave()}}))),roomStatus$:g}}},rWjZ:function(e,t,n){"use strict";e.exports=n("LkX/")},rk9S:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var r=n("D57K"),i=n("q7Y+"),a=new Map,o=function(e){!function(e){var t=e.data?e.data:{},n=new XMLHttpRequest;new Promise((function(){n.open("POST","https://analysis.leetcode.cn/i/event",!0),n.withCredentials=!0,n.setRequestHeader("x-timezone",Object(i.d)()),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(t))}))}({data:Object(r.__assign)(Object(r.__assign)({},e),{referer:document.referrer,href:window.location.href})})},s=function(){return function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(10*Math.random());return Number(t)}(6)},c=function(e,t){void 0===a.get(e)&&(o({ename:10,tid:t}),a.set(e,!0))}},s4FW:function(e,t,n){"use strict";var r=n("LMF0"),i=n.n(r);n.d(t,"a",(function(){return i.a}))},sH56:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t){return void 0===t&&(t=99),e>t?t+"+":e}},sQGw:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return re}));var r,i,a,o,s,c,u=n("D57K"),l=n("jg1C"),m=n("bmxy"),d=n("K/af"),p=n("ERkP"),f=n("wR8M"),g=n("SrEh"),h=n("+dJ8"),y=n("34li"),b=n("POSc"),v=n("UsLb"),S=n("Ab25"),T=n("Klpt"),M=n("TMWK"),C=n("fgAA"),k=n("pqRN"),A=n("7a+J"),I=n("6LfN"),P=Object(M.a)("div",{target:"e1fx84cm0"})(((r={flex:1,overflowX:"hidden",overflowY:"auto",overscrollBehavior:"contain",background:C.b.White(),boxShadow:"0 1px 8px "+C.b.fixed.FillQuaternary(),padding:"10px 0"})[C.c]={background:C.b.Layer2()},r),"label:NotificationScrollContainer;"),x=Object(M.a)("div",{target:"e1fx84cm1"})(A.a.level4,Object(k.g)(!0),((i={display:"flex",flexDirection:"column",width:"480px",height:"480px",borderRadius:"8px",overflow:"hidden",WebkitFontSmoothing:"antialiased",background:C.a.grey(1)})[C.c]={background:C.b.Layer1()},i),"label:NotificationMenuContainer;"),O=(I.a.level2((function(e){return{borderTop:"1px solid "+e}})),function(e){return e.parentNode}),_=Object(p.memo)((function(e){return Object(l.jsx)(T.a,Object(u.__assign)({overlayStyle:{zIndex:0},getPopupContainer:O,trigger:["click"],align:{points:["tr","br"],offset:[42,12]},onVisibleChange:e.onVisibleChange,visible:e.visible,overlay:Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(x,{children:e.overlay},void 0)},void 0)},{children:e.children}),void 0)})),w=n("8JP3"),E=n("Pigy"),j=n("l1SX"),R=n("np1P"),N=n("2B9F"),L=n("zCf4"),D=n("YnR9"),B=n("oYRR"),F=n("eeJw"),U=n("nXSc"),G=n("EKTE"),H=n("5Wx+"),W=function(e){return function(t){return t.isActive?e:void 0}},z=Object(M.a)("div",{target:"e18hzs7v0"})({display:"flex",height:"45px",fontSize:"16px"},"label:TabsContainer;"),q=Object(M.a)("div",{target:"e18hzs7v1"})({width:"95px",position:"relative",display:"flex",alignItems:"center",justifyContent:"center",color:C.b.LabelQuaternary()},W(((a={backgroundColor:C.b.White()})[C.c]={backgroundColor:C.b.Layer2()},a.borderBottomLeftRadius="8px",a.borderBottomRightRadius="8px",a.boxShadow="0 4px 8px "+C.b.fixed.FillQuaternary(),a.color=C.b.LabelSecondary(),a["&::after"]=((o={content:'""',clipPath:'path("M0,0 16,0 A 16,16,0,0,0,0,16 Z")',position:"absolute",left:"100%",top:0,width:"16px",height:"16px",display:"block",background:C.b.White()})[C.c]={backgroundColor:C.b.Layer2()},o),a)),"label:NotificationTab;"),V=Object(M.a)(q,{target:"e18hzs7v2"})(W({"&::before":(s={content:'""',position:"absolute",left:"-16px",top:0,clipPath:'path("M 0 0 L 16 0 A 16 16 0 0 0 0 16 Z")',width:"16px",transform:"rotateY(180deg)",height:"16px",display:"block",background:C.b.White()},s[C.c]={backgroundColor:C.b.Layer2()},s)}),"label:MiddleTab;"),K=(W({"&::before":(c={content:'""',position:"absolute",left:"-16px",top:0,clipPath:'path("M 0 0 L 16 0 A 16 16 0 0 0 0 16 Z")',width:"16px",transform:"rotateY(180deg)",height:"16px",display:"block",background:C.b.White()},c[C.c]={backgroundColor:C.b.Layer2()},c)}),Object(M.a)("div",{target:"e18hzs7v4"})({padding:"5px 10px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"15px",transition:"all 0.2s ease-in",fontSize:"12px",cursor:"pointer","&:hover":{backgroundColor:C.b.FillTertiary()}},"label:TabTitle;")),J=Object(M.a)("div",{target:"e18hzs7v5"})({flexGrow:1,padding:"20px",display:"flex",justifyContent:"flex-end",alignItems:"center"},"label:More;"),Q=Object(M.a)(H.a,{target:"e18hzs7v6"})({color:C.b.LabelTertiary(),cursor:"pointer","&:hover":{color:C.b.LabelSecondary()}},"label:StyledIconMoreHorizontal;"),Y=Object(M.a)("span",{target:"e18hzs7v7"})({marginLeft:"8px"},"label:Count;"),X=Object(p.memo)((function(e){var t=e.currentTab,n=e.onTabChange,r=e.unreadCounts,i=e.toggleOpen,a=Object(L.i)(),o=(Object(G.a)().data,(Object(h.b)().data||{}).unread,Object(p.useCallback)((function(e){n(e)}),[n])),s=Object(p.useCallback)((function(e){return function(){e!==t&&o(e)}}),[o,t]),c=Object(p.useCallback)((function(e){e.stopPropagation(),i(!1),a.push(D.a.main.paths.notifications.home()+"?tab="+b.e[t])}),[t,a,i]),m=r.NOTIFICATION_I>99?"99+":r.NOTIFICATION_I,d=r.NOTIFICATION_II>99?"99+":r.NOTIFICATION_II;return Object(l.jsxs)(z,{children:[Object(l.jsx)(q,Object(u.__assign)({isActive:t===y.Hb.NotificationI,onClick:s(y.Hb.NotificationI)},{children:Object(l.jsxs)(K,{children:[Object(l.jsx)(B.a,{size:20},void 0),!!m&&Object(l.jsx)(Y,{children:m},void 0)]},void 0)}),void 0),Object(l.jsx)(V,Object(u.__assign)({isActive:t===y.Hb.NotificationIi,onClick:s(y.Hb.NotificationIi)},{children:Object(l.jsxs)(K,{children:[Object(l.jsx)(F.a,{size:20},void 0),!!d&&Object(l.jsx)(Y,{children:d},void 0)]},void 0)}),void 0),Object(l.jsx)(J,{children:Object(l.jsx)(U.a,Object(u.__assign)({placement:"top-start",content:"\u663e\u793a\u5168\u90e8"},{children:Object(l.jsx)(Q,{size:20,onClick:c},void 0)}),void 0)},void 0)]},void 0)})),Z=n("yUVf"),$=n("oHMv"),ee=n("fe7r"),te=Object(p.memo)((function(e){var t,n=e.fetchMore,r=e.onTabChange,i=e.toggleOpen,a=Object(u.__read)(Object(d.a)(v.a,{scope:v.b.Navbar}),2),o=a[0],s=o.activityInfo,c=o.isLoading,m=o.filter,f=o.subscriptionInfo,g=a[1],h=g.markAsRead,y=g.unsubscribe,T=Object(u.__read)(Object(d.a)(S.a),1)[0].unreadCounts,M=null!==(t=null===s||void 0===s?void 0:s.activities)&&void 0!==t?t:[],C=(null===s||void 0===s?void 0:s.hasMore)||!1,k=null===s||void 0===s?void 0:s.nextId,A=Object(p.useCallback)((function(e){e.stopPropagation();var t=e.currentTarget;t.scrollTop>t.scrollHeight-t.clientHeight-100&&C&&!c&&n({limit:b.c,inboxType:m,startId:k})}),[C,n,m,k,c]);return Object(p.useEffect)((function(){m!==R.c.NotificationIii&&n({limit:b.c,inboxType:m})}),[n,m]),Object(l.jsxs)(w.a,{children:[Object(l.jsxs)(P,Object(u.__assign)({onScroll:A},{children:[m===R.c.NotificationIii?Object(l.jsx)(ee.a,{},void 0):Object(l.jsxs)(l.Fragment,{children:[M.map((function(e){return Object(l.jsx)(N.a,{activity:e,filter:m,markAsRead:h,unsubscribe:y,subscriptionInfo:f},e.id)})),!c&&!M.length&&Object(l.jsx)(Z.a,{children:Object(l.jsx)(E.a,{type:"img",description:$.a[m]},void 0)},void 0)]},void 0),c&&Object(l.jsx)(j.a,{},void 0)]}),void 0),Object(l.jsx)(X,{currentTab:m,onTabChange:r,unreadCounts:T,toggleOpen:i},void 0)]},void 0)})),ne=function(){var e=Object(u.__read)(Object(d.a)(v.a,{scope:v.b.Navbar}),2),t=e[0].filter,n=e[1],r=Object(u.__read)(Object(d.a)(S.a),2),i=r[0].unreadCounts,a=r[1].fetchUnreadCount,o=Object(u.__read)(Object(p.useState)(!1),2),s=o[0],c=o[1],f=(Object(h.b)().data||{}).unread,g=void 0===f?0:f,T=Object(p.useCallback)((function(e){e?(c(!0),t!==y.Hb.NotificationIii&&(n.clearActivityInfo(),a(),n.fetchNotifications({limit:b.c,inboxType:t}))):c(!1)}),[t,n,a]);Object(p.useEffect)((function(){var e;s&&(null===(e=b.g[t])||void 0===e||e.call(b.g))}),[s,t]),Object(p.useEffect)((function(){n.listenToBroadcast(),/\/contest\/season\//.test(window.location.pathname)||(a(),n.listenToNotificationInWs())}),[n,a]);var M=Object(p.useCallback)((function(e){n.updateFilter(e),e!==y.Hb.NotificationIii&&a()}),[n,a]),C=i.NOTIFICATION_II+i.NOTIFICATION_I+(g||0);return Object(l.jsx)(_,Object(u.__assign)({visible:s,overlay:Object(l.jsx)(te,{fetchMore:n.fetchNotifications,onTabChange:M,visible:s,toggleOpen:c},void 0),markAllRead:n.markAllRead,onVisibleChange:T},{children:Object(l.jsx)(m.f,{hasUnread:C>0},void 0)}),void 0)};function re(){return Object(l.jsx)(f.a,Object(u.__assign)({client:g.b},{children:Object(l.jsx)(ne,{},void 0)}),void 0)}},"t+Dw":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("D57K"),i=n("ERkP");function a(e,t){void 0===t&&(t=1e3);var n=Object(i.useRef)(e),a=Object(r.__read)(Object(i.useState)(null),2),o=a[0],s=a[1],c=Object(i.useCallback)((function(){var e;null===(e=n.current)||void 0===e||e.call(n)}),[]),u=Object(i.useCallback)((function(){var e=window.setInterval(c,t);s(e)}),[s,t,c]),l=Object(i.useCallback)((function(){o&&window.clearInterval(o)}),[o]);return Object(i.useEffect)((function(){return l}),[l]),{start:u,cancel:l}}},"u/u7":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("lXyA"),a=n.n(i),o=n("ildc"),s=a()((function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){return Object(r.__generator)(this,(function(e){return window.LeetCodeJsBridge?[2,window.LeetCodeJsBridge]:[2,new Promise((function(e){document.addEventListener("LeetCodeJsBridgeReady",(function(){e(window.LeetCodeJsBridge)}),!1)}))]}))}))}));function c(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return Object(o.o)()?(console.info("init js bridge..."),[4,s()]):[2,null];case 1:return e=t.sent(),[2,new Promise((function(t){e.callHandler("getAccessToken",{},(function(e){var n=e.token;console.info("\u83b7\u53d6\u5230 token "+n),t(n)}))}))]}}))}))}},"uOE+":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return a}));var r=320,i=468,a=50},uXcj:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return d}));var r=n("TMWK"),i=n("fgAA"),a={display:"flex",alignItems:"center"},o=Object(r.a)("div",{target:"e141vlsn0"})((function(e){var t,n=e.canCloseNotify;return{display:"flex",paddingRight:"20px",color:i.b.LabelPrimary(),position:"relative","&::before":{content:'""',position:"absolute",left:"10px",right:"10px",top:"-1px",bottom:0,borderRadius:"8px",background:i.b.FillTertiary(),opacity:0,transition:"opacity .2s ease-in"},"&:hover":{"&::before":(t={opacity:1,borderTop:"1px solid "+i.a.grey(0),transition:"opacity .2s ease-in-out"},t[i.c]={borderTop:"1px solid "+i.b.Layer2()},t),".notification-info":{borderColor:"transparent"},".notification-date":{display:n?"none":"flex"},".notification-off":{display:n?"flex":"none"}}}}),(function(e){return e.hasLink?{cursor:"pointer"}:void 0}),"label:NotificationItemContainer;"),s=Object(r.a)("div",{target:"e141vlsn1"})({display:"flex",flex:"0 0 64px",justifyContent:"center",position:"relative",paddingTop:"23px"},"label:IconWrapper;"),c=Object(r.a)("div",{target:"e141vlsn2"})({flexGrow:1,display:"flex",boxSizing:"border-box",borderBottom:"1px solid "+i.b.DividerSecondary(),padding:"15px 0",position:"relative",transition:"all .2s ease-in"},"label:NotificationInfo;"),u=Object(r.a)("div",{target:"e141vlsn3"})(a,{flexGrow:1,minHeight:"40px",lineHeight:"20px"},"label:NotificationDetail;"),l=Object(r.a)("div",{target:"e141vlsn4"})(a,{flex:"0 0 90px",display:"none",justifyContent:"flex-end",color:i.a.grey(6),cursor:"pointer"},"label:NotificationOff;"),m=Object(r.a)("div",{target:"e141vlsn5"})(a,{lineHeight:"20px",flex:"0 0 90px",justifyContent:"flex-end",color:i.a.grey(6)},(function(e){return e.isRead?null:{"&::after":{content:'""',width:"10px",height:"10px",borderRadius:"5px",display:"inline-block",background:i.b.BlueStandard(),marginLeft:"8px"}}}),"label:NotificationDate;"),d=Object(r.a)("div",{target:"e141vlsn6"})({padding:"15px 20px"},"label:ModalBody;")},ve6X:function(e,t,n){"use strict";var r=n("7K/1");n.d(t,"a",(function(){return r.a}))},"x/2G":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var r=13,i=27},yTnY:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("E1ni"),i=n.n(r);function a(){i.a.install({onUpdateReady:function(){i.a.applyUpdate()}})}},yUVf:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n("TMWK"),i=n("fgAA"),a=n("dxiE"),o=Object(r.a)("div",{target:"ethih2k0"})({padding:"10px 0",minHeight:"470px"},"label:Rows;"),s=Object(r.a)("div",{target:"ethih2k1"})({width:"100%",padding:"15px 20px",backgroundColor:"transparent",borderBottom:"1px solid "+i.a.grey(2),display:"flex",alignItems:"center",justifyContent:"space-between",flexShrink:0},"label:Row;"),c=(Object(a.a)(),Object(r.a)("div",{target:"ethih2k3"})({width:"100%",height:"400px"},"label:PlaceholderWrapper;"))},ycgn:function(e,t,n){"use strict";n.d(t,"c",(function(){return r.a})),n.d(t,"a",(function(){return i.a})),n.d(t,"g",(function(){return T})),n.d(t,"u",(function(){return M.h})),n.d(t,"v",(function(){return M.i})),n.d(t,"s",(function(){return M.f})),n.d(t,"t",(function(){return M.g})),n.d(t,"o",(function(){return M.d})),n.d(t,"p",(function(){return M.e})),n.d(t,"k",(function(){return C.e})),n.d(t,"e",(function(){return C.b})),n.d(t,"h",(function(){return C.d})),n.d(t,"l",(function(){return C.f})),n.d(t,"f",(function(){return C.c})),n.d(t,"n",(function(){return C.h})),n.d(t,"m",(function(){return C.g})),n.d(t,"d",(function(){return C.a})),n.d(t,"r",(function(){return C.j})),n.d(t,"q",(function(){return C.i})),n.d(t,"i",(function(){return b.a})),n.d(t,"b",(function(){return k.a})),n.d(t,"j",(function(){return k.b}));var r=n("7ORt"),i=n("B07F"),a=n("D57K"),o=n("5/dZ"),s=n("HC8e"),c=n("qrFu"),u=n("3U3H"),l=n("W1KW"),m=n("Srm7"),d=n.n(m),p=n("3dHC"),f=n.n(p),g=n("JL1g"),h=n("u/u7"),y=n("sTfV"),b=n("9R3s"),v=new l.a({uri:"/graphql/",credentials:"same-origin",fetch:fetch}),S=new s.a({dataIdFromObject:b.a,fragmentMatcher:new s.b({introspectionQueryResultData:g.a})});window.__APOLLO_STATE__&&S.restore(window.__APOLLO_STATE__);var T={provide:new o.c("AsyncRawApolloClientProvider"),useFactory:function(){return Object(a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.race([Object(h.a)(),new Promise((function(e){return setTimeout((function(){return e(null)}),5e3)}))])];case 1:return(e=r.sent())&&d.a.set(y.a,e),t=new u.a((function(t,n){return t.setContext((function(t){var n=t.headers;return{headers:Object(a.__assign)(Object(a.__assign)({},e?{Authorization:"Bearer "+e}:{}),n)}})),n?n(t):null})),n={link:u.a.from(f()([e&&t,v])),cache:S,queryDeduplication:!1},[2,new c.a(n)]}}))}))}},M=n("Y7lc"),C=n("gd5h"),k=n("MAWP")},yuRt:function(e,t,n){e.exports=n.p+"0.204a0855.worker.js"},zELB:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("D57K"),i=n("jg1C"),a=n("ERkP"),o=n.n(a),s=n("GG6d"),c=o.a.forwardRef((function(e,t){return Object(i.jsx)(s.a,Object(r.__assign)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},e,{children:Object(i.jsx)("path",{fillRule:"evenodd",d:"M8.5 4.587v7.182c0 .575.184 1.463.707 2.18.487.665 1.312 1.251 2.793 1.251 1.48 0 2.306-.586 2.793-1.252.523-.716.707-1.604.707-2.179V4.587a10.732 10.732 0 00-7 0zm-1.557 9.371A5.957 5.957 0 016.5 11.77V8.6c-.536-.116-1.12-.158-1.587-.05-.312.073-.514.198-.644.358C4.14 9.064 4 9.357 4 9.923c0 1.399.848 2.694 2.361 3.687.186.122.38.238.582.348zM6.5 6.566V3.923a1 1 0 01.544-.89C7.779 2.656 9.674 2 12 2c2.325 0 4.221.656 4.956 1.033a1 1 0 01.544.89v2.643c.647-.101 1.364-.122 2.038.035.626.145 1.267.455 1.746 1.045.482.594.716 1.367.716 2.277 0 2.294-1.402 4.137-3.264 5.36-1.609 1.055-3.649 1.716-5.736 1.878V20h4.4a1 1 0 110 2H6.6a1 1 0 110-2H11v-2.839c-2.087-.162-4.127-.823-5.736-1.879C3.402 14.06 2 12.217 2 9.923c0-.91.234-1.683.716-2.277.48-.59 1.12-.9 1.746-1.045.674-.157 1.391-.136 2.038-.035zm11 2.033c.536-.116 1.12-.158 1.587-.05.312.073.515.198.645.358.127.157.268.45.268 1.016 0 1.399-.848 2.694-2.361 3.687-.186.122-.38.238-.582.348a5.956 5.956 0 00.443-2.189V8.6z",clipRule:"evenodd"},void 0)}),void 0)}))},zpwM:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="All Problems"},zqQ4:function(e,t,n){"use strict";var r=n("7+T9");n.d(t,"a",(function(){return r.a}))},zt93:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("ERkP"),i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(r.useCallback)((function(t){return e.forEach((function(e){if(e)return"function"===typeof e?e(t):void(e.current=t)}))}),e)}}}]);